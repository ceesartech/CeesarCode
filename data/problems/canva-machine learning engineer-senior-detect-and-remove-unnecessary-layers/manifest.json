{
  "id": "canva-machine learning engineer-senior-detect-and-remove-unnecessary-layers",
  "title": "Detect and Remove Unnecessary Layers in Canva Designs",
  "statement": "Canva designs can sometimes contain unnecessary or redundant layers that add complexity without improving the visual appeal. These layers can negatively impact performance (rendering time, file size).  Design an algorithm and corresponding system that can automatically detect and remove unnecessary layers from a Canva design.\n\nConsider the following criteria for a layer to be considered 'unnecessary':\n\n*   **Opacity:** A layer with 0% opacity.\n*   **Visibility:** A layer that is entirely outside the visible canvas area.\n*   **Redundancy:** A layer that is completely covered by another layer with identical visual properties (color, shape, size, etc.).  Consider that the covering layer might have a slightly different Z-index, but still is placed on top in rendering order.\n*   **Duplicate Layers:** Layers that have identical content and placement, excluding cases where intentional duplication creates visual effects (e.g., shadows).\n\nInput: A JSON representation of a Canva design containing a list of layers with attributes like position, size, color, opacity, z-index, and content (shape, text, image).\nOutput: A list of layer IDs that should be removed from the design.\n\n**Example Input:**\n\n```json\n{\n  \"layers\": [\n    {\"id\": \"layer1\", \"opacity\": 1.0, \"x\": 10, \"y\": 10, \"width\": 100, \"height\": 50, \"color\": \"#FF0000\", \"z_index\": 1, \"content\": {\"type\": \"rectangle\"}},\n    {\"id\": \"layer2\", \"opacity\": 0.0, \"x\": 20, \"y\": 20, \"width\": 50, \"height\": 25, \"color\": \"#00FF00\", \"z_index\": 2, \"content\": {\"type\": \"rectangle\"}},\n    {\"id\": \"layer3\", \"opacity\": 1.0, \"x\": 10, \"y\": 10, \"width\": 100, \"height\": 50, \"color\": \"#FF0000\", \"z_index\": 3, \"content\": {\"type\": \"rectangle\"}}\n  ]\n}\n```\n\n**Example Output:**\n\n`[\"layer2\", \"layer3\"]` (layer2 has 0 opacity, layer3 is redundant to layer1)\n",
  "languages": [
    "python",
    "java",
    "cpp"
  ],
  "stub": {
    "cpp": "#include \u003ciostream\u003e\n#include \u003cvector\u003e\n#include \u003cstring\u003e\n// Assume a JSON parsing library is available (e.g., rapidjson)\n\nclass Solution {\npublic:\n    std::vector\u003cstd::string\u003e detectUnnecessaryLayers(/* JSON representation of the design */) {\n        // Your code here\n        // Input: JSON data representing the Canva design\n        // Output: List of layer IDs to remove (strings)\n        return {};\n    }\n};",
    "java": "import org.json.JSONObject;\nimport java.util.List;\nimport java.util.ArrayList;\n\nclass Solution {\n    public List\u003cString\u003e detectUnnecessaryLayers(JSONObject designJson) {\n        // Your code here\n        // Input: designJson (JSONObject representing the Canva design)\n        // Output: List of layer IDs to remove (Strings)\n        return new ArrayList\u003c\u003e();\n    }\n}",
    "python": "def detect_unnecessary_layers(design_json):\n    \"\"\"Detects and returns a list of layer IDs to remove.\"\"\"\n    # Your code here\n    # Input: design_json (JSON representing the Canva design)\n    # Output: List of layer IDs to remove (strings)\n    return []"
  }
}