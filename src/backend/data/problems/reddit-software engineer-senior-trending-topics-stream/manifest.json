{
  "ID": "reddit-software engineer-senior-trending-topics-stream",
  "Title": "Trending Topics from a Stream",
  "Statement": "You are given a stream of events, where each event represents a new post being created in a specific subreddit. Design and implement a `TrendingTopics` class that can report the top `K` most active subreddits over the last `T` seconds. A subreddit's activity is defined by the number of posts created in it.\n\nThe `TrendingTopics` class should have two methods:\n*   `__init__(self, time_window_seconds: int)`: Initializes the system with a given time window `T`.\n*   `post_event(self, timestamp: int, subreddit_id: str)`: Records a new post event.\n*   `get_top_k_trending(self, current_timestamp: int, k: int) -\u003e List[str]`: Returns a list of the top `K` subreddit IDs, ordered by their activity in descending order, within the last `T` seconds (`current_timestamp - T` to `current_timestamp`).\n\n**Constraints:**\n*   `time_window_seconds` (T) can be large (e.g., 5 minutes, 1 hour).\n*   The number of unique `subreddit_id`s can be very large.\n*   The stream of `post_event` calls can be very high volume.\n*   `get_top_k_trending` should be efficient (e.g., better than O(N) where N is all historical posts).\n\n**Example:**\n```\ntrending = TrendingTopics(time_window_seconds=300) # 5-minute window\n\ntrending.post_event(timestamp=0, subreddit_id=\"cats\")\ntrending.post_event(timestamp=10, subreddit_id=\"dogs\")\ntrending.post_event(timestamp=20, subreddit_id=\"cats\")\ntrending.post_event(timestamp=30, subreddit_id=\"cats\")\n\ntrending.get_top_k_trending(current_timestamp=30, k=1) # Window: [30-300, 30] = [-270, 30]\n# cats: 3, dogs: 1\n# Output: [\"cats\"]\n\ntrending.post_event(timestamp=310, subreddit_id=\"tech\")\n\ntrending.get_top_k_trending(current_timestamp=310, k=2) # Window: [310-300, 310] = [10, 310]\n# Events in window: cats (t=20, 30), dogs (t=10), tech (t=310)\n# counts: cats: 2, dogs: 1, tech: 1\n# Output: [\"cats\", \"dogs\"] (or [\"cats\", \"tech\"] if tech came before dogs in sort stability)\n```",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cvector\u003e\n#include \u003cunordered_map\u003e\n#include \u003cdeque\u003e\n#include \u003cqueue\u003e\n#include \u003calgorithm\u003e\n\nclass TrendingTopics {\npublic:\n    TrendingTopics(int time_window_seconds) {\n        // Your code here\n    }\n\n    void postEvent(long long timestamp, const std::string\u0026 subreddit_id) {\n        // Your code here\n    }\n\n    std::vector\u003cstd::string\u003e getTopKTrending(long long current_timestamp, int k) {\n        // Your code here\n        return {};\n    }\n};",
    "go": "package main\n\nimport (\n\t\"container/heap\"\n\t\"sync\"\n\t\"time\"\n)\n\ntype TrendingTopics struct {\n    // Your fields here\n}\n\nfunc NewTrendingTopics(timeWindowSeconds int) *TrendingTopics {\n    // Your code here\n    return \u0026TrendingTopics{}\n}\n\nfunc (tt *TrendingTopics) PostEvent(timestamp int64, subredditId string) {\n    // Your code here\n}\n\nfunc (tt *TrendingTopics) GetTopKTrending(currentTimestamp int64, k int) []string {\n    // Your code here\n    return []string{}\n}",
    "java": "import java.util.*;\n\nclass TrendingTopics {\n    private int timeWindowSeconds;\n    // Your data structures here\n\n    public TrendingTopics(int timeWindowSeconds) {\n        this.timeWindowSeconds = timeWindowSeconds;\n        // Initialize data structures\n    }\n\n    public void postEvent(long timestamp, String subredditId) {\n        // Your code here\n    }\n\n    public List\u003cString\u003e getTopKTrending(long currentTimestamp, int k) {\n        // Your code here\n        return new ArrayList\u003c\u003e();\n    }\n}",
    "javascript": "class TrendingTopics {\n    constructor(timeWindowSeconds) {\n        // Your code here\n    }\n\n    postEvent(timestamp, subredditId) {\n        // Your code here\n    }\n\n    getTopKTrending(currentTimestamp, k) {\n        // Your code here\n        return [];\n    }\n}",
    "python": "import collections\nimport heapq\n\nclass TrendingTopics:\n    def __init__(self, time_window_seconds: int):\n        # Your code here\n        pass\n\n    def post_event(self, timestamp: int, subreddit_id: str):\n        # Your code here\n        pass\n\n    def get_top_k_trending(self, current_timestamp: int, k: int) -\u003e list:\n        # Your code here\n        pass",
    "rust": "use std::collections::{HashMap, VecDeque};\nuse std::time::Instant;\n\npub struct TrendingTopics {\n    // Your fields here\n}\n\nimpl TrendingTopics {\n    pub fn new(time_window_seconds: i64) -\u003e Self {\n        // Your code here\n        TrendingTopics {}\n    }\n\n    pub fn post_event(\u0026mut self, timestamp: i64, subreddit_id: String) {\n        // Your code here\n    }\n\n    pub fn get_top_k_trending(\u0026mut self, current_timestamp: i64, k: usize) -\u003e Vec\u003cString\u003e {\n        // Your code here\n        vec![]\n    }\n}"
  },
  "Type": "coding"
}