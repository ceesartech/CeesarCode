{
  "ID": "reddit-software engineer-senior-url-shortening-service",
  "Title": "Reddit URL Shortening Service",
  "Statement": "Reddit posts and comments can have very long URLs. Implement a simplified URL shortening service. Your service should provide two methods:\n1.  `shorten_url(long_url: str) -\u003e str`: Given a `long_url` (e.g., `https://www.reddit.com/r/programming/comments/abcdef123/long_post_title_here_with_many_words/`), it generates and returns a unique, short URL (e.g., `https://redd.it/xyz`). If the `long_url` has already been shortened, return its existing short URL.\n2.  `retrieve_long_url(short_url: str) -\u003e str`: Given a `short_url`, return its original `long_url`. If the `short_url` is not found, return an empty string.\n\nThe generated short URLs should be concise (e.g., 6-8 alphanumeric characters after the domain). Focus on ensuring uniqueness and managing the mapping efficiently. You don't need to implement the actual `redd.it` domain or network redirection, just the mapping logic. The short codes should be composed of base62 characters (a-z, A-Z, 0-9) and have a fixed length (e.g., 7 characters).\n\nExample:\n`shortener = URLShortener()`\n`short_url1 = shortener.shorten_url('https://www.reddit.com/r/aww/comments/123abc/cute_cat_pic/')` (e.g. `redd.it/AbCDeF1`)\n`short_url2 = shortener.shorten_url('https://www.reddit.com/r/programming/comments/xyz789/new_language_features/')` (e.g. `redd.it/GhIjKl2`)\n`shortener.retrieve_long_url(short_url1)` should return `'https://www.reddit.com/r/aww/comments/123abc/cute_cat_pic/'`\n`shortener.retrieve_long_url('https://redd.it/nonexist')` should return `''`\n`shortener.shorten_url('https://www.reddit.com/r/aww/comments/123abc/cute_cat_pic/')` should return `short_url1` (same as first call)\n\nConstraints:\n- Number of unique URLs to shorten can be very large (millions).\n- The generated short code length should be constant (e.g., 7 characters).",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cunordered_map\u003e\n#include \u003crandom\u003e\n#include \u003cchrono\u003e\n\nclass URLShortener {\nprivate:\n    std::string generateShortCode(int length = 7) {\n        const std::string chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        std::random_device rd;\n        std::mt19937 generator(rd());\n        std::uniform_int_distribution\u003c\u003e distribution(0, chars.length() - 1);\n\n        std::string shortCode;\n        shortCode.reserve(length);\n        for (int i = 0; i \u003c length; ++i) {\n            shortCode += chars[distribution(generator)];\n        }\n        return shortCode;\n    }\n\npublic:\n    URLShortener() {\n        // Your code here\n    }\n\n    std::string shortenUrl(const std::string\u0026 longUrl) {\n        // Your code here\n        return \"\";\n    }\n\n    std::string retrieveLongUrl(const std::string\u0026 shortUrl) {\n        // Your code here\n        return \"\";\n    }\n};\n",
    "go": "package main\n\nimport (\n\t\"math/rand\"\n\t\"time\"\n)\n\nconst ( \n\talphanumeric = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\n\tshortCodeLength = 7\n)\n\ntype URLShortener struct {\n\t// Your code here\n}\n\nfunc NewURLShortener() *URLShortener {\n\treturn \u0026URLShortener{\n\t\t// Your code here\n\t}\n}\n\nfunc (us *URLShortener) generateShortCode() string {\n\trand.Seed(time.Now().UnixNano())\n\tb := make([]byte, shortCodeLength)\n\tfor i := range b {\n\t\tb[i] = alphanumeric[rand.Intn(len(alphanumeric))]\n\t}\n\treturn string(b)\n}\n\nfunc (us *URLShortener) ShortenUrl(longUrl string) string {\n\t// Your code here\n\treturn \"\"\n}\n\nfunc (us *URLShortener) RetrieveLongUrl(shortUrl string) string {\n\t// Your code here\n\treturn \"\"\n}",
    "java": "import java.util.concurrent.ConcurrentHashMap;\nimport java.security.SecureRandom;\n\nclass URLShortener {\n    private static final String ALPHANUMERIC = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    private static final int SHORT_CODE_LENGTH = 7;\n    private SecureRandom random = new SecureRandom();\n\n    public URLShortener() {\n        // Your code here\n    }\n\n    private String generateShortCode() {\n        StringBuilder sb = new StringBuilder(SHORT_CODE_LENGTH);\n        for (int i = 0; i \u003c SHORT_CODE_LENGTH; i++) {\n            sb.append(ALPHANUMERIC.charAt(random.nextInt(ALPHANUMERIC.length())));\n        }\n        return sb.toString();\n    }\n\n    public String shortenUrl(String longUrl) {\n        // Your code here\n        return \"\";\n    }\n\n    public String retrieveLongUrl(String shortUrl) {\n        // Your code here\n        return \"\";\n    }\n}",
    "javascript": "class URLShortener {\n    constructor() {\n        // Your code here\n    }\n\n    _generateShortCode(length = 7) {\n        const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n        let result = '';\n        for (let i = 0; i \u003c length; i++) {\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n\n    shortenUrl(longUrl) {\n        // Your code here\n        return \"\";\n    }\n\n    retrieveLongUrl(shortUrl) {\n        // Your code here\n        return \"\";\n    }\n}",
    "python": "import random\nimport string\n\nclass URLShortener:\n    def __init__(self):\n        # Your code here\n        pass\n\n    def _generate_short_code(self, length: int = 7) -\u003e str:\n        # Helper to generate a random short code\n        chars = string.ascii_letters + string.digits\n        return ''.join(random.choice(chars) for _ in range(length))\n\n    def shorten_url(self, long_url: str) -\u003e str:\n        # Your code here\n        return \"\"\n\n    def retrieve_long_url(self, short_url: str) -\u003e str:\n        # Your code here\n        return \"\"",
    "rust": "use std::collections::HashMap;\nuse rand::{thread_rng, Rng};\n\npub struct URLShortener {\n    // Your code here\n}\n\nimpl URLShortener {\n    pub fn new() -\u003e Self {\n        URLShortener {\n            // Your code here\n        }\n    }\n\n    fn generate_short_code(\u0026self, length: usize) -\u003e String {\n        let chars: Vec\u003cchar\u003e = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\".chars().collect();\n        let mut rng = thread_rng();\n        (0..length)\n            .map(|_| *rng.choose(\u0026chars).unwrap())\n            .collect()\n    }\n\n    pub fn shorten_url(\u0026mut self, long_url: String) -\u003e String {\n        // Your code here\n        \"\".to_string()\n    }\n\n    pub fn retrieve_long_url(\u0026self, short_url: String) -\u003e String {\n        // Your code here\n        \"\".to_string()\n    }\n}"
  },
  "Type": "coding"
}