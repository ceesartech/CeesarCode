{
  "ID": "reddit-software engineer-senior-url-shortener-core-logic",
  "Title": "URL Shortener Core Logic",
  "Statement": "Implement the core logic for a URL shortening service. You need to provide functions to shorten a long URL and retrieve the original long URL from a short URL.\n\n**Requirements:**\n*   `shorten_url(long_url: str) -\u003e str`: Given a long URL, return a unique short URL. The short URL should be composed of alphanumeric characters (e.g., `a-z`, `A-Z`, `0-9`). If the same `long_url` is passed multiple times, it should consistently return the same `short_url`.\n*   `retrieve_url(short_url: str) -\u003e str | None`: Given a short URL, return the original `long_url`. Return `None` if the `short_url` does not exist.\n\n**Constraints:**\n*   The service should handle a large number of unique long URLs.\n*   Collisions in short URL generation must be handled to ensure uniqueness.\n*   Short URLs should be relatively short (e.g., 6-8 characters).\n*   Assume storage is handled in-memory using Python dictionaries/HashMaps for this problem.\n\n**Design Hint:** Consider using a hash function on the long URL to generate an initial candidate short code. If a collision occurs (the code is already taken by a different long URL), devise a strategy to find another unique code (e.g., append a counter, try a different hash, or generate random characters until unique). Base62 encoding is a common technique for generating short, alphanumeric codes.\n\n**Example:**\n```\nshortener = URLShortener()\n\nshort_url1 = shortener.shorten_url(\"https://www.reddit.com/r/programming/comments/123456/example_post_1\")\n# Expected: short_url1 could be \"abcDEF\" (actual value will depend on implementation)\n\nshort_url2 = shortener.shorten_url(\"https://www.reddit.com/r/programming/comments/123456/example_post_1\")\n# Expected: short_url2 == short_url1 (same long URL should map to same short URL)\n\nlong_url_retrieved1 = shortener.retrieve_url(short_url1)\n# Expected: long_url_retrieved1 == \"https://www.reddit.com/r/programming/comments/123456/example_post_1\"\n\nlong_url_nonexistent = shortener.retrieve_url(\"nonExistentShortCode\")\n# Expected: long_url_nonexistent == None\n\nshort_url3 = shortener.shorten_url(\"https://www.reddit.com/r/videos/comments/789012/another_example_post\")\n# Expected: short_url3 != short_url1\n```",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cunordered_map\u003e\n#include \u003crandom\u003e\n#include \u003calgorithm\u003e\n\nclass URLShortener {\npublic:\n    URLShortener() {\n        // Your code here\n    }\n\n    std::string shortenUrl(const std::string\u0026 long_url) {\n        // Your code here\n        return \"\";\n    }\n\n    std::string retrieveUrl(const std::string\u0026 short_url) {\n        // Your code here\n        return \"\";\n    }\n};",
    "go": "package main\n\nimport (\n\t\"math/rand\"\n\t\"time\"\n)\n\ntype URLShortener struct {\n    // Your fields here\n}\n\nfunc NewURLShortener() *URLShortener {\n    // Your code here\n    return \u0026URLShortener{}\n}\n\nfunc (us *URLShortener) ShortenUrl(longUrl string) string {\n    // Your code here\n    return \"\"\n}\n\nfunc (us *URLShortener) RetrieveUrl(shortUrl string) string {\n    // Your code here\n    return \"\"\n}",
    "java": "import java.util.*;\n\nclass URLShortener {\n    // Your data structures here\n\n    public URLShortener() {\n        // Your code here\n    }\n\n    public String shortenUrl(String longUrl) {\n        // Your code here\n        return null;\n    }\n\n    public String retrieveUrl(String shortUrl) {\n        // Your code here\n        return null;\n    }\n}",
    "javascript": "class URLShortener {\n    constructor() {\n        // Your code here\n    }\n\n    shortenUrl(longUrl) {\n        // Your code here\n        return '';\n    }\n\n    retrieveUrl(shortUrl) {\n        // Your code here\n        return null;\n    }\n}",
    "python": "import random\nimport string\n\nclass URLShortener:\n    def __init__(self):\n        # Your code here\n        pass\n\n    def shorten_url(self, long_url: str) -\u003e str:\n        # Your code here\n        pass\n\n    def retrieve_url(self, short_url: str) -\u003e str | None:\n        # Your code here\n        pass",
    "rust": "use std::collections::HashMap;\nuse rand::Rng;\n\npub struct URLShortener {\n    // Your fields here\n}\n\nimpl URLShortener {\n    pub fn new() -\u003e Self {\n        // Your code here\n        URLShortener {}\n    }\n\n    pub fn shorten_url(\u0026mut self, long_url: \u0026str) -\u003e String {\n        // Your code here\n        String::new()\n    }\n\n    pub fn retrieve_url(\u0026self, short_url: \u0026str) -\u003e Option\u003cString\u003e {\n        // Your code here\n        None\n    }\n}"
  },
  "Type": "coding"
}