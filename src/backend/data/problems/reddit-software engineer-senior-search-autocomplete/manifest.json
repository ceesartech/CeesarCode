{
  "ID": "reddit-software engineer-senior-search-autocomplete",
  "Title": "Search Autocomplete for Subreddits/Users",
  "Statement": "Reddit's search bar provides autocomplete suggestions for subreddits and usernames as users type. Implement a `SearchAutocomplete` class that efficiently provides these suggestions.\n\nYour class should support:\n1.  `add_item(item_type: str, item_name: str, popularity_score: int)`: Adds a new item (e.g., a subreddit or a user) to the autocomplete index. `item_type` can be 'subreddit' or 'user'. `popularity_score` indicates its general relevance.\n2.  `get_suggestions(prefix: str, max_results: int) -\u003e list[str]`: Given a `prefix`, return a list of up to `max_results` item names that start with the `prefix`. The results should be sorted primarily by `popularity_score` (descending) and then alphabetically by `item_name` (ascending) for ties.\n\n**Constraints:**\n-   There can be millions of subreddits and users.\n-   `get_suggestions` must be very fast (low latency).\n-   The `prefix` can be any length.\n\n**Example Usage:**\n1. `autocomplete = SearchAutocomplete()`\n2. `autocomplete.add_item('subreddit', 'programming', 100)`\n3. `autocomplete.add_item('subreddit', 'ProgrammerHumor', 80)`\n4. `autocomplete.add_item('user', 'admin', 200)`\n5. `autocomplete.add_item('subreddit', 'python', 120)`\n6. `autocomplete.get_suggestions('pr', 2)` -\u003e `['programming', 'ProgrammerHumor']`\n7. `autocomplete.get_suggestions('prog', 1)` -\u003e `['programming']`",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cvector\u003e\n#include \u003cmap\u003e\n#include \u003calgorithm\u003e\n\nstruct AutocompleteItem {\n    std::string item_name;\n    int popularity_score;\n    // std::string item_type; // If you want to filter by type\n\n    // For sorting\n    bool operator\u003c(const AutocompleteItem\u0026 other) const {\n        if (popularity_score != other.popularity_score) {\n            return popularity_score \u003e other.popularity_score; // Descending popularity\n        }\n        return item_name \u003c other.item_name; // Ascending alphabetically\n    }\n};\n\nclass SearchAutocomplete {\npublic:\n    SearchAutocomplete() {\n        // Initialize data structures\n    }\n\n    void add_item(const std::string\u0026 item_type, const std::string\u0026 item_name, int popularity_score) {\n        // Add an item to the autocomplete index\n    }\n\n    std::vector\u003cstd::string\u003e get_suggestions(const std::string\u0026 prefix, int max_results) {\n        // Retrieve sorted suggestions based on prefix\n        return {};\n    }\n\nprivate:\n    // Your data structures (e.g., Trie or similar)\n};\n",
    "go": "package main\n\nimport (\n\t\"sort\"\n)\n\ntype AutocompleteItem struct {\n    ItemName        string\n    PopularityScore int\n    ItemType        string // If needed\n}\n\ntype SearchAutocomplete struct {\n    // Your data structures for efficient prefix searching and sorting\n}\n\nfunc NewSearchAutocomplete() *SearchAutocomplete {\n    // Initialize data structures\n\treturn \u0026SearchAutocomplete{}\n}\n\nfunc (sa *SearchAutocomplete) AddItem(itemType, itemName string, popularityScore int) {\n    // Add an item to the autocomplete index\n}\n\nfunc (sa *SearchAutocomplete) GetSuggestions(prefix string, maxResults int) []string {\n    // Retrieve sorted suggestions based on prefix\n    return []string{}\n}",
    "java": "import java.util.*;\n\nclass SearchAutocomplete {\n    // Your data structures for efficient prefix searching and sorting\n\n    public SearchAutocomplete() {\n        // Initialize data structures\n    }\n\n    public void addItem(String itemType, String itemName, int popularityScore) {\n        // Add an item to the autocomplete index\n    }\n\n    public List\u003cString\u003e getSuggestions(String prefix, int maxResults) {\n        // Retrieve sorted suggestions based on prefix\n        return new ArrayList\u003c\u003e();\n    }\n}",
    "javascript": "class SearchAutocomplete {\n    constructor() {\n        // Your data structures for efficient prefix searching and sorting\n    }\n\n    addItem(itemType, itemName, popularityScore) {\n        // Add an item to the autocomplete index\n    }\n\n    getSuggestions(prefix, maxResults) {\n        // Retrieve sorted suggestions based on prefix\n        return [];\n    }\n}",
    "python": "class SearchAutocomplete:\n    def __init__(self):\n        # Your data structures for efficient prefix searching and sorting\n        pass\n\n    def add_item(self, item_type: str, item_name: str, popularity_score: int):\n        # Add an item to the autocomplete index\n        pass\n\n    def get_suggestions(self, prefix: str, max_results: int) -\u003e list[str]:\n        # Retrieve sorted suggestions based on prefix\n        pass",
    "rust": "use std::collections::HashMap;\n\npub struct AutocompleteItem {\n    item_name: String,\n    popularity_score: i32,\n    item_type: String, // If you want to filter by type\n}\n\n// For sorting\nimpl PartialEq for AutocompleteItem {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        self.popularity_score == other.popularity_score \u0026\u0026 self.item_name == other.item_name\n    }\n}\n\nimpl Eq for AutocompleteItem {}\n\nimpl PartialOrd for AutocompleteItem {\n    fn partial_cmp(\u0026self, other: \u0026Self) -\u003e Option\u003cstd::cmp::Ordering\u003e {\n        // Descending popularity, then ascending alphabetical by name\n        Some((\u0026other.popularity_score, \u0026self.item_name)).cmp(\u0026(\u0026self.popularity_score, \u0026other.item_name))\n    }\n}\n\nimpl Ord for AutocompleteItem {\n    fn cmp(\u0026self, other: \u0026Self) -\u003e std::cmp::Ordering {\n        self.partial_cmp(other).unwrap()\n    }\n}\n\npub struct SearchAutocomplete {\n    // Your data structures for efficient prefix searching and sorting\n}\n\nimpl SearchAutocomplete {\n    pub fn new() -\u003e Self {\n        // Initialize data structures\n        SearchAutocomplete {}\n    }\n\n    pub fn add_item(\u0026mut self, item_type: String, item_name: String, popularity_score: i32) {\n        // Add an item to the autocomplete index\n    }\n\n    pub fn get_suggestions(\u0026self, prefix: \u0026str, max_results: usize) -\u003e Vec\u003cString\u003e {\n        // Retrieve sorted suggestions based on prefix\n        vec![]\n    }\n}"
  },
  "Type": "coding"
}