{
  "ID": "reddit-software engineer-senior-comment-tree-serialization",
  "Title": "Comment Tree Serialization and Deserialization",
  "Statement": "Reddit comments are organized in a hierarchical tree structure. You are given a flat list of comment objects, where each comment has an `id`, an optional `parent_id` (null for top-level comments), and `text`. Implement two functions:\n\n1.  `serialize_comments(comments: List[Dict]) -\u003e List[Dict]`: Flattens a list of comment objects (in any order) into a specific display order (depth-first traversal), indicating the indentation level for each comment.\n2.  `deserialize_comments(serialized_comments: List[Dict]) -\u003e List[Dict]`: Reconstructs the original tree structure (specifically, the `id`, `parent_id`, `text` format) from the serialized list, which uses `indent_level` instead of `parent_id` to imply hierarchy.\n\n**Input/Output Formats:**\n*   **Original Comment:** `{\"id\": \"c1\", \"parent_id\": \"p1\" | None, \"text\": \"Comment text\"}`\n*   **Serialized Comment:** `{\"id\": \"c1\", \"text\": \"Comment text\", \"indent_level\": 0 | 1 | 2 ...}`\n\n**Constraints:**\n*   Assume `id`s are unique.\n*   `parent_id` will always refer to an existing comment or be `None`.\n*   The input `comments` for `serialize_comments` is not necessarily sorted.\n*   `deserialize_comments` should correctly infer `parent_id`s from `indent_level`.\n\n**Example:**\n**Original Comments (unordered input):**\n```json\n[\n    {\"id\": \"c1\", \"parent_id\": null, \"text\": \"Root comment 1\"},\n    {\"id\": \"c3\", \"parent_id\": null, \"text\": \"Root comment 2\"},\n    {\"id\": \"c2\", \"parent_id\": \"c1\", \"text\": \"Reply to c1\"},\n    {\"id\": \"c5\", \"parent_id\": \"c3\", \"text\": \"Reply to c3\"},\n    {\"id\": \"c4\", \"parent_id\": \"c2\", \"text\": \"Reply to c2\"}\n]\n```\n\n**`serialize_comments` Output (depth-first traversal):**\n```json\n[\n    {\"id\": \"c1\", \"text\": \"Root comment 1\", \"indent_level\": 0},\n    {\"id\": \"c2\", \"text\": \"Reply to c1\", \"indent_level\": 1},\n    {\"id\": \"c4\", \"text\": \"Reply to c2\", \"indent_level\": 2},\n    {\"id\": \"c3\", \"text\": \"Root comment 2\", \"indent_level\": 0},\n    {\"id\": \"c5\", \"text\": \"Reply to c3\", \"indent_level\": 1}\n]\n```\n\n**`deserialize_comments` Input (above serialized output) and a possible output (order of top-level comments and their children is consistent, but relative order of sibling top-level comments might vary):**\n```json\n[\n    {\"id\": \"c1\", \"parent_id\": null, \"text\": \"Root comment 1\"},\n    {\"id\": \"c2\", \"parent_id\": \"c1\", \"text\": \"Reply to c1\"},\n    {\"id\": \"c4\", \"parent_id\": \"c2\", \"text\": \"Reply to c2\"},\n    {\"id\": \"c3\", \"parent_id\": null, \"text\": \"Root comment 2\"},\n    {\"id\": \"c5\", \"parent_id\": \"c3\", \"text\": \"Reply to c3\"}\n]\n```",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cvector\u003e\n#include \u003cunordered_map\u003e\n#include \u003calgorithm\u003e\n\nstruct Comment {\n    std::string id;\n    std::string parent_id;\n    std::string text;\n    int indent_level; // Used for serialized form\n};\n\nclass Solution {\npublic:\n    std::vector\u003cComment\u003e serializeComments(const std::vector\u003cComment\u003e\u0026 comments) {\n        // Your code here\n        return {};\n    }\n\n    std::vector\u003cComment\u003e deserializeComments(const std::vector\u003cComment\u003e\u0026 serialized_comments) {\n        // Your code here\n        return {};\n    }\n};",
    "go": "package main\n\ntype Comment struct {\n    ID          string\n    ParentID    string\n    Text        string\n    IndentLevel int // Used for serialized form\n}\n\nfunc SerializeComments(comments []Comment) []Comment {\n    // Your code here\n    return []Comment{}\n}\n\nfunc DeserializeComments(serializedComments []Comment) []Comment {\n    // Your code here\n    return []Comment{}\n}",
    "java": "import java.util.*;\n\nclass Solution {\n    static class Comment {\n        String id; String parentId; String text; int indentLevel; // indentLevel for serialized form\n        public Comment(String id, String parentId, String text) { this.id = id; this.parentId = parentId; this.text = text; }\n        public Comment(String id, String text, int indentLevel) { this.id = id; this.text = text; this.indentLevel = indentLevel; }\n    }\n\n    public List\u003cComment\u003e serializeComments(List\u003cComment\u003e comments) {\n        // Your code here\n        return new ArrayList\u003c\u003e();\n    }\n\n    public List\u003cComment\u003e deserializeComments(List\u003cComment\u003e serializedComments) {\n        // Your code here\n        return new ArrayList\u003c\u003e();\n    }\n}",
    "javascript": "function serializeComments(comments) {\n    // Your code here\n    return [];\n}\n\nfunction deserializeComments(serializedComments) {\n    // Your code here\n    return [];\n}",
    "python": "def serialize_comments(comments: list) -\u003e list:\n    # Your code here\n    pass\n\ndef deserialize_comments(serialized_comments: list) -\u003e list:\n    # Your code here\n    pass",
    "rust": "pub struct Comment {\n    pub id: String,\n    pub parent_id: Option\u003cString\u003e,\n    pub text: String,\n    pub indent_level: Option\u003cusize\u003e, // For serialized form\n}\n\npub fn serialize_comments(comments: \u0026[Comment]) -\u003e Vec\u003cComment\u003e {\n    // Your code here\n    vec![]\n}\n\npub fn deserialize_comments(serialized_comments: \u0026[Comment]) -\u003e Vec\u003cComment\u003e {\n    // Your code here\n    vec![]\n}"
  },
  "Type": "coding"
}