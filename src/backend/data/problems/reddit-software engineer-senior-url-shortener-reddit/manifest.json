{
  "ID": "reddit-software engineer-senior-url-shortener-reddit",
  "Title": "Reddit-style URL Shortener",
  "Statement": "Reddit often uses short, memorable URLs for posts, comments, and subreddits (e.g., `redd.it/abcdef`). Implement a simplified URL shortener service that generates unique, short codes for long URLs and can retrieve the original URL given a short code. Your short codes should be alphanumeric and relatively short.\n\n`URLShortener` class methods:\n- `__init__(self)`: Initializes the service.\n- `shorten_url(self, long_url: str) -\u003e str`: Given a `long_url`, generates and stores a unique short URL. Returns the short URL. If the `long_url` has already been shortened, return its existing short URL.\n- `retrieve_url(self, short_url: str) -\u003e Optional[str]`: Given a `short_url`, returns the original `long_url` or `None`/`null` if the short URL doesn't exist.\n\nConstraints:\n- Short codes should be unique and collision-resistant (within reason for this exercise).\n- Lookups (`retrieve_url`) should be fast.\n- The system should be able to handle many unique URLs.\n\nExample:\nshortener = URLShortener()\n\nshort_code1 = shortener.shorten_url(\"https://www.reddit.com/r/programming/comments/abcdefg/cool_article/\")\nprint(short_code1) # e.g., \"abcde\"\nprint(shortener.retrieve_url(short_code1)) # Output: \"https://www.reddit.com/r/programming/comments/abcdefg/cool_article/\"\n\nshort_code2 = shortener.shorten_url(\"https://www.reddit.com/r/pics/top/cool_picture/\")\nprint(short_code2) # e.g., \"fghij\"\nprint(shortener.retrieve_url(\"non_existent\")) # Output: None/null",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cunordered_map\u003e\n#include \u003crandom\u003e\n#include \u003cchrono\u003e\n\nclass URLShortener {\nprivate:\n    std::unordered_map\u003cstd::string, std::string\u003e longToShort_;\n    std::unordered_map\u003cstd::string, std::string\u003e shortToLong_;\n    std::string chars_ = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    int codeLength_ = 6;\n    std::mt19937_64 generator_;\n\n    std::string _generateUniqueCode() {\n        std::uniform_int_distribution\u003c\u003e distrib(0, chars_.length() - 1);\n        std::string code;\n        while (true) {\n            code.clear();\n            for (int i = 0; i \u003c codeLength_; ++i) {\n                code += chars_[distrib(generator_)];\n            }\n            if (shortToLong_.find(code) == shortToLong_.end()) {\n                return code;\n            }\n        }\n    }\n\npublic:\n    URLShortener() : generator_(std::chrono::system_clock::now().time_since_epoch().count()) {}\n\n    std::string shortenUrl(const std::string\u0026 longUrl) {\n        // Your code here\n        return \"\";\n    }\n\n    std::string retrieveUrl(const std::string\u0026 shortUrl) {\n        // Your code here\n        return \"\";\n    }\n};",
    "go": "package main\n\nimport (\n    \"math/rand\"\n    \"sync\"\n    \"time\"\n)\n\ntype URLShortener struct {\n    longToShort map[string]string\n    shortToLong map[string]string\n    chars string\n    codeLength int\n    mu sync.RWMutex\n}\n\nfunc NewURLShortener() *URLShortener {\n    return \u0026URLShortener{\n        longToShort: make(map[string]string),\n        shortToLong: make(map[string]string),\n        chars: \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\",\n        codeLength: 6,\n    }\n}\n\nfunc (us *URLShortener) generateUniqueCode() string {\n    rand.Seed(time.Now().UnixNano())\n    for {\n        code := make([]byte, us.codeLength)\n        for i := range code {\n            code[i] = us.chars[rand.Intn(len(us.chars))]\n        }\n        if _, exists := us.shortToLong[string(code)]; !exists {\n            return string(code)\n        }\n    }\n}\n\nfunc (us *URLShortener) ShortenUrl(longUrl string) string {\n    // Your code here\n    return \"\"\n}\n\nfunc (us *URLShortener) RetrieveUrl(shortUrl string) string {\n    // Your code here\n    return \"\"\n}",
    "java": "import java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.security.SecureRandom;\n\nclass URLShortener {\n    private Map\u003cString, String\u003e longToShort;\n    private Map\u003cString, String\u003e shortToLong;\n    private static final String ALPHANUMERIC = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    private static final int CODE_LENGTH = 6; // Example length\n    private SecureRandom random;\n\n    public URLShortener() {\n        this.longToShort = new ConcurrentHashMap\u003c\u003e();\n        this.shortToLong = new ConcurrentHashMap\u003c\u003e();\n        this.random = new SecureRandom();\n    }\n\n    private String generateUniqueCode() {\n        StringBuilder sb = new StringBuilder();\n        while (true) {\n            for (int i = 0; i \u003c CODE_LENGTH; i++) {\n                sb.append(ALPHANUMERIC.charAt(random.nextInt(ALPHANUMERIC.length())));\n            }\n            String code = sb.toString();\n            if (!shortToLong.containsKey(code)) {\n                return code;\n            }\n            sb.setLength(0);\n        }\n    }\n\n    public String shortenUrl(String longUrl) {\n        // Your code here\n        return null;\n    }\n\n    public String retrieveUrl(String shortUrl) {\n        // Your code here\n        return null;\n    }\n}",
    "javascript": "class URLShortener {\n    constructor() {\n        this.longToShort = new Map();\n        this.shortToLong = new Map();\n        this.chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n        this.codeLength = 6;\n    }\n\n    _generateUniqueCode() {\n        let code = '';\n        while (true) {\n            code = '';\n            for (let i = 0; i \u003c this.codeLength; i++) {\n                code += this.chars.charAt(Math.floor(Math.random() * this.chars.length));\n            }\n            if (!this.shortToLong.has(code)) {\n                return code;\n            }\n        }\n    }\n\n    shorten_url(longUrl) {\n        // Your code here\n        return '';\n    }\n\n    retrieve_url(shortUrl) {\n        // Your code here\n        return null;\n    }\n}",
    "python": "import random\nimport string\nfrom typing import Optional, Dict\n\nclass URLShortener:\n    def __init__(self):\n        self.long_to_short = {} # type: Dict[str, str]\n        self.short_to_long = {} # type: Dict[str, str]\n        self.chars = string.ascii_letters + string.digits\n        self.code_length = 6 # Example length\n\n    def _generate_unique_code(self) -\u003e str:\n        while True:\n            code = ''.join(random.choice(self.chars) for _ in range(self.code_length))\n            if code not in self.short_to_long: # Check for uniqueness\n                return code\n\n    def shorten_url(self, long_url: str) -\u003e str:\n        # Your code here\n        pass\n\n    def retrieve_url(self, short_url: str) -\u003e Optional[str]:\n        # Your code here\n        pass",
    "rust": "use std::collections::HashMap;\nuse rand::Rng;\n\npub struct URLShortener {\n    long_to_short: HashMap\u003cString, String\u003e,\n    short_to_long: HashMap\u003cString, String\u003e,\n    chars: Vec\u003cchar\u003e,\n    code_length: usize,\n}\n\nimpl URLShortener {\n    pub fn new() -\u003e Self {\n        let chars: Vec\u003cchar\u003e = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\".chars().collect();\n        URLShortener {\n            long_to_short: HashMap::new(),\n            short_to_long: HashMap::new(),\n            chars,\n            code_length: 6,\n        }\n    }\n\n    fn generate_unique_code(\u0026mut self) -\u003e String {\n        let mut rng = rand::thread_rng();\n        loop {\n            let code: String = (0..self.code_length)\n                .map(|_| *self.chars.get(rng.gen_range(0..self.chars.len())).unwrap())\n                .collect();\n            if !self.short_to_long.contains_key(\u0026code) {\n                return code;\n            }\n        }\n    }\n\n    pub fn shorten_url(\u0026mut self, long_url: String) -\u003e String {\n        // Your code here\n        String::new()\n    }\n\n    pub fn retrieve_url(\u0026self, short_url: \u0026str) -\u003e Option\u003c\u0026String\u003e {\n        // Your code here\n        None\n    }\n}"
  },
  "Type": "coding"
}