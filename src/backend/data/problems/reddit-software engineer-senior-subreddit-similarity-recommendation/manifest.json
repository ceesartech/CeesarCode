{
  "ID": "reddit-software engineer-senior-subreddit-similarity-recommendation",
  "Title": "Subreddit Similarity for Recommendations",
  "Statement": "Reddit users often subscribe to multiple subreddits, creating a rich network of interests. To improve user engagement, Reddit frequently recommends new subreddits. A common technique for this is to identify subreddits that are 'similar' to ones a user already enjoys or is currently viewing.\n\nImplement a function `find_top_k_similar_subreddits(target_subreddit_id: str, user_subscriptions: Dict[str, Set[str]], k: int) -\u003e List[Tuple[str, float]]`.\n\n`user_subscriptions` is a dictionary where keys are `user_id` (string) and values are `Set[str]` of `subreddit_id`s that user is subscribed to.\n\nThe similarity between two subreddits `A` and `B` should be calculated using the Jaccard Index, defined as `|Subscribers(A) intersect Subscribers(B)| / |Subscribers(A) union Subscribers(B)|`. If `|Subscribers(A) union Subscribers(B)|` is zero, the similarity is 0.\n\nYour function should: \n1. Calculate the Jaccard similarity between the `target_subreddit_id` and *all other unique subreddits* in the `user_subscriptions` data.\n2. Return the top `k` most similar subreddits, along with their similarity scores, sorted in descending order of similarity. If there's a tie in similarity, sort by `subreddit_id` alphabetically.\n3. Exclude the `target_subreddit_id` itself from the results.\n\n*Example:*\n`user_subscriptions = {\n    'u1': {'r/news', 'r/sports', 'r/politics'},\n    'u2': {'r/news', 'r/sports', 'r/technology'},\n    'u3': {'r/sports', 'r/science'},\n    'u4': {'r/news', 'r/science'}\n}`\n`target_subreddit_id = 'r/sports'`\n`k = 2`\n\n*Expected Output (order might vary slightly based on floating point precision):*\n`[('r/news', 0.5), ('r/science', 0.3333333333333333)]`\n\n*(Explanation for r/sports and r/news: Subscribers(r/sports) = {u1, u2, u3}, Subscribers(r/news) = {u1, u2, u4}. Intersection = {u1, u2}. Union = {u1, u2, u3, u4}. Jaccard = 2/4 = 0.5)*\n*(Explanation for r/sports and r/science: Subscribers(r/sports) = {u1, u2, u3}, Subscribers(r/science) = {u3, u4}. Intersection = {u3}. Union = {u1, u2, u3, u4}. Jaccard = 1/4 = 0.25)* (My manual calculation for example was wrong, fixing it here. Jaccard for r/sports and r/science: {u3} / {u1,u2,u3,u4} -\u003e 1/4 = 0.25. The example output needs to be consistent, so if r/science is 0.333, let me re-evaluate based on the provided expected output.)\n\nLet's refine the example output to make sense. If r/science is 0.333, it means Subscribers(r/sports) and Subscribers(r/science) have a union of 3 and intersection of 1. Let's adjust `user_subscriptions`.\n\nRevised Example: \n`user_subscriptions = {\n    'u1': {'r/news', 'r/sports', 'r/politics'},\n    'u2': {'r/news', 'r/sports', 'r/technology'},\n    'u3': {'r/sports', 'r/science'},\n    'u4': {'r/news'},\n    'u5': {'r/science'}\n}`\n\nTarget: `r/sports`\nSubscribers(`r/sports`) = `{u1, u2, u3}` (Size 3)\n\nConsider `r/news`:\nSubscribers(`r/news`) = `{u1, u2, u4}` (Size 3)\nIntersection (`r/sports`, `r/news`) = `{u1, u2}` (Size 2)\nUnion (`r/sports`, `r/news`) = `{u1, u2, u3, u4}` (Size 4)\nJaccard(`r/sports`, `r/news`) = `2/4 = 0.5`\n\nConsider `r/science`:\nSubscribers(`r/science`) = `{u3, u5}` (Size 2)\nIntersection (`r/sports`, `r/science`) = `{u3}` (Size 1)\nUnion (`r/sports`, `r/science`) = `{u1, u2, u3, u5}` (Size 4)\nJaccard(`r/sports`, `r/science`) = `1/4 = 0.25`\n\nConsider `r/politics`:\nSubscribers(`r/politics`) = `{u1}` (Size 1)\nIntersection (`r/sports`, `r/politics`) = `{u1}` (Size 1)\nUnion (`r/sports`, `r/politics`) = `{u1, u2, u3}` (Size 3)\nJaccard(`r/sports`, `r/politics`) = `1/3 ≈ 0.3333`\n\nConsider `r/technology`:\nSubscribers(`r/technology`) = `{u2}` (Size 1)\nIntersection (`r/sports`, `r/technology`) = `{u2}` (Size 1)\nUnion (`r/sports`, `r/technology`) = `{u1, u2, u3}` (Size 3)\nJaccard(`r/sports`, `r/technology`) = `1/3 ≈ 0.3333`\n\n*Revised Expected Output for k=2:*\n`[('r/news', 0.5), ('r/politics', 0.3333333333333333)]` (or `r/technology` if tie-breaking leads to it, depending on exact float comparison and alphabetical sort).",
  "Languages": [
    "python",
    "java",
    "cpp",
    "javascript",
    "go",
    "rust"
  ],
  "Stub": {
    "cpp": "#include \u003cstring\u003e\n#include \u003cvector\u003e\n#include \u003cunordered_map\u003e\n#include \u003cunordered_set\u003e\n#include \u003calgorithm\u003e\n#include \u003cnumeric\u003e\n\nclass Solution {\npublic:\n    std::vector\u003cstd::pair\u003cstd::string, double\u003e\u003e findTopKSimilarSubreddits(\n        const std::string\u0026 target_subreddit_id,\n        const std::unordered_map\u003cstd::string, std::unordered_set\u003cstd::string\u003e\u003e\u0026 user_subscriptions,\n        int k) {\n        // Your code here\n        return {};\n    }\n};",
    "go": "package main\n\nimport (\n\t\"sort\"\n)\n\ntype UserSubscriptions map[string]map[string]struct{}\n\ntype SubredditSimilarity struct {\n\tSubredditID string\n\tSimilarity  float64\n}\n\nfunc findTopKSimilarSubreddits(targetSubredditID string, userSubscriptions UserSubscriptions, k int) []SubredditSimilarity {\n\t// Your code here\n\treturn nil\n}",
    "java": "import java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.AbstractMap.SimpleEntry;\n\nclass Solution {\n    public List\u003cSimpleEntry\u003cString, Double\u003e\u003e findTopKSimilarSubreddits(\n            String targetSubredditId, Map\u003cString, Set\u003cString\u003e\u003e userSubscriptions, int k) {\n        // Your code here\n        return null;\n    }\n}",
    "javascript": "function findTopKSimilarSubreddits(targetSubredditId, userSubscriptions, k) {\n    // Your code here\n}",
    "python": "from typing import Dict, Set, List, Tuple\n\ndef find_top_k_similar_subreddits(target_subreddit_id: str, user_subscriptions: Dict[str, Set[str]], k: int) -\u003e List[Tuple[str, float]]:\n    # Your code here\n    pass",
    "rust": "use std::collections::{HashMap, HashSet};\n\npub struct Solution;\n\n#[derive(Debug, PartialEq, PartialOrd)]\npub struct SubredditSimilarity {\n    pub subreddit_id: String,\n    pub similarity: f64,\n}\n\nimpl Solution {\n    pub fn find_top_k_similar_subreddits(\n        target_subreddit_id: String,\n        user_subscriptions: HashMap\u003cString, HashSet\u003cString\u003e\u003e,\n        k: i32,\n    ) -\u003e Vec\u003cSubredditSimilarity\u003e {\n        // Your code here\n        unimplemented!()\n    }\n}"
  },
  "Type": "coding"
}