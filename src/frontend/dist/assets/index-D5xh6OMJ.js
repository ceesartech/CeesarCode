function _d(B,W){for(var D=0;D<W.length;D++){const ee=W[D];if(typeof ee!="string"&&!Array.isArray(ee)){for(const G in ee)if(G!=="default"&&!(G in B)){const ge=Object.getOwnPropertyDescriptor(ee,G);ge&&Object.defineProperty(B,G,ge.get?ge:{enumerable:!0,get:()=>ee[G]})}}}return Object.freeze(Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}))}(function(){const W=document.createElement("link").relList;if(W&&W.supports&&W.supports("modulepreload"))return;for(const G of document.querySelectorAll('link[rel="modulepreload"]'))ee(G);new MutationObserver(G=>{for(const ge of G)if(ge.type==="childList")for(const U of ge.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&ee(U)}).observe(document,{childList:!0,subtree:!0});function D(G){const ge={};return G.integrity&&(ge.integrity=G.integrity),G.referrerPolicy&&(ge.referrerPolicy=G.referrerPolicy),G.crossOrigin==="use-credentials"?ge.credentials="include":G.crossOrigin==="anonymous"?ge.credentials="omit":ge.credentials="same-origin",ge}function ee(G){if(G.ep)return;G.ep=!0;const ge=D(G);fetch(G.href,ge)}})();var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}var jl={exports:{}},ws={},Fl={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu;function vd(){if(hu)return He;hu=1;var B=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),U=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),h=Symbol.iterator;function m(b){return b===null||typeof b!="object"?null:(b=h&&b[h]||b["@@iterator"],typeof b=="function"?b:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,_={};function n(b,I,ie){this.props=b,this.context=I,this.refs=_,this.updater=ie||w}n.prototype.isReactComponent={},n.prototype.setState=function(b,I){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,I,"setState")},n.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function l(){}l.prototype=n.prototype;function s(b,I,ie){this.props=b,this.context=I,this.refs=_,this.updater=ie||w}var o=s.prototype=new l;o.constructor=s,E(o,n.prototype),o.isPureReactComponent=!0;var f=Array.isArray,C=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function g(b,I,ie){var se,de={},xe=null,q=null;if(I!=null)for(se in I.ref!==void 0&&(q=I.ref),I.key!==void 0&&(xe=""+I.key),I)C.call(I,se)&&!x.hasOwnProperty(se)&&(de[se]=I[se]);var M=arguments.length-2;if(M===1)de.children=ie;else if(1<M){for(var ne=Array(M),J=0;J<M;J++)ne[J]=arguments[J+2];de.children=ne}if(b&&b.defaultProps)for(se in M=b.defaultProps,M)de[se]===void 0&&(de[se]=M[se]);return{$$typeof:B,type:b,key:xe,ref:q,props:de,_owner:S.current}}function L(b,I){return{$$typeof:B,type:b.type,key:I,ref:b.ref,props:b.props,_owner:b._owner}}function H(b){return typeof b=="object"&&b!==null&&b.$$typeof===B}function N(b){var I={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ie){return I[ie]})}var V=/\/+/g;function j(b,I){return typeof b=="object"&&b!==null&&b.key!=null?N(""+b.key):I.toString(36)}function te(b,I,ie,se,de){var xe=typeof b;(xe==="undefined"||xe==="boolean")&&(b=null);var q=!1;if(b===null)q=!0;else switch(xe){case"string":case"number":q=!0;break;case"object":switch(b.$$typeof){case B:case W:q=!0}}if(q)return q=b,de=de(q),b=se===""?"."+j(q,0):se,f(de)?(ie="",b!=null&&(ie=b.replace(V,"$&/")+"/"),te(de,I,ie,"",function(J){return J})):de!=null&&(H(de)&&(de=L(de,ie+(!de.key||q&&q.key===de.key?"":(""+de.key).replace(V,"$&/")+"/")+b)),I.push(de)),1;if(q=0,se=se===""?".":se+":",f(b))for(var M=0;M<b.length;M++){xe=b[M];var ne=se+j(xe,M);q+=te(xe,I,ie,ne,de)}else if(ne=m(b),typeof ne=="function")for(b=ne.call(b),M=0;!(xe=b.next()).done;)xe=xe.value,ne=se+j(xe,M++),q+=te(xe,I,ie,ne,de);else if(xe==="object")throw I=String(b),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return q}function oe(b,I,ie){if(b==null)return b;var se=[],de=0;return te(b,se,"","",function(xe){return I.call(ie,xe,de++)}),se}function he(b){if(b._status===-1){var I=b._result;I=I(),I.then(function(ie){(b._status===0||b._status===-1)&&(b._status=1,b._result=ie)},function(ie){(b._status===0||b._status===-1)&&(b._status=2,b._result=ie)}),b._status===-1&&(b._status=0,b._result=I)}if(b._status===1)return b._result.default;throw b._result}var ve={current:null},Q={transition:null},k={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:Q,ReactCurrentOwner:S};function P(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:oe,forEach:function(b,I,ie){oe(b,function(){I.apply(this,arguments)},ie)},count:function(b){var I=0;return oe(b,function(){I++}),I},toArray:function(b){return oe(b,function(I){return I})||[]},only:function(b){if(!H(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},He.Component=n,He.Fragment=D,He.Profiler=G,He.PureComponent=s,He.StrictMode=ee,He.Suspense=u,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,He.act=P,He.cloneElement=function(b,I,ie){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var se=E({},b.props),de=b.key,xe=b.ref,q=b._owner;if(I!=null){if(I.ref!==void 0&&(xe=I.ref,q=S.current),I.key!==void 0&&(de=""+I.key),b.type&&b.type.defaultProps)var M=b.type.defaultProps;for(ne in I)C.call(I,ne)&&!x.hasOwnProperty(ne)&&(se[ne]=I[ne]===void 0&&M!==void 0?M[ne]:I[ne])}var ne=arguments.length-2;if(ne===1)se.children=ie;else if(1<ne){M=Array(ne);for(var J=0;J<ne;J++)M[J]=arguments[J+2];se.children=M}return{$$typeof:B,type:b.type,key:de,ref:xe,props:se,_owner:q}},He.createContext=function(b){return b={$$typeof:U,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:ge,_context:b},b.Consumer=b},He.createElement=g,He.createFactory=function(b){var I=g.bind(null,b);return I.type=b,I},He.createRef=function(){return{current:null}},He.forwardRef=function(b){return{$$typeof:c,render:b}},He.isValidElement=H,He.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:he}},He.memo=function(b,I){return{$$typeof:p,type:b,compare:I===void 0?null:I}},He.startTransition=function(b){var I=Q.transition;Q.transition={};try{b()}finally{Q.transition=I}},He.unstable_act=P,He.useCallback=function(b,I){return ve.current.useCallback(b,I)},He.useContext=function(b){return ve.current.useContext(b)},He.useDebugValue=function(){},He.useDeferredValue=function(b){return ve.current.useDeferredValue(b)},He.useEffect=function(b,I){return ve.current.useEffect(b,I)},He.useId=function(){return ve.current.useId()},He.useImperativeHandle=function(b,I,ie){return ve.current.useImperativeHandle(b,I,ie)},He.useInsertionEffect=function(b,I){return ve.current.useInsertionEffect(b,I)},He.useLayoutEffect=function(b,I){return ve.current.useLayoutEffect(b,I)},He.useMemo=function(b,I){return ve.current.useMemo(b,I)},He.useReducer=function(b,I,ie){return ve.current.useReducer(b,I,ie)},He.useRef=function(b){return ve.current.useRef(b)},He.useState=function(b){return ve.current.useState(b)},He.useSyncExternalStore=function(b,I,ie){return ve.current.useSyncExternalStore(b,I,ie)},He.useTransition=function(){return ve.current.useTransition()},He.version="18.3.1",He}var du;function Gl(){return du||(du=1,Fl.exports=vd()),Fl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu;function md(){if(fu)return ws;fu=1;var B=Gl(),W=Symbol.for("react.element"),D=Symbol.for("react.fragment"),ee=Object.prototype.hasOwnProperty,G=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ge={key:!0,ref:!0,__self:!0,__source:!0};function U(c,u,p){var y,h={},m=null,w=null;p!==void 0&&(m=""+p),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(w=u.ref);for(y in u)ee.call(u,y)&&!ge.hasOwnProperty(y)&&(h[y]=u[y]);if(c&&c.defaultProps)for(y in u=c.defaultProps,u)h[y]===void 0&&(h[y]=u[y]);return{$$typeof:W,type:c,key:m,ref:w,props:h,_owner:G.current}}return ws.Fragment=D,ws.jsx=U,ws.jsxs=U,ws}var pu;function yd(){return pu||(pu=1,jl.exports=md()),jl.exports}var T=yd(),pe=Gl();const Jt=gd(pe),ep=_d({__proto__:null,default:Jt},[pe]);var Hn={},Hl={exports:{}},Dt={},Nl={exports:{}},zl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u;function Sd(){return _u||(_u=1,(function(B){function W(Q,k){var P=Q.length;Q.push(k);e:for(;0<P;){var b=P-1>>>1,I=Q[b];if(0<G(I,k))Q[b]=k,Q[P]=I,P=b;else break e}}function D(Q){return Q.length===0?null:Q[0]}function ee(Q){if(Q.length===0)return null;var k=Q[0],P=Q.pop();if(P!==k){Q[0]=P;e:for(var b=0,I=Q.length,ie=I>>>1;b<ie;){var se=2*(b+1)-1,de=Q[se],xe=se+1,q=Q[xe];if(0>G(de,P))xe<I&&0>G(q,de)?(Q[b]=q,Q[xe]=P,b=xe):(Q[b]=de,Q[se]=P,b=se);else if(xe<I&&0>G(q,P))Q[b]=q,Q[xe]=P,b=xe;else break e}}return k}function G(Q,k){var P=Q.sortIndex-k.sortIndex;return P!==0?P:Q.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ge=performance;B.unstable_now=function(){return ge.now()}}else{var U=Date,c=U.now();B.unstable_now=function(){return U.now()-c}}var u=[],p=[],y=1,h=null,m=3,w=!1,E=!1,_=!1,n=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,s=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function o(Q){for(var k=D(p);k!==null;){if(k.callback===null)ee(p);else if(k.startTime<=Q)ee(p),k.sortIndex=k.expirationTime,W(u,k);else break;k=D(p)}}function f(Q){if(_=!1,o(Q),!E)if(D(u)!==null)E=!0,he(C);else{var k=D(p);k!==null&&ve(f,k.startTime-Q)}}function C(Q,k){E=!1,_&&(_=!1,l(g),g=-1),w=!0;var P=m;try{for(o(k),h=D(u);h!==null&&(!(h.expirationTime>k)||Q&&!N());){var b=h.callback;if(typeof b=="function"){h.callback=null,m=h.priorityLevel;var I=b(h.expirationTime<=k);k=B.unstable_now(),typeof I=="function"?h.callback=I:h===D(u)&&ee(u),o(k)}else ee(u);h=D(u)}if(h!==null)var ie=!0;else{var se=D(p);se!==null&&ve(f,se.startTime-k),ie=!1}return ie}finally{h=null,m=P,w=!1}}var S=!1,x=null,g=-1,L=5,H=-1;function N(){return!(B.unstable_now()-H<L)}function V(){if(x!==null){var Q=B.unstable_now();H=Q;var k=!0;try{k=x(!0,Q)}finally{k?j():(S=!1,x=null)}}else S=!1}var j;if(typeof s=="function")j=function(){s(V)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=V,j=function(){oe.postMessage(null)}}else j=function(){n(V,0)};function he(Q){x=Q,S||(S=!0,j())}function ve(Q,k){g=n(function(){Q(B.unstable_now())},k)}B.unstable_IdlePriority=5,B.unstable_ImmediatePriority=1,B.unstable_LowPriority=4,B.unstable_NormalPriority=3,B.unstable_Profiling=null,B.unstable_UserBlockingPriority=2,B.unstable_cancelCallback=function(Q){Q.callback=null},B.unstable_continueExecution=function(){E||w||(E=!0,he(C))},B.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Q?Math.floor(1e3/Q):5},B.unstable_getCurrentPriorityLevel=function(){return m},B.unstable_getFirstCallbackNode=function(){return D(u)},B.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var P=m;m=k;try{return Q()}finally{m=P}},B.unstable_pauseExecution=function(){},B.unstable_requestPaint=function(){},B.unstable_runWithPriority=function(Q,k){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var P=m;m=Q;try{return k()}finally{m=P}},B.unstable_scheduleCallback=function(Q,k,P){var b=B.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?b+P:b):P=b,Q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=P+I,Q={id:y++,callback:k,priorityLevel:Q,startTime:P,expirationTime:I,sortIndex:-1},P>b?(Q.sortIndex=P,W(p,Q),D(u)===null&&Q===D(p)&&(_?(l(g),g=-1):_=!0,ve(f,P-b))):(Q.sortIndex=I,W(u,Q),E||w||(E=!0,he(C))),Q},B.unstable_shouldYield=N,B.unstable_wrapCallback=function(Q){var k=m;return function(){var P=m;m=k;try{return Q.apply(this,arguments)}finally{m=P}}}})(zl)),zl}var gu;function Cd(){return gu||(gu=1,Nl.exports=Sd()),Nl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function wd(){if(vu)return Dt;vu=1;var B=Gl(),W=Cd();function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ee=new Set,G={};function ge(e,t){U(e,t),U(e+"Capture",t)}function U(e,t){for(G[e]=t,e=0;e<t.length;e++)ee.add(t[e])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},h={};function m(e){return u.call(h,e)?!0:u.call(y,e)?!1:p.test(e)?h[e]=!0:(y[e]=!0,!1)}function w(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,r,i){if(t===null||typeof t>"u"||w(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _(e,t,r,i,a,d,R){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=R}var n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){n[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];n[t]=new _(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){n[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){n[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){n[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){n[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){n[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){n[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){n[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var l=/[\-:]([a-z])/g;function s(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(l,s);n[t]=new _(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(l,s);n[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(l,s);n[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){n[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),n.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){n[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function o(e,t,r,i){var a=n.hasOwnProperty(t)?n[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,r,a,i)&&(r=null),i||a===null?m(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var f=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),Q=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var P=Object.assign,b;function I(e){if(b===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var ie=!1;function se(e,t){if(!e||ie)return"";ie=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(re){var i=re}Reflect.construct(e,[],t)}else{try{t.call()}catch(re){i=re}e.call(t.prototype)}else{try{throw Error()}catch(re){i=re}e()}}catch(re){if(re&&i&&typeof re.stack=="string"){for(var a=re.stack.split(`
`),d=i.stack.split(`
`),R=a.length-1,F=d.length-1;1<=R&&0<=F&&a[R]!==d[F];)F--;for(;1<=R&&0<=F;R--,F--)if(a[R]!==d[F]){if(R!==1||F!==1)do if(R--,F--,0>F||a[R]!==d[F]){var $=`
`+a[R].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=R&&0<=F);break}}}finally{ie=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?I(e):""}function de(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function xe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case x:return"Fragment";case S:return"Portal";case L:return"Profiler";case g:return"StrictMode";case j:return"Suspense";case te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:xe(e.type)||"Memo";case he:t=e._payload,e=e._init;try{return xe(e(t))}catch{}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(t);case 8:return t===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function M(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ne(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J(e){var t=ne(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(R){i=""+R,d.call(this,R)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(R){i=""+R},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Se(e){e._valueTracker||(e._valueTracker=J(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=ne(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Fe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ze(e,t){var r=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ue(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=M(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ke(e,t){t=t.checked,t!=null&&o(e,"checked",t,!1)}function Ae(e,t){Ke(e,t);var r=M(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ar(e,t.type,r):t.hasOwnProperty("defaultValue")&&ar(e,t.type,M(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ar(e,t,r){(t!=="number"||Fe(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xt=Array.isArray;function Ft(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+M(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function cr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ht(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(Xt(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:M(r)}}function Mt(e,t){var r=M(t.value),i=M(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function _t(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ht(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ur(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ht(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lt,hr=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ve=["Webkit","ms","Moz","O"];Object.keys(Pt).forEach(function(e){Ve.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pt[t]=Pt[e]})});function Oi(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pt.hasOwnProperty(e)&&Pt[e]?(""+t).trim():t+"px"}function Un(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=Oi(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var Jl=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ds(e,t){if(t){if(Jl[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ts(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zr=null;function ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,Wr=null,$r=null;function Kn(e){if(e=ls(e)){if(typeof Ms!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Zs(t),Ms(e.stateNode,e.type,t))}}function Vn(e){Wr?$r?$r.push(e):$r=[e]:Wr=e}function qn(){if(Wr){var e=Wr,t=$r;if($r=Wr=null,Kn(e),t)for(e=0;e<t.length;e++)Kn(t[e])}}function Gn(e,t){return e(t)}function Ps(){}var Fi=!1;function Hi(e,t,r){if(Fi)return e(t,r);Fi=!0;try{return Gn(e,t,r)}finally{Fi=!1,(Wr!==null||$r!==null)&&(Ps(),qn())}}function Ur(e,t){var r=e.stateNode;if(r===null)return null;var i=Zs(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var wr=!1;if(c)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){wr=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{wr=!1}function oi(e,t,r,i,a,d,R,F,$){var re=Array.prototype.slice.call(arguments,3);try{t.apply(r,re)}catch(_e){this.onError(_e)}}var br=!1,Nt=null,li=!1,Ni=null,A={onError:function(e){br=!0,Nt=e}};function Jn(e,t,r,i,a,d,R,F,$){br=!1,Nt=null,oi.apply(A,arguments)}function Xn(e,t,r,i,a,d,R,F,$){if(Jn.apply(this,arguments),br){if(br){var re=Nt;br=!1,Nt=null}else throw Error(D(198));li||(li=!0,Ni=re)}}function ir(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function As(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zi(e){if(ir(e)!==e)throw Error(D(188))}function Bs(e){var t=e.alternate;if(!t){if(t=ir(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var d=a.alternate;if(d===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===d.child){for(d=a.child;d;){if(d===r)return zi(a),e;if(d===i)return zi(a),t;d=d.sibling}throw Error(D(188))}if(r.return!==i.return)r=a,i=d;else{for(var R=!1,F=a.child;F;){if(F===r){R=!0,r=a,i=d;break}if(F===i){R=!0,i=a,r=d;break}F=F.sibling}if(!R){for(F=d.child;F;){if(F===r){R=!0,r=d,i=a;break}if(F===i){R=!0,i=d,r=a;break}F=F.sibling}if(!R)throw Error(D(189))}}if(r.alternate!==i)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function Wi(e){return e=Bs(e),e!==null?$i(e):null}function $i(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$i(e);if(t!==null)return t;e=e.sibling}return null}var Is=W.unstable_scheduleCallback,Os=W.unstable_cancelCallback,Qn=W.unstable_shouldYield,Yn=W.unstable_requestPaint,Xe=W.unstable_now,Zn=W.unstable_getCurrentPriorityLevel,zt=W.unstable_ImmediatePriority,js=W.unstable_UserBlockingPriority,Kr=W.unstable_NormalPriority,eo=W.unstable_LowPriority,Fs=W.unstable_IdlePriority,ai=null,Wt=null;function to(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ai,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:so,ro=Math.log,io=Math.LN2;function so(e){return e>>>=0,e===0?32:31-(ro(e)/io|0)|0}var ci=64,ui=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hi(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,d=e.pingedLanes,R=r&268435455;if(R!==0){var F=R&~a;F!==0?i=Vr(F):(d&=R,d!==0&&(i=Vr(d)))}else R=r&~a,R!==0?i=Vr(R):d!==0&&(i=Vr(d));if(i===0)return 0;if(t!==0&&t!==i&&(t&a)===0&&(a=i&-i,d=t&-t,a>=d||a===16&&(d&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-vt(t),a=1<<r,i|=e[r],t&=~a;return i}function no(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oo(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,d=e.pendingLanes;0<d;){var R=31-vt(d),F=1<<R,$=a[R];$===-1?((F&r)===0||(F&i)!==0)&&(a[R]=no(F,t)):$<=t&&(e.expiredLanes|=F),d&=~F}}function Ui(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hs(){var e=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),e}function Ki(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=r}function di(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-vt(r),d=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~d}}function Vi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-vt(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var v=0;function O(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var z,X,ye,ue,be,ke=!1,le=[],ae=null,ce=null,Ee=null,Le=new Map,Oe=new Map,$e=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rt(e,t){switch(e){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":ce=null;break;case"mouseover":case"mouseout":Ee=null;break;case"pointerover":case"pointerout":Le.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(t.pointerId)}}function fr(e,t,r,i,a,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:d,targetContainers:[a]},t!==null&&(t=ls(t),t!==null&&X(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function lo(e,t,r,i,a){switch(t){case"focusin":return ae=fr(ae,e,t,r,i,a),!0;case"dragenter":return ce=fr(ce,e,t,r,i,a),!0;case"mouseover":return Ee=fr(Ee,e,t,r,i,a),!0;case"pointerover":var d=a.pointerId;return Le.set(d,fr(Le.get(d)||null,e,t,r,i,a)),!0;case"gotpointercapture":return d=a.pointerId,Oe.set(d,fr(Oe.get(d)||null,e,t,r,i,a)),!0}return!1}function qi(e){var t=Gr(e.target);if(t!==null){var r=ir(t);if(r!==null){if(t=r.tag,t===13){if(t=As(r),t!==null){e.blockedOn=t,be(e.priority,function(){ye(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=co(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);zr=i,r.target.dispatchEvent(i),zr=null}else return t=ls(r),t!==null&&X(t),e.blockedOn=r,!1;t.shift()}return!0}function Xl(e,t,r){qr(e)&&r.delete(t)}function Hu(){ke=!1,ae!==null&&qr(ae)&&(ae=null),ce!==null&&qr(ce)&&(ce=null),Ee!==null&&qr(Ee)&&(Ee=null),Le.forEach(Xl),Oe.forEach(Xl)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,ke||(ke=!0,W.unstable_scheduleCallback(W.unstable_NormalPriority,Hu)))}function Ji(e){function t(a){return Gi(a,e)}if(0<le.length){Gi(le[0],e);for(var r=1;r<le.length;r++){var i=le[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ae!==null&&Gi(ae,e),ce!==null&&Gi(ce,e),Ee!==null&&Gi(Ee,e),Le.forEach(t),Oe.forEach(t),r=0;r<$e.length;r++)i=$e[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<$e.length&&(r=$e[0],r.blockedOn===null);)qi(r),r.blockedOn===null&&$e.shift()}var fi=f.ReactCurrentBatchConfig,Ns=!0;function Nu(e,t,r,i){var a=v,d=fi.transition;fi.transition=null;try{v=1,ao(e,t,r,i)}finally{v=a,fi.transition=d}}function zu(e,t,r,i){var a=v,d=fi.transition;fi.transition=null;try{v=4,ao(e,t,r,i)}finally{v=a,fi.transition=d}}function ao(e,t,r,i){if(Ns){var a=co(e,t,r,i);if(a===null)Ro(e,t,i,zs,r),rt(e,i);else if(lo(a,e,t,r,i))i.stopPropagation();else if(rt(e,i),t&4&&-1<Qe.indexOf(e)){for(;a!==null;){var d=ls(a);if(d!==null&&z(d),d=co(e,t,r,i),d===null&&Ro(e,t,i,zs,r),d===a)break;a=d}a!==null&&i.stopPropagation()}else Ro(e,t,i,null,r)}}var zs=null;function co(e,t,r,i){if(zs=null,e=ji(i),e=Gr(e),e!==null)if(t=ir(e),t===null)e=null;else if(r=t.tag,r===13){if(e=As(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zs=e,null}function Ql(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zn()){case zt:return 1;case js:return 4;case Kr:case eo:return 16;case Fs:return 536870912;default:return 16}default:return 16}}var kr=null,uo=null,Ws=null;function Yl(){if(Ws)return Ws;var e,t=uo,r=t.length,i,a="value"in kr?kr.value:kr.textContent,d=a.length;for(e=0;e<r&&t[e]===a[e];e++);var R=r-e;for(i=1;i<=R&&t[r-i]===a[d-i];i++);return Ws=a.slice(e,1<i?1-i:void 0)}function $s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Us(){return!0}function Zl(){return!1}function At(e){function t(r,i,a,d,R){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=d,this.target=R,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(r=e[F],this[F]=r?r(d):d[F]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Us:Zl,this.isPropagationStopped=Zl,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),t}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ho=At(pi),Xi=P({},pi,{view:0,detail:0}),Wu=At(Xi),fo,po,Qi,Ks=P({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qi&&(Qi&&e.type==="mousemove"?(fo=e.screenX-Qi.screenX,po=e.screenY-Qi.screenY):po=fo=0,Qi=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:po}}),ea=At(Ks),$u=P({},Ks,{dataTransfer:0}),Uu=At($u),Ku=P({},Xi,{relatedTarget:0}),_o=At(Ku),Vu=P({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=At(Vu),Gu=P({},pi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ju=At(Gu),Xu=P({},pi,{data:0}),ta=At(Xu),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zu[e])?!!t[e]:!1}function go(){return eh}var th=P({},Xi,{key:function(e){if(e.key){var t=Qu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(e){return e.type==="keypress"?$s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rh=At(th),ih=P({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ra=At(ih),sh=P({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),nh=At(sh),oh=P({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=At(oh),ah=P({},Ks,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ch=At(ah),uh=[9,13,27,32],vo=c&&"CompositionEvent"in window,Yi=null;c&&"documentMode"in document&&(Yi=document.documentMode);var hh=c&&"TextEvent"in window&&!Yi,ia=c&&(!vo||Yi&&8<Yi&&11>=Yi),sa=" ",na=!1;function oa(e,t){switch(e){case"keyup":return uh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function la(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function dh(e,t){switch(e){case"compositionend":return la(t);case"keypress":return t.which!==32?null:(na=!0,sa);case"textInput":return e=t.data,e===sa&&na?null:e;default:return null}}function fh(e,t){if(_i)return e==="compositionend"||!vo&&oa(e,t)?(e=Yl(),Ws=uo=kr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ia&&t.locale!=="ko"?null:t.data;default:return null}}var ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ph[e.type]:t==="textarea"}function ca(e,t,r,i){Vn(i),t=Xs(t,"onChange"),0<t.length&&(r=new ho("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Zi=null,es=null;function _h(e){Ra(e,0)}function Vs(e){var t=Si(e);if(we(t))return e}function gh(e,t){if(e==="change")return t}var ua=!1;if(c){var mo;if(c){var yo="oninput"in document;if(!yo){var ha=document.createElement("div");ha.setAttribute("oninput","return;"),yo=typeof ha.oninput=="function"}mo=yo}else mo=!1;ua=mo&&(!document.documentMode||9<document.documentMode)}function da(){Zi&&(Zi.detachEvent("onpropertychange",fa),es=Zi=null)}function fa(e){if(e.propertyName==="value"&&Vs(es)){var t=[];ca(t,es,e,ji(e)),Hi(_h,t)}}function vh(e,t,r){e==="focusin"?(da(),Zi=t,es=r,Zi.attachEvent("onpropertychange",fa)):e==="focusout"&&da()}function mh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(es)}function yh(e,t){if(e==="click")return Vs(t)}function Sh(e,t){if(e==="input"||e==="change")return Vs(t)}function Ch(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:Ch;function ts(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!u.call(t,a)||!Qt(e[a],t[a]))return!1}return!0}function pa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _a(e,t){var r=pa(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pa(r)}}function ga(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ga(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function va(){for(var e=window,t=Fe();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fe(e.document)}return t}function So(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wh(e){var t=va(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ga(r.ownerDocument.documentElement,r)){if(i!==null&&So(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,d=Math.min(i.start,a);i=i.end===void 0?d:Math.min(i.end,a),!e.extend&&d>i&&(a=i,i=d,d=a),a=_a(r,d);var R=_a(r,i);a&&R&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==R.node||e.focusOffset!==R.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(R.node,R.offset)):(t.setEnd(R.node,R.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xh=c&&"documentMode"in document&&11>=document.documentMode,gi=null,Co=null,rs=null,wo=!1;function ma(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wo||gi==null||gi!==Fe(i)||(i=gi,"selectionStart"in i&&So(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rs&&ts(rs,i)||(rs=i,i=Xs(Co,"onSelect"),0<i.length&&(t=new ho("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=gi)))}function qs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vi={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionend:qs("Transition","TransitionEnd")},xo={},ya={};c&&(ya=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Gs(e){if(xo[e])return xo[e];if(!vi[e])return e;var t=vi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ya)return xo[e]=t[r];return e}var Sa=Gs("animationend"),Ca=Gs("animationiteration"),wa=Gs("animationstart"),xa=Gs("transitionend"),ba=new Map,ka="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){ba.set(e,t),ge(t,[e])}for(var bo=0;bo<ka.length;bo++){var ko=ka[bo],bh=ko.toLowerCase(),kh=ko[0].toUpperCase()+ko.slice(1);Er(bh,"on"+kh)}Er(Sa,"onAnimationEnd"),Er(Ca,"onAnimationIteration"),Er(wa,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(xa,"onTransitionEnd"),U("onMouseEnter",["mouseout","mouseover"]),U("onMouseLeave",["mouseout","mouseover"]),U("onPointerEnter",["pointerout","pointerover"]),U("onPointerLeave",["pointerout","pointerover"]),ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eh=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function Ea(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Xn(i,t,void 0,e),e.currentTarget=null}function Ra(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var R=i.length-1;0<=R;R--){var F=i[R],$=F.instance,re=F.currentTarget;if(F=F.listener,$!==d&&a.isPropagationStopped())break e;Ea(a,F,re),d=$}else for(R=0;R<i.length;R++){if(F=i[R],$=F.instance,re=F.currentTarget,F=F.listener,$!==d&&a.isPropagationStopped())break e;Ea(a,F,re),d=$}}}if(li)throw e=Ni,li=!1,Ni=null,e}function Ge(e,t){var r=t[Ao];r===void 0&&(r=t[Ao]=new Set);var i=e+"__bubble";r.has(i)||(La(t,e,2,!1),r.add(i))}function Eo(e,t,r){var i=0;t&&(i|=4),La(r,e,i,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function ss(e){if(!e[Js]){e[Js]=!0,ee.forEach(function(r){r!=="selectionchange"&&(Eh.has(r)||Eo(r,!1,e),Eo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Eo("selectionchange",!1,t))}}function La(e,t,r,i){switch(Ql(t)){case 1:var a=Nu;break;case 4:a=zu;break;default:a=ao}r=a.bind(null,t,r,e),a=void 0,!wr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ro(e,t,r,i,a){var d=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var R=i.tag;if(R===3||R===4){var F=i.stateNode.containerInfo;if(F===a||F.nodeType===8&&F.parentNode===a)break;if(R===4)for(R=i.return;R!==null;){var $=R.tag;if(($===3||$===4)&&($=R.stateNode.containerInfo,$===a||$.nodeType===8&&$.parentNode===a))return;R=R.return}for(;F!==null;){if(R=Gr(F),R===null)return;if($=R.tag,$===5||$===6){i=d=R;continue e}F=F.parentNode}}i=i.return}Hi(function(){var re=d,_e=ji(r),me=[];e:{var fe=ba.get(e);if(fe!==void 0){var Re=ho,Te=e;switch(e){case"keypress":if($s(r)===0)break e;case"keydown":case"keyup":Re=rh;break;case"focusin":Te="focus",Re=_o;break;case"focusout":Te="blur",Re=_o;break;case"beforeblur":case"afterblur":Re=_o;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=ea;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=nh;break;case Sa:case Ca:case wa:Re=qu;break;case xa:Re=lh;break;case"scroll":Re=Wu;break;case"wheel":Re=ch;break;case"copy":case"cut":case"paste":Re=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=ra}var Me=(t&4)!==0,it=!Me&&e==="scroll",Y=Me?fe!==null?fe+"Capture":null:fe;Me=[];for(var K=re,Z;K!==null;){Z=K;var Ce=Z.stateNode;if(Z.tag===5&&Ce!==null&&(Z=Ce,Y!==null&&(Ce=Ur(K,Y),Ce!=null&&Me.push(ns(K,Ce,Z)))),it)break;K=K.return}0<Me.length&&(fe=new Re(fe,Te,null,r,_e),me.push({event:fe,listeners:Me}))}}if((t&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",Re=e==="mouseout"||e==="pointerout",fe&&r!==zr&&(Te=r.relatedTarget||r.fromElement)&&(Gr(Te)||Te[pr]))break e;if((Re||fe)&&(fe=_e.window===_e?_e:(fe=_e.ownerDocument)?fe.defaultView||fe.parentWindow:window,Re?(Te=r.relatedTarget||r.toElement,Re=re,Te=Te?Gr(Te):null,Te!==null&&(it=ir(Te),Te!==it||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(Re=null,Te=re),Re!==Te)){if(Me=ea,Ce="onMouseLeave",Y="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(Me=ra,Ce="onPointerLeave",Y="onPointerEnter",K="pointer"),it=Re==null?fe:Si(Re),Z=Te==null?fe:Si(Te),fe=new Me(Ce,K+"leave",Re,r,_e),fe.target=it,fe.relatedTarget=Z,Ce=null,Gr(_e)===re&&(Me=new Me(Y,K+"enter",Te,r,_e),Me.target=Z,Me.relatedTarget=it,Ce=Me),it=Ce,Re&&Te)t:{for(Me=Re,Y=Te,K=0,Z=Me;Z;Z=mi(Z))K++;for(Z=0,Ce=Y;Ce;Ce=mi(Ce))Z++;for(;0<K-Z;)Me=mi(Me),K--;for(;0<Z-K;)Y=mi(Y),Z--;for(;K--;){if(Me===Y||Y!==null&&Me===Y.alternate)break t;Me=mi(Me),Y=mi(Y)}Me=null}else Me=null;Re!==null&&Da(me,fe,Re,Me,!1),Te!==null&&it!==null&&Da(me,it,Te,Me,!0)}}e:{if(fe=re?Si(re):window,Re=fe.nodeName&&fe.nodeName.toLowerCase(),Re==="select"||Re==="input"&&fe.type==="file")var Pe=gh;else if(aa(fe))if(ua)Pe=Sh;else{Pe=mh;var Be=vh}else(Re=fe.nodeName)&&Re.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Pe=yh);if(Pe&&(Pe=Pe(e,re))){ca(me,Pe,r,_e);break e}Be&&Be(e,fe,re),e==="focusout"&&(Be=fe._wrapperState)&&Be.controlled&&fe.type==="number"&&ar(fe,"number",fe.value)}switch(Be=re?Si(re):window,e){case"focusin":(aa(Be)||Be.contentEditable==="true")&&(gi=Be,Co=re,rs=null);break;case"focusout":rs=Co=gi=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,ma(me,r,_e);break;case"selectionchange":if(xh)break;case"keydown":case"keyup":ma(me,r,_e)}var Ie;if(vo)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else _i?oa(e,r)&&(je="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(je="onCompositionStart");je&&(ia&&r.locale!=="ko"&&(_i||je!=="onCompositionStart"?je==="onCompositionEnd"&&_i&&(Ie=Yl()):(kr=_e,uo="value"in kr?kr.value:kr.textContent,_i=!0)),Be=Xs(re,je),0<Be.length&&(je=new ta(je,e,null,r,_e),me.push({event:je,listeners:Be}),Ie?je.data=Ie:(Ie=la(r),Ie!==null&&(je.data=Ie)))),(Ie=hh?dh(e,r):fh(e,r))&&(re=Xs(re,"onBeforeInput"),0<re.length&&(_e=new ta("onBeforeInput","beforeinput",null,r,_e),me.push({event:_e,listeners:re}),_e.data=Ie))}Ra(me,t)})}function ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xs(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,d=a.stateNode;a.tag===5&&d!==null&&(a=d,d=Ur(e,r),d!=null&&i.unshift(ns(e,d,a)),d=Ur(e,t),d!=null&&i.push(ns(e,d,a))),e=e.return}return i}function mi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Da(e,t,r,i,a){for(var d=t._reactName,R=[];r!==null&&r!==i;){var F=r,$=F.alternate,re=F.stateNode;if($!==null&&$===i)break;F.tag===5&&re!==null&&(F=re,a?($=Ur(r,d),$!=null&&R.unshift(ns(r,$,F))):a||($=Ur(r,d),$!=null&&R.push(ns(r,$,F)))),r=r.return}R.length!==0&&e.push({event:t,listeners:R})}var Rh=/\r\n?/g,Lh=/\u0000|\uFFFD/g;function Ta(e){return(typeof e=="string"?e:""+e).replace(Rh,`
`).replace(Lh,"")}function Qs(e,t,r){if(t=Ta(t),Ta(e)!==t&&r)throw Error(D(425))}function Ys(){}var Lo=null,Do=null;function To(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mo=typeof setTimeout=="function"?setTimeout:void 0,Dh=typeof clearTimeout=="function"?clearTimeout:void 0,Ma=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof Ma<"u"?function(e){return Ma.resolve(null).then(e).catch(Mh)}:Mo;function Mh(e){setTimeout(function(){throw e})}function Po(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),Ji(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);Ji(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yi=Math.random().toString(36).slice(2),sr="__reactFiber$"+yi,os="__reactProps$"+yi,pr="__reactContainer$"+yi,Ao="__reactEvents$"+yi,Ph="__reactListeners$"+yi,Ah="__reactHandles$"+yi;function Gr(e){var t=e[sr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pr]||r[sr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Pa(e);e!==null;){if(r=e[sr])return r;e=Pa(e)}return t}e=r,r=e.parentNode}return null}function ls(e){return e=e[sr]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Si(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Zs(e){return e[os]||null}var Bo=[],Ci=-1;function Lr(e){return{current:e}}function Je(e){0>Ci||(e.current=Bo[Ci],Bo[Ci]=null,Ci--)}function qe(e,t){Ci++,Bo[Ci]=e.current,e.current=t}var Dr={},mt=Lr(Dr),bt=Lr(!1),Jr=Dr;function wi(e,t){var r=e.type.contextTypes;if(!r)return Dr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},d;for(d in r)a[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function kt(e){return e=e.childContextTypes,e!=null}function en(){Je(bt),Je(mt)}function Aa(e,t,r){if(mt.current!==Dr)throw Error(D(168));qe(mt,t),qe(bt,r)}function Ba(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(D(108,q(e)||"Unknown",a));return P({},r,i)}function tn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Jr=mt.current,qe(mt,e),qe(bt,bt.current),!0}function Ia(e,t,r){var i=e.stateNode;if(!i)throw Error(D(169));r?(e=Ba(e,t,Jr),i.__reactInternalMemoizedMergedChildContext=e,Je(bt),Je(mt),qe(mt,e)):Je(bt),qe(bt,r)}var _r=null,rn=!1,Io=!1;function Oa(e){_r===null?_r=[e]:_r.push(e)}function Bh(e){rn=!0,Oa(e)}function Tr(){if(!Io&&_r!==null){Io=!0;var e=0,t=v;try{var r=_r;for(v=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}_r=null,rn=!1}catch(a){throw _r!==null&&(_r=_r.slice(e+1)),Is(zt,Tr),a}finally{v=t,Io=!1}}return null}var xi=[],bi=0,sn=null,nn=0,$t=[],Ut=0,Xr=null,gr=1,vr="";function Qr(e,t){xi[bi++]=nn,xi[bi++]=sn,sn=e,nn=t}function ja(e,t,r){$t[Ut++]=gr,$t[Ut++]=vr,$t[Ut++]=Xr,Xr=e;var i=gr;e=vr;var a=32-vt(i)-1;i&=~(1<<a),r+=1;var d=32-vt(t)+a;if(30<d){var R=a-a%5;d=(i&(1<<R)-1).toString(32),i>>=R,a-=R,gr=1<<32-vt(t)+a|r<<a|i,vr=d+e}else gr=1<<d|r<<a|i,vr=e}function Oo(e){e.return!==null&&(Qr(e,1),ja(e,1,0))}function jo(e){for(;e===sn;)sn=xi[--bi],xi[bi]=null,nn=xi[--bi],xi[bi]=null;for(;e===Xr;)Xr=$t[--Ut],$t[Ut]=null,vr=$t[--Ut],$t[Ut]=null,gr=$t[--Ut],$t[Ut]=null}var Bt=null,It=null,Ye=!1,Yt=null;function Fa(e,t){var r=Gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ha(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bt=e,It=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bt=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xr!==null?{id:gr,overflow:vr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Bt=e,It=null,!0):!1;default:return!1}}function Fo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ho(e){if(Ye){var t=It;if(t){var r=t;if(!Ha(e,t)){if(Fo(e))throw Error(D(418));t=Rr(r.nextSibling);var i=Bt;t&&Ha(e,t)?Fa(i,r):(e.flags=e.flags&-4097|2,Ye=!1,Bt=e)}}else{if(Fo(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ye=!1,Bt=e}}}function Na(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bt=e}function on(e){if(e!==Bt)return!1;if(!Ye)return Na(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!To(e.type,e.memoizedProps)),t&&(t=It)){if(Fo(e))throw za(),Error(D(418));for(;t;)Fa(e,t),t=Rr(t.nextSibling)}if(Na(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){It=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}It=null}}else It=Bt?Rr(e.stateNode.nextSibling):null;return!0}function za(){for(var e=It;e;)e=Rr(e.nextSibling)}function ki(){It=Bt=null,Ye=!1}function No(e){Yt===null?Yt=[e]:Yt.push(e)}var Ih=f.ReactCurrentBatchConfig;function as(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var i=r.stateNode}if(!i)throw Error(D(147,e));var a=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(R){var F=a.refs;R===null?delete F[d]:F[d]=R},t._stringRef=d,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function ln(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){var t=e._init;return t(e._payload)}function $a(e){function t(Y,K){if(e){var Z=Y.deletions;Z===null?(Y.deletions=[K],Y.flags|=16):Z.push(K)}}function r(Y,K){if(!e)return null;for(;K!==null;)t(Y,K),K=K.sibling;return null}function i(Y,K){for(Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function a(Y,K){return Y=Fr(Y,K),Y.index=0,Y.sibling=null,Y}function d(Y,K,Z){return Y.index=Z,e?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<K?(Y.flags|=2,K):Z):(Y.flags|=2,K)):(Y.flags|=1048576,K)}function R(Y){return e&&Y.alternate===null&&(Y.flags|=2),Y}function F(Y,K,Z,Ce){return K===null||K.tag!==6?(K=Ml(Z,Y.mode,Ce),K.return=Y,K):(K=a(K,Z),K.return=Y,K)}function $(Y,K,Z,Ce){var Pe=Z.type;return Pe===x?_e(Y,K,Z.props.children,Ce,Z.key):K!==null&&(K.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===he&&Wa(Pe)===K.type)?(Ce=a(K,Z.props),Ce.ref=as(Y,K,Z),Ce.return=Y,Ce):(Ce=Mn(Z.type,Z.key,Z.props,null,Y.mode,Ce),Ce.ref=as(Y,K,Z),Ce.return=Y,Ce)}function re(Y,K,Z,Ce){return K===null||K.tag!==4||K.stateNode.containerInfo!==Z.containerInfo||K.stateNode.implementation!==Z.implementation?(K=Pl(Z,Y.mode,Ce),K.return=Y,K):(K=a(K,Z.children||[]),K.return=Y,K)}function _e(Y,K,Z,Ce,Pe){return K===null||K.tag!==7?(K=ni(Z,Y.mode,Ce,Pe),K.return=Y,K):(K=a(K,Z),K.return=Y,K)}function me(Y,K,Z){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Ml(""+K,Y.mode,Z),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return Z=Mn(K.type,K.key,K.props,null,Y.mode,Z),Z.ref=as(Y,null,K),Z.return=Y,Z;case S:return K=Pl(K,Y.mode,Z),K.return=Y,K;case he:var Ce=K._init;return me(Y,Ce(K._payload),Z)}if(Xt(K)||k(K))return K=ni(K,Y.mode,Z,null),K.return=Y,K;ln(Y,K)}return null}function fe(Y,K,Z,Ce){var Pe=K!==null?K.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Pe!==null?null:F(Y,K,""+Z,Ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return Z.key===Pe?$(Y,K,Z,Ce):null;case S:return Z.key===Pe?re(Y,K,Z,Ce):null;case he:return Pe=Z._init,fe(Y,K,Pe(Z._payload),Ce)}if(Xt(Z)||k(Z))return Pe!==null?null:_e(Y,K,Z,Ce,null);ln(Y,Z)}return null}function Re(Y,K,Z,Ce,Pe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Y=Y.get(Z)||null,F(K,Y,""+Ce,Pe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case C:return Y=Y.get(Ce.key===null?Z:Ce.key)||null,$(K,Y,Ce,Pe);case S:return Y=Y.get(Ce.key===null?Z:Ce.key)||null,re(K,Y,Ce,Pe);case he:var Be=Ce._init;return Re(Y,K,Z,Be(Ce._payload),Pe)}if(Xt(Ce)||k(Ce))return Y=Y.get(Z)||null,_e(K,Y,Ce,Pe,null);ln(K,Ce)}return null}function Te(Y,K,Z,Ce){for(var Pe=null,Be=null,Ie=K,je=K=0,ut=null;Ie!==null&&je<Z.length;je++){Ie.index>je?(ut=Ie,Ie=null):ut=Ie.sibling;var We=fe(Y,Ie,Z[je],Ce);if(We===null){Ie===null&&(Ie=ut);break}e&&Ie&&We.alternate===null&&t(Y,Ie),K=d(We,K,je),Be===null?Pe=We:Be.sibling=We,Be=We,Ie=ut}if(je===Z.length)return r(Y,Ie),Ye&&Qr(Y,je),Pe;if(Ie===null){for(;je<Z.length;je++)Ie=me(Y,Z[je],Ce),Ie!==null&&(K=d(Ie,K,je),Be===null?Pe=Ie:Be.sibling=Ie,Be=Ie);return Ye&&Qr(Y,je),Pe}for(Ie=i(Y,Ie);je<Z.length;je++)ut=Re(Ie,Y,je,Z[je],Ce),ut!==null&&(e&&ut.alternate!==null&&Ie.delete(ut.key===null?je:ut.key),K=d(ut,K,je),Be===null?Pe=ut:Be.sibling=ut,Be=ut);return e&&Ie.forEach(function(Hr){return t(Y,Hr)}),Ye&&Qr(Y,je),Pe}function Me(Y,K,Z,Ce){var Pe=k(Z);if(typeof Pe!="function")throw Error(D(150));if(Z=Pe.call(Z),Z==null)throw Error(D(151));for(var Be=Pe=null,Ie=K,je=K=0,ut=null,We=Z.next();Ie!==null&&!We.done;je++,We=Z.next()){Ie.index>je?(ut=Ie,Ie=null):ut=Ie.sibling;var Hr=fe(Y,Ie,We.value,Ce);if(Hr===null){Ie===null&&(Ie=ut);break}e&&Ie&&Hr.alternate===null&&t(Y,Ie),K=d(Hr,K,je),Be===null?Pe=Hr:Be.sibling=Hr,Be=Hr,Ie=ut}if(We.done)return r(Y,Ie),Ye&&Qr(Y,je),Pe;if(Ie===null){for(;!We.done;je++,We=Z.next())We=me(Y,We.value,Ce),We!==null&&(K=d(We,K,je),Be===null?Pe=We:Be.sibling=We,Be=We);return Ye&&Qr(Y,je),Pe}for(Ie=i(Y,Ie);!We.done;je++,We=Z.next())We=Re(Ie,Y,je,We.value,Ce),We!==null&&(e&&We.alternate!==null&&Ie.delete(We.key===null?je:We.key),K=d(We,K,je),Be===null?Pe=We:Be.sibling=We,Be=We);return e&&Ie.forEach(function(pd){return t(Y,pd)}),Ye&&Qr(Y,je),Pe}function it(Y,K,Z,Ce){if(typeof Z=="object"&&Z!==null&&Z.type===x&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:e:{for(var Pe=Z.key,Be=K;Be!==null;){if(Be.key===Pe){if(Pe=Z.type,Pe===x){if(Be.tag===7){r(Y,Be.sibling),K=a(Be,Z.props.children),K.return=Y,Y=K;break e}}else if(Be.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===he&&Wa(Pe)===Be.type){r(Y,Be.sibling),K=a(Be,Z.props),K.ref=as(Y,Be,Z),K.return=Y,Y=K;break e}r(Y,Be);break}else t(Y,Be);Be=Be.sibling}Z.type===x?(K=ni(Z.props.children,Y.mode,Ce,Z.key),K.return=Y,Y=K):(Ce=Mn(Z.type,Z.key,Z.props,null,Y.mode,Ce),Ce.ref=as(Y,K,Z),Ce.return=Y,Y=Ce)}return R(Y);case S:e:{for(Be=Z.key;K!==null;){if(K.key===Be)if(K.tag===4&&K.stateNode.containerInfo===Z.containerInfo&&K.stateNode.implementation===Z.implementation){r(Y,K.sibling),K=a(K,Z.children||[]),K.return=Y,Y=K;break e}else{r(Y,K);break}else t(Y,K);K=K.sibling}K=Pl(Z,Y.mode,Ce),K.return=Y,Y=K}return R(Y);case he:return Be=Z._init,it(Y,K,Be(Z._payload),Ce)}if(Xt(Z))return Te(Y,K,Z,Ce);if(k(Z))return Me(Y,K,Z,Ce);ln(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,K!==null&&K.tag===6?(r(Y,K.sibling),K=a(K,Z),K.return=Y,Y=K):(r(Y,K),K=Ml(Z,Y.mode,Ce),K.return=Y,Y=K),R(Y)):r(Y,K)}return it}var Ei=$a(!0),Ua=$a(!1),an=Lr(null),cn=null,Ri=null,zo=null;function Wo(){zo=Ri=cn=null}function $o(e){var t=an.current;Je(an),e._currentValue=t}function Uo(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Li(e,t){cn=e,zo=Ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Et=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(zo!==e)if(e={context:e,memoizedValue:t,next:null},Ri===null){if(cn===null)throw Error(D(308));Ri=e,cn.dependencies={lanes:0,firstContext:e}}else Ri=Ri.next=e;return t}var Yr=null;function Ko(e){Yr===null?Yr=[e]:Yr.push(e)}function Ka(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,Ko(t)):(r.next=a.next,a.next=r),t.interleaved=r,mr(e,i)}function mr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Mr=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ne&2)!==0){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,mr(e,r)}return a=i.interleaved,a===null?(t.next=t,Ko(i)):(t.next=a.next,a.next=t),i.interleaved=t,mr(e,r)}function un(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Vi(e,r)}}function qa(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var R={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?a=d=R:d=d.next=R,r=r.next}while(r!==null);d===null?a=d=t:d=d.next=t}else a=d=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hn(e,t,r,i){var a=e.updateQueue;Mr=!1;var d=a.firstBaseUpdate,R=a.lastBaseUpdate,F=a.shared.pending;if(F!==null){a.shared.pending=null;var $=F,re=$.next;$.next=null,R===null?d=re:R.next=re,R=$;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,F=_e.lastBaseUpdate,F!==R&&(F===null?_e.firstBaseUpdate=re:F.next=re,_e.lastBaseUpdate=$))}if(d!==null){var me=a.baseState;R=0,_e=re=$=null,F=d;do{var fe=F.lane,Re=F.eventTime;if((i&fe)===fe){_e!==null&&(_e=_e.next={eventTime:Re,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Te=e,Me=F;switch(fe=t,Re=r,Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){me=Te.call(Re,me,fe);break e}me=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,fe=typeof Te=="function"?Te.call(Re,me,fe):Te,fe==null)break e;me=P({},me,fe);break e;case 2:Mr=!0}}F.callback!==null&&F.lane!==0&&(e.flags|=64,fe=a.effects,fe===null?a.effects=[F]:fe.push(F))}else Re={eventTime:Re,lane:fe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},_e===null?(re=_e=Re,$=me):_e=_e.next=Re,R|=fe;if(F=F.next,F===null){if(F=a.shared.pending,F===null)break;fe=F,F=fe.next,fe.next=null,a.lastBaseUpdate=fe,a.shared.pending=null}}while(!0);if(_e===null&&($=me),a.baseState=$,a.firstBaseUpdate=re,a.lastBaseUpdate=_e,t=a.shared.interleaved,t!==null){a=t;do R|=a.lane,a=a.next;while(a!==t)}else d===null&&(a.shared.lanes=0);ti|=R,e.lanes=R,e.memoizedState=me}}function Ga(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(D(191,a));a.call(i)}}}var cs={},nr=Lr(cs),us=Lr(cs),hs=Lr(cs);function Zr(e){if(e===cs)throw Error(D(174));return e}function qo(e,t){switch(qe(hs,t),qe(us,e),qe(nr,cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ur(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ur(t,e)}Je(nr),qe(nr,t)}function Di(){Je(nr),Je(us),Je(hs)}function Ja(e){Zr(hs.current);var t=Zr(nr.current),r=ur(t,e.type);t!==r&&(qe(us,e),qe(nr,r))}function Go(e){us.current===e&&(Je(nr),Je(us))}var Ze=Lr(0);function dn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=[];function Xo(){for(var e=0;e<Jo.length;e++)Jo[e]._workInProgressVersionPrimary=null;Jo.length=0}var fn=f.ReactCurrentDispatcher,Qo=f.ReactCurrentBatchConfig,ei=0,et=null,nt=null,at=null,pn=!1,ds=!1,fs=0,Oh=0;function yt(){throw Error(D(321))}function Yo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qt(e[r],t[r]))return!1;return!0}function Zo(e,t,r,i,a,d){if(ei=d,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fn.current=e===null||e.memoizedState===null?Nh:zh,e=r(i,a),ds){d=0;do{if(ds=!1,fs=0,25<=d)throw Error(D(301));d+=1,at=nt=null,t.updateQueue=null,fn.current=Wh,e=r(i,a)}while(ds)}if(fn.current=vn,t=nt!==null&&nt.next!==null,ei=0,at=nt=et=null,pn=!1,t)throw Error(D(300));return e}function el(){var e=fs!==0;return fs=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?et.memoizedState=at=e:at=at.next=e,at}function Vt(){if(nt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=at===null?et.memoizedState:at.next;if(t!==null)at=t,nt=e;else{if(e===null)throw Error(D(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?et.memoizedState=at=e:at=at.next=e}return at}function ps(e,t){return typeof t=="function"?t(e):t}function tl(e){var t=Vt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var i=nt,a=i.baseQueue,d=r.pending;if(d!==null){if(a!==null){var R=a.next;a.next=d.next,d.next=R}i.baseQueue=a=d,r.pending=null}if(a!==null){d=a.next,i=i.baseState;var F=R=null,$=null,re=d;do{var _e=re.lane;if((ei&_e)===_e)$!==null&&($=$.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),i=re.hasEagerState?re.eagerState:e(i,re.action);else{var me={lane:_e,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};$===null?(F=$=me,R=i):$=$.next=me,et.lanes|=_e,ti|=_e}re=re.next}while(re!==null&&re!==d);$===null?R=i:$.next=F,Qt(i,t.memoizedState)||(Et=!0),t.memoizedState=i,t.baseState=R,t.baseQueue=$,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do d=a.lane,et.lanes|=d,ti|=d,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function rl(e){var t=Vt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,d=t.memoizedState;if(a!==null){r.pending=null;var R=a=a.next;do d=e(d,R.action),R=R.next;while(R!==a);Qt(d,t.memoizedState)||(Et=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,i]}function Xa(){}function Qa(e,t){var r=et,i=Vt(),a=t(),d=!Qt(i.memoizedState,a);if(d&&(i.memoizedState=a,Et=!0),i=i.queue,il(ec.bind(null,r,i,e),[e]),i.getSnapshot!==t||d||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,_s(9,Za.bind(null,r,i,a,t),void 0,null),ct===null)throw Error(D(349));(ei&30)!==0||Ya(r,t,a)}return a}function Ya(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=et.updateQueue,t===null?(t={lastEffect:null,stores:null},et.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Za(e,t,r,i){t.value=r,t.getSnapshot=i,tc(t)&&rc(e)}function ec(e,t,r){return r(function(){tc(t)&&rc(e)})}function tc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qt(e,r)}catch{return!0}}function rc(e){var t=mr(e,1);t!==null&&rr(t,e,1,-1)}function ic(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=Hh.bind(null,et,e),[t.memoizedState,e]}function _s(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=et.updateQueue,t===null?(t={lastEffect:null,stores:null},et.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function sc(){return Vt().memoizedState}function _n(e,t,r,i){var a=or();et.flags|=e,a.memoizedState=_s(1|t,r,void 0,i===void 0?null:i)}function gn(e,t,r,i){var a=Vt();i=i===void 0?null:i;var d=void 0;if(nt!==null){var R=nt.memoizedState;if(d=R.destroy,i!==null&&Yo(i,R.deps)){a.memoizedState=_s(t,r,d,i);return}}et.flags|=e,a.memoizedState=_s(1|t,r,d,i)}function nc(e,t){return _n(8390656,8,e,t)}function il(e,t){return gn(2048,8,e,t)}function oc(e,t){return gn(4,2,e,t)}function lc(e,t){return gn(4,4,e,t)}function ac(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cc(e,t,r){return r=r!=null?r.concat([e]):null,gn(4,4,ac.bind(null,t,e),r)}function sl(){}function uc(e,t){var r=Vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Yo(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function hc(e,t){var r=Vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Yo(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function dc(e,t,r){return(ei&21)===0?(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=r):(Qt(r,t)||(r=Hs(),et.lanes|=r,ti|=r,e.baseState=!0),t)}function jh(e,t){var r=v;v=r!==0&&4>r?r:4,e(!0);var i=Qo.transition;Qo.transition={};try{e(!1),t()}finally{v=r,Qo.transition=i}}function fc(){return Vt().memoizedState}function Fh(e,t,r){var i=Or(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},pc(e))_c(t,r);else if(r=Ka(e,t,r,i),r!==null){var a=xt();rr(r,e,i,a),gc(r,t,i)}}function Hh(e,t,r){var i=Or(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(pc(e))_c(t,a);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var R=t.lastRenderedState,F=d(R,r);if(a.hasEagerState=!0,a.eagerState=F,Qt(F,R)){var $=t.interleaved;$===null?(a.next=a,Ko(t)):(a.next=$.next,$.next=a),t.interleaved=a;return}}catch{}finally{}r=Ka(e,t,a,i),r!==null&&(a=xt(),rr(r,e,i,a),gc(r,t,i))}}function pc(e){var t=e.alternate;return e===et||t!==null&&t===et}function _c(e,t){ds=pn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gc(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Vi(e,r)}}var vn={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Nh={readContext:Kt,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:nc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_n(4194308,4,ac.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _n(4194308,4,e,t)},useInsertionEffect:function(e,t){return _n(4,2,e,t)},useMemo:function(e,t){var r=or();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=or();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Fh.bind(null,et,e),[i.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:ic,useDebugValue:sl,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=ic(!1),t=e[0];return e=jh.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=et,a=or();if(Ye){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),ct===null)throw Error(D(349));(ei&30)!==0||Ya(i,t,r)}a.memoizedState=r;var d={value:r,getSnapshot:t};return a.queue=d,nc(ec.bind(null,i,d,e),[e]),i.flags|=2048,_s(9,Za.bind(null,i,d,r,t),void 0,null),r},useId:function(){var e=or(),t=ct.identifierPrefix;if(Ye){var r=vr,i=gr;r=(i&~(1<<32-vt(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=fs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Oh++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zh={readContext:Kt,useCallback:uc,useContext:Kt,useEffect:il,useImperativeHandle:cc,useInsertionEffect:oc,useLayoutEffect:lc,useMemo:hc,useReducer:tl,useRef:sc,useState:function(){return tl(ps)},useDebugValue:sl,useDeferredValue:function(e){var t=Vt();return dc(t,nt.memoizedState,e)},useTransition:function(){var e=tl(ps)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:Xa,useSyncExternalStore:Qa,useId:fc,unstable_isNewReconciler:!1},Wh={readContext:Kt,useCallback:uc,useContext:Kt,useEffect:il,useImperativeHandle:cc,useInsertionEffect:oc,useLayoutEffect:lc,useMemo:hc,useReducer:rl,useRef:sc,useState:function(){return rl(ps)},useDebugValue:sl,useDeferredValue:function(e){var t=Vt();return nt===null?t.memoizedState=e:dc(t,nt.memoizedState,e)},useTransition:function(){var e=rl(ps)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:Xa,useSyncExternalStore:Qa,useId:fc,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=P({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function nl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:P({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mn={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=xt(),a=Or(e),d=yr(i,a);d.payload=t,r!=null&&(d.callback=r),t=Pr(e,d,a),t!==null&&(rr(t,e,a,i),un(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=xt(),a=Or(e),d=yr(i,a);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Pr(e,d,a),t!==null&&(rr(t,e,a,i),un(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xt(),i=Or(e),a=yr(r,i);a.tag=2,t!=null&&(a.callback=t),t=Pr(e,a,i),t!==null&&(rr(t,e,i,r),un(t,e,i))}};function vc(e,t,r,i,a,d,R){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,R):t.prototype&&t.prototype.isPureReactComponent?!ts(r,i)||!ts(a,d):!0}function mc(e,t,r){var i=!1,a=Dr,d=t.contextType;return typeof d=="object"&&d!==null?d=Kt(d):(a=kt(t)?Jr:mt.current,i=t.contextTypes,d=(i=i!=null)?wi(e,a):Dr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mn,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=d),t}function yc(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&mn.enqueueReplaceState(t,t.state,null)}function ol(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Vo(e);var d=t.contextType;typeof d=="object"&&d!==null?a.context=Kt(d):(d=kt(t)?Jr:mt.current,a.context=wi(e,d)),a.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(nl(e,t,d,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&mn.enqueueReplaceState(a,a.state,null),hn(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ti(e,t){try{var r="",i=t;do r+=de(i),i=i.return;while(i);var a=r}catch(d){a=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:a,digest:null}}function ll(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function al(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $h=typeof WeakMap=="function"?WeakMap:Map;function Sc(e,t,r){r=yr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){kn||(kn=!0,xl=i),al(e,t)},r}function Cc(e,t,r){r=yr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){al(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){al(e,t),typeof i!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var R=t.stack;this.componentDidCatch(t.value,{componentStack:R!==null?R:""})}),r}function wc(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new $h;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=id.bind(null,e,t,r),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bc(e,t,r,i,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=yr(-1,1),t.tag=2,Pr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Uh=f.ReactCurrentOwner,Et=!1;function wt(e,t,r,i){t.child=e===null?Ua(t,null,r,i):Ei(t,e.child,r,i)}function kc(e,t,r,i,a){r=r.render;var d=t.ref;return Li(t,a),i=Zo(e,t,r,i,d,a),r=el(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Sr(e,t,a)):(Ye&&r&&Oo(t),t.flags|=1,wt(e,t,i,a),t.child)}function Ec(e,t,r,i,a){if(e===null){var d=r.type;return typeof d=="function"&&!Tl(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Rc(e,t,d,i,a)):(e=Mn(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&a)===0){var R=d.memoizedProps;if(r=r.compare,r=r!==null?r:ts,r(R,i)&&e.ref===t.ref)return Sr(e,t,a)}return t.flags|=1,e=Fr(d,i),e.ref=t.ref,e.return=t,t.child=e}function Rc(e,t,r,i,a){if(e!==null){var d=e.memoizedProps;if(ts(d,i)&&e.ref===t.ref)if(Et=!1,t.pendingProps=i=d,(e.lanes&a)!==0)(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,Sr(e,t,a)}return cl(e,t,r,i,a)}function Lc(e,t,r){var i=t.pendingProps,a=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Pi,Ot),Ot|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Pi,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:r,qe(Pi,Ot),Ot|=i}else d!==null?(i=d.baseLanes|r,t.memoizedState=null):i=r,qe(Pi,Ot),Ot|=i;return wt(e,t,a,r),t.child}function Dc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function cl(e,t,r,i,a){var d=kt(r)?Jr:mt.current;return d=wi(t,d),Li(t,a),r=Zo(e,t,r,i,d,a),i=el(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Sr(e,t,a)):(Ye&&i&&Oo(t),t.flags|=1,wt(e,t,r,a),t.child)}function Tc(e,t,r,i,a){if(kt(r)){var d=!0;tn(t)}else d=!1;if(Li(t,a),t.stateNode===null)Sn(e,t),mc(t,r,i),ol(t,r,i,a),i=!0;else if(e===null){var R=t.stateNode,F=t.memoizedProps;R.props=F;var $=R.context,re=r.contextType;typeof re=="object"&&re!==null?re=Kt(re):(re=kt(r)?Jr:mt.current,re=wi(t,re));var _e=r.getDerivedStateFromProps,me=typeof _e=="function"||typeof R.getSnapshotBeforeUpdate=="function";me||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==i||$!==re)&&yc(t,R,i,re),Mr=!1;var fe=t.memoizedState;R.state=fe,hn(t,i,R,a),$=t.memoizedState,F!==i||fe!==$||bt.current||Mr?(typeof _e=="function"&&(nl(t,r,_e,i),$=t.memoizedState),(F=Mr||vc(t,r,F,i,fe,$,re))?(me||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(t.flags|=4194308)):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=$),R.props=i,R.state=$,R.context=re,i=F):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{R=t.stateNode,Va(e,t),F=t.memoizedProps,re=t.type===t.elementType?F:Zt(t.type,F),R.props=re,me=t.pendingProps,fe=R.context,$=r.contextType,typeof $=="object"&&$!==null?$=Kt($):($=kt(r)?Jr:mt.current,$=wi(t,$));var Re=r.getDerivedStateFromProps;(_e=typeof Re=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==me||fe!==$)&&yc(t,R,i,$),Mr=!1,fe=t.memoizedState,R.state=fe,hn(t,i,R,a);var Te=t.memoizedState;F!==me||fe!==Te||bt.current||Mr?(typeof Re=="function"&&(nl(t,r,Re,i),Te=t.memoizedState),(re=Mr||vc(t,r,re,i,fe,Te,$)||!1)?(_e||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(i,Te,$),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(i,Te,$)),typeof R.componentDidUpdate=="function"&&(t.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof R.componentDidUpdate!="function"||F===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Te),R.props=i,R.state=Te,R.context=$,i=re):(typeof R.componentDidUpdate!="function"||F===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),i=!1)}return ul(e,t,r,i,d,a)}function ul(e,t,r,i,a,d){Dc(e,t);var R=(t.flags&128)!==0;if(!i&&!R)return a&&Ia(t,r,!1),Sr(e,t,d);i=t.stateNode,Uh.current=t;var F=R&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&R?(t.child=Ei(t,e.child,null,d),t.child=Ei(t,null,F,d)):wt(e,t,F,d),t.memoizedState=i.state,a&&Ia(t,r,!0),t.child}function Mc(e){var t=e.stateNode;t.pendingContext?Aa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(e,t.context,!1),qo(e,t.containerInfo)}function Pc(e,t,r,i,a){return ki(),No(a),t.flags|=256,wt(e,t,r,i),t.child}var hl={dehydrated:null,treeContext:null,retryLane:0};function dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ac(e,t,r){var i=t.pendingProps,a=Ze.current,d=!1,R=(t.flags&128)!==0,F;if((F=R)||(F=e!==null&&e.memoizedState===null?!1:(a&2)!==0),F?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),qe(Ze,a&1),e===null)return Ho(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(R=i.children,e=i.fallback,d?(i=t.mode,d=t.child,R={mode:"hidden",children:R},(i&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=R):d=Pn(R,i,0,null),e=ni(e,i,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=dl(r),t.memoizedState=hl,e):fl(t,R));if(a=e.memoizedState,a!==null&&(F=a.dehydrated,F!==null))return Kh(e,t,R,i,F,a,r);if(d){d=i.fallback,R=t.mode,a=e.child,F=a.sibling;var $={mode:"hidden",children:i.children};return(R&1)===0&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=$,t.deletions=null):(i=Fr(a,$),i.subtreeFlags=a.subtreeFlags&14680064),F!==null?d=Fr(F,d):(d=ni(d,R,r,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,R=e.child.memoizedState,R=R===null?dl(r):{baseLanes:R.baseLanes|r,cachePool:null,transitions:R.transitions},d.memoizedState=R,d.childLanes=e.childLanes&~r,t.memoizedState=hl,i}return d=e.child,e=d.sibling,i=Fr(d,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function fl(e,t){return t=Pn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yn(e,t,r,i){return i!==null&&No(i),Ei(t,e.child,null,r),e=fl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kh(e,t,r,i,a,d,R){if(r)return t.flags&256?(t.flags&=-257,i=ll(Error(D(422))),yn(e,t,R,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,a=t.mode,i=Pn({mode:"visible",children:i.children},a,0,null),d=ni(d,a,R,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,(t.mode&1)!==0&&Ei(t,e.child,null,R),t.child.memoizedState=dl(R),t.memoizedState=hl,d);if((t.mode&1)===0)return yn(e,t,R,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var F=i.dgst;return i=F,d=Error(D(419)),i=ll(d,i,void 0),yn(e,t,R,i)}if(F=(R&e.childLanes)!==0,Et||F){if(i=ct,i!==null){switch(R&-R){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(i.suspendedLanes|R))!==0?0:a,a!==0&&a!==d.retryLane&&(d.retryLane=a,mr(e,a),rr(i,e,a,-1))}return Dl(),i=ll(Error(D(421))),yn(e,t,R,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=sd.bind(null,e),a._reactRetry=t,null):(e=d.treeContext,It=Rr(a.nextSibling),Bt=t,Ye=!0,Yt=null,e!==null&&($t[Ut++]=gr,$t[Ut++]=vr,$t[Ut++]=Xr,gr=e.id,vr=e.overflow,Xr=t),t=fl(t,i.children),t.flags|=4096,t)}function Bc(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Uo(e.return,t,r)}function pl(e,t,r,i,a){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=r,d.tailMode=a)}function Ic(e,t,r){var i=t.pendingProps,a=i.revealOrder,d=i.tail;if(wt(e,t,i.children,r),i=Ze.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bc(e,r,t);else if(e.tag===19)Bc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(qe(Ze,i),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&dn(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),pl(t,!1,a,r,d);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&dn(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}pl(t,!0,r,null,d);break;case"together":pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sn(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ti|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=Fr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Vh(e,t,r){switch(t.tag){case 3:Mc(t),ki();break;case 5:Ja(t);break;case 1:kt(t.type)&&tn(t);break;case 4:qo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;qe(an,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(qe(Ze,Ze.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Ac(e,t,r):(qe(Ze,Ze.current&1),e=Sr(e,t,r),e!==null?e.sibling:null);qe(Ze,Ze.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return Ic(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qe(Ze,Ze.current),i)break;return null;case 22:case 23:return t.lanes=0,Lc(e,t,r)}return Sr(e,t,r)}var Oc,_l,jc,Fc;Oc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},_l=function(){},jc=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Zr(nr.current);var d=null;switch(r){case"input":a=ze(e,a),i=ze(e,i),d=[];break;case"select":a=P({},a,{value:void 0}),i=P({},i,{value:void 0}),d=[];break;case"textarea":a=cr(e,a),i=cr(e,i),d=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ys)}Ds(r,i);var R;r=null;for(re in a)if(!i.hasOwnProperty(re)&&a.hasOwnProperty(re)&&a[re]!=null)if(re==="style"){var F=a[re];for(R in F)F.hasOwnProperty(R)&&(r||(r={}),r[R]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(G.hasOwnProperty(re)?d||(d=[]):(d=d||[]).push(re,null));for(re in i){var $=i[re];if(F=a?.[re],i.hasOwnProperty(re)&&$!==F&&($!=null||F!=null))if(re==="style")if(F){for(R in F)!F.hasOwnProperty(R)||$&&$.hasOwnProperty(R)||(r||(r={}),r[R]="");for(R in $)$.hasOwnProperty(R)&&F[R]!==$[R]&&(r||(r={}),r[R]=$[R])}else r||(d||(d=[]),d.push(re,r)),r=$;else re==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(d=d||[]).push(re,$)):re==="children"?typeof $!="string"&&typeof $!="number"||(d=d||[]).push(re,""+$):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(G.hasOwnProperty(re)?($!=null&&re==="onScroll"&&Ge("scroll",e),d||F===$||(d=[])):(d=d||[]).push(re,$))}r&&(d=d||[]).push("style",r);var re=d;(t.updateQueue=re)&&(t.flags|=4)}},Fc=function(e,t,r,i){r!==i&&(t.flags|=4)};function gs(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function qh(e,t,r){var i=t.pendingProps;switch(jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return kt(t.type)&&en(),St(t),null;case 3:return i=t.stateNode,Di(),Je(bt),Je(mt),Xo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(on(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yt!==null&&(El(Yt),Yt=null))),_l(e,t),St(t),null;case 5:Go(t);var a=Zr(hs.current);if(r=t.type,e!==null&&t.stateNode!=null)jc(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(D(166));return St(t),null}if(e=Zr(nr.current),on(t)){i=t.stateNode,r=t.type;var d=t.memoizedProps;switch(i[sr]=t,i[os]=d,e=(t.mode&1)!==0,r){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(a=0;a<is.length;a++)Ge(is[a],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ue(i,d),Ge("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Ge("invalid",i);break;case"textarea":ht(i,d),Ge("invalid",i)}Ds(r,d),a=null;for(var R in d)if(d.hasOwnProperty(R)){var F=d[R];R==="children"?typeof F=="string"?i.textContent!==F&&(d.suppressHydrationWarning!==!0&&Qs(i.textContent,F,e),a=["children",F]):typeof F=="number"&&i.textContent!==""+F&&(d.suppressHydrationWarning!==!0&&Qs(i.textContent,F,e),a=["children",""+F]):G.hasOwnProperty(R)&&F!=null&&R==="onScroll"&&Ge("scroll",i)}switch(r){case"input":Se(i),Tt(i,d,!0);break;case"textarea":Se(i),_t(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=Ys)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{R=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ht(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=R.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=R.createElement(r,{is:i.is}):(e=R.createElement(r),r==="select"&&(R=e,i.multiple?R.multiple=!0:i.size&&(R.size=i.size))):e=R.createElementNS(e,r),e[sr]=t,e[os]=i,Oc(e,t,!1,!1),t.stateNode=e;e:{switch(R=Ts(r,i),r){case"dialog":Ge("cancel",e),Ge("close",e),a=i;break;case"iframe":case"object":case"embed":Ge("load",e),a=i;break;case"video":case"audio":for(a=0;a<is.length;a++)Ge(is[a],e);a=i;break;case"source":Ge("error",e),a=i;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),a=i;break;case"details":Ge("toggle",e),a=i;break;case"input":Ue(e,i),a=ze(e,i),Ge("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=P({},i,{value:void 0}),Ge("invalid",e);break;case"textarea":ht(e,i),a=cr(e,i),Ge("invalid",e);break;default:a=i}Ds(r,a),F=a;for(d in F)if(F.hasOwnProperty(d)){var $=F[d];d==="style"?Un(e,$):d==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&hr(e,$)):d==="children"?typeof $=="string"?(r!=="textarea"||$!=="")&&gt(e,$):typeof $=="number"&&gt(e,""+$):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(G.hasOwnProperty(d)?$!=null&&d==="onScroll"&&Ge("scroll",e):$!=null&&o(e,d,$,R))}switch(r){case"input":Se(e),Tt(e,i,!1);break;case"textarea":Se(e),_t(e);break;case"option":i.value!=null&&e.setAttribute("value",""+M(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?Ft(e,!!i.multiple,d,!1):i.defaultValue!=null&&Ft(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ys)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Fc(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(D(166));if(r=Zr(hs.current),Zr(nr.current),on(t)){if(i=t.stateNode,r=t.memoizedProps,i[sr]=t,(d=i.nodeValue!==r)&&(e=Bt,e!==null))switch(e.tag){case 3:Qs(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qs(i.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[sr]=t,t.stateNode=i}return St(t),null;case 13:if(Je(Ze),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&It!==null&&(t.mode&1)!==0&&(t.flags&128)===0)za(),ki(),t.flags|=98560,d=!1;else if(d=on(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(D(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(D(317));d[sr]=t}else ki(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),d=!1}else Yt!==null&&(El(Yt),Yt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ze.current&1)!==0?ot===0&&(ot=3):Dl())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return Di(),_l(e,t),e===null&&ss(t.stateNode.containerInfo),St(t),null;case 10:return $o(t.type._context),St(t),null;case 17:return kt(t.type)&&en(),St(t),null;case 19:if(Je(Ze),d=t.memoizedState,d===null)return St(t),null;if(i=(t.flags&128)!==0,R=d.rendering,R===null)if(i)gs(d,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(R=dn(e),R!==null){for(t.flags|=128,gs(d,!1),i=R.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)d=r,e=i,d.flags&=14680066,R=d.alternate,R===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=R.childLanes,d.lanes=R.lanes,d.child=R.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=R.memoizedProps,d.memoizedState=R.memoizedState,d.updateQueue=R.updateQueue,d.type=R.type,e=R.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(Ze,Ze.current&1|2),t.child}e=e.sibling}d.tail!==null&&Xe()>Ai&&(t.flags|=128,i=!0,gs(d,!1),t.lanes=4194304)}else{if(!i)if(e=dn(R),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gs(d,!0),d.tail===null&&d.tailMode==="hidden"&&!R.alternate&&!Ye)return St(t),null}else 2*Xe()-d.renderingStartTime>Ai&&r!==1073741824&&(t.flags|=128,i=!0,gs(d,!1),t.lanes=4194304);d.isBackwards?(R.sibling=t.child,t.child=R):(r=d.last,r!==null?r.sibling=R:t.child=R,d.last=R)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Xe(),t.sibling=null,r=Ze.current,qe(Ze,i?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Ll(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Gh(e,t){switch(jo(t),t.tag){case 1:return kt(t.type)&&en(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Di(),Je(bt),Je(mt),Xo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Go(t),null;case 13:if(Je(Ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));ki()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(Ze),null;case 4:return Di(),null;case 10:return $o(t.type._context),null;case 22:case 23:return Ll(),null;case 24:return null;default:return null}}var Cn=!1,Ct=!1,Jh=typeof WeakSet=="function"?WeakSet:Set,De=null;function Mi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){tt(e,t,i)}else r.current=null}function gl(e,t,r){try{r()}catch(i){tt(e,t,i)}}var Hc=!1;function Xh(e,t){if(Lo=Ns,e=va(),So(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var R=0,F=-1,$=-1,re=0,_e=0,me=e,fe=null;t:for(;;){for(var Re;me!==r||a!==0&&me.nodeType!==3||(F=R+a),me!==d||i!==0&&me.nodeType!==3||($=R+i),me.nodeType===3&&(R+=me.nodeValue.length),(Re=me.firstChild)!==null;)fe=me,me=Re;for(;;){if(me===e)break t;if(fe===r&&++re===a&&(F=R),fe===d&&++_e===i&&($=R),(Re=me.nextSibling)!==null)break;me=fe,fe=me.parentNode}me=Re}r=F===-1||$===-1?null:{start:F,end:$}}else r=null}r=r||{start:0,end:0}}else r=null;for(Do={focusedElem:e,selectionRange:r},Ns=!1,De=t;De!==null;)if(t=De,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,De=e;else for(;De!==null;){t=De;try{var Te=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Me=Te.memoizedProps,it=Te.memoizedState,Y=t.stateNode,K=Y.getSnapshotBeforeUpdate(t.elementType===t.type?Me:Zt(t.type,Me),it);Y.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(Ce){tt(t,t.return,Ce)}if(e=t.sibling,e!==null){e.return=t.return,De=e;break}De=t.return}return Te=Hc,Hc=!1,Te}function vs(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var d=a.destroy;a.destroy=void 0,d!==void 0&&gl(t,r,d)}a=a.next}while(a!==i)}}function wn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function vl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Nc(e){var t=e.alternate;t!==null&&(e.alternate=null,Nc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sr],delete t[os],delete t[Ao],delete t[Ph],delete t[Ah])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zc(e){return e.tag===5||e.tag===3||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ml(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ys));else if(i!==4&&(e=e.child,e!==null))for(ml(e,t,r),e=e.sibling;e!==null;)ml(e,t,r),e=e.sibling}function yl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(yl(e,t,r),e=e.sibling;e!==null;)yl(e,t,r),e=e.sibling}var dt=null,er=!1;function Ar(e,t,r){for(r=r.child;r!==null;)$c(e,t,r),r=r.sibling}function $c(e,t,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ai,r)}catch{}switch(r.tag){case 5:Ct||Mi(r,t);case 6:var i=dt,a=er;dt=null,Ar(e,t,r),dt=i,er=a,dt!==null&&(er?(e=dt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):dt.removeChild(r.stateNode));break;case 18:dt!==null&&(er?(e=dt,r=r.stateNode,e.nodeType===8?Po(e.parentNode,r):e.nodeType===1&&Po(e,r),Ji(e)):Po(dt,r.stateNode));break;case 4:i=dt,a=er,dt=r.stateNode.containerInfo,er=!0,Ar(e,t,r),dt=i,er=a;break;case 0:case 11:case 14:case 15:if(!Ct&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var d=a,R=d.destroy;d=d.tag,R!==void 0&&((d&2)!==0||(d&4)!==0)&&gl(r,t,R),a=a.next}while(a!==i)}Ar(e,t,r);break;case 1:if(!Ct&&(Mi(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(F){tt(r,t,F)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(Ct=(i=Ct)||r.memoizedState!==null,Ar(e,t,r),Ct=i):Ar(e,t,r);break;default:Ar(e,t,r)}}function Uc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jh),t.forEach(function(i){var a=nd.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function tr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var d=e,R=t,F=R;e:for(;F!==null;){switch(F.tag){case 5:dt=F.stateNode,er=!1;break e;case 3:dt=F.stateNode.containerInfo,er=!0;break e;case 4:dt=F.stateNode.containerInfo,er=!0;break e}F=F.return}if(dt===null)throw Error(D(160));$c(d,R,a),dt=null,er=!1;var $=a.alternate;$!==null&&($.return=null),a.return=null}catch(re){tt(a,t,re)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kc(t,e),t=t.sibling}function Kc(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tr(t,e),lr(e),i&4){try{vs(3,e,e.return),wn(3,e)}catch(Me){tt(e,e.return,Me)}try{vs(5,e,e.return)}catch(Me){tt(e,e.return,Me)}}break;case 1:tr(t,e),lr(e),i&512&&r!==null&&Mi(r,r.return);break;case 5:if(tr(t,e),lr(e),i&512&&r!==null&&Mi(r,r.return),e.flags&32){var a=e.stateNode;try{gt(a,"")}catch(Me){tt(e,e.return,Me)}}if(i&4&&(a=e.stateNode,a!=null)){var d=e.memoizedProps,R=r!==null?r.memoizedProps:d,F=e.type,$=e.updateQueue;if(e.updateQueue=null,$!==null)try{F==="input"&&d.type==="radio"&&d.name!=null&&Ke(a,d),Ts(F,R);var re=Ts(F,d);for(R=0;R<$.length;R+=2){var _e=$[R],me=$[R+1];_e==="style"?Un(a,me):_e==="dangerouslySetInnerHTML"?hr(a,me):_e==="children"?gt(a,me):o(a,_e,me,re)}switch(F){case"input":Ae(a,d);break;case"textarea":Mt(a,d);break;case"select":var fe=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!d.multiple;var Re=d.value;Re!=null?Ft(a,!!d.multiple,Re,!1):fe!==!!d.multiple&&(d.defaultValue!=null?Ft(a,!!d.multiple,d.defaultValue,!0):Ft(a,!!d.multiple,d.multiple?[]:"",!1))}a[os]=d}catch(Me){tt(e,e.return,Me)}}break;case 6:if(tr(t,e),lr(e),i&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,d=e.memoizedProps;try{a.nodeValue=d}catch(Me){tt(e,e.return,Me)}}break;case 3:if(tr(t,e),lr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ji(t.containerInfo)}catch(Me){tt(e,e.return,Me)}break;case 4:tr(t,e),lr(e);break;case 13:tr(t,e),lr(e),a=e.child,a.flags&8192&&(d=a.memoizedState!==null,a.stateNode.isHidden=d,!d||a.alternate!==null&&a.alternate.memoizedState!==null||(wl=Xe())),i&4&&Uc(e);break;case 22:if(_e=r!==null&&r.memoizedState!==null,e.mode&1?(Ct=(re=Ct)||_e,tr(t,e),Ct=re):tr(t,e),lr(e),i&8192){if(re=e.memoizedState!==null,(e.stateNode.isHidden=re)&&!_e&&(e.mode&1)!==0)for(De=e,_e=e.child;_e!==null;){for(me=De=_e;De!==null;){switch(fe=De,Re=fe.child,fe.tag){case 0:case 11:case 14:case 15:vs(4,fe,fe.return);break;case 1:Mi(fe,fe.return);var Te=fe.stateNode;if(typeof Te.componentWillUnmount=="function"){i=fe,r=fe.return;try{t=i,Te.props=t.memoizedProps,Te.state=t.memoizedState,Te.componentWillUnmount()}catch(Me){tt(i,r,Me)}}break;case 5:Mi(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Gc(me);continue}}Re!==null?(Re.return=fe,De=Re):Gc(me)}_e=_e.sibling}e:for(_e=null,me=e;;){if(me.tag===5){if(_e===null){_e=me;try{a=me.stateNode,re?(d=a.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(F=me.stateNode,$=me.memoizedProps.style,R=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=Oi("display",R))}catch(Me){tt(e,e.return,Me)}}}else if(me.tag===6){if(_e===null)try{me.stateNode.nodeValue=re?"":me.memoizedProps}catch(Me){tt(e,e.return,Me)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===e)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===e)break e;for(;me.sibling===null;){if(me.return===null||me.return===e)break e;_e===me&&(_e=null),me=me.return}_e===me&&(_e=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:tr(t,e),lr(e),i&4&&Uc(e);break;case 21:break;default:tr(t,e),lr(e)}}function lr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zc(r)){var i=r;break e}r=r.return}throw Error(D(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(gt(a,""),i.flags&=-33);var d=Wc(e);yl(e,d,a);break;case 3:case 4:var R=i.stateNode.containerInfo,F=Wc(e);ml(e,F,R);break;default:throw Error(D(161))}}catch($){tt(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qh(e,t,r){De=e,Vc(e)}function Vc(e,t,r){for(var i=(e.mode&1)!==0;De!==null;){var a=De,d=a.child;if(a.tag===22&&i){var R=a.memoizedState!==null||Cn;if(!R){var F=a.alternate,$=F!==null&&F.memoizedState!==null||Ct;F=Cn;var re=Ct;if(Cn=R,(Ct=$)&&!re)for(De=a;De!==null;)R=De,$=R.child,R.tag===22&&R.memoizedState!==null?Jc(a):$!==null?($.return=R,De=$):Jc(a);for(;d!==null;)De=d,Vc(d),d=d.sibling;De=a,Cn=F,Ct=re}qc(e)}else(a.subtreeFlags&8772)!==0&&d!==null?(d.return=a,De=d):qc(e)}}function qc(e){for(;De!==null;){var t=De;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ct||wn(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ct)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Zt(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Ga(t,d,i);break;case 3:var R=t.updateQueue;if(R!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ga(t,R,r)}break;case 5:var F=t.stateNode;if(r===null&&t.flags&4){r=F;var $=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&r.focus();break;case"img":$.src&&(r.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var re=t.alternate;if(re!==null){var _e=re.memoizedState;if(_e!==null){var me=_e.dehydrated;me!==null&&Ji(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ct||t.flags&512&&vl(t)}catch(fe){tt(t,t.return,fe)}}if(t===e){De=null;break}if(r=t.sibling,r!==null){r.return=t.return,De=r;break}De=t.return}}function Gc(e){for(;De!==null;){var t=De;if(t===e){De=null;break}var r=t.sibling;if(r!==null){r.return=t.return,De=r;break}De=t.return}}function Jc(e){for(;De!==null;){var t=De;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wn(4,t)}catch($){tt(t,r,$)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch($){tt(t,a,$)}}var d=t.return;try{vl(t)}catch($){tt(t,d,$)}break;case 5:var R=t.return;try{vl(t)}catch($){tt(t,R,$)}}}catch($){tt(t,t.return,$)}if(t===e){De=null;break}var F=t.sibling;if(F!==null){F.return=t.return,De=F;break}De=t.return}}var Yh=Math.ceil,xn=f.ReactCurrentDispatcher,Sl=f.ReactCurrentOwner,qt=f.ReactCurrentBatchConfig,Ne=0,ct=null,st=null,ft=0,Ot=0,Pi=Lr(0),ot=0,ms=null,ti=0,bn=0,Cl=0,ys=null,Rt=null,wl=0,Ai=1/0,Cr=null,kn=!1,xl=null,Br=null,En=!1,Ir=null,Rn=0,Ss=0,bl=null,Ln=-1,Dn=0;function xt(){return(Ne&6)!==0?Xe():Ln!==-1?Ln:Ln=Xe()}function Or(e){return(e.mode&1)===0?1:(Ne&2)!==0&&ft!==0?ft&-ft:Ih.transition!==null?(Dn===0&&(Dn=Hs()),Dn):(e=v,e!==0||(e=window.event,e=e===void 0?16:Ql(e.type)),e)}function rr(e,t,r,i){if(50<Ss)throw Ss=0,bl=null,Error(D(185));dr(e,r,i),((Ne&2)===0||e!==ct)&&(e===ct&&((Ne&2)===0&&(bn|=r),ot===4&&jr(e,ft)),Lt(e,i),r===1&&Ne===0&&(t.mode&1)===0&&(Ai=Xe()+500,rn&&Tr()))}function Lt(e,t){var r=e.callbackNode;oo(e,t);var i=hi(e,e===ct?ft:0);if(i===0)r!==null&&Os(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Os(r),t===1)e.tag===0?Bh(Qc.bind(null,e)):Oa(Qc.bind(null,e)),Th(function(){(Ne&6)===0&&Tr()}),r=null;else{switch(O(i)){case 1:r=zt;break;case 4:r=js;break;case 16:r=Kr;break;case 536870912:r=Fs;break;default:r=Kr}r=nu(r,Xc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Xc(e,t){if(Ln=-1,Dn=0,(Ne&6)!==0)throw Error(D(327));var r=e.callbackNode;if(Bi()&&e.callbackNode!==r)return null;var i=hi(e,e===ct?ft:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Tn(e,i);else{t=i;var a=Ne;Ne|=2;var d=Zc();(ct!==e||ft!==t)&&(Cr=null,Ai=Xe()+500,ii(e,t));do try{td();break}catch(F){Yc(e,F)}while(!0);Wo(),xn.current=d,Ne=a,st!==null?t=0:(ct=null,ft=0,t=ot)}if(t!==0){if(t===2&&(a=Ui(e),a!==0&&(i=a,t=kl(e,a))),t===1)throw r=ms,ii(e,0),jr(e,i),Lt(e,Xe()),r;if(t===6)jr(e,i);else{if(a=e.current.alternate,(i&30)===0&&!Zh(a)&&(t=Tn(e,i),t===2&&(d=Ui(e),d!==0&&(i=d,t=kl(e,d))),t===1))throw r=ms,ii(e,0),jr(e,i),Lt(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(D(345));case 2:si(e,Rt,Cr);break;case 3:if(jr(e,i),(i&130023424)===i&&(t=wl+500-Xe(),10<t)){if(hi(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){xt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Mo(si.bind(null,e,Rt,Cr),t);break}si(e,Rt,Cr);break;case 4:if(jr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var R=31-vt(i);d=1<<R,R=t[R],R>a&&(a=R),i&=~d}if(i=a,i=Xe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yh(i/1960))-i,10<i){e.timeoutHandle=Mo(si.bind(null,e,Rt,Cr),i);break}si(e,Rt,Cr);break;case 5:si(e,Rt,Cr);break;default:throw Error(D(329))}}}return Lt(e,Xe()),e.callbackNode===r?Xc.bind(null,e):null}function kl(e,t){var r=ys;return e.current.memoizedState.isDehydrated&&(ii(e,t).flags|=256),e=Tn(e,t),e!==2&&(t=Rt,Rt=r,t!==null&&El(t)),e}function El(e){Rt===null?Rt=e:Rt.push.apply(Rt,e)}function Zh(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],d=a.getSnapshot;a=a.value;try{if(!Qt(d(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t){for(t&=~Cl,t&=~bn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vt(t),i=1<<r;e[r]=-1,t&=~i}}function Qc(e){if((Ne&6)!==0)throw Error(D(327));Bi();var t=hi(e,0);if((t&1)===0)return Lt(e,Xe()),null;var r=Tn(e,t);if(e.tag!==0&&r===2){var i=Ui(e);i!==0&&(t=i,r=kl(e,i))}if(r===1)throw r=ms,ii(e,0),jr(e,t),Lt(e,Xe()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,si(e,Rt,Cr),Lt(e,Xe()),null}function Rl(e,t){var r=Ne;Ne|=1;try{return e(t)}finally{Ne=r,Ne===0&&(Ai=Xe()+500,rn&&Tr())}}function ri(e){Ir!==null&&Ir.tag===0&&(Ne&6)===0&&Bi();var t=Ne;Ne|=1;var r=qt.transition,i=v;try{if(qt.transition=null,v=1,e)return e()}finally{v=i,qt.transition=r,Ne=t,(Ne&6)===0&&Tr()}}function Ll(){Ot=Pi.current,Je(Pi)}function ii(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dh(r)),st!==null)for(r=st.return;r!==null;){var i=r;switch(jo(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&en();break;case 3:Di(),Je(bt),Je(mt),Xo();break;case 5:Go(i);break;case 4:Di();break;case 13:Je(Ze);break;case 19:Je(Ze);break;case 10:$o(i.type._context);break;case 22:case 23:Ll()}r=r.return}if(ct=e,st=e=Fr(e.current,null),ft=Ot=t,ot=0,ms=null,Cl=bn=ti=0,Rt=ys=null,Yr!==null){for(t=0;t<Yr.length;t++)if(r=Yr[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,d=r.pending;if(d!==null){var R=d.next;d.next=a,i.next=R}r.pending=i}Yr=null}return e}function Yc(e,t){do{var r=st;try{if(Wo(),fn.current=vn,pn){for(var i=et.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}pn=!1}if(ei=0,at=nt=et=null,ds=!1,fs=0,Sl.current=null,r===null||r.return===null){ot=1,ms=t,st=null;break}e:{var d=e,R=r.return,F=r,$=t;if(t=ft,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var re=$,_e=F,me=_e.tag;if((_e.mode&1)===0&&(me===0||me===11||me===15)){var fe=_e.alternate;fe?(_e.updateQueue=fe.updateQueue,_e.memoizedState=fe.memoizedState,_e.lanes=fe.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Re=xc(R);if(Re!==null){Re.flags&=-257,bc(Re,R,F,d,t),Re.mode&1&&wc(d,re,t),t=Re,$=re;var Te=t.updateQueue;if(Te===null){var Me=new Set;Me.add($),t.updateQueue=Me}else Te.add($);break e}else{if((t&1)===0){wc(d,re,t),Dl();break e}$=Error(D(426))}}else if(Ye&&F.mode&1){var it=xc(R);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),bc(it,R,F,d,t),No(Ti($,F));break e}}d=$=Ti($,F),ot!==4&&(ot=2),ys===null?ys=[d]:ys.push(d),d=R;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var Y=Sc(d,$,t);qa(d,Y);break e;case 1:F=$;var K=d.type,Z=d.stateNode;if((d.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Br===null||!Br.has(Z)))){d.flags|=65536,t&=-t,d.lanes|=t;var Ce=Cc(d,F,t);qa(d,Ce);break e}}d=d.return}while(d!==null)}tu(r)}catch(Pe){t=Pe,st===r&&r!==null&&(st=r=r.return);continue}break}while(!0)}function Zc(){var e=xn.current;return xn.current=vn,e===null?vn:e}function Dl(){(ot===0||ot===3||ot===2)&&(ot=4),ct===null||(ti&268435455)===0&&(bn&268435455)===0||jr(ct,ft)}function Tn(e,t){var r=Ne;Ne|=2;var i=Zc();(ct!==e||ft!==t)&&(Cr=null,ii(e,t));do try{ed();break}catch(a){Yc(e,a)}while(!0);if(Wo(),Ne=r,xn.current=i,st!==null)throw Error(D(261));return ct=null,ft=0,ot}function ed(){for(;st!==null;)eu(st)}function td(){for(;st!==null&&!Qn();)eu(st)}function eu(e){var t=su(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?tu(e):st=t,Sl.current=null}function tu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=qh(r,t,Ot),r!==null){st=r;return}}else{if(r=Gh(r,t),r!==null){r.flags&=32767,st=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,st=null;return}}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);ot===0&&(ot=5)}function si(e,t,r){var i=v,a=qt.transition;try{qt.transition=null,v=1,rd(e,t,r,i)}finally{qt.transition=a,v=i}return null}function rd(e,t,r,i){do Bi();while(Ir!==null);if((Ne&6)!==0)throw Error(D(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(di(e,d),e===ct&&(st=ct=null,ft=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||En||(En=!0,nu(Kr,function(){return Bi(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=qt.transition,qt.transition=null;var R=v;v=1;var F=Ne;Ne|=4,Sl.current=null,Xh(e,r),Kc(r,e),wh(Do),Ns=!!Lo,Do=Lo=null,e.current=r,Qh(r),Yn(),Ne=F,v=R,qt.transition=d}else e.current=r;if(En&&(En=!1,Ir=e,Rn=a),d=e.pendingLanes,d===0&&(Br=null),to(r.stateNode),Lt(e,Xe()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(kn)throw kn=!1,e=xl,xl=null,e;return(Rn&1)!==0&&e.tag!==0&&Bi(),d=e.pendingLanes,(d&1)!==0?e===bl?Ss++:(Ss=0,bl=e):Ss=0,Tr(),null}function Bi(){if(Ir!==null){var e=O(Rn),t=qt.transition,r=v;try{if(qt.transition=null,v=16>e?16:e,Ir===null)var i=!1;else{if(e=Ir,Ir=null,Rn=0,(Ne&6)!==0)throw Error(D(331));var a=Ne;for(Ne|=4,De=e.current;De!==null;){var d=De,R=d.child;if((De.flags&16)!==0){var F=d.deletions;if(F!==null){for(var $=0;$<F.length;$++){var re=F[$];for(De=re;De!==null;){var _e=De;switch(_e.tag){case 0:case 11:case 15:vs(8,_e,d)}var me=_e.child;if(me!==null)me.return=_e,De=me;else for(;De!==null;){_e=De;var fe=_e.sibling,Re=_e.return;if(Nc(_e),_e===re){De=null;break}if(fe!==null){fe.return=Re,De=fe;break}De=Re}}}var Te=d.alternate;if(Te!==null){var Me=Te.child;if(Me!==null){Te.child=null;do{var it=Me.sibling;Me.sibling=null,Me=it}while(Me!==null)}}De=d}}if((d.subtreeFlags&2064)!==0&&R!==null)R.return=d,De=R;else e:for(;De!==null;){if(d=De,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:vs(9,d,d.return)}var Y=d.sibling;if(Y!==null){Y.return=d.return,De=Y;break e}De=d.return}}var K=e.current;for(De=K;De!==null;){R=De;var Z=R.child;if((R.subtreeFlags&2064)!==0&&Z!==null)Z.return=R,De=Z;else e:for(R=K;De!==null;){if(F=De,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:wn(9,F)}}catch(Pe){tt(F,F.return,Pe)}if(F===R){De=null;break e}var Ce=F.sibling;if(Ce!==null){Ce.return=F.return,De=Ce;break e}De=F.return}}if(Ne=a,Tr(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ai,e)}catch{}i=!0}return i}finally{v=r,qt.transition=t}}return!1}function ru(e,t,r){t=Ti(r,t),t=Sc(e,t,1),e=Pr(e,t,1),t=xt(),e!==null&&(dr(e,1,t),Lt(e,t))}function tt(e,t,r){if(e.tag===3)ru(e,e,r);else for(;t!==null;){if(t.tag===3){ru(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Br===null||!Br.has(i))){e=Ti(r,e),e=Cc(t,e,1),t=Pr(t,e,1),e=xt(),t!==null&&(dr(t,1,e),Lt(t,e));break}}t=t.return}}function id(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&r,ct===e&&(ft&r)===r&&(ot===4||ot===3&&(ft&130023424)===ft&&500>Xe()-wl?ii(e,0):Cl|=r),Lt(e,t)}function iu(e,t){t===0&&((e.mode&1)===0?t=1:(t=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var r=xt();e=mr(e,t),e!==null&&(dr(e,t,r),Lt(e,r))}function sd(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),iu(e,r)}function nd(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(t),iu(e,r)}var su;su=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)Et=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Et=!1,Vh(e,t,r);Et=(e.flags&131072)!==0}else Et=!1,Ye&&(t.flags&1048576)!==0&&ja(t,nn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Sn(e,t),e=t.pendingProps;var a=wi(t,mt.current);Li(t,r),a=Zo(null,t,i,e,a,r);var d=el();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(i)?(d=!0,tn(t)):d=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Vo(t),a.updater=mn,t.stateNode=a,a._reactInternals=t,ol(t,i,e,r),t=ul(null,t,i,!0,d,r)):(t.tag=0,Ye&&d&&Oo(t),wt(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Sn(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=ld(i),e=Zt(i,e),a){case 0:t=cl(null,t,i,e,r);break e;case 1:t=Tc(null,t,i,e,r);break e;case 11:t=kc(null,t,i,e,r);break e;case 14:t=Ec(null,t,i,Zt(i.type,e),r);break e}throw Error(D(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Zt(i,a),cl(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Zt(i,a),Tc(e,t,i,a,r);case 3:e:{if(Mc(t),e===null)throw Error(D(387));i=t.pendingProps,d=t.memoizedState,a=d.element,Va(e,t),hn(t,i,null,r);var R=t.memoizedState;if(i=R.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){a=Ti(Error(D(423)),t),t=Pc(e,t,i,r,a);break e}else if(i!==a){a=Ti(Error(D(424)),t),t=Pc(e,t,i,r,a);break e}else for(It=Rr(t.stateNode.containerInfo.firstChild),Bt=t,Ye=!0,Yt=null,r=Ua(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ki(),i===a){t=Sr(e,t,r);break e}wt(e,t,i,r)}t=t.child}return t;case 5:return Ja(t),e===null&&Ho(t),i=t.type,a=t.pendingProps,d=e!==null?e.memoizedProps:null,R=a.children,To(i,a)?R=null:d!==null&&To(i,d)&&(t.flags|=32),Dc(e,t),wt(e,t,R,r),t.child;case 6:return e===null&&Ho(t),null;case 13:return Ac(e,t,r);case 4:return qo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ei(t,null,i,r):wt(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Zt(i,a),kc(e,t,i,a,r);case 7:return wt(e,t,t.pendingProps,r),t.child;case 8:return wt(e,t,t.pendingProps.children,r),t.child;case 12:return wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,d=t.memoizedProps,R=a.value,qe(an,i._currentValue),i._currentValue=R,d!==null)if(Qt(d.value,R)){if(d.children===a.children&&!bt.current){t=Sr(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var F=d.dependencies;if(F!==null){R=d.child;for(var $=F.firstContext;$!==null;){if($.context===i){if(d.tag===1){$=yr(-1,r&-r),$.tag=2;var re=d.updateQueue;if(re!==null){re=re.shared;var _e=re.pending;_e===null?$.next=$:($.next=_e.next,_e.next=$),re.pending=$}}d.lanes|=r,$=d.alternate,$!==null&&($.lanes|=r),Uo(d.return,r,t),F.lanes|=r;break}$=$.next}}else if(d.tag===10)R=d.type===t.type?null:d.child;else if(d.tag===18){if(R=d.return,R===null)throw Error(D(341));R.lanes|=r,F=R.alternate,F!==null&&(F.lanes|=r),Uo(R,r,t),R=d.sibling}else R=d.child;if(R!==null)R.return=d;else for(R=d;R!==null;){if(R===t){R=null;break}if(d=R.sibling,d!==null){d.return=R.return,R=d;break}R=R.return}d=R}wt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Li(t,r),a=Kt(a),i=i(a),t.flags|=1,wt(e,t,i,r),t.child;case 14:return i=t.type,a=Zt(i,t.pendingProps),a=Zt(i.type,a),Ec(e,t,i,a,r);case 15:return Rc(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Zt(i,a),Sn(e,t),t.tag=1,kt(i)?(e=!0,tn(t)):e=!1,Li(t,r),mc(t,i,a),ol(t,i,a,r),ul(null,t,i,!0,e,r);case 19:return Ic(e,t,r);case 22:return Lc(e,t,r)}throw Error(D(156,t.tag))};function nu(e,t){return Is(e,t)}function od(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,r,i){return new od(e,t,r,i)}function Tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ld(e){if(typeof e=="function")return Tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===V)return 11;if(e===oe)return 14}return 2}function Fr(e,t){var r=e.alternate;return r===null?(r=Gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mn(e,t,r,i,a,d){var R=2;if(i=e,typeof e=="function")Tl(e)&&(R=1);else if(typeof e=="string")R=5;else e:switch(e){case x:return ni(r.children,a,d,t);case g:R=8,a|=8;break;case L:return e=Gt(12,r,t,a|2),e.elementType=L,e.lanes=d,e;case j:return e=Gt(13,r,t,a),e.elementType=j,e.lanes=d,e;case te:return e=Gt(19,r,t,a),e.elementType=te,e.lanes=d,e;case ve:return Pn(r,a,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:R=10;break e;case N:R=9;break e;case V:R=11;break e;case oe:R=14;break e;case he:R=16,i=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Gt(R,r,t,a),t.elementType=e,t.type=i,t.lanes=d,t}function ni(e,t,r,i){return e=Gt(7,e,i,t),e.lanes=r,e}function Pn(e,t,r,i){return e=Gt(22,e,i,t),e.elementType=ve,e.lanes=r,e.stateNode={isHidden:!1},e}function Ml(e,t,r){return e=Gt(6,e,null,t),e.lanes=r,e}function Pl(e,t,r){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ad(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Al(e,t,r,i,a,d,R,F,$){return e=new ad(e,t,r,F,$),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Gt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vo(d),e}function cd(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function ou(e){if(!e)return Dr;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(kt(r))return Ba(e,r,t)}return t}function lu(e,t,r,i,a,d,R,F,$){return e=Al(r,i,!0,e,a,d,R,F,$),e.context=ou(null),r=e.current,i=xt(),a=Or(r),d=yr(i,a),d.callback=t??null,Pr(r,d,a),e.current.lanes=a,dr(e,a,i),Lt(e,i),e}function An(e,t,r,i){var a=t.current,d=xt(),R=Or(a);return r=ou(r),t.context===null?t.context=r:t.pendingContext=r,t=yr(d,R),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Pr(a,t,R),e!==null&&(rr(e,a,R,d),un(e,a,R)),R}function Bn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function au(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Bl(e,t){au(e,t),(e=e.alternate)&&au(e,t)}function ud(){return null}var cu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Il(e){this._internalRoot=e}In.prototype.render=Il.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));An(e,t,null,null)},In.prototype.unmount=Il.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ri(function(){An(null,e,null,null)}),t[pr]=null}};function In(e){this._internalRoot=e}In.prototype.unstable_scheduleHydration=function(e){if(e){var t=ue();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$e.length&&t!==0&&t<$e[r].priority;r++);$e.splice(r,0,e),r===0&&qi(e)}};function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function On(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uu(){}function hd(e,t,r,i,a){if(a){if(typeof i=="function"){var d=i;i=function(){var re=Bn(R);d.call(re)}}var R=lu(t,i,e,0,null,!1,!1,"",uu);return e._reactRootContainer=R,e[pr]=R.current,ss(e.nodeType===8?e.parentNode:e),ri(),R}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var F=i;i=function(){var re=Bn($);F.call(re)}}var $=Al(e,0,!1,null,null,!1,!1,"",uu);return e._reactRootContainer=$,e[pr]=$.current,ss(e.nodeType===8?e.parentNode:e),ri(function(){An(t,$,r,i)}),$}function jn(e,t,r,i,a){var d=r._reactRootContainer;if(d){var R=d;if(typeof a=="function"){var F=a;a=function(){var $=Bn(R);F.call($)}}An(t,R,e,a)}else R=hd(r,t,e,a,i);return Bn(R)}z=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vr(t.pendingLanes);r!==0&&(Vi(t,r|1),Lt(t,Xe()),(Ne&6)===0&&(Ai=Xe()+500,Tr()))}break;case 13:ri(function(){var i=mr(e,1);if(i!==null){var a=xt();rr(i,e,1,a)}}),Bl(e,1)}},X=function(e){if(e.tag===13){var t=mr(e,134217728);if(t!==null){var r=xt();rr(t,e,134217728,r)}Bl(e,134217728)}},ye=function(e){if(e.tag===13){var t=Or(e),r=mr(e,t);if(r!==null){var i=xt();rr(r,e,t,i)}Bl(e,t)}},ue=function(){return v},be=function(e,t){var r=v;try{return v=e,t()}finally{v=r}},Ms=function(e,t,r){switch(t){case"input":if(Ae(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=Zs(i);if(!a)throw Error(D(90));we(i),Ae(i,a)}}}break;case"textarea":Mt(e,r);break;case"select":t=r.value,t!=null&&Ft(e,!!r.multiple,t,!1)}},Gn=Rl,Ps=ri;var dd={usingClientEntryPoint:!1,Events:[ls,Si,Zs,Vn,qn,Rl]},Cs={findFiberByHostInstance:Gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fd={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wi(e),e===null?null:e.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||ud,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fn.isDisabled&&Fn.supportsFiber)try{ai=Fn.inject(fd),Wt=Fn}catch{}}return Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dd,Dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ol(t))throw Error(D(200));return cd(e,t,null,r)},Dt.createRoot=function(e,t){if(!Ol(e))throw Error(D(299));var r=!1,i="",a=cu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Al(e,1,!1,null,null,r,!1,i,a),e[pr]=t.current,ss(e.nodeType===8?e.parentNode:e),new Il(t)},Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Wi(t),e=e===null?null:e.stateNode,e},Dt.flushSync=function(e){return ri(e)},Dt.hydrate=function(e,t,r){if(!On(t))throw Error(D(200));return jn(null,e,t,!0,r)},Dt.hydrateRoot=function(e,t,r){if(!Ol(e))throw Error(D(405));var i=r!=null&&r.hydratedSources||null,a=!1,d="",R=cu;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(R=r.onRecoverableError)),t=lu(t,null,e,1,r??null,a,!1,d,R),e[pr]=t.current,ss(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new In(t)},Dt.render=function(e,t,r){if(!On(t))throw Error(D(200));return jn(null,e,t,!1,r)},Dt.unmountComponentAtNode=function(e){if(!On(e))throw Error(D(40));return e._reactRootContainer?(ri(function(){jn(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1},Dt.unstable_batchedUpdates=Rl,Dt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!On(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return jn(e,t,r,!1,i)},Dt.version="18.3.1-next-f1338f8080-20240426",Dt}var mu;function xd(){if(mu)return Hl.exports;mu=1;function B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B)}catch(W){console.error(W)}}return B(),Hl.exports=wd(),Hl.exports}var yu;function bd(){if(yu)return Hn;yu=1;var B=xd();return Hn.createRoot=B.createRoot,Hn.hydrateRoot=B.hydrateRoot,Hn}var kd=bd();const Ed="modulepreload",Rd=function(B){return"/"+B},Su={},Ld=function(W,D,ee){let G=Promise.resolve();if(D&&D.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const U=document.querySelector("meta[property=csp-nonce]"),c=U?.nonce||U?.getAttribute("nonce");G=u(D.map(p=>{if(p=Rd(p),p in Su)return;Su[p]=!0;const y=p.endsWith(".css"),h=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${h}`))return;const m=document.createElement("link");if(m.rel=y?"stylesheet":Ed,y||(m.as="script"),m.crossOrigin="",m.href=p,c&&m.setAttribute("nonce",c),document.head.appendChild(m),y)return new Promise((w,E)=>{m.addEventListener("load",w),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function ge(U){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=U,window.dispatchEvent(c),!c.defaultPrevented)throw U}return G.then(U=>{for(const c of U||[])c.status==="rejected"&&ge(c.reason);return W().catch(ge)})};function Cu(B,W){(W==null||W>B.length)&&(W=B.length);for(var D=0,ee=Array(W);D<W;D++)ee[D]=B[D];return ee}function Dd(B){if(Array.isArray(B))return B}function Td(B,W,D){return(W=jd(W))in B?Object.defineProperty(B,W,{value:D,enumerable:!0,configurable:!0,writable:!0}):B[W]=D,B}function Md(B,W){var D=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(D!=null){var ee,G,ge,U,c=[],u=!0,p=!1;try{if(ge=(D=D.call(B)).next,W!==0)for(;!(u=(ee=ge.call(D)).done)&&(c.push(ee.value),c.length!==W);u=!0);}catch(y){p=!0,G=y}finally{try{if(!u&&D.return!=null&&(U=D.return(),Object(U)!==U))return}finally{if(p)throw G}}return c}}function Pd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wu(B,W){var D=Object.keys(B);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(B);W&&(ee=ee.filter(function(G){return Object.getOwnPropertyDescriptor(B,G).enumerable})),D.push.apply(D,ee)}return D}function xu(B){for(var W=1;W<arguments.length;W++){var D=arguments[W]!=null?arguments[W]:{};W%2?wu(Object(D),!0).forEach(function(ee){Td(B,ee,D[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(D)):wu(Object(D)).forEach(function(ee){Object.defineProperty(B,ee,Object.getOwnPropertyDescriptor(D,ee))})}return B}function Ad(B,W){if(B==null)return{};var D,ee,G=Bd(B,W);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(B);for(ee=0;ee<ge.length;ee++)D=ge[ee],W.indexOf(D)===-1&&{}.propertyIsEnumerable.call(B,D)&&(G[D]=B[D])}return G}function Bd(B,W){if(B==null)return{};var D={};for(var ee in B)if({}.hasOwnProperty.call(B,ee)){if(W.indexOf(ee)!==-1)continue;D[ee]=B[ee]}return D}function Id(B,W){return Dd(B)||Md(B,W)||Fd(B,W)||Pd()}function Od(B,W){if(typeof B!="object"||!B)return B;var D=B[Symbol.toPrimitive];if(D!==void 0){var ee=D.call(B,W);if(typeof ee!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(B)}function jd(B){var W=Od(B,"string");return typeof W=="symbol"?W:W+""}function Fd(B,W){if(B){if(typeof B=="string")return Cu(B,W);var D={}.toString.call(B).slice(8,-1);return D==="Object"&&B.constructor&&(D=B.constructor.name),D==="Map"||D==="Set"?Array.from(B):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?Cu(B,W):void 0}}function Hd(B,W,D){return W in B?Object.defineProperty(B,W,{value:D,enumerable:!0,configurable:!0,writable:!0}):B[W]=D,B}function bu(B,W){var D=Object.keys(B);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(B);W&&(ee=ee.filter(function(G){return Object.getOwnPropertyDescriptor(B,G).enumerable})),D.push.apply(D,ee)}return D}function ku(B){for(var W=1;W<arguments.length;W++){var D=arguments[W]!=null?arguments[W]:{};W%2?bu(Object(D),!0).forEach(function(ee){Hd(B,ee,D[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(D)):bu(Object(D)).forEach(function(ee){Object.defineProperty(B,ee,Object.getOwnPropertyDescriptor(D,ee))})}return B}function Nd(){for(var B=arguments.length,W=new Array(B),D=0;D<B;D++)W[D]=arguments[D];return function(ee){return W.reduceRight(function(G,ge){return ge(G)},ee)}}function ks(B){return function W(){for(var D=this,ee=arguments.length,G=new Array(ee),ge=0;ge<ee;ge++)G[ge]=arguments[ge];return G.length>=B.length?B.apply(this,G):function(){for(var U=arguments.length,c=new Array(U),u=0;u<U;u++)c[u]=arguments[u];return W.apply(D,[].concat(G,c))}}}function Wn(B){return{}.toString.call(B).includes("Object")}function zd(B){return!Object.keys(B).length}function Rs(B){return typeof B=="function"}function Wd(B,W){return Object.prototype.hasOwnProperty.call(B,W)}function $d(B,W){return Wn(W)||Nr("changeType"),Object.keys(W).some(function(D){return!Wd(B,D)})&&Nr("changeField"),W}function Ud(B){Rs(B)||Nr("selectorType")}function Kd(B){Rs(B)||Wn(B)||Nr("handlerType"),Wn(B)&&Object.values(B).some(function(W){return!Rs(W)})&&Nr("handlersType")}function Vd(B){B||Nr("initialIsRequired"),Wn(B)||Nr("initialType"),zd(B)&&Nr("initialContent")}function qd(B,W){throw new Error(B[W]||B.default)}var Gd={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Nr=ks(qd)(Gd),Nn={changes:$d,selector:Ud,handler:Kd,initial:Vd};function Jd(B){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Nn.initial(B),Nn.handler(W);var D={current:B},ee=ks(Yd)(D,W),G=ks(Qd)(D),ge=ks(Nn.changes)(B),U=ks(Xd)(D);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(y){return y};return Nn.selector(p),p(D.current)}function u(p){Nd(ee,G,ge,U)(p)}return[c,u]}function Xd(B,W){return Rs(W)?W(B.current):W}function Qd(B,W){return B.current=ku(ku({},B.current),W),W}function Yd(B,W,D){return Rs(W)?W(B.current):Object.keys(D).forEach(function(ee){var G;return(G=W[ee])===null||G===void 0?void 0:G.call(W,B.current[ee])}),D}var Zd={create:Jd},ef={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function tf(B){return function W(){for(var D=this,ee=arguments.length,G=new Array(ee),ge=0;ge<ee;ge++)G[ge]=arguments[ge];return G.length>=B.length?B.apply(this,G):function(){for(var U=arguments.length,c=new Array(U),u=0;u<U;u++)c[u]=arguments[u];return W.apply(D,[].concat(G,c))}}}function rf(B){return{}.toString.call(B).includes("Object")}function sf(B){return B||Eu("configIsRequired"),rf(B)||Eu("configType"),B.urls?(nf(),{paths:{vs:B.urls.monacoBase}}):B}function nf(){console.warn(Tu.deprecation)}function of(B,W){throw new Error(B[W]||B.default)}var Tu={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Eu=tf(of)(Tu),lf={config:sf},af=function(){for(var W=arguments.length,D=new Array(W),ee=0;ee<W;ee++)D[ee]=arguments[ee];return function(G){return D.reduceRight(function(ge,U){return U(ge)},G)}};function Mu(B,W){return Object.keys(W).forEach(function(D){W[D]instanceof Object&&B[D]&&Object.assign(W[D],Mu(B[D],W[D]))}),xu(xu({},B),W)}var cf={type:"cancelation",msg:"operation is manually canceled"};function Wl(B){var W=!1,D=new Promise(function(ee,G){B.then(function(ge){return W?G(cf):ee(ge)}),B.catch(G)});return D.cancel=function(){return W=!0},D}var uf=["monaco"],hf=Zd.create({config:ef,isInitialized:!1,resolve:null,reject:null,monaco:null}),Pu=Id(hf,2),Ls=Pu[0],$n=Pu[1];function df(B){var W=lf.config(B),D=W.monaco,ee=Ad(W,uf);$n(function(G){return{config:Mu(G.config,ee),monaco:D}})}function ff(){var B=Ls(function(W){var D=W.monaco,ee=W.isInitialized,G=W.resolve;return{monaco:D,isInitialized:ee,resolve:G}});if(!B.isInitialized){if($n({isInitialized:!0}),B.monaco)return B.resolve(B.monaco),Wl($l);if(window.monaco&&window.monaco.editor)return Au(window.monaco),B.resolve(window.monaco),Wl($l);af(pf,gf)(vf)}return Wl($l)}function pf(B){return document.body.appendChild(B)}function _f(B){var W=document.createElement("script");return B&&(W.src=B),W}function gf(B){var W=Ls(function(ee){var G=ee.config,ge=ee.reject;return{config:G,reject:ge}}),D=_f("".concat(W.config.paths.vs,"/loader.js"));return D.onload=function(){return B()},D.onerror=W.reject,D}function vf(){var B=Ls(function(D){var ee=D.config,G=D.resolve,ge=D.reject;return{config:ee,resolve:G,reject:ge}}),W=window.require;W.config(B.config),W(["vs/editor/editor.main"],function(D){var ee=D.m;Au(ee),B.resolve(ee)},function(D){B.reject(D)})}function Au(B){Ls().monaco||$n({monaco:B})}function mf(){return Ls(function(B){var W=B.monaco;return W})}var $l=new Promise(function(B,W){return $n({resolve:B,reject:W})}),Bu={config:df,init:ff,__getMonacoInstance:mf},yf={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ul=yf,Sf={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Cf=Sf;function wf({children:B}){return Jt.createElement("div",{style:Cf.container},B)}var xf=wf,bf=xf;function kf({width:B,height:W,isEditorReady:D,loading:ee,_ref:G,className:ge,wrapperProps:U}){return Jt.createElement("section",{style:{...Ul.wrapper,width:B,height:W},...U},!D&&Jt.createElement(bf,null,ee),Jt.createElement("div",{ref:G,style:{...Ul.fullWidth,...!D&&Ul.hide},className:ge}))}var Ef=kf,Iu=pe.memo(Ef);function Rf(B){pe.useEffect(B,[])}var Ou=Rf;function Lf(B,W,D=!0){let ee=pe.useRef(!0);pe.useEffect(ee.current||!D?()=>{ee.current=!1}:B,W)}var jt=Lf;function Es(){}function Ii(B,W,D,ee){return Df(B,ee)||Tf(B,W,D,ee)}function Df(B,W){return B.editor.getModel(ju(B,W))}function Tf(B,W,D,ee){return B.editor.createModel(W,D,ee?ju(B,ee):void 0)}function ju(B,W){return B.Uri.parse(W)}function Mf({original:B,modified:W,language:D,originalLanguage:ee,modifiedLanguage:G,originalModelPath:ge,modifiedModelPath:U,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:u=!1,theme:p="light",loading:y="Loading...",options:h={},height:m="100%",width:w="100%",className:E,wrapperProps:_={},beforeMount:n=Es,onMount:l=Es}){let[s,o]=pe.useState(!1),[f,C]=pe.useState(!0),S=pe.useRef(null),x=pe.useRef(null),g=pe.useRef(null),L=pe.useRef(l),H=pe.useRef(n),N=pe.useRef(!1);Ou(()=>{let oe=Bu.init();return oe.then(he=>(x.current=he)&&C(!1)).catch(he=>he?.type!=="cancelation"&&console.error("Monaco initialization: error:",he)),()=>S.current?te():oe.cancel()}),jt(()=>{if(S.current&&x.current){let oe=S.current.getOriginalEditor(),he=Ii(x.current,B||"",ee||D||"text",ge||"");he!==oe.getModel()&&oe.setModel(he)}},[ge],s),jt(()=>{if(S.current&&x.current){let oe=S.current.getModifiedEditor(),he=Ii(x.current,W||"",G||D||"text",U||"");he!==oe.getModel()&&oe.setModel(he)}},[U],s),jt(()=>{let oe=S.current.getModifiedEditor();oe.getOption(x.current.editor.EditorOption.readOnly)?oe.setValue(W||""):W!==oe.getValue()&&(oe.executeEdits("",[{range:oe.getModel().getFullModelRange(),text:W||"",forceMoveMarkers:!0}]),oe.pushUndoStop())},[W],s),jt(()=>{S.current?.getModel()?.original.setValue(B||"")},[B],s),jt(()=>{let{original:oe,modified:he}=S.current.getModel();x.current.editor.setModelLanguage(oe,ee||D||"text"),x.current.editor.setModelLanguage(he,G||D||"text")},[D,ee,G],s),jt(()=>{x.current?.editor.setTheme(p)},[p],s),jt(()=>{S.current?.updateOptions(h)},[h],s);let V=pe.useCallback(()=>{if(!x.current)return;H.current(x.current);let oe=Ii(x.current,B||"",ee||D||"text",ge||""),he=Ii(x.current,W||"",G||D||"text",U||"");S.current?.setModel({original:oe,modified:he})},[D,W,G,B,ee,ge,U]),j=pe.useCallback(()=>{!N.current&&g.current&&(S.current=x.current.editor.createDiffEditor(g.current,{automaticLayout:!0,...h}),V(),x.current?.editor.setTheme(p),o(!0),N.current=!0)},[h,p,V]);pe.useEffect(()=>{s&&L.current(S.current,x.current)},[s]),pe.useEffect(()=>{!f&&!s&&j()},[f,s,j]);function te(){let oe=S.current?.getModel();c||oe?.original?.dispose(),u||oe?.modified?.dispose(),S.current?.dispose()}return Jt.createElement(Iu,{width:w,height:m,isEditorReady:s,loading:y,_ref:g,className:E,wrapperProps:_})}var Pf=Mf;pe.memo(Pf);function Af(B){let W=pe.useRef();return pe.useEffect(()=>{W.current=B},[B]),W.current}var Bf=Af,zn=new Map;function If({defaultValue:B,defaultLanguage:W,defaultPath:D,value:ee,language:G,path:ge,theme:U="light",line:c,loading:u="Loading...",options:p={},overrideServices:y={},saveViewState:h=!0,keepCurrentModel:m=!1,width:w="100%",height:E="100%",className:_,wrapperProps:n={},beforeMount:l=Es,onMount:s=Es,onChange:o,onValidate:f=Es}){let[C,S]=pe.useState(!1),[x,g]=pe.useState(!0),L=pe.useRef(null),H=pe.useRef(null),N=pe.useRef(null),V=pe.useRef(s),j=pe.useRef(l),te=pe.useRef(),oe=pe.useRef(ee),he=Bf(ge),ve=pe.useRef(!1),Q=pe.useRef(!1);Ou(()=>{let b=Bu.init();return b.then(I=>(L.current=I)&&g(!1)).catch(I=>I?.type!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>H.current?P():b.cancel()}),jt(()=>{let b=Ii(L.current,B||ee||"",W||G||"",ge||D||"");b!==H.current?.getModel()&&(h&&zn.set(he,H.current?.saveViewState()),H.current?.setModel(b),h&&H.current?.restoreViewState(zn.get(ge)))},[ge],C),jt(()=>{H.current?.updateOptions(p)},[p],C),jt(()=>{!H.current||ee===void 0||(H.current.getOption(L.current.editor.EditorOption.readOnly)?H.current.setValue(ee):ee!==H.current.getValue()&&(Q.current=!0,H.current.executeEdits("",[{range:H.current.getModel().getFullModelRange(),text:ee,forceMoveMarkers:!0}]),H.current.pushUndoStop(),Q.current=!1))},[ee],C),jt(()=>{let b=H.current?.getModel();b&&G&&L.current?.editor.setModelLanguage(b,G)},[G],C),jt(()=>{c!==void 0&&H.current?.revealLine(c)},[c],C),jt(()=>{L.current?.editor.setTheme(U)},[U],C);let k=pe.useCallback(()=>{if(!(!N.current||!L.current)&&!ve.current){j.current(L.current);let b=ge||D,I=Ii(L.current,ee||B||"",W||G||"",b||"");H.current=L.current?.editor.create(N.current,{model:I,automaticLayout:!0,...p},y),h&&H.current.restoreViewState(zn.get(b)),L.current.editor.setTheme(U),c!==void 0&&H.current.revealLine(c),S(!0),ve.current=!0}},[B,W,D,ee,G,ge,p,y,h,U,c]);pe.useEffect(()=>{C&&V.current(H.current,L.current)},[C]),pe.useEffect(()=>{!x&&!C&&k()},[x,C,k]),oe.current=ee,pe.useEffect(()=>{C&&o&&(te.current?.dispose(),te.current=H.current?.onDidChangeModelContent(b=>{Q.current||o(H.current.getValue(),b)}))},[C,o]),pe.useEffect(()=>{if(C){let b=L.current.editor.onDidChangeMarkers(I=>{let ie=H.current.getModel()?.uri;if(ie&&I.find(se=>se.path===ie.path)){let se=L.current.editor.getModelMarkers({resource:ie});f?.(se)}});return()=>{b?.dispose()}}return()=>{}},[C,f]);function P(){te.current?.dispose(),m?h&&zn.set(ge,H.current.saveViewState()):H.current.getModel()?.dispose(),H.current.dispose()}return Jt.createElement(Iu,{width:w,height:E,isEditorReady:C,loading:u,_ref:N,className:_,wrapperProps:n})}var Of=If,jf=pe.memo(Of),Ff=jf,Kl={exports:{}},Ru;function Hf(){return Ru||(Ru=1,(function(B,W){(function(D,ee){B.exports=ee()})(globalThis,(()=>(()=>{var D={4567:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,C){var S,x=arguments.length,g=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,f):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,o,f,C);else for(var L=s.length-1;L>=0;L--)(S=s[L])&&(g=(x<3?S(g):x>3?S(o,f,g):S(o,f))||g);return x>3&&g&&Object.defineProperty(o,f,g),g},y=this&&this.__param||function(s,o){return function(f,C){o(f,C,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.AccessibilityManager=void 0;const h=u(9042),m=u(9924),w=u(844),E=u(4725),_=u(2585),n=u(3656);let l=c.AccessibilityManager=class extends w.Disposable{constructor(s,o,f,C){super(),this._terminal=s,this._coreBrowserService=f,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((S=>this._handleResize(S.rows)))),this.register(this._terminal.onRender((S=>this._refreshRows(S.start,S.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((S=>this._handleChar(S)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((S=>this._handleTab(S)))),this.register(this._terminal.onKey((S=>this._handleKey(S.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,n.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,w.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(s){for(let o=0;o<s;o++)this._handleChar(" ")}_handleChar(s){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(s){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(s)||this._charsToConsume.push(s)}_refreshRows(s,o){this._liveRegionDebouncer.refresh(s,o,this._terminal.rows)}_renderRows(s,o){const f=this._terminal.buffer,C=f.lines.length.toString();for(let S=s;S<=o;S++){const x=f.lines.get(f.ydisp+S),g=[],L=x?.translateToString(!0,void 0,void 0,g)||"",H=(f.ydisp+S+1).toString(),N=this._rowElements[S];N&&(L.length===0?(N.innerText="",this._rowColumns.set(N,[0,1])):(N.textContent=L,this._rowColumns.set(N,g)),N.setAttribute("aria-posinset",H),N.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(s,o){const f=s.target,C=this._rowElements[o===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(o===0?"1":`${this._terminal.buffer.lines.length}`)||s.relatedTarget!==C)return;let S,x;if(o===0?(S=f,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(S=this._rowElements.shift(),x=f,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),o===0){const g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else{const g=this._createAccessibilityTreeNode();this._rowElements.push(g),this._rowContainer.appendChild(g)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(o===0?-1:1),this._rowElements[o===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const s=document.getSelection();if(!s)return;if(s.isCollapsed)return void(this._rowContainer.contains(s.anchorNode)&&this._terminal.clearSelection());if(!s.anchorNode||!s.focusNode)return void console.error("anchorNode and/or focusNode are null");let o={node:s.anchorNode,offset:s.anchorOffset},f={node:s.focusNode,offset:s.focusOffset};if((o.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||o.node===f.node&&o.offset>f.offset)&&([o,f]=[f,o]),o.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(o={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(o.node))return;const C=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:C,offset:C.textContent?.length??0}),!this._rowContainer.contains(f.node))return;const S=({node:L,offset:H})=>{const N=L instanceof Text?L.parentNode:L;let V=parseInt(N?.getAttribute("aria-posinset"),10)-1;if(isNaN(V))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(N);if(!j)return console.warn("columns is null. Race condition?"),null;let te=H<j.length?j[H]:j.slice(-1)[0]+1;return te>=this._terminal.cols&&(++V,te=0),{row:V,column:te}},x=S(o),g=S(f);if(x&&g){if(x.row>g.row||x.row===g.row&&x.column>=g.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(g.row-x.row)*this._terminal.cols-x.column+g.column)}}_handleResize(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let o=this._rowContainer.children.length;o<this._terminal.rows;o++)this._rowElements[o]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[o]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const s=this._coreBrowserService.mainDocument.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}}_refreshRowDimensions(s){s.style.height=`${this._renderService.dimensions.css.cell.height}px`}};c.AccessibilityManager=l=p([y(1,_.IInstantiationService),y(2,E.ICoreBrowserService),y(3,E.IRenderService)],l)},3614:(U,c)=>{function u(m){return m.replace(/\r?\n/g,"\r")}function p(m,w){return w?"\x1B[200~"+m+"\x1B[201~":m}function y(m,w,E,_){m=p(m=u(m),E.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(m,!0),w.value=""}function h(m,w,E){const _=E.getBoundingClientRect(),n=m.clientX-_.left-10,l=m.clientY-_.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${l}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(c,"__esModule",{value:!0}),c.rightClickHandler=c.moveTextAreaUnderMouseCursor=c.paste=c.handlePasteEvent=c.copyHandler=c.bracketTextForPaste=c.prepareTextForTerminal=void 0,c.prepareTextForTerminal=u,c.bracketTextForPaste=p,c.copyHandler=function(m,w){m.clipboardData&&m.clipboardData.setData("text/plain",w.selectionText),m.preventDefault()},c.handlePasteEvent=function(m,w,E,_){m.stopPropagation(),m.clipboardData&&y(m.clipboardData.getData("text/plain"),w,E,_)},c.paste=y,c.moveTextAreaUnderMouseCursor=h,c.rightClickHandler=function(m,w,E,_,n){h(m,w,E),n&&_.rightClickSelect(m),w.value=_.selectionText,w.select()}},7239:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorContrastCache=void 0;const p=u(1505);c.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(y,h,m){this._css.set(y,h,m)}getCss(y,h){return this._css.get(y,h)}setColor(y,h,m){this._color.set(y,h,m)}getColor(y,h){return this._color.get(y,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(u,p,y,h){u.addEventListener(p,y,h);let m=!1;return{dispose:()=>{m||(m=!0,u.removeEventListener(p,y,h))}}}},3551:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var C,S=arguments.length,x=S<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,s,o,f);else for(var g=l.length-1;g>=0;g--)(C=l[g])&&(x=(S<3?C(x):S>3?C(s,o,x):C(s,o))||x);return S>3&&x&&Object.defineProperty(s,o,x),x},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Linkifier=void 0;const h=u(3656),m=u(8460),w=u(844),E=u(2585),_=u(4725);let n=c.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(l,s,o,f,C){super(),this._element=l,this._mouseService=s,this._renderService=o,this._bufferService=f,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){this._lastMouseEvent=l;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const o=l.composedPath();for(let f=0;f<o.length;f++){const C=o[f];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,s){this._activeProviderReplies&&s||(this._activeProviderReplies?.forEach((f=>{f?.forEach((C=>{C.link.dispose&&C.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=l.y);let o=!1;for(const[f,C]of this._linkProviderService.linkProviders.entries())s?this._activeProviderReplies?.get(f)&&(o=this._checkLinkProviderResult(f,l,o)):C.provideLinks(l.y,(S=>{if(this._isMouseOut)return;const x=S?.map((g=>({link:g})));this._activeProviderReplies?.set(f,x),o=this._checkLinkProviderResult(f,l,o),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)}))}_removeIntersectingLinks(l,s){const o=new Set;for(let f=0;f<s.size;f++){const C=s.get(f);if(C)for(let S=0;S<C.length;S++){const x=C[S],g=x.link.range.start.y<l?0:x.link.range.start.x,L=x.link.range.end.y>l?this._bufferService.cols:x.link.range.end.x;for(let H=g;H<=L;H++){if(o.has(H)){C.splice(S--,1);break}o.add(H)}}}}_checkLinkProviderResult(l,s,o){if(!this._activeProviderReplies)return o;const f=this._activeProviderReplies.get(l);let C=!1;for(let S=0;S<l;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&f){const S=f.find((x=>this._linkAtPosition(x.link,s)));S&&(o=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!o)for(let S=0;S<this._activeProviderReplies.size;S++){const x=this._activeProviderReplies.get(S)?.find((g=>this._linkAtPosition(g.link,s)));if(x){o=!0,this._handleNewLink(x);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._currentLink)return;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,s){this._currentLink&&this._lastMouseEvent&&(!l||!s||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._lastMouseEvent)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(l.link,s)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:o=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",o))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:o=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((o=>{if(!this._currentLink)return;const f=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(f,C),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}}))))}_linkHover(l,s,o){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(o,s.text)}_fireUnderlineEvent(l,s){const o=l.range,f=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-f-1,o.end.x,o.end.y-f-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(l,s,o){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(o,s.text)}_linkAtPosition(l,s){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,f=l.range.end.y*this._bufferService.cols+l.range.end.x,C=s.y*this._bufferService.cols+s.x;return o<=C&&C<=f}_positionFromMouseEvent(l,s,o){const f=o.getCoords(l,s,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,s,o,f,C){return{x1:l,y1:s,x2:o,y2:f,cols:this._bufferService.cols,fg:C}}};c.Linkifier=n=p([y(1,_.IMouseService),y(2,_.IRenderService),y(3,E.IBufferService),y(4,_.ILinkProviderService)],n)},9042:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tooMuchOutput=c.promptLabel=void 0,c.promptLabel="Terminal input",c.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(U,c,u){var p=this&&this.__decorate||function(_,n,l,s){var o,f=arguments.length,C=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,n,l,s);else for(var S=_.length-1;S>=0;S--)(o=_[S])&&(C=(f<3?o(C):f>3?o(n,l,C):o(n,l))||C);return f>3&&C&&Object.defineProperty(n,l,C),C},y=this&&this.__param||function(_,n){return function(l,s){n(l,s,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkProvider=void 0;const h=u(511),m=u(2585);let w=c.OscLinkProvider=class{constructor(_,n,l){this._bufferService=_,this._optionsService=n,this._oscLinkService=l}provideLinks(_,n){const l=this._bufferService.buffer.lines.get(_-1);if(!l)return void n(void 0);const s=[],o=this._optionsService.rawOptions.linkHandler,f=new h.CellData,C=l.getTrimmedLength();let S=-1,x=-1,g=!1;for(let L=0;L<C;L++)if(x!==-1||l.hasContent(L)){if(l.loadCell(L,f),f.hasExtendedAttrs()&&f.extended.urlId){if(x===-1){x=L,S=f.extended.urlId;continue}g=f.extended.urlId!==S}else x!==-1&&(g=!0);if(g||x!==-1&&L===C-1){const H=this._oscLinkService.getLinkData(S)?.uri;if(H){const N={start:{x:x+1,y:_},end:{x:L+(g||L!==C-1?0:1),y:_}};let V=!1;if(!o?.allowNonHttpProtocols)try{const j=new URL(H);["http:","https:"].includes(j.protocol)||(V=!0)}catch{V=!0}V||s.push({text:H,range:N,activate:(j,te)=>o?o.activate(j,te,N):E(0,te),hover:(j,te)=>o?.hover?.(j,te,N),leave:(j,te)=>o?.leave?.(j,te,N)})}g=!1,f.hasExtendedAttrs()&&f.extended.urlId?(x=L,S=f.extended.urlId):(x=-1,S=-1)}}n(s)}};function E(_,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}c.OscLinkProvider=w=p([y(0,m.IBufferService),y(1,m.IOptionsService),y(2,m.IOscLinkService)],w)},6193:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RenderDebouncer=void 0,c.RenderDebouncer=class{constructor(u,p){this._renderCallback=u,this._coreBrowserService=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(u,p,y){this._rowCount=y,u=u!==void 0?u:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},3236:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const p=u(3614),y=u(3656),h=u(3551),m=u(9042),w=u(3730),E=u(1680),_=u(3107),n=u(5744),l=u(2950),s=u(1296),o=u(428),f=u(4269),C=u(5114),S=u(8934),x=u(3230),g=u(9312),L=u(4725),H=u(6731),N=u(8055),V=u(8969),j=u(8460),te=u(844),oe=u(6114),he=u(8437),ve=u(2584),Q=u(7399),k=u(5941),P=u(9074),b=u(2585),I=u(5435),ie=u(4567),se=u(779);class de extends V.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(q={}){super(q),this.browser=oe,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new te.MutableDisposable),this._onCursorMove=this.register(new j.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new j.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new j.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new j.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new j.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new j.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new j.EventEmitter),this._onBlur=this.register(new j.EventEmitter),this._onA11yCharEmitter=this.register(new j.EventEmitter),this._onA11yTabEmitter=this.register(new j.EventEmitter),this._onWillOpen=this.register(new j.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(b.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(se.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((M,ne)=>this.refresh(M,ne)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((M=>this._reportWindowsOptions(M)))),this.register(this._inputHandler.onColor((M=>this._handleColorEvent(M)))),this.register((0,j.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,j.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((M=>this._afterResize(M.cols,M.rows)))),this.register((0,te.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(q){if(this._themeService)for(const M of q){let ne,J="";switch(M.index){case 256:ne="foreground",J="10";break;case 257:ne="background",J="11";break;case 258:ne="cursor",J="12";break;default:ne="ansi",J="4;"+M.index}switch(M.type){case 0:const Se=N.color.toColorRGB(ne==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[ne]);this.coreService.triggerDataEvent(`${ve.C0.ESC}]${J};${(0,k.toRgbString)(Se)}${ve.C1_ESCAPED.ST}`);break;case 1:if(ne==="ansi")this._themeService.modifyColors((we=>we.ansi[M.index]=N.channels.toColor(...M.color)));else{const we=ne;this._themeService.modifyColors((Fe=>Fe[we]=N.channels.toColor(...M.color)))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(q){q?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ie.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(q){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const q=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(q);if(!M)return;const ne=Math.min(this.buffer.x,this.cols-1),J=this._renderService.dimensions.css.cell.height,Se=M.getWidth(ne),we=this._renderService.dimensions.css.cell.width*Se,Fe=this.buffer.y*this._renderService.dimensions.css.cell.height,ze=ne*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ze+"px",this.textarea.style.top=Fe+"px",this.textarea.style.width=we+"px",this.textarea.style.height=J+"px",this.textarea.style.lineHeight=J+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,y.addDisposableDomListener)(this.element,"copy",(M=>{this.hasSelection()&&(0,p.copyHandler)(M,this._selectionService)})));const q=M=>(0,p.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,y.addDisposableDomListener)(this.textarea,"paste",q)),this.register((0,y.addDisposableDomListener)(this.element,"paste",q)),oe.isFirefox?this.register((0,y.addDisposableDomListener)(this.element,"mousedown",(M=>{M.button===2&&(0,p.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,y.addDisposableDomListener)(this.element,"contextmenu",(M=>{(0,p.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),oe.isLinux&&this.register((0,y.addDisposableDomListener)(this.element,"auxclick",(M=>{M.button===1&&(0,p.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,y.addDisposableDomListener)(this.textarea,"keyup",(q=>this._keyUp(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keydown",(q=>this._keyDown(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keypress",(q=>this._keyPress(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionupdate",(q=>this._compositionHelper.compositionupdate(q)))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,y.addDisposableDomListener)(this.textarea,"input",(q=>this._inputEvent(q)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(q){if(!q)throw new Error("Terminal requires a parent element.");if(q.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=q.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),q.appendChild(this.element);const M=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),M.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,y.addDisposableDomListener)(this.screenElement,"mousemove",(ne=>this.updateCursorStyle(ne)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),M.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),oe.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,q.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,y.addDisposableDomListener)(this.textarea,"focus",(ne=>this._handleTextAreaFocus(ne)))),this.register((0,y.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(H.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((ne=>this._onRender.fire(ne)))),this.onResize((ne=>this._renderService.resize(ne.cols,ne.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(M);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((ne=>this._renderService.handleSelectionChanged(ne.start,ne.end,ne.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((ne=>{this.textarea.value=ne,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((ne=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,y.addDisposableDomListener)(this.element,"mousedown",(ne=>this._selectionService.handleMouseDown(ne)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ie.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(ne=>this._handleScreenReaderModeOptionChange(ne)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(ne=>{!this._overviewRulerRenderer&&ne&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const q=this,M=this.element;function ne(we){const Fe=q._mouseService.getMouseReportCoords(we,q.screenElement);if(!Fe)return!1;let ze,Ue;switch(we.overrideType||we.type){case"mousemove":Ue=32,we.buttons===void 0?(ze=3,we.button!==void 0&&(ze=we.button<3?we.button:3)):ze=1&we.buttons?0:4&we.buttons?1:2&we.buttons?2:3;break;case"mouseup":Ue=0,ze=we.button<3?we.button:3;break;case"mousedown":Ue=1,ze=we.button<3?we.button:3;break;case"wheel":if(q._customWheelEventHandler&&q._customWheelEventHandler(we)===!1||q.viewport.getLinesScrolled(we)===0)return!1;Ue=we.deltaY<0?0:1,ze=4;break;default:return!1}return!(Ue===void 0||ze===void 0||ze>4)&&q.coreMouseService.triggerMouseEvent({col:Fe.col,row:Fe.row,x:Fe.x,y:Fe.y,button:ze,action:Ue,ctrl:we.ctrlKey,alt:we.altKey,shift:we.shiftKey})}const J={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Se={mouseup:we=>(ne(we),we.buttons||(this._document.removeEventListener("mouseup",J.mouseup),J.mousedrag&&this._document.removeEventListener("mousemove",J.mousedrag)),this.cancel(we)),wheel:we=>(ne(we),this.cancel(we,!0)),mousedrag:we=>{we.buttons&&ne(we)},mousemove:we=>{we.buttons||ne(we)}};this.register(this.coreMouseService.onProtocolChange((we=>{we?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(we)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&we?J.mousemove||(M.addEventListener("mousemove",Se.mousemove),J.mousemove=Se.mousemove):(M.removeEventListener("mousemove",J.mousemove),J.mousemove=null),16&we?J.wheel||(M.addEventListener("wheel",Se.wheel,{passive:!1}),J.wheel=Se.wheel):(M.removeEventListener("wheel",J.wheel),J.wheel=null),2&we?J.mouseup||(J.mouseup=Se.mouseup):(this._document.removeEventListener("mouseup",J.mouseup),J.mouseup=null),4&we?J.mousedrag||(J.mousedrag=Se.mousedrag):(this._document.removeEventListener("mousemove",J.mousedrag),J.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,y.addDisposableDomListener)(M,"mousedown",(we=>{if(we.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(we))return ne(we),J.mouseup&&this._document.addEventListener("mouseup",J.mouseup),J.mousedrag&&this._document.addEventListener("mousemove",J.mousedrag),this.cancel(we)}))),this.register((0,y.addDisposableDomListener)(M,"wheel",(we=>{if(!J.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(we)===!1)return!1;if(!this.buffer.hasScrollback){const Fe=this.viewport.getLinesScrolled(we);if(Fe===0)return;const ze=ve.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(we.deltaY<0?"A":"B");let Ue="";for(let Ke=0;Ke<Math.abs(Fe);Ke++)Ue+=ze;return this.coreService.triggerDataEvent(Ue,!0),this.cancel(we,!0)}return this.viewport.handleWheel(we)?this.cancel(we):void 0}}),{passive:!1})),this.register((0,y.addDisposableDomListener)(M,"touchstart",(we=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(we),this.cancel(we)}),{passive:!0})),this.register((0,y.addDisposableDomListener)(M,"touchmove",(we=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(we)?void 0:this.cancel(we)}),{passive:!1}))}refresh(q,M){this._renderService?.refreshRows(q,M)}updateCursorStyle(q){this._selectionService?.shouldColumnSelect(q)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(q,M,ne=0){ne===1?(super.scrollLines(q,M,ne),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(q)}paste(q){(0,p.paste)(q,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(q){this._customKeyEventHandler=q}attachCustomWheelEventHandler(q){this._customWheelEventHandler=q}registerLinkProvider(q){return this._linkProviderService.registerLinkProvider(q)}registerCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(q);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(q)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(q){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+q)}registerDecoration(q){return this._decorationService.registerDecoration(q)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(q,M,ne){this._selectionService.setSelection(q,M,ne)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(q,M){this._selectionService?.selectLines(q,M)}_keyDown(q){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&q.altKey;if(!M&&!this._compositionHelper.keydown(q))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||q.key!=="Dead"&&q.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ne=(0,Q.evaluateKeyboardEvent)(q,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(q),ne.type===3||ne.type===2){const J=this.rows-1;return this.scrollLines(ne.type===2?-J:J),this.cancel(q,!0)}return ne.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,q)||(ne.cancel&&this.cancel(q,!0),!ne.key||!!(q.key&&!q.ctrlKey&&!q.altKey&&!q.metaKey&&q.key.length===1&&q.key.charCodeAt(0)>=65&&q.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ne.key!==ve.C0.ETX&&ne.key!==ve.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ne.key,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(ne.key,!0),!this.optionsService.rawOptions.screenReaderMode||q.altKey||q.ctrlKey?this.cancel(q,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(q,M){const ne=q.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||q.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||q.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?ne:ne&&(!M.keyCode||M.keyCode>47)}_keyUp(q){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1||((function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18})(q)||this.focus(),this.updateCursorStyle(q),this._keyPressHandled=!1)}_keyPress(q){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(this.cancel(q),q.charCode)M=q.charCode;else if(q.which===null||q.which===void 0)M=q.keyCode;else{if(q.which===0||q.charCode===0)return!1;M=q.which}return!(!M||(q.altKey||q.ctrlKey||q.metaKey)&&!this._isThirdLevelShift(this.browser,q)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(q){if(q.data&&q.inputType==="insertText"&&(!q.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=q.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(q),!0}return!1}resize(q,M){q!==this.cols||M!==this.rows?super.resize(q,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(q,M){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let q=1;q<this.rows;q++)this.buffer.lines.push(this.buffer.getBlankLine(he.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const q=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ve.C0.ESC+"[I"):this.coreService.triggerDataEvent(ve.C0.ESC+"[O")}_reportWindowsOptions(q){if(this._renderService)switch(q){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),ne=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.C0.ESC}[4;${ne};${M}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const J=this._renderService.dimensions.css.cell.width.toFixed(0),Se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.C0.ESC}[6;${Se};${J}t`)}}cancel(q,M){if(this.options.cancelEvents||M)return q.preventDefault(),q.stopPropagation(),!1}}c.Terminal=de},9924:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TimeBasedDebouncer=void 0,c.TimeBasedDebouncer=class{constructor(u,p=1e3){this._renderCallback=u,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,p,y){this._rowCount=y,u=u!==void 0?u:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=h-this._lastRefreshMs,w=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,p)}}},1680:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var C,S=arguments.length,x=S<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,s,o,f);else for(var g=l.length-1;g>=0;g--)(C=l[g])&&(x=(S<3?C(x):S>3?C(s,o,x):C(s,o))||x);return S>3&&x&&Object.defineProperty(s,o,x),x},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Viewport=void 0;const h=u(3656),m=u(4725),w=u(8460),E=u(844),_=u(2585);let n=c.Viewport=class extends E.Disposable{constructor(l,s,o,f,C,S,x,g){super(),this._viewportElement=l,this._scrollArea=s,this._bufferService=o,this._optionsService=f,this._charSizeService=C,this._renderService=S,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((L=>this._activeBuffer=L.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((L=>this._renderDimensions=L))),this._handleThemeChange(g.colors),this.register(g.onChangeColors((L=>this._handleThemeChange(L)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,s){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&o<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const s=this._getPixelsScrolled(l);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const s=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(l,s){let o,f="";const C=[],S=s??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let g=l;g<S;g++){const L=x.get(g);if(!L)continue;const H=x.get(g+1)?.isWrapped;if(f+=L.translateToString(!H),!H||g===x.length-1){const N=document.createElement("div");N.textContent=f,C.push(N),f.length>0&&(o=N),f=""}}return{bufferElements:C,cursorElement:o}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(l,s){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&s.altKey||o==="ctrl"&&s.ctrlKey||o==="shift"&&s.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const s=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}};c.Viewport=n=p([y(2,_.IBufferService),y(3,_.IOptionsService),y(4,m.ICharSizeService),y(5,m.IRenderService),y(6,m.ICoreBrowserService),y(7,m.IThemeService)],n)},3107:function(U,c,u){var p=this&&this.__decorate||function(_,n,l,s){var o,f=arguments.length,C=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,n,l,s);else for(var S=_.length-1;S>=0;S--)(o=_[S])&&(C=(f<3?o(C):f>3?o(n,l,C):o(n,l))||C);return f>3&&C&&Object.defineProperty(n,l,C),C},y=this&&this.__param||function(_,n){return function(l,s){n(l,s,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferDecorationRenderer=void 0;const h=u(4725),m=u(844),w=u(2585);let E=c.BufferDecorationRenderer=class extends m.Disposable{constructor(_,n,l,s,o){super(),this._screenElement=_,this._bufferService=n,this._coreBrowserService=l,this._decorationService=s,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((f=>this._removeDecoration(f)))),this.register((0,m.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",_?.options?.layer==="top"),n.style.width=`${Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const l=_.options.x??0;return l&&l>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(_,n),n}_refreshStyle(_){const n=_.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let l=this._decorationElements.get(_);l||(l=this._createElement(_),_.element=l,this._decorationElements.set(_,l),this._container.appendChild(l),_.onDispose((()=>{this._decorationElements.delete(_),l.remove()}))),l.style.top=n*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(l)}}_refreshXPosition(_,n=_.element){if(!n)return;const l=_.options.x??0;(_.options.anchor||"left")==="right"?n.style.right=l?l*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=l?l*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){this._decorationElements.get(_)?.remove(),this._decorationElements.delete(_),_.dispose()}};c.BufferDecorationRenderer=E=p([y(1,w.IBufferService),y(2,h.ICoreBrowserService),y(3,w.IDecorationService),y(4,h.IRenderService)],E)},5871:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorZoneStore=void 0,c.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const p of this._zones)if(p.color===u.options.overviewRulerOptions.color&&p.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,u.marker.line))return;if(this._lineAdjacentToZone(p,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(p,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,p){return p>=u.startBufferLine&&p<=u.endBufferLine}_lineAdjacentToZone(u,p,y){return p>=u.startBufferLine-this._linePadding[y||"full"]&&p<=u.endBufferLine+this._linePadding[y||"full"]}_addLineToZone(u,p){u.startBufferLine=Math.min(u.startBufferLine,p),u.endBufferLine=Math.max(u.endBufferLine,p)}}},5744:function(U,c,u){var p=this&&this.__decorate||function(o,f,C,S){var x,g=arguments.length,L=g<3?f:S===null?S=Object.getOwnPropertyDescriptor(f,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(o,f,C,S);else for(var H=o.length-1;H>=0;H--)(x=o[H])&&(L=(g<3?x(L):g>3?x(f,C,L):x(f,C))||L);return g>3&&L&&Object.defineProperty(f,C,L),L},y=this&&this.__param||function(o,f){return function(C,S){f(C,S,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OverviewRulerRenderer=void 0;const h=u(5871),m=u(4725),w=u(844),E=u(2585),_={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let s=c.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(o,f,C,S,x,g,L){super(),this._viewportElement=o,this._screenElement=f,this._bufferService=C,this._decorationService=S,this._renderService=x,this._optionsService=g,this._coreBrowserService=L,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const H=this._canvas.getContext("2d");if(!H)throw new Error("Ctx cannot be null");this._ctx=H,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const o=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=o,n.center=f,n.right=o,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=n.left,l.right=n.left+n.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const o=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(o,12),6)*this._coreBrowserService.dpr);_.left=f,_.center=f,_.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const o=this._colorZoneStore.zones;for(const f of o)f.position!=="full"&&this._renderColorZone(f);for(const f of o)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(o){this._ctx.fillStyle=o.color,this._ctx.fillRect(l[o.position||"full"],Math.round((this._canvas.height-1)*(o.startBufferLine/this._bufferService.buffers.active.lines.length)-_[o.position||"full"]/2),n[o.position||"full"],Math.round((this._canvas.height-1)*((o.endBufferLine-o.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[o.position||"full"]))}_queueRefresh(o,f){this._shouldUpdateDimensions=o||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};c.OverviewRulerRenderer=s=p([y(2,E.IBufferService),y(3,E.IDecorationService),y(4,m.IRenderService),y(5,E.IOptionsService),y(6,m.ICoreBrowserService)],s)},2950:function(U,c,u){var p=this&&this.__decorate||function(_,n,l,s){var o,f=arguments.length,C=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,n,l,s);else for(var S=_.length-1;S>=0;S--)(o=_[S])&&(C=(f<3?o(C):f>3?o(n,l,C):o(n,l))||C);return f>3&&C&&Object.defineProperty(n,l,C),C},y=this&&this.__param||function(_,n){return function(l,s){n(l,s,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CompositionHelper=void 0;const h=u(4725),m=u(2585),w=u(2584);let E=c.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,n,l,s,o,f){this._textarea=_,this._compositionView=n,this._bufferService=l,this._optionsService=s,this._coreService=o,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}}),0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const n=this._textarea.value,l=n.replace(_,"");this._dataAlreadySent=l,n.length>_.length?this._coreService.triggerDataEvent(l,!0):n.length<_.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===_.length&&n!==_&&this._coreService.triggerDataEvent(n,!0)}}),0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}_||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};c.CompositionHelper=E=p([y(2,m.IBufferService),y(3,m.IOptionsService),y(4,m.ICoreService),y(5,h.IRenderService)],E)},9806:(U,c)=>{function u(p,y,h){const m=h.getBoundingClientRect(),w=p.getComputedStyle(h),E=parseInt(w.getPropertyValue("padding-left")),_=parseInt(w.getPropertyValue("padding-top"));return[y.clientX-m.left-E,y.clientY-m.top-_]}Object.defineProperty(c,"__esModule",{value:!0}),c.getCoords=c.getCoordsRelativeToElement=void 0,c.getCoordsRelativeToElement=u,c.getCoords=function(p,y,h,m,w,E,_,n,l){if(!E)return;const s=u(p,y,h);return s?(s[0]=Math.ceil((s[0]+(l?_/2:0))/_),s[1]=Math.ceil(s[1]/n),s[0]=Math.min(Math.max(s[0],1),m+(l?1:0)),s[1]=Math.min(Math.max(s[1],1),w),s):void 0}},9504:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.moveToCellSequence=void 0;const p=u(2584);function y(n,l,s,o){const f=n-h(n,s),C=l-h(l,s),S=Math.abs(f-C)-(function(x,g,L){let H=0;const N=x-h(x,L),V=g-h(g,L);for(let j=0;j<Math.abs(N-V);j++){const te=m(x,g)==="A"?-1:1;L.buffer.lines.get(N+te*j)?.isWrapped&&H++}return H})(n,l,s);return _(S,E(m(n,l),o))}function h(n,l){let s=0,o=l.buffer.lines.get(n),f=o?.isWrapped;for(;f&&n>=0&&n<l.rows;)s++,o=l.buffer.lines.get(--n),f=o?.isWrapped;return s}function m(n,l){return n>l?"A":"B"}function w(n,l,s,o,f,C){let S=n,x=l,g="";for(;S!==s||x!==o;)S+=f?1:-1,f&&S>C.cols-1?(g+=C.buffer.translateBufferLineToString(x,!1,n,S),S=0,n=0,x++):!f&&S<0&&(g+=C.buffer.translateBufferLineToString(x,!1,0,n+1),S=C.cols-1,n=S,x--);return g+C.buffer.translateBufferLineToString(x,!1,n,S)}function E(n,l){const s=l?"O":"[";return p.C0.ESC+s+n}function _(n,l){n=Math.floor(n);let s="";for(let o=0;o<n;o++)s+=l;return s}c.moveToCellSequence=function(n,l,s,o){const f=s.buffer.x,C=s.buffer.y;if(!s.buffer.hasScrollback)return(function(g,L,H,N,V,j){return y(L,N,V,j).length===0?"":_(w(g,L,g,L-h(L,V),!1,V).length,E("D",j))})(f,C,0,l,s,o)+y(C,l,s,o)+(function(g,L,H,N,V,j){let te;te=y(L,N,V,j).length>0?N-h(N,V):L;const oe=N,he=(function(ve,Q,k,P,b,I){let ie;return ie=y(k,P,b,I).length>0?P-h(P,b):Q,ve<k&&ie<=P||ve>=k&&ie<P?"C":"D"})(g,L,H,N,V,j);return _(w(g,te,H,oe,he==="C",V).length,E(he,j))})(f,C,n,l,s,o);let S;if(C===l)return S=f>n?"D":"C",_(Math.abs(f-n),E(S,o));S=C>l?"D":"C";const x=Math.abs(C-l);return _((function(g,L){return L.cols-g})(C>l?n:f,s)+(x-1)*s.cols+1+((C>l?f:n)-1),E(S,o))}},1296:function(U,c,u){var p=this&&this.__decorate||function(j,te,oe,he){var ve,Q=arguments.length,k=Q<3?te:he===null?he=Object.getOwnPropertyDescriptor(te,oe):he;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(j,te,oe,he);else for(var P=j.length-1;P>=0;P--)(ve=j[P])&&(k=(Q<3?ve(k):Q>3?ve(te,oe,k):ve(te,oe))||k);return Q>3&&k&&Object.defineProperty(te,oe,k),k},y=this&&this.__param||function(j,te){return function(oe,he){te(oe,he,j)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRenderer=void 0;const h=u(3787),m=u(2550),w=u(2223),E=u(6171),_=u(6052),n=u(4725),l=u(8055),s=u(8460),o=u(844),f=u(2585),C="xterm-dom-renderer-owner-",S="xterm-rows",x="xterm-fg-",g="xterm-bg-",L="xterm-focus",H="xterm-selection";let N=1,V=c.DomRenderer=class extends o.Disposable{constructor(j,te,oe,he,ve,Q,k,P,b,I,ie,se,de){super(),this._terminal=j,this._document=te,this._element=oe,this._screenElement=he,this._viewportElement=ve,this._helperContainer=Q,this._linkifier2=k,this._charSizeService=b,this._optionsService=I,this._bufferService=ie,this._coreBrowserService=se,this._themeService=de,this._terminalClass=N++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(H),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((xe=>this._injectCss(xe)))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((xe=>this._handleLinkHover(xe)))),this.register(this._linkifier2.onHideLinkUnderline((xe=>this._handleLinkLeave(xe)))),this.register((0,o.toDisposable)((()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const j=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*j,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*j),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/j),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/j),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const oe of this._rowElements)oe.style.width=`${this.dimensions.css.canvas.width}px`,oe.style.height=`${this.dimensions.css.cell.height}px`,oe.style.lineHeight=`${this.dimensions.css.cell.height}px`,oe.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const te=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=te,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(j){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let te=`${this._terminalSelector} .${S} { color: ${j.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;te+=`${this._terminalSelector} .${S} .xterm-dim { color: ${l.color.multiplyOpacity(j.foreground,.5).css};}`,te+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const oe=`blink_underline_${this._terminalClass}`,he=`blink_bar_${this._terminalClass}`,ve=`blink_block_${this._terminalClass}`;te+=`@keyframes ${oe} { 50% {  border-bottom-style: hidden; }}`,te+=`@keyframes ${he} { 50% {  box-shadow: none; }}`,te+=`@keyframes ${ve} { 0% {  background-color: ${j.cursor.css};  color: ${j.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${j.cursor.css}; }}`,te+=`${this._terminalSelector} .${S}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${oe} 1s step-end infinite;}${this._terminalSelector} .${S}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${he} 1s step-end infinite;}${this._terminalSelector} .${S}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${ve} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${j.cursor.css}; color: ${j.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${j.cursor.css} !important; color: ${j.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${j.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${j.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${j.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,te+=`${this._terminalSelector} .${H} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${H} div { position: absolute; background-color: ${j.selectionBackgroundOpaque.css};}${this._terminalSelector} .${H} div { position: absolute; background-color: ${j.selectionInactiveBackgroundOpaque.css};}`;for(const[Q,k]of j.ansi.entries())te+=`${this._terminalSelector} .${x}${Q} { color: ${k.css}; }${this._terminalSelector} .${x}${Q}.xterm-dim { color: ${l.color.multiplyOpacity(k,.5).css}; }${this._terminalSelector} .${g}${Q} { background-color: ${k.css}; }`;te+=`${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(j.background).css}; }${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(j.background),.5).css}; }${this._terminalSelector} .${g}${w.INVERTED_DEFAULT_COLOR} { background-color: ${j.foreground.css}; }`,this._themeStyleElement.textContent=te}_setDefaultSpacing(){const j=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${j}px`,this._rowFactory.defaultSpacing=j}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(j,te){for(let oe=this._rowElements.length;oe<=te;oe++){const he=this._document.createElement("div");this._rowContainer.appendChild(he),this._rowElements.push(he)}for(;this._rowElements.length>te;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(j,te){this._refreshRowElements(j,te),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(j,te,oe){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(j,te,oe),this.renderRows(0,this._bufferService.rows-1),!j||!te)return;this._selectionRenderModel.update(this._terminal,j,te,oe);const he=this._selectionRenderModel.viewportStartRow,ve=this._selectionRenderModel.viewportEndRow,Q=this._selectionRenderModel.viewportCappedStartRow,k=this._selectionRenderModel.viewportCappedEndRow;if(Q>=this._bufferService.rows||k<0)return;const P=this._document.createDocumentFragment();if(oe){const b=j[0]>te[0];P.appendChild(this._createSelectionElement(Q,b?te[0]:j[0],b?j[0]:te[0],k-Q+1))}else{const b=he===Q?j[0]:0,I=Q===ve?te[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(Q,b,I));const ie=k-Q-1;if(P.appendChild(this._createSelectionElement(Q+1,0,this._bufferService.cols,ie)),Q!==k){const se=ve===k?te[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(k,0,se))}}this._selectionContainer.appendChild(P)}_createSelectionElement(j,te,oe,he=1){const ve=this._document.createElement("div"),Q=te*this.dimensions.css.cell.width;let k=this.dimensions.css.cell.width*(oe-te);return Q+k>this.dimensions.css.canvas.width&&(k=this.dimensions.css.canvas.width-Q),ve.style.height=he*this.dimensions.css.cell.height+"px",ve.style.top=j*this.dimensions.css.cell.height+"px",ve.style.left=`${Q}px`,ve.style.width=`${k}px`,ve}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const j of this._rowElements)j.replaceChildren()}renderRows(j,te){const oe=this._bufferService.buffer,he=oe.ybase+oe.y,ve=Math.min(oe.x,this._bufferService.cols-1),Q=this._optionsService.rawOptions.cursorBlink,k=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let b=j;b<=te;b++){const I=b+oe.ydisp,ie=this._rowElements[b],se=oe.lines.get(I);if(!ie||!se)break;ie.replaceChildren(...this._rowFactory.createRow(se,I,I===he,k,P,ve,Q,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(j){this._setCellUnderline(j.x1,j.x2,j.y1,j.y2,j.cols,!0)}_handleLinkLeave(j){this._setCellUnderline(j.x1,j.x2,j.y1,j.y2,j.cols,!1)}_setCellUnderline(j,te,oe,he,ve,Q){oe<0&&(j=0),he<0&&(te=0);const k=this._bufferService.rows-1;oe=Math.max(Math.min(oe,k),0),he=Math.max(Math.min(he,k),0),ve=Math.min(ve,this._bufferService.cols);const P=this._bufferService.buffer,b=P.ybase+P.y,I=Math.min(P.x,ve-1),ie=this._optionsService.rawOptions.cursorBlink,se=this._optionsService.rawOptions.cursorStyle,de=this._optionsService.rawOptions.cursorInactiveStyle;for(let xe=oe;xe<=he;++xe){const q=xe+P.ydisp,M=this._rowElements[xe],ne=P.lines.get(q);if(!M||!ne)break;M.replaceChildren(...this._rowFactory.createRow(ne,q,q===b,se,de,I,ie,this.dimensions.css.cell.width,this._widthCache,Q?xe===oe?j:0:-1,Q?(xe===he?te:ve)-1:-1))}}};c.DomRenderer=V=p([y(7,f.IInstantiationService),y(8,n.ICharSizeService),y(9,f.IOptionsService),y(10,f.IBufferService),y(11,n.ICoreBrowserService),y(12,n.IThemeService)],V)},3787:function(U,c,u){var p=this&&this.__decorate||function(S,x,g,L){var H,N=arguments.length,V=N<3?x:L===null?L=Object.getOwnPropertyDescriptor(x,g):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(S,x,g,L);else for(var j=S.length-1;j>=0;j--)(H=S[j])&&(V=(N<3?H(V):N>3?H(x,g,V):H(x,g))||V);return N>3&&V&&Object.defineProperty(x,g,V),V},y=this&&this.__param||function(S,x){return function(g,L){x(g,L,S)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRendererRowFactory=void 0;const h=u(2223),m=u(643),w=u(511),E=u(2585),_=u(8055),n=u(4725),l=u(4269),s=u(6171),o=u(3734);let f=c.DomRendererRowFactory=class{constructor(S,x,g,L,H,N,V){this._document=S,this._characterJoinerService=x,this._optionsService=g,this._coreBrowserService=L,this._coreService=H,this._decorationService=N,this._themeService=V,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,x,g){this._selectionStart=S,this._selectionEnd=x,this._columnSelectMode=g}createRow(S,x,g,L,H,N,V,j,te,oe,he){const ve=[],Q=this._characterJoinerService.getJoinedCharacters(x),k=this._themeService.colors;let P,b=S.getNoBgTrimmedLength();g&&b<N+1&&(b=N+1);let I=0,ie="",se=0,de=0,xe=0,q=!1,M=0,ne=!1,J=0;const Se=[],we=oe!==-1&&he!==-1;for(let Fe=0;Fe<b;Fe++){S.loadCell(Fe,this._workCell);let ze=this._workCell.getWidth();if(ze===0)continue;let Ue=!1,Ke=Fe,Ae=this._workCell;if(Q.length>0&&Fe===Q[0][0]){Ue=!0;const Ve=Q.shift();Ae=new l.JoinedCellData(this._workCell,S.translateToString(!0,Ve[0],Ve[1]),Ve[1]-Ve[0]),Ke=Ve[1]-1,ze=Ae.getWidth()}const Tt=this._isCellInSelection(Fe,x),ar=g&&Fe===N,Xt=we&&Fe>=oe&&Fe<=he;let Ft=!1;this._decorationService.forEachDecorationAtCell(Fe,x,void 0,(Ve=>{Ft=!0}));let cr=Ae.getChars()||m.WHITESPACE_CELL_CHAR;if(cr===" "&&(Ae.isUnderline()||Ae.isOverline())&&(cr=""),J=ze*j-te.get(cr,Ae.isBold(),Ae.isItalic()),P){if(I&&(Tt&&ne||!Tt&&!ne&&Ae.bg===se)&&(Tt&&ne&&k.selectionForeground||Ae.fg===de)&&Ae.extended.ext===xe&&Xt===q&&J===M&&!ar&&!Ue&&!Ft){Ae.isInvisible()?ie+=m.WHITESPACE_CELL_CHAR:ie+=cr,I++;continue}I&&(P.textContent=ie),P=this._document.createElement("span"),I=0,ie=""}else P=this._document.createElement("span");if(se=Ae.bg,de=Ae.fg,xe=Ae.extended.ext,q=Xt,M=J,ne=Tt,Ue&&N>=Fe&&N<=Ke&&(N=Fe),!this._coreService.isCursorHidden&&ar&&this._coreService.isCursorInitialized){if(Se.push("xterm-cursor"),this._coreBrowserService.isFocused)V&&Se.push("xterm-cursor-blink"),Se.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(H)switch(H){case"outline":Se.push("xterm-cursor-outline");break;case"block":Se.push("xterm-cursor-block");break;case"bar":Se.push("xterm-cursor-bar");break;case"underline":Se.push("xterm-cursor-underline")}}if(Ae.isBold()&&Se.push("xterm-bold"),Ae.isItalic()&&Se.push("xterm-italic"),Ae.isDim()&&Se.push("xterm-dim"),ie=Ae.isInvisible()?m.WHITESPACE_CELL_CHAR:Ae.getChars()||m.WHITESPACE_CELL_CHAR,Ae.isUnderline()&&(Se.push(`xterm-underline-${Ae.extended.underlineStyle}`),ie===" "&&(ie=""),!Ae.isUnderlineColorDefault()))if(Ae.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(Ae.getUnderlineColor()).join(",")})`;else{let Ve=Ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ae.isBold()&&Ve<8&&(Ve+=8),P.style.textDecorationColor=k.ansi[Ve].css}Ae.isOverline()&&(Se.push("xterm-overline"),ie===" "&&(ie="")),Ae.isStrikethrough()&&Se.push("xterm-strikethrough"),Xt&&(P.style.textDecoration="underline");let ht=Ae.getFgColor(),Mt=Ae.getFgColorMode(),_t=Ae.getBgColor(),Ht=Ae.getBgColorMode();const ur=!!Ae.isInverse();if(ur){const Ve=ht;ht=_t,_t=Ve;const Oi=Mt;Mt=Ht,Ht=Oi}let lt,hr,gt,Pt=!1;switch(this._decorationService.forEachDecorationAtCell(Fe,x,void 0,(Ve=>{Ve.options.layer!=="top"&&Pt||(Ve.backgroundColorRGB&&(Ht=50331648,_t=Ve.backgroundColorRGB.rgba>>8&16777215,lt=Ve.backgroundColorRGB),Ve.foregroundColorRGB&&(Mt=50331648,ht=Ve.foregroundColorRGB.rgba>>8&16777215,hr=Ve.foregroundColorRGB),Pt=Ve.options.layer==="top")})),!Pt&&Tt&&(lt=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,_t=lt.rgba>>8&16777215,Ht=50331648,Pt=!0,k.selectionForeground&&(Mt=50331648,ht=k.selectionForeground.rgba>>8&16777215,hr=k.selectionForeground)),Pt&&Se.push("xterm-decoration-top"),Ht){case 16777216:case 33554432:gt=k.ansi[_t],Se.push(`xterm-bg-${_t}`);break;case 50331648:gt=_.channels.toColor(_t>>16,_t>>8&255,255&_t),this._addStyle(P,`background-color:#${C((_t>>>0).toString(16),"0",6)}`);break;default:ur?(gt=k.foreground,Se.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):gt=k.background}switch(lt||Ae.isDim()&&(lt=_.color.multiplyOpacity(gt,.5)),Mt){case 16777216:case 33554432:Ae.isBold()&&ht<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ht+=8),this._applyMinimumContrast(P,gt,k.ansi[ht],Ae,lt,void 0)||Se.push(`xterm-fg-${ht}`);break;case 50331648:const Ve=_.channels.toColor(ht>>16&255,ht>>8&255,255&ht);this._applyMinimumContrast(P,gt,Ve,Ae,lt,hr)||this._addStyle(P,`color:#${C(ht.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,gt,k.foreground,Ae,lt,hr)||ur&&Se.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Se.length&&(P.className=Se.join(" "),Se.length=0),ar||Ue||Ft?P.textContent=ie:I++,J!==this.defaultSpacing&&(P.style.letterSpacing=`${J}px`),ve.push(P),Fe=Ke}return P&&I&&(P.textContent=ie),ve}_applyMinimumContrast(S,x,g,L,H,N){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const V=this._getContrastCache(L);let j;if(H||N||(j=V.getColor(x.rgba,g.rgba)),j===void 0){const te=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);j=_.color.ensureContrastRatio(H||x,N||g,te),V.setColor((H||x).rgba,(N||g).rgba,j??null)}return!!j&&(this._addStyle(S,`color:${j.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,x){S.setAttribute("style",`${S.getAttribute("style")||""}${x};`)}_isCellInSelection(S,x){const g=this._selectionStart,L=this._selectionEnd;return!(!g||!L)&&(this._columnSelectMode?g[0]<=L[0]?S>=g[0]&&x>=g[1]&&S<L[0]&&x<=L[1]:S<g[0]&&x>=g[1]&&S>=L[0]&&x<=L[1]:x>g[1]&&x<L[1]||g[1]===L[1]&&x===g[1]&&S>=g[0]&&S<L[0]||g[1]<L[1]&&x===L[1]&&S<L[0]||g[1]<L[1]&&x===g[1]&&S>=g[0])}};function C(S,x,g){for(;S.length<g;)S=x+S;return S}c.DomRendererRowFactory=f=p([y(1,n.ICharacterJoinerService),y(2,E.IOptionsService),y(3,n.ICoreBrowserService),y(4,E.ICoreService),y(5,E.IDecorationService),y(6,n.IThemeService)],f)},2550:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WidthCache=void 0,c.WidthCache=class{constructor(u,p){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const y=u.createElement("span");y.classList.add("xterm-char-measure-element");const h=u.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const m=u.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const w=u.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[y,h,m,w],this._container.appendChild(y),this._container.appendChild(h),this._container.appendChild(m),this._container.appendChild(w),p.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,p,y,h){u===this._font&&p===this._fontSize&&y===this._weight&&h===this._weightBold||(this._font=u,this._fontSize=p,this._weight=y,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${y}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${y}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(u,p,y){let h=0;if(!p&&!y&&u.length===1&&(h=u.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const E=this._measure(u,0);return E>0&&(this._flat[h]=E),E}let m=u;p&&(m+="B"),y&&(m+="I");let w=this._holey.get(m);if(w===void 0){let E=0;p&&(E|=1),y&&(E|=2),w=this._measure(u,E),w>0&&this._holey.set(m,w)}return w}_measure(u,p){const y=this._measureElements[p];return y.textContent=u.repeat(32),y.offsetWidth/32}}},2223:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;const p=u(6114);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(U,c)=>{function u(y){return 57508<=y&&y<=57558}function p(y){return y>=128512&&y<=128591||y>=127744&&y<=128511||y>=128640&&y<=128767||y>=9728&&y<=9983||y>=9984&&y<=10175||y>=65024&&y<=65039||y>=129280&&y<=129535||y>=127462&&y<=127487}Object.defineProperty(c,"__esModule",{value:!0}),c.computeNextVariantOffset=c.createRenderDimensions=c.treatGlyphAsBackgroundColor=c.allowRescaling=c.isEmoji=c.isRestrictedPowerlineGlyph=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y},c.isPowerlineGlyph=u,c.isRestrictedPowerlineGlyph=function(y){return 57520<=y&&y<=57527},c.isEmoji=p,c.allowRescaling=function(y,h,m,w){return h===1&&m>Math.ceil(1.5*w)&&y!==void 0&&y>255&&!p(y)&&!u(y)&&!(function(E){return 57344<=E&&E<=63743})(y)},c.treatGlyphAsBackgroundColor=function(y){return u(y)||(function(h){return 9472<=h&&h<=9631})(y)},c.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},c.computeNextVariantOffset=function(y,h,m=0){return(y-(2*Math.round(h)-m))%(2*Math.round(h))}},6052:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createSelectionRenderModel=void 0;class u{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(y,h,m,w=!1){if(this.selectionStart=h,this.selectionEnd=m,!h||!m||h[0]===m[0]&&h[1]===m[1])return void this.clear();const E=y.buffers.active.ydisp,_=h[1]-E,n=m[1]-E,l=Math.max(_,0),s=Math.min(n,y.rows-1);l>=y.rows||s<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=_,this.viewportEndRow=n,this.viewportCappedStartRow=l,this.viewportCappedEndRow=s,this.startCol=h[0],this.endCol=m[0])}isCellSelected(y,h,m){return!!this.hasSelection&&(m-=y.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&m>=this.viewportCappedStartRow&&h<this.endCol&&m<=this.viewportCappedEndRow:h<this.startCol&&m>=this.viewportCappedStartRow&&h>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol)}}c.createSelectionRenderModel=function(){return new u}},456:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionModel=void 0,c.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,p=this.selectionEnd;return!(!u||!p)&&(u[1]>p[1]||u[1]===p[1]&&u[0]>p[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,C){var S,x=arguments.length,g=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,f):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,o,f,C);else for(var L=s.length-1;L>=0;L--)(S=s[L])&&(g=(x<3?S(g):x>3?S(o,f,g):S(o,f))||g);return x>3&&g&&Object.defineProperty(o,f,g),g},y=this&&this.__param||function(s,o){return function(f,C){o(f,C,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharSizeService=void 0;const h=u(2585),m=u(8460),w=u(844);let E=c.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,o,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new l(this._optionsService))}catch{this._measureStrategy=this.register(new n(s,o,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};c.CharSizeService=E=p([y(2,h.IOptionsService)],E);class _ extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(o,f){o!==void 0&&o>0&&f!==void 0&&f>0&&(this._result.width=o,this._result.height=f)}}class n extends _{constructor(o,f,C){super(),this._document=o,this._parentElement=f,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class l extends _{constructor(o){super(),this._optionsService=o,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const o=this._ctx.measureText("W");return this._validateAndSet(o.width,o.fontBoundingBoxAscent+o.fontBoundingBoxDescent),this._result}}},4269:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var C,S=arguments.length,x=S<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,s,o,f);else for(var g=l.length-1;g>=0;g--)(C=l[g])&&(x=(S<3?C(x):S>3?C(s,o,x):C(s,o))||x);return S>3&&x&&Object.defineProperty(s,o,x),x},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;const h=u(3734),m=u(643),w=u(511),E=u(2585);class _ extends h.AttributeData{constructor(s,o,f){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=o,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.JoinedCellData=_;let n=c.CharacterJoinerService=class Fu{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(s){const o={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(o),o.id}deregister(s){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===s)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(s);if(!o||o.length===0)return[];const f=[],C=o.translateToString(!0);let S=0,x=0,g=0,L=o.getFg(0),H=o.getBg(0);for(let N=0;N<o.getTrimmedLength();N++)if(o.loadCell(N,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==H){if(N-S>1){const V=this._getJoinedRanges(C,g,x,o,S);for(let j=0;j<V.length;j++)f.push(V[j])}S=N,g=x,L=this._workCell.fg,H=this._workCell.bg}x+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const N=this._getJoinedRanges(C,g,x,o,S);for(let V=0;V<N.length;V++)f.push(N[V])}return f}_getJoinedRanges(s,o,f,C,S){const x=s.substring(o,f);let g=[];try{g=this._characterJoiners[0].handler(x)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const H=this._characterJoiners[L].handler(x);for(let N=0;N<H.length;N++)Fu._mergeRanges(g,H[N])}catch(H){console.error(H)}return this._stringRangesToCellRanges(g,C,S),g}_stringRangesToCellRanges(s,o,f){let C=0,S=!1,x=0,g=s[C];if(g){for(let L=f;L<this._bufferService.cols;L++){const H=o.getWidth(L),N=o.getString(L).length||m.WHITESPACE_CELL_CHAR.length;if(H!==0){if(!S&&g[0]<=x&&(g[0]=L,S=!0),g[1]<=x){if(g[1]=L,g=s[++C],!g)break;g[0]<=x?(g[0]=L,S=!0):S=!1}x+=N}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(s,o){let f=!1;for(let C=0;C<s.length;C++){const S=s[C];if(f){if(o[1]<=S[0])return s[C-1][1]=o[1],s;if(o[1]<=S[1])return s[C-1][1]=Math.max(o[1],S[1]),s.splice(C,1),s;s.splice(C,1),C--}else{if(o[1]<=S[0])return s.splice(C,0,o),s;if(o[1]<=S[1])return S[0]=Math.min(o[0],S[0]),s;o[0]<S[1]&&(S[0]=Math.min(o[0],S[0]),f=!0)}}return f?s[s.length-1][1]=o[1]:s.push(o),s}};c.CharacterJoinerService=n=p([y(0,E.IBufferService)],n)},5114:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreBrowserService=void 0;const p=u(844),y=u(8460),h=u(3656);class m extends p.Disposable{constructor(_,n,l){super(),this._textarea=_,this._window=n,this.mainDocument=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new y.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((s=>this._screenDprMonitor.setWindow(s)))),this.register((0,y.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}c.CoreBrowserService=m;class w extends p.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new p.MutableDisposable),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,p.toDisposable)((()=>this.clearListener())))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LinkProviderService=void 0;const p=u(844);class y extends p.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,p.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const w=this.linkProviders.indexOf(m);w!==-1&&this.linkProviders.splice(w,1)}}}}c.LinkProviderService=y},8934:function(U,c,u){var p=this&&this.__decorate||function(E,_,n,l){var s,o=arguments.length,f=o<3?_:l===null?l=Object.getOwnPropertyDescriptor(_,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(E,_,n,l);else for(var C=E.length-1;C>=0;C--)(s=E[C])&&(f=(o<3?s(f):o>3?s(_,n,f):s(_,n))||f);return o>3&&f&&Object.defineProperty(_,n,f),f},y=this&&this.__param||function(E,_){return function(n,l){_(n,l,E)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseService=void 0;const h=u(4725),m=u(9806);let w=c.MouseService=class{constructor(E,_){this._renderService=E,this._charSizeService=_}getCoords(E,_,n,l,s){return(0,m.getCoords)(window,E,_,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(E,_){const n=(0,m.getCoordsRelativeToElement)(window,E,_);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};c.MouseService=w=p([y(0,h.IRenderService),y(1,h.ICharSizeService)],w)},3230:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,C){var S,x=arguments.length,g=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,f):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,o,f,C);else for(var L=s.length-1;L>=0;L--)(S=s[L])&&(g=(x<3?S(g):x>3?S(o,f,g):S(o,f))||g);return x>3&&g&&Object.defineProperty(o,f,g),g},y=this&&this.__param||function(s,o){return function(f,C){o(f,C,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderService=void 0;const h=u(6193),m=u(4725),w=u(8460),E=u(844),_=u(7226),n=u(2585);let l=c.RenderService=class extends E.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(s,o,f,C,S,x,g,L){super(),this._rowCount=s,this._charSizeService=C,this._renderer=this.register(new E.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new E.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(((H,N)=>this._renderRows(H,N)),g),this.register(this._renderDebouncer),this.register(g.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(x.onResize((()=>this._fullRefresh()))),this.register(x.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(f.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(S.onDecorationRegistered((()=>this._fullRefresh()))),this.register(S.onDecorationRemoved((()=>this._fullRefresh()))),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()}))),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(x.buffer.y,x.buffer.y,!0)))),this.register(L.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(g.window,o),this.register(g.onWindowChange((H=>this._registerIntersectionObserver(H,o))))}_registerIntersectionObserver(s,o){if("IntersectionObserver"in s){const f=new s.IntersectionObserver((C=>this._handleIntersectionChange(C[C.length-1])),{threshold:0});f.observe(o),this._observerDisposable.value=(0,E.toDisposable)((()=>f.disconnect()))}}_handleIntersectionChange(s){this._isPaused=s.isIntersecting===void 0?s.intersectionRatio===0:!s.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(s,o,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(s,o,this._rowCount))}_renderRows(s,o){this._renderer.value&&(s=Math.min(s,this._rowCount-1),o=Math.min(o,this._rowCount-1),this._renderer.value.renderRows(s,o),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:s,end:o}),this._onRender.fire({start:s,end:o}),this._isNextRenderRedrawOnly=!0)}resize(s,o){this._rowCount=o,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(s){this._renderer.value=s,this._renderer.value&&(this._renderer.value.onRequestRedraw((o=>this.refreshRows(o.start,o.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(s){return this._renderDebouncer.addRefreshCallback(s)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(s,o){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(s,o))):this._renderer.value.handleResize(s,o),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(s,o,f){this._selectionState.start=s,this._selectionState.end=o,this._selectionState.columnSelectMode=f,this._renderer.value?.handleSelectionChanged(s,o,f)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};c.RenderService=l=p([y(2,n.IOptionsService),y(3,m.ICharSizeService),y(4,n.IDecorationService),y(5,n.IBufferService),y(6,m.ICoreBrowserService),y(7,m.IThemeService)],l)},9312:function(U,c,u){var p=this&&this.__decorate||function(g,L,H,N){var V,j=arguments.length,te=j<3?L:N===null?N=Object.getOwnPropertyDescriptor(L,H):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(g,L,H,N);else for(var oe=g.length-1;oe>=0;oe--)(V=g[oe])&&(te=(j<3?V(te):j>3?V(L,H,te):V(L,H))||te);return j>3&&te&&Object.defineProperty(L,H,te),te},y=this&&this.__param||function(g,L){return function(H,N){L(H,N,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionService=void 0;const h=u(9806),m=u(9504),w=u(456),E=u(4725),_=u(8460),n=u(844),l=u(6114),s=u(4841),o=u(511),f=u(2585),C="",S=new RegExp(C,"g");let x=c.SelectionService=class extends n.Disposable{constructor(g,L,H,N,V,j,te,oe,he){super(),this._element=g,this._screenElement=L,this._linkifier=H,this._bufferService=N,this._coreService=V,this._mouseService=j,this._optionsService=te,this._renderService=oe,this._coreBrowserService=he,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ve=>this._handleMouseMove(ve),this._mouseUpListener=ve=>this._handleMouseUp(ve),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((ve=>this._handleTrim(ve))),this.register(this._bufferService.buffers.onBufferActivate((ve=>this._handleBufferActivate(ve)))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!g||!L||g[0]===L[0]&&g[1]===L[1])}get selectionText(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!g||!L)return"";const H=this._bufferService.buffer,N=[];if(this._activeSelectionMode===3){if(g[0]===L[0])return"";const V=g[0]<L[0]?g[0]:L[0],j=g[0]<L[0]?L[0]:g[0];for(let te=g[1];te<=L[1];te++){const oe=H.translateBufferLineToString(te,!0,V,j);N.push(oe)}}else{const V=g[1]===L[1]?L[0]:void 0;N.push(H.translateBufferLineToString(g[1],!0,g[0],V));for(let j=g[1]+1;j<=L[1]-1;j++){const te=H.lines.get(j),oe=H.translateBufferLineToString(j,!0);te?.isWrapped?N[N.length-1]+=oe:N.push(oe)}if(g[1]!==L[1]){const j=H.lines.get(L[1]),te=H.translateBufferLineToString(L[1],!0,0,L[0]);j&&j.isWrapped?N[N.length-1]+=te:N.push(te)}}return N.map((V=>V.replace(S," "))).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),l.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){const L=this._getMouseBufferCoords(g),H=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!!(H&&N&&L)&&this._areCoordsInSelection(L,H,N)}isCellInSelection(g,L){const H=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!H||!N)&&this._areCoordsInSelection([g,L],H,N)}_areCoordsInSelection(g,L,H){return g[1]>L[1]&&g[1]<H[1]||L[1]===H[1]&&g[1]===L[1]&&g[0]>=L[0]&&g[0]<H[0]||L[1]<H[1]&&g[1]===H[1]&&g[0]<H[0]||L[1]<H[1]&&g[1]===L[1]&&g[0]>=L[0]}_selectWordAtCursor(g,L){const H=this._linkifier.currentLink?.link?.range;if(H)return this._model.selectionStart=[H.start.x-1,H.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(H,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const N=this._getMouseBufferCoords(g);return!!N&&(this._selectWordAt(N,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,L){this._model.clearSelection(),g=Math.max(g,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){const L=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(g){let L=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1];const H=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=H?0:(L>H&&(L-=H),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(g){return l.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){const L=this._getMouseBufferCoords(g);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(g){return g.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const H=this._bufferService.buffer;if(this._model.selectionEnd[1]<H.lines.length){const N=H.lines.get(this._model.selectionEnd[1]);N&&N.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){const L=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const H=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(H&&H[0]!==void 0&&H[1]!==void 0){const N=(0,m.moveToCellSequence)(H[0]-1,H[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(N,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,H=!(!g||!L||g[0]===L[0]&&g[1]===L[1]);H?g&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,L,H)):this._oldHasSelection&&this._fireOnSelectionChange(g,L,H)}_fireOnSelectionChange(g,L,H){this._oldSelectionStart=g,this._oldSelectionEnd=L,this._oldHasSelection=H,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim((L=>this._handleTrim(L)))}_convertViewportColToCharacterIndex(g,L){let H=L;for(let N=0;L>=N;N++){const V=g.loadCell(N,this._workCell).getChars().length;this._workCell.getWidth()===0?H--:V>1&&L!==N&&(H+=V-1)}return H}setSelection(g,L,H){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,L],this._model.selectionStartLength=H,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,L,H=!0,N=!0){if(g[0]>=this._bufferService.cols)return;const V=this._bufferService.buffer,j=V.lines.get(g[1]);if(!j)return;const te=V.translateBufferLineToString(g[1],!1);let oe=this._convertViewportColToCharacterIndex(j,g[0]),he=oe;const ve=g[0]-oe;let Q=0,k=0,P=0,b=0;if(te.charAt(oe)===" "){for(;oe>0&&te.charAt(oe-1)===" ";)oe--;for(;he<te.length&&te.charAt(he+1)===" ";)he++}else{let se=g[0],de=g[0];j.getWidth(se)===0&&(Q++,se--),j.getWidth(de)===2&&(k++,de++);const xe=j.getString(de).length;for(xe>1&&(b+=xe-1,he+=xe-1);se>0&&oe>0&&!this._isCharWordSeparator(j.loadCell(se-1,this._workCell));){j.loadCell(se-1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===0?(Q++,se--):q>1&&(P+=q-1,oe-=q-1),oe--,se--}for(;de<j.length&&he+1<te.length&&!this._isCharWordSeparator(j.loadCell(de+1,this._workCell));){j.loadCell(de+1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===2?(k++,de++):q>1&&(b+=q-1,he+=q-1),he++,de++}}he++;let I=oe+ve-Q+P,ie=Math.min(this._bufferService.cols,he-oe+Q+k-P-b);if(L||te.slice(oe,he).trim()!==""){if(H&&I===0&&j.getCodePoint(0)!==32){const se=V.lines.get(g[1]-1);if(se&&j.isWrapped&&se.getCodePoint(this._bufferService.cols-1)!==32){const de=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(de){const xe=this._bufferService.cols-de.start;I-=xe,ie+=xe}}}if(N&&I+ie===this._bufferService.cols&&j.getCodePoint(this._bufferService.cols-1)!==32){const se=V.lines.get(g[1]+1);if(se?.isWrapped&&se.getCodePoint(0)!==32){const de=this._getWordAt([0,g[1]+1],!1,!1,!0);de&&(ie+=de.length)}}return{start:I,length:ie}}}_selectWordAt(g,L){const H=this._getWordAt(g,L);if(H){for(;H.start<0;)H.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[H.start,g[1]],this._model.selectionStartLength=H.length}}_selectToWordAt(g){const L=this._getWordAt(g,!0);if(L){let H=g[1];for(;L.start<0;)L.start+=this._bufferService.cols,H--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,H++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,H]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){const L=this._bufferService.buffer.getWrappedRangeForLine(g),H={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(H,this._bufferService.cols)}};c.SelectionService=x=p([y(3,f.IBufferService),y(4,f.ICoreService),y(5,E.IMouseService),y(6,f.IOptionsService),y(7,E.IRenderService),y(8,E.ICoreBrowserService)],x)},4725:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ILinkProviderService=c.IThemeService=c.ICharacterJoinerService=c.ISelectionService=c.IRenderService=c.IMouseService=c.ICoreBrowserService=c.ICharSizeService=void 0;const p=u(8343);c.ICharSizeService=(0,p.createDecorator)("CharSizeService"),c.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),c.IMouseService=(0,p.createDecorator)("MouseService"),c.IRenderService=(0,p.createDecorator)("RenderService"),c.ISelectionService=(0,p.createDecorator)("SelectionService"),c.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),c.IThemeService=(0,p.createDecorator)("ThemeService"),c.ILinkProviderService=(0,p.createDecorator)("LinkProviderService")},6731:function(U,c,u){var p=this&&this.__decorate||function(x,g,L,H){var N,V=arguments.length,j=V<3?g:H===null?H=Object.getOwnPropertyDescriptor(g,L):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(x,g,L,H);else for(var te=x.length-1;te>=0;te--)(N=x[te])&&(j=(V<3?N(j):V>3?N(g,L,j):N(g,L))||j);return V>3&&j&&Object.defineProperty(g,L,j),j},y=this&&this.__param||function(x,g){return function(L,H){g(L,H,x)}};Object.defineProperty(c,"__esModule",{value:!0}),c.ThemeService=c.DEFAULT_ANSI_COLORS=void 0;const h=u(7239),m=u(8055),w=u(8460),E=u(844),_=u(2585),n=m.css.toColor("#ffffff"),l=m.css.toColor("#000000"),s=m.css.toColor("#ffffff"),o=m.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};c.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let L=0;L<216;L++){const H=g[L/36%6|0],N=g[L/6%6|0],V=g[L%6];x.push({css:m.channels.toCss(H,N,V),rgba:m.channels.toRgba(H,N,V)})}for(let L=0;L<24;L++){const H=8+10*L;x.push({css:m.channels.toCss(H,H,H),rgba:m.channels.toRgba(H,H,H)})}return x})());let C=c.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:l,cursor:s,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:m.color.blend(l,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:m.color.blend(l,f),ansi:c.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(x={}){const g=this._colors;if(g.foreground=S(x.foreground,n),g.background=S(x.background,l),g.cursor=S(x.cursor,s),g.cursorAccent=S(x.cursorAccent,o),g.selectionBackgroundTransparent=S(x.selectionBackground,f),g.selectionBackgroundOpaque=m.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(x.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=m.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=x.selectionForeground?S(x.selectionForeground,m.NULL_COLOR):void 0,g.selectionForeground===m.NULL_COLOR&&(g.selectionForeground=void 0),m.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=m.color.opacity(g.selectionBackgroundTransparent,.3)),m.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=m.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=c.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(x.black,c.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(x.red,c.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(x.green,c.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(x.yellow,c.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(x.blue,c.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(x.magenta,c.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(x.cyan,c.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(x.white,c.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(x.brightBlack,c.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(x.brightRed,c.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(x.brightGreen,c.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(x.brightYellow,c.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(x.brightBlue,c.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(x.brightMagenta,c.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(x.brightCyan,c.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(x.brightWhite,c.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const L=Math.min(g.ansi.length-16,x.extendedAnsi.length);for(let H=0;H<L;H++)g.ansi[H+16]=S(x.extendedAnsi[H],c.DEFAULT_ANSI_COLORS[H+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(x,g){if(x!==void 0)try{return m.css.toColor(x)}catch{}return g}c.ThemeService=C=p([y(0,_.IOptionsService)],C)},6349:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CircularList=void 0;const p=u(8460),y=u(844);class h extends y.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const E=new Array(w);for(let _=0;_<Math.min(w,this.length);_++)E[_]=this._array[this._getCyclicIndex(_)];this._array=E,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let E=this._length;E<w;E++)this._array[E]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,E){this._array[this._getCyclicIndex(w)]=E}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,E,..._){if(E){for(let n=w;n<this._length-E;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+E)];this._length-=E,this.onDeleteEmitter.fire({index:w,amount:E})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+_.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<_.length;n++)this._array[this._getCyclicIndex(w+n)]=_[n];if(_.length&&this.onInsertEmitter.fire({index:w,amount:_.length}),this._length+_.length>this._maxLength){const n=this._length+_.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=_.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,E,_){if(!(E<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let l=E-1;l>=0;l--)this.set(w+l+_,this.get(w+l));const n=w+E+_-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<E;n++)this.set(w+n+_,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}c.CircularList=h},1439:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function u(p,y=5){if(typeof p!="object")return p;const h=Array.isArray(p)?[]:{};for(const m in p)h[m]=y<=1?p[m]:p[m]&&u(p[m],y-1);return h}},8055:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=c.NULL_COLOR=void 0;let u=0,p=0,y=0,h=0;var m,w,E,_,n;function l(o){const f=o.toString(16);return f.length<2?"0"+f:f}function s(o,f){return o<f?(f+.05)/(o+.05):(o+.05)/(f+.05)}c.NULL_COLOR={css:"#00000000",rgba:0},(function(o){o.toCss=function(f,C,S,x){return x!==void 0?`#${l(f)}${l(C)}${l(S)}${l(x)}`:`#${l(f)}${l(C)}${l(S)}`},o.toRgba=function(f,C,S,x=255){return(f<<24|C<<16|S<<8|x)>>>0},o.toColor=function(f,C,S,x){return{css:o.toCss(f,C,S,x),rgba:o.toRgba(f,C,S,x)}}})(m||(c.channels=m={})),(function(o){function f(C,S){return h=Math.round(255*S),[u,p,y]=n.toChannels(C.rgba),{css:m.toCss(u,p,y,h),rgba:m.toRgba(u,p,y,h)}}o.blend=function(C,S){if(h=(255&S.rgba)/255,h===1)return{css:S.css,rgba:S.rgba};const x=S.rgba>>24&255,g=S.rgba>>16&255,L=S.rgba>>8&255,H=C.rgba>>24&255,N=C.rgba>>16&255,V=C.rgba>>8&255;return u=H+Math.round((x-H)*h),p=N+Math.round((g-N)*h),y=V+Math.round((L-V)*h),{css:m.toCss(u,p,y),rgba:m.toRgba(u,p,y)}},o.isOpaque=function(C){return(255&C.rgba)==255},o.ensureContrastRatio=function(C,S,x){const g=n.ensureContrastRatio(C.rgba,S.rgba,x);if(g)return m.toColor(g>>24&255,g>>16&255,g>>8&255)},o.opaque=function(C){const S=(255|C.rgba)>>>0;return[u,p,y]=n.toChannels(S),{css:m.toCss(u,p,y),rgba:S}},o.opacity=f,o.multiplyOpacity=function(C,S){return h=255&C.rgba,f(C,h*S/255)},o.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}})(w||(c.color=w={})),(function(o){let f,C;try{const S=document.createElement("canvas");S.width=1,S.height=1;const x=S.getContext("2d",{willReadFrequently:!0});x&&(f=x,f.globalCompositeOperation="copy",C=f.createLinearGradient(0,0,1,1))}catch{}o.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return u=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),y=parseInt(S.slice(3,4).repeat(2),16),m.toColor(u,p,y);case 5:return u=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),y=parseInt(S.slice(3,4).repeat(2),16),h=parseInt(S.slice(4,5).repeat(2),16),m.toColor(u,p,y,h);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const x=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return u=parseInt(x[1]),p=parseInt(x[2]),y=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),m.toColor(u,p,y,h);if(!f||!C)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=C,f.fillStyle=S,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[u,p,y,h]=f.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(u,p,y,h),css:S}}})(E||(c.css=E={})),(function(o){function f(C,S,x){const g=C/255,L=S/255,H=x/255;return .2126*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4))}o.relativeLuminance=function(C){return f(C>>16&255,C>>8&255,255&C)},o.relativeLuminance2=f})(_||(c.rgb=_={})),(function(o){function f(S,x,g){const L=S>>24&255,H=S>>16&255,N=S>>8&255;let V=x>>24&255,j=x>>16&255,te=x>>8&255,oe=s(_.relativeLuminance2(V,j,te),_.relativeLuminance2(L,H,N));for(;oe<g&&(V>0||j>0||te>0);)V-=Math.max(0,Math.ceil(.1*V)),j-=Math.max(0,Math.ceil(.1*j)),te-=Math.max(0,Math.ceil(.1*te)),oe=s(_.relativeLuminance2(V,j,te),_.relativeLuminance2(L,H,N));return(V<<24|j<<16|te<<8|255)>>>0}function C(S,x,g){const L=S>>24&255,H=S>>16&255,N=S>>8&255;let V=x>>24&255,j=x>>16&255,te=x>>8&255,oe=s(_.relativeLuminance2(V,j,te),_.relativeLuminance2(L,H,N));for(;oe<g&&(V<255||j<255||te<255);)V=Math.min(255,V+Math.ceil(.1*(255-V))),j=Math.min(255,j+Math.ceil(.1*(255-j))),te=Math.min(255,te+Math.ceil(.1*(255-te))),oe=s(_.relativeLuminance2(V,j,te),_.relativeLuminance2(L,H,N));return(V<<24|j<<16|te<<8|255)>>>0}o.blend=function(S,x){if(h=(255&x)/255,h===1)return x;const g=x>>24&255,L=x>>16&255,H=x>>8&255,N=S>>24&255,V=S>>16&255,j=S>>8&255;return u=N+Math.round((g-N)*h),p=V+Math.round((L-V)*h),y=j+Math.round((H-j)*h),m.toRgba(u,p,y)},o.ensureContrastRatio=function(S,x,g){const L=_.relativeLuminance(S>>8),H=_.relativeLuminance(x>>8);if(s(L,H)<g){if(H<L){const j=f(S,x,g),te=s(L,_.relativeLuminance(j>>8));if(te<g){const oe=C(S,x,g);return te>s(L,_.relativeLuminance(oe>>8))?j:oe}return j}const N=C(S,x,g),V=s(L,_.relativeLuminance(N>>8));if(V<g){const j=f(S,x,g);return V>s(L,_.relativeLuminance(j>>8))?N:j}return N}},o.reduceLuminance=f,o.increaseLuminance=C,o.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}})(n||(c.rgba=n={})),c.toPaddedHex=l,c.contrastRatio=s},8969:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreTerminal=void 0;const p=u(844),y=u(2585),h=u(4348),m=u(7866),w=u(744),E=u(7302),_=u(6975),n=u(8460),l=u(1753),s=u(1480),o=u(7994),f=u(9282),C=u(5435),S=u(5981),x=u(2660);let g=!1;class L extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event((N=>{this._onScrollApi?.fire(N.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(N){for(const V in N)this.optionsService.options[V]=N[V]}constructor(N){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new E.OptionsService(N)),this._instantiationService.setService(y.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(y.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(y.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(y.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(y.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(y.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(y.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(y.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((V=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((V=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new S.WriteBuffer(((V,j)=>this._inputHandler.parse(V,j)))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(N,V){this._writeBuffer.write(N,V)}writeSync(N,V){this._logService.logLevel<=y.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(N,V)}input(N,V=!0){this.coreService.triggerDataEvent(N,V)}resize(N,V){isNaN(N)||isNaN(V)||(N=Math.max(N,w.MINIMUM_COLS),V=Math.max(V,w.MINIMUM_ROWS),this._bufferService.resize(N,V))}scroll(N,V=!1){this._bufferService.scroll(N,V)}scrollLines(N,V,j){this._bufferService.scrollLines(N,V,j)}scrollPages(N){this.scrollLines(N*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(N){const V=N-this._bufferService.buffer.ydisp;V!==0&&this.scrollLines(V)}registerEscHandler(N,V){return this._inputHandler.registerEscHandler(N,V)}registerDcsHandler(N,V){return this._inputHandler.registerDcsHandler(N,V)}registerCsiHandler(N,V){return this._inputHandler.registerCsiHandler(N,V)}registerOscHandler(N,V){return this._inputHandler.registerOscHandler(N,V)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let N=!1;const V=this.optionsService.rawOptions.windowsPty;V&&V.buildNumber!==void 0&&V.buildNumber!==void 0?N=V.backend==="conpty"&&V.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(N=!0),N?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const N=[];N.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),N.push(this.registerCsiHandler({final:"H"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)((()=>{for(const V of N)V.dispose()}))}}}c.CoreTerminal=L},8460:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.runAndSubscribe=c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===u)return void this._listeners.splice(p,1)}}})),this._event}fire(u,p){const y=[];for(let h=0;h<this._listeners.length;h++)y.push(this._listeners[h]);for(let h=0;h<y.length;h++)y[h].call(void 0,u,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},c.forwardEvent=function(u,p){return u((y=>p.fire(y)))},c.runAndSubscribe=function(u,p){return p(void 0),u((y=>p(y)))}},5435:function(U,c,u){var p=this&&this.__decorate||function(Q,k,P,b){var I,ie=arguments.length,se=ie<3?k:b===null?b=Object.getOwnPropertyDescriptor(k,P):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(Q,k,P,b);else for(var de=Q.length-1;de>=0;de--)(I=Q[de])&&(se=(ie<3?I(se):ie>3?I(k,P,se):I(k,P))||se);return ie>3&&se&&Object.defineProperty(k,P,se),se},y=this&&this.__param||function(Q,k){return function(P,b){k(P,b,Q)}};Object.defineProperty(c,"__esModule",{value:!0}),c.InputHandler=c.WindowsOptionsReportType=void 0;const h=u(2584),m=u(7116),w=u(2015),E=u(844),_=u(482),n=u(8437),l=u(8460),s=u(643),o=u(511),f=u(3734),C=u(2585),S=u(1480),x=u(6242),g=u(6351),L=u(5941),H={"(":0,")":1,"*":2,"+":3,"-":1,".":2},N=131072;function V(Q,k){if(Q>24)return k.setWinLines||!1;switch(Q){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}var j;(function(Q){Q[Q.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Q[Q.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(j||(c.WindowsOptionsReportType=j={}));let te=0;class oe extends E.Disposable{getAttrData(){return this._curAttrData}constructor(k,P,b,I,ie,se,de,xe,q=new w.EscapeSequenceParser){super(),this._bufferService=k,this._charsetService=P,this._coreService=b,this._logService=I,this._optionsService=ie,this._oscLinkService=se,this._coreMouseService=de,this._unicodeService=xe,this._parser=q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new he(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((M=>this._activeBuffer=M.activeBuffer))),this._parser.setCsiHandlerFallback(((M,ne)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:ne.toArray()})})),this._parser.setEscHandlerFallback((M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})})),this._parser.setExecuteHandlerFallback((M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})})),this._parser.setOscHandlerFallback(((M,ne,J)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:ne,data:J})})),this._parser.setDcsHandlerFallback(((M,ne,J)=>{ne==="HOOK"&&(J=J.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:ne,payload:J})})),this._parser.setPrintHandler(((M,ne,J)=>this.print(M,ne,J))),this._parser.registerCsiHandler({final:"@"},(M=>this.insertChars(M))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(M=>this.scrollLeft(M))),this._parser.registerCsiHandler({final:"A"},(M=>this.cursorUp(M))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(M=>this.scrollRight(M))),this._parser.registerCsiHandler({final:"B"},(M=>this.cursorDown(M))),this._parser.registerCsiHandler({final:"C"},(M=>this.cursorForward(M))),this._parser.registerCsiHandler({final:"D"},(M=>this.cursorBackward(M))),this._parser.registerCsiHandler({final:"E"},(M=>this.cursorNextLine(M))),this._parser.registerCsiHandler({final:"F"},(M=>this.cursorPrecedingLine(M))),this._parser.registerCsiHandler({final:"G"},(M=>this.cursorCharAbsolute(M))),this._parser.registerCsiHandler({final:"H"},(M=>this.cursorPosition(M))),this._parser.registerCsiHandler({final:"I"},(M=>this.cursorForwardTab(M))),this._parser.registerCsiHandler({final:"J"},(M=>this.eraseInDisplay(M,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(M=>this.eraseInDisplay(M,!0))),this._parser.registerCsiHandler({final:"K"},(M=>this.eraseInLine(M,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(M=>this.eraseInLine(M,!0))),this._parser.registerCsiHandler({final:"L"},(M=>this.insertLines(M))),this._parser.registerCsiHandler({final:"M"},(M=>this.deleteLines(M))),this._parser.registerCsiHandler({final:"P"},(M=>this.deleteChars(M))),this._parser.registerCsiHandler({final:"S"},(M=>this.scrollUp(M))),this._parser.registerCsiHandler({final:"T"},(M=>this.scrollDown(M))),this._parser.registerCsiHandler({final:"X"},(M=>this.eraseChars(M))),this._parser.registerCsiHandler({final:"Z"},(M=>this.cursorBackwardTab(M))),this._parser.registerCsiHandler({final:"`"},(M=>this.charPosAbsolute(M))),this._parser.registerCsiHandler({final:"a"},(M=>this.hPositionRelative(M))),this._parser.registerCsiHandler({final:"b"},(M=>this.repeatPrecedingCharacter(M))),this._parser.registerCsiHandler({final:"c"},(M=>this.sendDeviceAttributesPrimary(M))),this._parser.registerCsiHandler({prefix:">",final:"c"},(M=>this.sendDeviceAttributesSecondary(M))),this._parser.registerCsiHandler({final:"d"},(M=>this.linePosAbsolute(M))),this._parser.registerCsiHandler({final:"e"},(M=>this.vPositionRelative(M))),this._parser.registerCsiHandler({final:"f"},(M=>this.hVPosition(M))),this._parser.registerCsiHandler({final:"g"},(M=>this.tabClear(M))),this._parser.registerCsiHandler({final:"h"},(M=>this.setMode(M))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(M=>this.setModePrivate(M))),this._parser.registerCsiHandler({final:"l"},(M=>this.resetMode(M))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(M=>this.resetModePrivate(M))),this._parser.registerCsiHandler({final:"m"},(M=>this.charAttributes(M))),this._parser.registerCsiHandler({final:"n"},(M=>this.deviceStatus(M))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(M=>this.deviceStatusPrivate(M))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(M=>this.softReset(M))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(M=>this.setCursorStyle(M))),this._parser.registerCsiHandler({final:"r"},(M=>this.setScrollRegion(M))),this._parser.registerCsiHandler({final:"s"},(M=>this.saveCursor(M))),this._parser.registerCsiHandler({final:"t"},(M=>this.windowOptions(M))),this._parser.registerCsiHandler({final:"u"},(M=>this.restoreCursor(M))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(M=>this.insertColumns(M))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(M=>this.deleteColumns(M))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(M=>this.selectProtected(M))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(M=>this.requestMode(M,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(M=>this.requestMode(M,!1))),this._parser.setExecuteHandler(h.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(h.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(h.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(h.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(h.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(h.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(h.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(h.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(h.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new x.OscHandler((M=>(this.setTitle(M),this.setIconName(M),!0)))),this._parser.registerOscHandler(1,new x.OscHandler((M=>this.setIconName(M)))),this._parser.registerOscHandler(2,new x.OscHandler((M=>this.setTitle(M)))),this._parser.registerOscHandler(4,new x.OscHandler((M=>this.setOrReportIndexedColor(M)))),this._parser.registerOscHandler(8,new x.OscHandler((M=>this.setHyperlink(M)))),this._parser.registerOscHandler(10,new x.OscHandler((M=>this.setOrReportFgColor(M)))),this._parser.registerOscHandler(11,new x.OscHandler((M=>this.setOrReportBgColor(M)))),this._parser.registerOscHandler(12,new x.OscHandler((M=>this.setOrReportCursorColor(M)))),this._parser.registerOscHandler(104,new x.OscHandler((M=>this.restoreIndexedColor(M)))),this._parser.registerOscHandler(110,new x.OscHandler((M=>this.restoreFgColor(M)))),this._parser.registerOscHandler(111,new x.OscHandler((M=>this.restoreBgColor(M)))),this._parser.registerOscHandler(112,new x.OscHandler((M=>this.restoreCursorColor(M)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const M in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},(()=>this.selectCharset("("+M))),this._parser.registerEscHandler({intermediates:")",final:M},(()=>this.selectCharset(")"+M))),this._parser.registerEscHandler({intermediates:"*",final:M},(()=>this.selectCharset("*"+M))),this._parser.registerEscHandler({intermediates:"+",final:M},(()=>this.selectCharset("+"+M))),this._parser.registerEscHandler({intermediates:"-",final:M},(()=>this.selectCharset("-"+M))),this._parser.registerEscHandler({intermediates:".",final:M},(()=>this.selectCharset("."+M))),this._parser.registerEscHandler({intermediates:"/",final:M},(()=>this.selectCharset("/"+M)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((M=>(this._logService.error("Parsing error: ",M),M))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new g.DcsHandler(((M,ne)=>this.requestStatusString(M,ne))))}_preserveStack(k,P,b,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=b,this._parseStack.position=I}_logSlowResolvingAsync(k){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([k,new Promise(((P,b)=>setTimeout((()=>b("#SLOW_TIMEOUT")),5e3)))]).catch((P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(k,P){let b,I=this._activeBuffer.x,ie=this._activeBuffer.y,se=0;const de=this._parseStack.paused;if(de){if(b=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(b),b;I=this._parseStack.cursorStartX,ie=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>N&&(se=this._parseStack.position+N)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof k=="string"?` "${k}"`:` "${Array.prototype.map.call(k,(M=>String.fromCharCode(M))).join("")}"`),typeof k=="string"?k.split("").map((M=>M.charCodeAt(0))):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<N&&(this._parseBuffer=new Uint32Array(Math.min(k.length,N))),de||this._dirtyRowTracker.clearRange(),k.length>N)for(let M=se;M<k.length;M+=N){const ne=M+N<k.length?M+N:k.length,J=typeof k=="string"?this._stringDecoder.decode(k.substring(M,ne),this._parseBuffer):this._utf8Decoder.decode(k.subarray(M,ne),this._parseBuffer);if(b=this._parser.parse(this._parseBuffer,J))return this._preserveStack(I,ie,J,M),this._logSlowResolvingAsync(b),b}else if(!de){const M=typeof k=="string"?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer);if(b=this._parser.parse(this._parseBuffer,M))return this._preserveStack(I,ie,M,0),this._logSlowResolvingAsync(b),b}this._activeBuffer.x===I&&this._activeBuffer.y===ie||this._onCursorMove.fire();const xe=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),q=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);q<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(q,this._bufferService.rows-1),Math.min(xe,this._bufferService.rows-1))}print(k,P,b){let I,ie;const se=this._charsetService.charset,de=this._optionsService.rawOptions.screenReaderMode,xe=this._bufferService.cols,q=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,ne=this._curAttrData;let J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&b-P>0&&J.getWidth(this._activeBuffer.x-1)===2&&J.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ne);let Se=this._parser.precedingJoinState;for(let we=P;we<b;++we){if(I=k[we],I<127&&se){const Ke=se[String.fromCharCode(I)];Ke&&(I=Ke.charCodeAt(0))}const Fe=this._unicodeService.charProperties(I,Se);ie=S.UnicodeService.extractWidth(Fe);const ze=S.UnicodeService.extractShouldJoin(Fe),Ue=ze?S.UnicodeService.extractWidth(Se):0;if(Se=Fe,de&&this._onA11yChar.fire((0,_.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+ie-Ue>xe){if(q){const Ke=J;let Ae=this._activeBuffer.x-Ue;for(this._activeBuffer.x=Ue,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ue>0&&J instanceof n.BufferLine&&J.copyCellsFrom(Ke,Ae,0,Ue,!1);Ae<xe;)Ke.setCellFromCodepoint(Ae++,0,1,ne)}else if(this._activeBuffer.x=xe-1,ie===2)continue}if(ze&&this._activeBuffer.x){const Ke=J.getWidth(this._activeBuffer.x-1)?1:2;J.addCodepointToCell(this._activeBuffer.x-Ke,I,ie);for(let Ae=ie-Ue;--Ae>=0;)J.setCellFromCodepoint(this._activeBuffer.x++,0,0,ne)}else if(M&&(J.insertCells(this._activeBuffer.x,ie-Ue,this._activeBuffer.getNullCell(ne)),J.getWidth(xe-1)===2&&J.setCellFromCodepoint(xe-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,ne)),J.setCellFromCodepoint(this._activeBuffer.x++,I,ie,ne),ie>0)for(;--ie;)J.setCellFromCodepoint(this._activeBuffer.x++,0,0,ne)}this._parser.precedingJoinState=Se,this._activeBuffer.x<xe&&b-P>0&&J.getWidth(this._activeBuffer.x)===0&&!J.hasContent(this._activeBuffer.x)&&J.setCellFromCodepoint(this._activeBuffer.x,0,1,ne),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(k,P){return k.final!=="t"||k.prefix||k.intermediates?this._parser.registerCsiHandler(k,P):this._parser.registerCsiHandler(k,(b=>!V(b.params[0],this._optionsService.rawOptions.windowOptions)||P(b)))}registerDcsHandler(k,P){return this._parser.registerDcsHandler(k,new g.DcsHandler(P))}registerEscHandler(k,P){return this._parser.registerEscHandler(k,P)}registerOscHandler(k,P){return this._parser.registerOscHandler(k,new x.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(k=this._bufferService.cols-1){this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(k,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=k,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(k,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+P)}cursorUp(k){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,k.params[0]||1)):this._moveCursor(0,-(k.params[0]||1)),!0}cursorDown(k){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,k.params[0]||1)):this._moveCursor(0,k.params[0]||1),!0}cursorForward(k){return this._moveCursor(k.params[0]||1,0),!0}cursorBackward(k){return this._moveCursor(-(k.params[0]||1),0),!0}cursorNextLine(k){return this.cursorDown(k),this._activeBuffer.x=0,!0}cursorPrecedingLine(k){return this.cursorUp(k),this._activeBuffer.x=0,!0}cursorCharAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0}charPosAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(k){return this._moveCursor(k.params[0]||1,0),!0}linePosAbsolute(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0}vPositionRelative(k){return this._moveCursor(0,k.params[0]||1),!0}hVPosition(k){return this.cursorPosition(k),!0}tabClear(k){const P=k.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=k.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=k.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(k){const P=k.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(k,P,b,I=!1,ie=!1){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);se.replaceCells(P,b,this._activeBuffer.getNullCell(this._eraseAttrData()),ie),I&&(se.isWrapped=!1)}_resetBufferLine(k,P=!1){const b=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);b&&(b.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),b.isWrapped=!1)}eraseInDisplay(k,P=!1){let b;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(b=this._activeBuffer.y,this._dirtyRowTracker.markDirty(b),this._eraseInBufferLine(b++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);b<this._bufferService.rows;b++)this._resetBufferLine(b,P);this._dirtyRowTracker.markDirty(b);break;case 1:for(b=this._activeBuffer.y,this._dirtyRowTracker.markDirty(b),this._eraseInBufferLine(b,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(b+1).isWrapped=!1);b--;)this._resetBufferLine(b,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(b=this._bufferService.rows,this._dirtyRowTracker.markDirty(b-1);b--;)this._resetBufferLine(b,P);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(k,P=!1){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(k){this._restrictCursor();let P=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const b=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ie=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;P--;)this._activeBuffer.lines.splice(ie-1,1),this._activeBuffer.lines.splice(b,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(k){this._restrictCursor();let P=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const b=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;P--;)this._activeBuffer.lines.splice(b,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(k){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(k){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(k){let P=k.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(k){let P=k.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=k.params[0]||1;for(let b=this._activeBuffer.scrollTop;b<=this._activeBuffer.scrollBottom;++b){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);I.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=k.params[0]||1;for(let b=this._activeBuffer.scrollTop;b<=this._activeBuffer.scrollBottom;++b){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);I.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=k.params[0]||1;for(let b=this._activeBuffer.scrollTop;b<=this._activeBuffer.scrollBottom;++b){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);I.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=k.params[0]||1;for(let b=this._activeBuffer.scrollTop;b<=this._activeBuffer.scrollBottom;++b){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);I.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(k){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(k){const P=this._parser.precedingJoinState;if(!P)return!0;const b=k.params[0]||1,I=S.UnicodeService.extractWidth(P),ie=this._activeBuffer.x-I,se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(ie),de=new Uint32Array(se.length*b);let xe=0;for(let M=0;M<se.length;){const ne=se.codePointAt(M)||0;de[xe++]=ne,M+=ne>65535?2:1}let q=xe;for(let M=1;M<b;++M)de.copyWithin(q,0,xe),q+=xe;return this.print(de,0,q),!0}sendDeviceAttributesPrimary(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(k){return(this._optionsService.rawOptions.termName+"").indexOf(k)===0}setMode(k){for(let P=0;P<k.length;P++)switch(k.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(k){for(let P=0;P<k.length;P++)switch(k.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(k){for(let P=0;P<k.length;P++)switch(k.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(k){for(let P=0;P<k.length;P++)switch(k.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),k.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(k,P){const b=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:ie}=this._coreMouseService,se=this._coreService,{buffers:de,cols:xe}=this._bufferService,{active:q,alt:M}=de,ne=this._optionsService.rawOptions,J=ze=>ze?1:2,Se=k.params[0];return we=Se,Fe=P?Se===2?4:Se===4?J(se.modes.insertMode):Se===12?3:Se===20?J(ne.convertEol):0:Se===1?J(b.applicationCursorKeys):Se===3?ne.windowOptions.setWinLines?xe===80?2:xe===132?1:0:0:Se===6?J(b.origin):Se===7?J(b.wraparound):Se===8?3:Se===9?J(I==="X10"):Se===12?J(ne.cursorBlink):Se===25?J(!se.isCursorHidden):Se===45?J(b.reverseWraparound):Se===66?J(b.applicationKeypad):Se===67?4:Se===1e3?J(I==="VT200"):Se===1002?J(I==="DRAG"):Se===1003?J(I==="ANY"):Se===1004?J(b.sendFocus):Se===1005?4:Se===1006?J(ie==="SGR"):Se===1015?4:Se===1016?J(ie==="SGR_PIXELS"):Se===1048?1:Se===47||Se===1047||Se===1049?J(q===M):Se===2004?J(b.bracketedPasteMode):0,se.triggerDataEvent(`${h.C0.ESC}[${P?"":"?"}${we};${Fe}$y`),!0;var we,Fe}_updateAttrColor(k,P,b,I,ie){return P===2?(k|=50331648,k&=-16777216,k|=f.AttributeData.fromColorRGB([b,I,ie])):P===5&&(k&=-50331904,k|=33554432|255&b),k}_extractColor(k,P,b){const I=[0,0,-1,0,0,0];let ie=0,se=0;do{if(I[se+ie]=k.params[P+se],k.hasSubParams(P+se)){const de=k.getSubParams(P+se);let xe=0;do I[1]===5&&(ie=1),I[se+xe+1+ie]=de[xe];while(++xe<de.length&&xe+se+1+ie<I.length);break}if(I[1]===5&&se+ie>=2||I[1]===2&&se+ie>=5)break;I[1]&&(ie=1)}while(++se+P<k.length&&se+ie<I.length);for(let de=2;de<I.length;++de)I[de]===-1&&(I[de]=0);switch(I[0]){case 38:b.fg=this._updateAttrColor(b.fg,I[1],I[3],I[4],I[5]);break;case 48:b.bg=this._updateAttrColor(b.bg,I[1],I[3],I[4],I[5]);break;case 58:b.extended=b.extended.clone(),b.extended.underlineColor=this._updateAttrColor(b.extended.underlineColor,I[1],I[3],I[4],I[5])}return se}_processUnderline(k,P){P.extended=P.extended.clone(),(!~k||k>5)&&(k=1),P.extended.underlineStyle=k,P.fg|=268435456,k===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(k){k.fg=n.DEFAULT_ATTR_DATA.fg,k.bg=n.DEFAULT_ATTR_DATA.bg,k.extended=k.extended.clone(),k.extended.underlineStyle=0,k.extended.underlineColor&=-67108864,k.updateExtended()}charAttributes(k){if(k.length===1&&k.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=k.length;let b;const I=this._curAttrData;for(let ie=0;ie<P;ie++)b=k.params[ie],b>=30&&b<=37?(I.fg&=-50331904,I.fg|=16777216|b-30):b>=40&&b<=47?(I.bg&=-50331904,I.bg|=16777216|b-40):b>=90&&b<=97?(I.fg&=-50331904,I.fg|=16777224|b-90):b>=100&&b<=107?(I.bg&=-50331904,I.bg|=16777224|b-100):b===0?this._processSGR0(I):b===1?I.fg|=134217728:b===3?I.bg|=67108864:b===4?(I.fg|=268435456,this._processUnderline(k.hasSubParams(ie)?k.getSubParams(ie)[0]:1,I)):b===5?I.fg|=536870912:b===7?I.fg|=67108864:b===8?I.fg|=1073741824:b===9?I.fg|=2147483648:b===2?I.bg|=134217728:b===21?this._processUnderline(2,I):b===22?(I.fg&=-134217729,I.bg&=-134217729):b===23?I.bg&=-67108865:b===24?(I.fg&=-268435457,this._processUnderline(0,I)):b===25?I.fg&=-536870913:b===27?I.fg&=-67108865:b===28?I.fg&=-1073741825:b===29?I.fg&=2147483647:b===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):b===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):b===38||b===48||b===58?ie+=this._extractColor(k,ie,I):b===53?I.bg|=1073741824:b===55?I.bg&=-1073741825:b===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):b===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",b);return!0}deviceStatus(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,b=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${P};${b}R`)}return!0}deviceStatusPrivate(k){if(k.params[0]===6){const P=this._activeBuffer.y+1,b=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${P};${b}R`)}return!0}softReset(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(k){const P=k.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const b=P%2==1;return this._optionsService.options.cursorBlink=b,!0}setScrollRegion(k){const P=k.params[0]||1;let b;return(k.length<2||(b=k.params[1])>this._bufferService.rows||b===0)&&(b=this._bufferService.rows),b>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=b-1,this._setCursor(0,0)),!0}windowOptions(k){if(!V(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(j.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(j.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0}setIconName(k){return this._iconName=k,!0}setOrReportIndexedColor(k){const P=[],b=k.split(";");for(;b.length>1;){const I=b.shift(),ie=b.shift();if(/^\d+$/.exec(I)){const se=parseInt(I);if(ve(se))if(ie==="?")P.push({type:0,index:se});else{const de=(0,L.parseColor)(ie);de&&P.push({type:1,index:se,color:de})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(k){const P=k.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(k,P){this._getCurrentLinkId()&&this._finishHyperlink();const b=k.split(":");let I;const ie=b.findIndex((se=>se.startsWith("id=")));return ie!==-1&&(I=b[ie].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(k,P){const b=k.split(";");for(let I=0;I<b.length&&!(P>=this._specialColors.length);++I,++P)if(b[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const ie=(0,L.parseColor)(b[I]);ie&&this._onColor.fire([{type:1,index:this._specialColors[P],color:ie}])}return!0}setOrReportFgColor(k){return this._setOrReportSpecialColor(k,0)}setOrReportBgColor(k){return this._setOrReportSpecialColor(k,1)}setOrReportCursorColor(k){return this._setOrReportSpecialColor(k,2)}restoreIndexedColor(k){if(!k)return this._onColor.fire([{type:2}]),!0;const P=[],b=k.split(";");for(let I=0;I<b.length;++I)if(/^\d+$/.exec(b[I])){const ie=parseInt(b[I]);ve(ie)&&P.push({type:2,index:ie})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(k){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(k){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(k){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(k){return k.length!==2?(this.selectDefaultCharset(),!0):(k[0]==="/"||this._charsetService.setgCharset(H[k[0]],m.CHARSETS[k[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const k=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,k,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(k){return this._charsetService.setgLevel(k),!0}screenAlignmentPattern(){const k=new o.CellData;k.content=4194373,k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const b=this._activeBuffer.ybase+this._activeBuffer.y+P,I=this._activeBuffer.lines.get(b);I&&(I.fill(k),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(k,P){const b=this._bufferService.buffer,I=this._optionsService.rawOptions;return(ie=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${ie}${h.C0.ESC}\\`),!0))(k==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:k==='"p'?'P1$r61;1"p':k==="r"?`P1$r${b.scrollTop+1};${b.scrollBottom+1}r`:k==="m"?"P1$r0m":k===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(k,P){this._dirtyRowTracker.markRangeDirty(k,P)}}c.InputHandler=oe;let he=class{constructor(Q){this._bufferService=Q,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Q){Q<this.start?this.start=Q:Q>this.end&&(this.end=Q)}markRangeDirty(Q,k){Q>k&&(te=Q,Q=k,k=te),Q<this.start&&(this.start=Q),k>this.end&&(this.end=k)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ve(Q){return 0<=Q&&Q<256}he=p([y(0,C.IBufferService)],he)},844:(U,c)=>{function u(p){for(const y of p)y.dispose();p.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.MutableDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const y=this._disposables.indexOf(p);y!==-1&&this._disposables.splice(y,1)}},c.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){this._isDisposed||p===this._value||(this._value?.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},c.toDisposable=function(p){return{dispose:p}},c.disposeArray=u,c.getDisposeArrayDisposable=function(p){return{dispose:()=>u(p)}}},1505:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FourKeyMap=c.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(y,h,m){this._data[y]||(this._data[y]={}),this._data[y][h]=m}get(y,h){return this._data[y]?this._data[y][h]:void 0}clear(){this._data={}}}c.TwoKeyMap=u,c.FourKeyMap=class{constructor(){this._data=new u}set(p,y,h,m,w){this._data.get(p,y)||this._data.set(p,y,new u),this._data.get(p,y).set(h,m,w)}get(p,y,h,m){return this._data.get(p,y)?.get(h,m)}clear(){this._data.clear()}}},6114:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isChromeOS=c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.getSafariVersion=c.isSafari=c.isLegacyEdge=c.isFirefox=c.isNode=void 0,c.isNode=typeof process<"u"&&"title"in process;const u=c.isNode?"node":navigator.userAgent,p=c.isNode?"node":navigator.platform;c.isFirefox=u.includes("Firefox"),c.isLegacyEdge=u.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(u),c.getSafariVersion=function(){if(!c.isSafari)return 0;const y=u.match(/Version\/(\d+)/);return y===null||y.length<2?0:parseInt(y[1])},c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),c.isIpad=p==="iPad",c.isIphone=p==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),c.isLinux=p.indexOf("Linux")>=0,c.isChromeOS=/\bCrOS\b/.test(u)},6106:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SortedList=void 0;let u=0;c.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(u=this._search(this._getKey(p)),this._array.splice(u,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;const y=this._getKey(p);if(y===void 0||(u=this._search(y),u===-1)||this._getKey(this._array[u])!==y)return!1;do if(this._array[u]===p)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===y);return!1}*getKeyIterator(p){if(this._array.length!==0&&(u=this._search(p),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===p))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===p)}forEachByKey(p,y){if(this._array.length!==0&&(u=this._search(p),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===p))do y(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===p)}values(){return[...this._array].values()}_search(p){let y=0,h=this._array.length-1;for(;h>=y;){let m=y+h>>1;const w=this._getKey(this._array[m]);if(w>p)h=m-1;else{if(!(w<p)){for(;m>0&&this._getKey(this._array[m-1])===p;)m--;return m}y=m+1}}return y}}},7226:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DebouncedIdleTask=c.IdleTaskQueue=c.PriorityTaskQueue=void 0;const p=u(6114);class y{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let E=0,_=0,n=w.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),_=Math.max(E,_),l=w.timeRemaining(),1.5*_>l)return n-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-E))}ms`),void this._start();n=l}this.clear()}}class h extends y{_requestCallback(w){return setTimeout((()=>w(this._createDeadline(16))))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const E=Date.now()+w;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}c.PriorityTaskQueue=h,c.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends y{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:h,c.DebouncedIdleTask=class{constructor(){this._queue=new c.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.updateWindowsModeWrappedState=void 0;const p=u(643);c.updateWindowsModeWrappedState=function(y){const h=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),m=h?.get(y.cols-1),w=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);w&&m&&(w.isWrapped=m[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&m[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new u;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}c.AttributeData=u;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,m=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=m}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}c.ExtendedAttrs=p},9092:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Buffer=c.MAX_BUFFER_SIZE=void 0;const p=u(6349),y=u(7226),h=u(3734),m=u(8437),w=u(4634),E=u(511),_=u(643),n=u(4863),l=u(7116);c.MAX_BUFFER_SIZE=4294967295,c.Buffer=class{constructor(s,o,f){this._hasScrollback=s,this._optionsService=o,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new y.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,o){return new m.BufferLine(this._bufferService.cols,this.getNullCell(s),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;const o=s+this._optionsService.rawOptions.scrollback;return o>c.MAX_BUFFER_SIZE?c.MAX_BUFFER_SIZE:o}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=m.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,o){const f=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=0;const S=this._getCorrectBufferLength(o);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<s)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(s,f);let x=0;if(this._rows<o)for(let g=this._rows;g<o;g++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(s,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(s,f)));else for(let g=this._rows;g>o;g--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,o-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(s,o),this._cols>s))for(let x=0;x<this.lines.length;x++)C+=+this.lines.get(x).resize(s,f);this._cols=s,this._rows=o,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return s}get _isReflowEnabled(){const s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,o){this._cols!==s&&(s>this._cols?this._reflowLarger(s,o):this._reflowSmaller(s,o))}_reflowLarger(s,o){const f=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(f.length>0){const C=(0,w.reflowLargerCreateNewLayout)(this.lines,f);(0,w.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(s,o,C.countRemoved)}}_reflowLargerAdjustViewport(s,o,f){const C=this.getNullCell(m.DEFAULT_ATTR_DATA);let S=f;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new m.BufferLine(s,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(s,o){const f=this.getNullCell(m.DEFAULT_ATTR_DATA),C=[];let S=0;for(let x=this.lines.length-1;x>=0;x--){let g=this.lines.get(x);if(!g||!g.isWrapped&&g.getTrimmedLength()<=s)continue;const L=[g];for(;g.isWrapped&&x>0;)g=this.lines.get(--x),L.unshift(g);const H=this.ybase+this.y;if(H>=x&&H<x+L.length)continue;const N=L[L.length-1].getTrimmedLength(),V=(0,w.reflowSmallerGetNewLineLengths)(L,this._cols,s),j=V.length-L.length;let te;te=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+j):Math.max(0,this.lines.length-this.lines.maxLength+j);const oe=[];for(let b=0;b<j;b++){const I=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);oe.push(I)}oe.length>0&&(C.push({start:x+L.length+S,newLines:oe}),S+=oe.length),L.push(...oe);let he=V.length-1,ve=V[he];ve===0&&(he--,ve=V[he]);let Q=L.length-j-1,k=N;for(;Q>=0;){const b=Math.min(k,ve);if(L[he]===void 0)break;if(L[he].copyCellsFrom(L[Q],k-b,ve-b,b,!0),ve-=b,ve===0&&(he--,ve=V[he]),k-=b,k===0){Q--;const I=Math.max(Q,0);k=(0,w.getWrappedLineTrimmedLength)(L,I,this._cols)}}for(let b=0;b<L.length;b++)V[b]<s&&L[b].setCell(V[b],f);let P=j-te;for(;P-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+o-1)}if(C.length>0){const x=[],g=[];for(let he=0;he<this.lines.length;he++)g.push(this.lines.get(he));const L=this.lines.length;let H=L-1,N=0,V=C[N];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let j=0;for(let he=Math.min(this.lines.maxLength-1,L+S-1);he>=0;he--)if(V&&V.start>H+j){for(let ve=V.newLines.length-1;ve>=0;ve--)this.lines.set(he--,V.newLines[ve]);he++,x.push({index:H+1,amount:V.newLines.length}),j+=V.newLines.length,V=C[++N]}else this.lines.set(he,g[H--]);let te=0;for(let he=x.length-1;he>=0;he--)x[he].index+=te,this.lines.onInsertEmitter.fire(x[he]),te+=x[he].amount;const oe=Math.max(0,L+S-this.lines.maxLength);oe>0&&this.lines.onTrimEmitter.fire(oe)}}translateBufferLineToString(s,o,f=0,C){const S=this.lines.get(s);return S?S.translateToString(o,f,C):""}getWrappedRangeForLine(s){let o=s,f=s;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:o,last:f}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===s&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){const o=new n.Marker(s);return this.markers.push(o),o.register(this.lines.onTrim((f=>{o.line-=f,o.line<0&&o.dispose()}))),o.register(this.lines.onInsert((f=>{o.line>=f.index&&(o.line+=f.amount)}))),o.register(this.lines.onDelete((f=>{o.line>=f.index&&o.line<f.index+f.amount&&o.dispose(),o.line>f.index&&(o.line-=f.amount)}))),o.register(o.onDispose((()=>this._removeMarker(o)))),o}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLine=c.DEFAULT_ATTR_DATA=void 0;const p=u(3734),y=u(511),h=u(643),m=u(482);c.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let w=0;class E{constructor(n,l,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const o=l||y.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let f=0;f<n;++f)this.setCell(f,o);this.length=n}get(n){const l=this._data[3*n+0],s=2097151&l;return[this._data[3*n+1],2097152&l?this._combined[n]:s?(0,m.stringFromCodePoint)(s):"",l>>22,2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):s]}set(n,l){this._data[3*n+1]=l[h.CHAR_DATA_ATTR_INDEX],l[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=l[1],this._data[3*n+0]=2097152|n|l[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&l}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n]:2097151&l?(0,m.stringFromCodePoint)(2097151&l):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,l){return w=3*n,l.content=this._data[w+0],l.fg=this._data[w+1],l.bg=this._data[w+2],2097152&l.content&&(l.combinedData=this._combined[n]),268435456&l.bg&&(l.extended=this._extendedAttrs[n]),l}setCell(n,l){2097152&l.content&&(this._combined[n]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=l.content,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}setCellFromCodepoint(n,l,s,o){268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=l|s<<22,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg}addCodepointToCell(n,l,s){let o=this._data[3*n+0];2097152&o?this._combined[n]+=(0,m.stringFromCodePoint)(l):2097151&o?(this._combined[n]=(0,m.stringFromCodePoint)(2097151&o)+(0,m.stringFromCodePoint)(l),o&=-2097152,o|=2097152):o=l|4194304,s&&(o&=-12582913,o|=s<<22),this._data[3*n+0]=o}insertCells(n,l,s){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length-n){const o=new y.CellData;for(let f=this.length-n-l-1;f>=0;--f)this.setCell(n+l+f,this.loadCell(n+f,o));for(let f=0;f<l;++f)this.setCell(n+f,s)}else for(let o=n;o<this.length;++o)this.setCell(o,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(n,l,s){if(n%=this.length,l<this.length-n){const o=new y.CellData;for(let f=0;f<this.length-n-l;++f)this.setCell(n+f,this.loadCell(n+l+f,o));for(let f=this.length-l;f<this.length;++f)this.setCell(f,s)}else for(let o=n;o<this.length;++o)this.setCell(o,s);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,s)}replaceCells(n,l,s,o=!1){if(o)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodepoint(l,0,1,s);n<l&&n<this.length;)this.isProtected(n)||this.setCell(n,s),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l,0,1,s);n<l&&n<this.length;)this.setCell(n++,s)}resize(n,l){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const s=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{const o=new Uint32Array(s);o.set(this._data),this._data=o}for(let o=this.length;o<n;++o)this.setCell(o,l)}else{this._data=this._data.subarray(0,s);const o=Object.keys(this._combined);for(let C=0;C<o.length;C++){const S=parseInt(o[C],10);S>=n&&delete this._combined[S]}const f=Object.keys(this._extendedAttrs);for(let C=0;C<f.length;C++){const S=parseInt(f[C],10);S>=n&&delete this._extendedAttrs[S]}}return this.length=n,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,l=!1){if(l)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,n);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const l in n._combined)this._combined[l]=n._combined[l];this._extendedAttrs={};for(const l in n._extendedAttrs)this._extendedAttrs[l]=n._extendedAttrs[l];this.isWrapped=n.isWrapped}clone(){const n=new E(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const l in this._combined)n._combined[l]=this._combined[l];for(const l in this._extendedAttrs)n._extendedAttrs[l]=this._extendedAttrs[l];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,l,s,o,f){const C=n._data;if(f)for(let x=o-1;x>=0;x--){for(let g=0;g<3;g++)this._data[3*(s+x)+g]=C[3*(l+x)+g];268435456&C[3*(l+x)+2]&&(this._extendedAttrs[s+x]=n._extendedAttrs[l+x])}else for(let x=0;x<o;x++){for(let g=0;g<3;g++)this._data[3*(s+x)+g]=C[3*(l+x)+g];268435456&C[3*(l+x)+2]&&(this._extendedAttrs[s+x]=n._extendedAttrs[l+x])}const S=Object.keys(n._combined);for(let x=0;x<S.length;x++){const g=parseInt(S[x],10);g>=l&&(this._combined[g-l+s]=n._combined[g])}}translateToString(n,l,s,o){l=l??0,s=s??this.length,n&&(s=Math.min(s,this.getTrimmedLength())),o&&(o.length=0);let f="";for(;l<s;){const C=this._data[3*l+0],S=2097151&C,x=2097152&C?this._combined[l]:S?(0,m.stringFromCodePoint)(S):h.WHITESPACE_CELL_CHAR;if(f+=x,o)for(let g=0;g<x.length;++g)o.push(l);l+=C>>22||1}return o&&o.push(l),f}}c.BufferLine=E},4841:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getRangeLength=void 0,c.getRangeLength=function(u,p){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return p*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(U,c)=>{function u(p,y,h){if(y===p.length-1)return p[y].getTrimmedLength();const m=!p[y].hasContent(h-1)&&p[y].getWidth(h-1)===1,w=p[y+1].getWidth(0)===2;return m&&w?h-1:h}Object.defineProperty(c,"__esModule",{value:!0}),c.getWrappedLineTrimmedLength=c.reflowSmallerGetNewLineLengths=c.reflowLargerApplyNewLayout=c.reflowLargerCreateNewLayout=c.reflowLargerGetLinesToRemove=void 0,c.reflowLargerGetLinesToRemove=function(p,y,h,m,w){const E=[];for(let _=0;_<p.length-1;_++){let n=_,l=p.get(++n);if(!l.isWrapped)continue;const s=[p.get(_)];for(;n<p.length&&l.isWrapped;)s.push(l),l=p.get(++n);if(m>=_&&m<n){_+=s.length-1;continue}let o=0,f=u(s,o,y),C=1,S=0;for(;C<s.length;){const g=u(s,C,y),L=g-S,H=h-f,N=Math.min(L,H);s[o].copyCellsFrom(s[C],S,f,N,!1),f+=N,f===h&&(o++,f=0),S+=N,S===g&&(C++,S=0),f===0&&o!==0&&s[o-1].getWidth(h-1)===2&&(s[o].copyCellsFrom(s[o-1],h-1,f++,1,!1),s[o-1].setCell(h-1,w))}s[o].replaceCells(f,h,w);let x=0;for(let g=s.length-1;g>0&&(g>o||s[g].getTrimmedLength()===0);g--)x++;x>0&&(E.push(_+s.length-x),E.push(x)),_+=s.length-1}return E},c.reflowLargerCreateNewLayout=function(p,y){const h=[];let m=0,w=y[m],E=0;for(let _=0;_<p.length;_++)if(w===_){const n=y[++m];p.onDeleteEmitter.fire({index:_-E,amount:n}),_+=n-1,E+=n,w=y[++m]}else h.push(_);return{layout:h,countRemoved:E}},c.reflowLargerApplyNewLayout=function(p,y){const h=[];for(let m=0;m<y.length;m++)h.push(p.get(y[m]));for(let m=0;m<h.length;m++)p.set(m,h[m]);p.length=y.length},c.reflowSmallerGetNewLineLengths=function(p,y,h){const m=[],w=p.map(((l,s)=>u(p,s,y))).reduce(((l,s)=>l+s));let E=0,_=0,n=0;for(;n<w;){if(w-n<h){m.push(w-n);break}E+=h;const l=u(p,_,y);E>l&&(E-=l,_++);const s=p[_].getWidth(E-1)===2;s&&E--;const o=s?h-1:h;m.push(o),n+=o}return m},c.getWrappedLineTrimmedLength=u},5295:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferSet=void 0;const p=u(8460),y=u(844),h=u(9092);class m extends y.Disposable{constructor(E,_){super(),this._optionsService=E,this._bufferService=_,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,_){this._normal.resize(E,_),this._alt.resize(E,_),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}c.BufferSet=m},511:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;const p=u(482),y=u(643),h=u(3734);class m extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const _=new m;return _.setFromCharData(E),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[y.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(E[y.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(E[y.CHAR_DATA_CHAR_INDEX].length===2){const n=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|E[y.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=E[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[y.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=E[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[y.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.CellData=m},643:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_EXT=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=0,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.DEFAULT_EXT=0,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},4863:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Marker=void 0;const p=u(8460),y=u(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,y.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}c.Marker=h,h._nextId=1},7116:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CHARSET=c.CHARSETS=void 0,c.CHARSETS={},c.DEFAULT_CHARSET=c.CHARSETS.B,c.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},c.CHARSETS.A={"#":""},c.CHARSETS.B=void 0,c.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},c.CHARSETS.C=c.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.E=c.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},c.CHARSETS.H=c.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(U,c)=>{var u,p,y;Object.defineProperty(c,"__esModule",{value:!0}),c.C1_ESCAPED=c.C1=c.C0=void 0,(function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""})(u||(c.C0=u={})),(function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""})(p||(c.C1=p={})),(function(h){h.ST=`${u.ESC}\\`})(y||(c.C1_ESCAPED=y={}))},7399:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.evaluateKeyboardEvent=void 0;const p=u(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};c.evaluateKeyboardEvent=function(h,m,w,E){const _={type:0,cancel:!1,key:void 0},n=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?_.key=m?p.C0.ESC+"OA":p.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?_.key=m?p.C0.ESC+"OD":p.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?_.key=m?p.C0.ESC+"OC":p.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(_.key=m?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:_.key=h.ctrlKey?"\b":p.C0.DEL,h.altKey&&(_.key=p.C0.ESC+_.key);break;case 9:if(h.shiftKey){_.key=p.C0.ESC+"[Z";break}_.key=p.C0.HT,_.cancel=!0;break;case 13:_.key=h.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,_.cancel=!0;break;case 27:_.key=p.C0.ESC,h.altKey&&(_.key=p.C0.ESC+p.C0.ESC),_.cancel=!0;break;case 37:if(h.metaKey)break;n?(_.key=p.C0.ESC+"[1;"+(n+1)+"D",_.key===p.C0.ESC+"[1;3D"&&(_.key=p.C0.ESC+(w?"b":"[1;5D"))):_.key=m?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(h.metaKey)break;n?(_.key=p.C0.ESC+"[1;"+(n+1)+"C",_.key===p.C0.ESC+"[1;3C"&&(_.key=p.C0.ESC+(w?"f":"[1;5C"))):_.key=m?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(h.metaKey)break;n?(_.key=p.C0.ESC+"[1;"+(n+1)+"A",w||_.key!==p.C0.ESC+"[1;3A"||(_.key=p.C0.ESC+"[1;5A")):_.key=m?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(h.metaKey)break;n?(_.key=p.C0.ESC+"[1;"+(n+1)+"B",w||_.key!==p.C0.ESC+"[1;3B"||(_.key=p.C0.ESC+"[1;5B")):_.key=m?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(_.key=p.C0.ESC+"[2~");break;case 46:_.key=n?p.C0.ESC+"[3;"+(n+1)+"~":p.C0.ESC+"[3~";break;case 36:_.key=n?p.C0.ESC+"[1;"+(n+1)+"H":m?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:_.key=n?p.C0.ESC+"[1;"+(n+1)+"F":m?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:h.shiftKey?_.type=2:h.ctrlKey?_.key=p.C0.ESC+"[5;"+(n+1)+"~":_.key=p.C0.ESC+"[5~";break;case 34:h.shiftKey?_.type=3:h.ctrlKey?_.key=p.C0.ESC+"[6;"+(n+1)+"~":_.key=p.C0.ESC+"[6~";break;case 112:_.key=n?p.C0.ESC+"[1;"+(n+1)+"P":p.C0.ESC+"OP";break;case 113:_.key=n?p.C0.ESC+"[1;"+(n+1)+"Q":p.C0.ESC+"OQ";break;case 114:_.key=n?p.C0.ESC+"[1;"+(n+1)+"R":p.C0.ESC+"OR";break;case 115:_.key=n?p.C0.ESC+"[1;"+(n+1)+"S":p.C0.ESC+"OS";break;case 116:_.key=n?p.C0.ESC+"[15;"+(n+1)+"~":p.C0.ESC+"[15~";break;case 117:_.key=n?p.C0.ESC+"[17;"+(n+1)+"~":p.C0.ESC+"[17~";break;case 118:_.key=n?p.C0.ESC+"[18;"+(n+1)+"~":p.C0.ESC+"[18~";break;case 119:_.key=n?p.C0.ESC+"[19;"+(n+1)+"~":p.C0.ESC+"[19~";break;case 120:_.key=n?p.C0.ESC+"[20;"+(n+1)+"~":p.C0.ESC+"[20~";break;case 121:_.key=n?p.C0.ESC+"[21;"+(n+1)+"~":p.C0.ESC+"[21~";break;case 122:_.key=n?p.C0.ESC+"[23;"+(n+1)+"~":p.C0.ESC+"[23~";break;case 123:_.key=n?p.C0.ESC+"[24;"+(n+1)+"~":p.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!E||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?_.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(_.key=p.C0.US),h.key==="@"&&(_.key=p.C0.NUL)):h.keyCode===65&&(_.type=1);else{const l=y[h.keyCode],s=l?.[h.shiftKey?1:0];if(s)_.key=p.C0.ESC+s;else if(h.keyCode>=65&&h.keyCode<=90){const o=h.ctrlKey?h.keyCode-64:h.keyCode+32;let f=String.fromCharCode(o);h.shiftKey&&(f=f.toUpperCase()),_.key=p.C0.ESC+f}else if(h.keyCode===32)_.key=p.C0.ESC+(h.ctrlKey?p.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let o=h.code.slice(3,4);h.shiftKey||(o=o.toLowerCase()),_.key=p.C0.ESC+o,_.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?_.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?_.key=p.C0.NUL:h.keyCode>=51&&h.keyCode<=55?_.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?_.key=p.C0.DEL:h.keyCode===219?_.key=p.C0.ESC:h.keyCode===220?_.key=p.C0.FS:h.keyCode===221&&(_.key=p.C0.GS)}return _}},482:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},c.utf32ToString=function(u,p=0,y=u.length){let h="";for(let m=p;m<y;++m){let w=u[m];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},c.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,p){const y=u.length;if(!y)return 0;let h=0,m=0;if(this._interim){const w=u.charCodeAt(m++);56320<=w&&w<=57343?p[h++]=1024*(this._interim-55296)+w-56320+65536:(p[h++]=this._interim,p[h++]=w),this._interim=0}for(let w=m;w<y;++w){const E=u.charCodeAt(w);if(55296<=E&&E<=56319){if(++w>=y)return this._interim=E,h;const _=u.charCodeAt(w);56320<=_&&_<=57343?p[h++]=1024*(E-55296)+_-56320+65536:(p[h++]=E,p[h++]=_)}else E!==65279&&(p[h++]=E)}return h}},c.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,p){const y=u.length;if(!y)return 0;let h,m,w,E,_=0,n=0,l=0;if(this.interim[0]){let f=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,x=0;for(;(S=63&this.interim[++x])&&x<4;)C<<=6,C|=S;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=g-x;for(;l<L;){if(l>=y)return 0;if(S=u[l++],(192&S)!=128){l--,f=!0;break}this.interim[x++]=S,C<<=6,C|=63&S}f||(g===2?C<128?l--:p[_++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(p[_++]=C):C<65536||C>1114111||(p[_++]=C)),this.interim.fill(0)}const s=y-4;let o=l;for(;o<y;){for(;!(!(o<s)||128&(h=u[o])||128&(m=u[o+1])||128&(w=u[o+2])||128&(E=u[o+3]));)p[_++]=h,p[_++]=m,p[_++]=w,p[_++]=E,o+=4;if(h=u[o++],h<128)p[_++]=h;else if((224&h)==192){if(o>=y)return this.interim[0]=h,_;if(m=u[o++],(192&m)!=128){o--;continue}if(n=(31&h)<<6|63&m,n<128){o--;continue}p[_++]=n}else if((240&h)==224){if(o>=y)return this.interim[0]=h,_;if(m=u[o++],(192&m)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,_;if(w=u[o++],(192&w)!=128){o--;continue}if(n=(15&h)<<12|(63&m)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;p[_++]=n}else if((248&h)==240){if(o>=y)return this.interim[0]=h,_;if(m=u[o++],(192&m)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,_;if(w=u[o++],(192&w)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,this.interim[2]=w,_;if(E=u[o++],(192&E)!=128){o--;continue}if(n=(7&h)<<18|(63&m)<<12|(63&w)<<6|63&E,n<65536||n>1114111)continue;p[_++]=n}}return _}}},225:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeV6=void 0;const p=u(1480),y=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;c.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let w=0;w<y.length;++w)m.fill(0,y[w][0],y[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?m[w]:(function(E,_){let n,l=0,s=_.length-1;if(E<_[0][0]||E>_[s][1])return!1;for(;s>=l;)if(n=l+s>>1,E>_[n][1])l=n+1;else{if(!(E<_[n][0]))return!0;s=n-1}return!1})(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,E){let _=this.wcwidth(w),n=_===0&&E!==0;if(n){const l=p.UnicodeService.extractWidth(E);l===0?n=!1:l>_&&(_=l)}return p.UnicodeService.createPropertyValue(0,_,n)}}},5981:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WriteBuffer=void 0;const p=u(8460),y=u(844);class h extends y.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(E),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(E)}_innerWrite(w=0,E=!0){const _=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],l=this._action(n,E);if(l){const o=f=>Date.now()-_>=12?setTimeout((()=>this._innerWrite(0,f))):this._innerWrite(_,f);return void l.catch((f=>(queueMicrotask((()=>{throw f})),Promise.resolve(!1)))).then(o)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}c.WriteBuffer=h},5941:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.toRgbString=c.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function y(h,m){const w=h.toString(16),E=w.length<2?"0"+w:w;switch(m){case 4:return w[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}c.parseColor=function(h){if(!h)return;let m=h.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const w=u.exec(m);if(w){const E=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/E*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/E*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/E*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),p.exec(m)&&[3,6,9,12].includes(m.length))){const w=m.length/3,E=[0,0,0];for(let _=0;_<3;++_){const n=parseInt(m.slice(w*_,w*_+w),16);E[_]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return E}},c.toRgbString=function(h,m=16){const[w,E,_]=h;return`rgb:${y(w,m)}/${y(E,m)}/${y(_,m)}`}},5770:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PAYLOAD_LIMIT=void 0,c.PAYLOAD_LIMIT=1e7},6351:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DcsHandler=c.DcsParser=void 0;const p=u(482),y=u(8742),h=u(5770),m=[];c.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(E,_){this._handlers[E]===void 0&&(this._handlers[E]=[]);const n=this._handlers[E];return n.push(_),{dispose:()=>{const l=n.indexOf(_);l!==-1&&n.splice(l,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(E,_){if(this.reset(),this._ident=E,this._active=this._handlers[E]||m,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(E,_,n){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(E,_,n);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(E,_,n))}unhook(E,_=!0){if(this._active.length){let n=!1,l=this._active.length-1,s=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=_,s=this._stack.fallThrough,this._stack.paused=!1),!s&&n===!1){for(;l>=0&&(n=this._active[l].unhook(E),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",E);this._active=m,this._ident=0}};const w=new y.Params;w.addParam(0),c.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=w,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():w,this._data="",this._hitLimit=!1}put(E,_,n){this._hitLimit||(this._data+=(0,p.utf32ToString)(E,_,n),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let _=!1;if(this._hitLimit)_=!1;else if(E&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then((n=>(this._params=w,this._data="",this._hitLimit=!1,n)));return this._params=w,this._data="",this._hitLimit=!1,_}}},2015:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.EscapeSequenceParser=c.VT500_TRANSITION_TABLE=c.TransitionTable=void 0;const p=u(844),y=u(8742),h=u(6242),m=u(6351);class w{constructor(l){this.table=new Uint8Array(l)}setDefault(l,s){this.table.fill(l<<4|s)}add(l,s,o,f){this.table[s<<8|l]=o<<4|f}addMany(l,s,o,f){for(let C=0;C<l.length;C++)this.table[s<<8|l[C]]=o<<4|f}}c.TransitionTable=w;const E=160;c.VT500_TRANSITION_TABLE=(function(){const n=new w(4095),l=Array.apply(null,Array(256)).map(((x,g)=>g)),s=(x,g)=>l.slice(x,g),o=s(32,127),f=s(0,24);f.push(25),f.push.apply(f,s(28,32));const C=s(0,14);let S;for(S in n.setDefault(1,0),n.addMany(o,0,2,0),C)n.addMany([24,26,153,154],S,3,0),n.addMany(s(128,144),S,3,0),n.addMany(s(144,152),S,3,0),n.add(156,S,0,0),n.add(27,S,11,1),n.add(157,S,4,8),n.addMany([152,158,159],S,0,7),n.add(155,S,11,3),n.add(144,S,11,9);return n.addMany(f,0,3,0),n.addMany(f,1,3,1),n.add(127,1,0,1),n.addMany(f,8,0,8),n.addMany(f,3,3,3),n.add(127,3,0,3),n.addMany(f,4,3,4),n.add(127,4,0,4),n.addMany(f,6,3,6),n.addMany(f,5,3,5),n.add(127,5,0,5),n.addMany(f,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(o,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(s(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(o,7,0,7),n.addMany(f,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(s(64,127),3,7,0),n.addMany(s(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(s(48,60),4,8,4),n.addMany(s(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(s(32,64),6,0,6),n.add(127,6,0,6),n.addMany(s(64,127),6,0,0),n.addMany(s(32,48),3,9,5),n.addMany(s(32,48),5,9,5),n.addMany(s(48,64),5,0,6),n.addMany(s(64,127),5,7,0),n.addMany(s(32,48),4,9,5),n.addMany(s(32,48),1,9,2),n.addMany(s(32,48),2,9,2),n.addMany(s(48,127),2,10,0),n.addMany(s(48,80),1,10,0),n.addMany(s(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(s(96,127),1,10,0),n.add(80,1,11,9),n.addMany(f,9,0,9),n.add(127,9,0,9),n.addMany(s(28,32),9,0,9),n.addMany(s(32,48),9,9,12),n.addMany(s(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(f,11,0,11),n.addMany(s(32,128),11,0,11),n.addMany(s(28,32),11,0,11),n.addMany(f,10,0,10),n.add(127,10,0,10),n.addMany(s(28,32),10,0,10),n.addMany(s(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(s(32,48),10,9,12),n.addMany(f,12,0,12),n.add(127,12,0,12),n.addMany(s(28,32),12,0,12),n.addMany(s(32,48),12,9,12),n.addMany(s(48,64),12,0,11),n.addMany(s(64,127),12,12,13),n.addMany(s(64,127),10,12,13),n.addMany(s(64,127),9,12,13),n.addMany(f,13,13,13),n.addMany(o,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(E,0,2,0),n.add(E,8,5,8),n.add(E,6,0,6),n.add(E,11,0,11),n.add(E,13,13,13),n})();class _ extends p.Disposable{constructor(l=c.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new y.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(s,o,f)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,o)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(l,s=[64,126]){let o=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=l.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<l.intermediates.length;++C){const S=l.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=S}}if(l.final.length!==1)throw new Error("final must be a single byte");const f=l.final.charCodeAt(0);if(s[0]>f||f>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return o<<=8,o|=f,o}identToString(l){const s=[];for(;l;)s.push(String.fromCharCode(255&l)),l>>=8;return s.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,s){const o=this._identifier(l,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const f=this._escHandlers[o];return f.push(s),{dispose:()=>{const C=f.indexOf(s);C!==-1&&f.splice(C,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,s){this._executeHandlers[l.charCodeAt(0)]=s}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,s){const o=this._identifier(l);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const f=this._csiHandlers[o];return f.push(s),{dispose:()=>{const C=f.indexOf(s);C!==-1&&f.splice(C,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,s){return this._dcsParser.registerHandler(this._identifier(l),s)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,s){return this._oscParser.registerHandler(l,s)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,s,o,f,C){this._parseStack.state=l,this._parseStack.handlers=s,this._parseStack.handlerPos=o,this._parseStack.transition=f,this._parseStack.chunkPos=C}parse(l,s,o){let f,C=0,S=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const g=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&L>-1){for(;L>=0&&(f=g[L](this._params),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 4:if(o===!1&&L>-1){for(;L>=0&&(f=g[L](),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 6:if(C=l[this._parseStack.chunkPos],f=this._dcsParser.unhook(C!==24&&C!==26,o),f)return f;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=l[this._parseStack.chunkPos],f=this._oscParser.end(C!==24&&C!==26,o),f)return f;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let g=x;g<s;++g){switch(C=l[g],S=this._transitions.table[this.currentState<<8|(C<160?C:E)],S>>4){case 2:for(let j=g+1;;++j){if(j>=s||(C=l[j])<32||C>126&&C<E){this._printHandler(l,g,j),g=j-1;break}if(++j>=s||(C=l[j])<32||C>126&&C<E){this._printHandler(l,g,j),g=j-1;break}if(++j>=s||(C=l[j])<32||C>126&&C<E){this._printHandler(l,g,j),g=j-1;break}if(++j>=s||(C=l[j])<32||C>126&&C<E){this._printHandler(l,g,j),g=j-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|C];let H=L?L.length-1:-1;for(;H>=0&&(f=L[H](this._params),f!==!0);H--)if(f instanceof Promise)return this._preserveStack(3,L,H,S,g),f;H<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<s&&(C=l[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const N=this._escHandlers[this._collect<<8|C];let V=N?N.length-1:-1;for(;V>=0&&(f=N[V](),f!==!0);V--)if(f instanceof Promise)return this._preserveStack(4,N,V,S,g),f;V<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let j=g+1;;++j)if(j>=s||(C=l[j])===24||C===26||C===27||C>127&&C<E){this._dcsParser.put(l,g,j),g=j-1;break}break;case 14:if(f=this._dcsParser.unhook(C!==24&&C!==26),f)return this._preserveStack(6,[],0,S,g),f;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let j=g+1;;j++)if(j>=s||(C=l[j])<32||C>127&&C<E){this._oscParser.put(l,g,j),g=j-1;break}break;case 6:if(f=this._oscParser.end(C!==24&&C!==26),f)return this._preserveStack(5,[],0,S,g),f;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}c.EscapeSequenceParser=_},6242:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OscHandler=c.OscParser=void 0;const p=u(5770),y=u(482),h=[];c.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,w){this._handlers[m]===void 0&&(this._handlers[m]=[]);const E=this._handlers[m];return E.push(w),{dispose:()=>{const _=E.indexOf(w);_!==-1&&E.splice(_,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,w,E){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(m,w,E);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(m,w,E))}start(){this.reset(),this._state=1}put(m,w,E){if(this._state!==3){if(this._state===1)for(;w<E;){const _=m[w++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&E-w>0&&this._put(m,w,E)}}end(m,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,_=this._active.length-1,n=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,E=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&E===!1){for(;_>=0&&(E=this._active[_].end(m),E!==!0);_--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,E;_--}for(;_>=0;_--)if(E=this._active[_].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",m);this._active=h,this._id=-1,this._state=0}}},c.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,w,E){this._hitLimit||(this._data+=(0,y.utf32ToString)(m,w,E),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let w=!1;if(this._hitLimit)w=!1;else if(m&&(w=this._handler(this._data),w instanceof Promise))return w.then((E=>(this._data="",this._hitLimit=!1,E)));return this._data="",this._hitLimit=!1,w}}},8742:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Params=void 0;const u=2147483647;class p{static fromArray(h){const m=new p;if(!h.length)return m;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const E=h[w];if(Array.isArray(E))for(let _=0;_<E.length;++_)m.addSubParam(E[_]);else m.addParam(E)}return m}constructor(h=32,m=32){if(this.maxLength=h,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new p(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let m=0;m<this.length;++m){h.push(this.params[m]);const w=this._subParamsIdx[m]>>8,E=255&this._subParamsIdx[m];E-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,E))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>u?u:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>u?u:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const m=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-m>0?this._subParams.subarray(m,w):null}getSubParamsAll(){const h={};for(let m=0;m<this.length;++m){const w=this._subParamsIdx[m]>>8,E=255&this._subParamsIdx[m];E-w>0&&(h[m]=this._subParams.slice(w,E))}return h}addDigit(h){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,E=w[m-1];w[m-1]=~E?Math.min(10*E+h,u):h}}c.Params=p},5741:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AddonManager=void 0,c.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,p){const y={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(y),p.dispose=()=>this._wrappedAddonDispose(y),p.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let p=-1;for(let y=0;y<this._addons.length;y++)if(this._addons[y]===u){p=y;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(p,1)}}},8771:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferApiView=void 0;const p=u(3785),y=u(511);c.BufferApiView=class{constructor(h,m){this._buffer=h,this.type=m}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const m=this._buffer.lines.get(h);if(m)return new p.BufferLineApiView(m)}getNullCell(){return new y.CellData}}},3785:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLineApiView=void 0;const p=u(511);c.BufferLineApiView=class{constructor(y){this._line=y}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(y,h){if(!(y<0||y>=this._line.length))return h?(this._line.loadCell(y,h),h):this._line.loadCell(y,new p.CellData)}translateToString(y,h,m){return this._line.translateToString(y,h,m)}}},8285:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferNamespaceApi=void 0;const p=u(8771),y=u(8460),h=u(844);class m extends h.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new y.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}c.BufferNamespaceApi=m},7975:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ParserApi=void 0,c.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,p){return this._core.registerCsiHandler(u,(y=>p(y.toArray())))}addCsiHandler(u,p){return this.registerCsiHandler(u,p)}registerDcsHandler(u,p){return this._core.registerDcsHandler(u,((y,h)=>p(y,h.toArray())))}addDcsHandler(u,p){return this.registerDcsHandler(u,p)}registerEscHandler(u,p){return this._core.registerEscHandler(u,p)}addEscHandler(u,p){return this.registerEscHandler(u,p)}registerOscHandler(u,p){return this._core.registerOscHandler(u,p)}addOscHandler(u,p){return this.registerOscHandler(u,p)}}},7090:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeApi=void 0,c.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(U,c,u){var p=this&&this.__decorate||function(n,l,s,o){var f,C=arguments.length,S=C<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,l,s,o);else for(var x=n.length-1;x>=0;x--)(f=n[x])&&(S=(C<3?f(S):C>3?f(l,s,S):f(l,s))||S);return C>3&&S&&Object.defineProperty(l,s,S),S},y=this&&this.__param||function(n,l){return function(s,o){l(s,o,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferService=c.MINIMUM_ROWS=c.MINIMUM_COLS=void 0;const h=u(8460),m=u(844),w=u(5295),E=u(2585);c.MINIMUM_COLS=2,c.MINIMUM_ROWS=1;let _=c.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,c.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,c.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this._onResize.fire({cols:n,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,l=!1){const s=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===n.fg&&o.getBg(0)===n.bg||(o=s.getBlankLine(n,l),this._cachedBlankLine=o),o.isWrapped=l;const f=s.ybase+s.scrollTop,C=s.ybase+s.scrollBottom;if(s.scrollTop===0){const S=s.lines.isFull;C===s.lines.length-1?S?s.lines.recycle().copyFrom(o):s.lines.push(o.clone()):s.lines.splice(C+1,0,o.clone()),S?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{const S=C-f+1;s.lines.shiftElements(f+1,S-1,-1),s.lines.set(C,o.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(n,l,s){const o=this.buffer;if(n<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else n+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const f=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+n,o.ybase),0),f!==o.ydisp&&(l||this._onScroll.fire(o.ydisp))}};c.BufferService=_=p([y(0,E.IOptionsService)],_)},7994:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharsetService=void 0,c.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,p){this._charsets[u]=p,this.glevel===u&&(this.charset=p)}}},1753:function(U,c,u){var p=this&&this.__decorate||function(o,f,C,S){var x,g=arguments.length,L=g<3?f:S===null?S=Object.getOwnPropertyDescriptor(f,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(o,f,C,S);else for(var H=o.length-1;H>=0;H--)(x=o[H])&&(L=(g<3?x(L):g>3?x(f,C,L):x(f,C))||L);return g>3&&L&&Object.defineProperty(f,C,L),L},y=this&&this.__param||function(o,f){return function(C,S){f(C,S,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreMouseService=void 0;const h=u(2585),m=u(8460),w=u(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function _(o,f){let C=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(C|=64,C|=o.action):(C|=3&o.button,4&o.button&&(C|=64),8&o.button&&(C|=128),o.action===32?C|=32:o.action!==0||f||(C|=3)),C}const n=String.fromCharCode,l={DEFAULT:o=>{const f=[_(o,!1)+32,o.col+32,o.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${n(f[0])}${n(f[1])}${n(f[2])}`},SGR:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${_(o,!0)};${o.col};${o.row}${f}`},SGR_PIXELS:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${_(o,!0)};${o.x};${o.y}${f}`}};let s=c.CoreMouseService=class extends w.Disposable{constructor(o,f){super(),this._bufferService=o,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(E))this.addProtocol(C,E[C]);for(const C of Object.keys(l))this.addEncoding(C,l[C]);this.reset()}addProtocol(o,f){this._protocols[o]=f}addEncoding(o,f){this._encodings[o]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const f=this._encodings[this._activeEncoding](o);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,f,C){if(C){if(o.x!==f.x||o.y!==f.y)return!1}else if(o.col!==f.col||o.row!==f.row)return!1;return o.button===f.button&&o.action===f.action&&o.ctrl===f.ctrl&&o.alt===f.alt&&o.shift===f.shift}};c.CoreMouseService=s=p([y(0,h.IBufferService),y(1,h.ICoreService)],s)},6975:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,C){var S,x=arguments.length,g=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,f):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,o,f,C);else for(var L=s.length-1;L>=0;L--)(S=s[L])&&(g=(x<3?S(g):x>3?S(o,f,g):S(o,f))||g);return x>3&&g&&Object.defineProperty(o,f,g),g},y=this&&this.__param||function(s,o){return function(f,C){o(f,C,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreService=void 0;const h=u(1439),m=u(8460),w=u(844),E=u(2585),_=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=c.CoreService=class extends w.Disposable{constructor(s,o,f){super(),this._bufferService=s,this._logService=o,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(n)}reset(){this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(n)}triggerDataEvent(s,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,(()=>s.split("").map((C=>C.charCodeAt(0))))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,(()=>s.split("").map((o=>o.charCodeAt(0))))),this._onBinary.fire(s))}};c.CoreService=l=p([y(0,E.IBufferService),y(1,E.ILogService),y(2,E.IOptionsService)],l)},9074:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DecorationService=void 0;const p=u(8055),y=u(8460),h=u(844),m=u(6106);let w=0,E=0;class _ extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList((s=>s?.marker.line)),this._onDecorationRegistered=this.register(new y.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new y.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)((()=>this.reset())))}registerDecoration(s){if(s.marker.isDisposed)return;const o=new n(s);if(o){const f=o.marker.onDispose((()=>o.dispose()));o.onDispose((()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),f.dispose())})),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,o,f){let C=0,S=0;for(const x of this._decorations.getKeyIterator(o))C=x.options.x??0,S=C+(x.options.width??1),s>=C&&s<S&&(!f||(x.options.layer??"bottom")===f)&&(yield x)}forEachDecorationAtCell(s,o,f,C){this._decorations.forEachByKey(o,(S=>{w=S.options.x??0,E=w+(S.options.width??1),s>=w&&s<E&&(!f||(S.options.layer??"bottom")===f)&&C(S)}))}}c.DecorationService=_;class n extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new y.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.InstantiationService=c.ServiceCollection=void 0;const p=u(2585),y=u(8343);class h{constructor(...w){this._entries=new Map;for(const[E,_]of w)this.set(E,_)}set(w,E){const _=this._entries.get(w);return this._entries.set(w,E),_}forEach(w){for(const[E,_]of this._entries.entries())w(E,_)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}c.ServiceCollection=h,c.InstantiationService=class{constructor(){this._services=new h,this._services.set(p.IInstantiationService,this)}setService(m,w){this._services.set(m,w)}getService(m){return this._services.get(m)}createInstance(m,...w){const E=(0,y.getServiceDependencies)(m).sort(((l,s)=>l.index-s.index)),_=[];for(const l of E){const s=this._services.get(l.id);if(!s)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${l.id}.`);_.push(s)}const n=E.length>0?E[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new m(...w,..._)}}},7866:function(U,c,u){var p=this&&this.__decorate||function(n,l,s,o){var f,C=arguments.length,S=C<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,l,s,o);else for(var x=n.length-1;x>=0;x--)(f=n[x])&&(S=(C<3?f(S):C>3?f(l,s,S):f(l,s))||S);return C>3&&S&&Object.defineProperty(l,s,S),S},y=this&&this.__param||function(n,l){return function(s,o){l(s,o,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.traceCall=c.setTraceLogger=c.LogService=void 0;const h=u(844),m=u(2585),w={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let E,_=c.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),E=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,s){this._evalLazyOptionalParams(s),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...s)}trace(n,...l){this._logLevel<=m.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,l)}debug(n,...l){this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,l)}info(n,...l){this._logLevel<=m.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,l)}warn(n,...l){this._logLevel<=m.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,l)}error(n,...l){this._logLevel<=m.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,l)}};c.LogService=_=p([y(0,m.IOptionsService)],_),c.setTraceLogger=function(n){E=n},c.traceCall=function(n,l,s){if(typeof s.value!="function")throw new Error("not supported");const o=s.value;s.value=function(...f){if(E.logLevel!==m.LogLevelEnum.TRACE)return o.apply(this,f);E.trace(`GlyphRenderer#${o.name}(${f.map((S=>JSON.stringify(S))).join(", ")})`);const C=o.apply(this,f);return E.trace(`GlyphRenderer#${o.name} return`,C),C}}},7302:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OptionsService=c.DEFAULT_OPTIONS=void 0;const p=u(8460),y=u(844),h=u(6114);c.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends y.Disposable{constructor(_){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...c.DEFAULT_OPTIONS};for(const l in _)if(l in n)try{const s=_[l];n[l]=this._sanitizeAndValidateOption(l,s)}catch(s){console.error(s)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,y.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(_,n){return this.onOptionChange((l=>{l===_&&n(this.rawOptions[_])}))}onMultipleOptionChange(_,n){return this.onOptionChange((l=>{_.indexOf(l)!==-1&&n()}))}_setupOptions(){const _=l=>{if(!(l in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},n=(l,s)=>{if(!(l in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);s=this._sanitizeAndValidateOption(l,s),this.rawOptions[l]!==s&&(this.rawOptions[l]=s,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const s={get:_.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this.options,l,s)}}_sanitizeAndValidateOption(_,n){switch(_){case"cursorStyle":if(n||(n=c.DEFAULT_OPTIONS[_]),!(function(l){return l==="block"||l==="underline"||l==="bar"})(n))throw new Error(`"${n}" is not a valid value for ${_}`);break;case"wordSeparator":n||(n=c.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=m.includes(n)?n:c.DEFAULT_OPTIONS[_];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${_} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${_} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}c.OptionsService=w},2660:function(U,c,u){var p=this&&this.__decorate||function(w,E,_,n){var l,s=arguments.length,o=s<3?E:n===null?n=Object.getOwnPropertyDescriptor(E,_):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(w,E,_,n);else for(var f=w.length-1;f>=0;f--)(l=w[f])&&(o=(s<3?l(o):s>3?l(E,_,o):l(E,_))||o);return s>3&&o&&Object.defineProperty(E,_,o),o},y=this&&this.__param||function(w,E){return function(_,n){E(_,n,w)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkService=void 0;const h=u(2585);let m=c.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const E=this._bufferService.buffer;if(w.id===void 0){const f=E.addMarker(E.ybase+E.y),C={data:w,id:this._nextId++,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(C,f))),this._dataByLinkId.set(C.id,C),C.id}const _=w,n=this._getEntryIdKey(_),l=this._entriesWithId.get(n);if(l)return this.addLineToLink(l.id,E.ybase+E.y),l.id;const s=E.addMarker(E.ybase+E.y),o={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[s]};return s.onDispose((()=>this._removeMarkerFromLink(o,s))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(w,E){const _=this._dataByLinkId.get(w);if(_&&_.lines.every((n=>n.line!==E))){const n=this._bufferService.buffer.addMarker(E);_.lines.push(n),n.onDispose((()=>this._removeMarkerFromLink(_,n)))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,E){const _=w.lines.indexOf(E);_!==-1&&(w.lines.splice(_,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};c.OscLinkService=m=p([y(0,h.IBufferService)],m)},8343:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0;const u="di$target",p="di$dependencies";c.serviceRegistry=new Map,c.getServiceDependencies=function(y){return y[p]||[]},c.createDecorator=function(y){if(c.serviceRegistry.has(y))return c.serviceRegistry.get(y);const h=function(m,w,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,n,l){n[u]===n?n[p].push({id:_,index:l}):(n[p]=[{id:_,index:l}],n[u]=n)})(h,m,E)};return h.toString=()=>y,c.serviceRegistry.set(y,h),h}},2585:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOscLinkService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;const p=u(8343);var y;c.IBufferService=(0,p.createDecorator)("BufferService"),c.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),c.ICoreService=(0,p.createDecorator)("CoreService"),c.ICharsetService=(0,p.createDecorator)("CharsetService"),c.IInstantiationService=(0,p.createDecorator)("InstantiationService"),(function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"})(y||(c.LogLevelEnum=y={})),c.ILogService=(0,p.createDecorator)("LogService"),c.IOptionsService=(0,p.createDecorator)("OptionsService"),c.IOscLinkService=(0,p.createDecorator)("OscLinkService"),c.IUnicodeService=(0,p.createDecorator)("UnicodeService"),c.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeService=void 0;const p=u(8460),y=u(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,E,_=!1){return(16777215&w)<<3|(3&E)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;const w=new y.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let E=0,_=0;const n=w.length;for(let l=0;l<n;++l){let s=w.charCodeAt(l);if(55296<=s&&s<=56319){if(++l>=n)return E+this.wcwidth(s);const C=w.charCodeAt(l);56320<=C&&C<=57343?s=1024*(s-55296)+C-56320+65536:E+=this.wcwidth(C)}const o=this.charProperties(s,_);let f=h.extractWidth(o);h.extractShouldJoin(o)&&(f-=h.extractWidth(_)),E+=f,_=o}return E}charProperties(w,E){return this._activeProvider.charProperties(w,E)}}c.UnicodeService=h}},ee={};function G(U){var c=ee[U];if(c!==void 0)return c.exports;var u=ee[U]={exports:{}};return D[U].call(u.exports,u,u.exports,G),u.exports}var ge={};return(()=>{var U=ge;Object.defineProperty(U,"__esModule",{value:!0}),U.Terminal=void 0;const c=G(9042),u=G(3236),p=G(844),y=G(5741),h=G(8285),m=G(7975),w=G(7090),E=["cols","rows"];class _ extends p.Disposable{constructor(l){super(),this._core=this.register(new u.Terminal(l)),this._addonManager=this.register(new y.AddonManager),this._publicOptions={...this._core.options};const s=f=>this._core.options[f],o=(f,C)=>{this._checkReadonlyOptions(f),this._core.options[f]=C};for(const f in this._core.options){const C={get:s.bind(this,f),set:o.bind(this,f)};Object.defineProperty(this._publicOptions,f,C)}}_checkReadonlyOptions(l){if(E.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const s in l)this._publicOptions[s]=l[s]}blur(){this._core.blur()}focus(){this._core.focus()}input(l,s=!0){this._core.input(l,s)}resize(l,s){this._verifyIntegers(l,s),this._core.resize(l,s)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}attachCustomWheelEventHandler(l){this._core.attachCustomWheelEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){return this._checkProposedApi(),this._verifyPositiveIntegers(l.x??0,l.width??0,l.height??0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,s,o){this._verifyIntegers(l,s,o),this._core.select(l,s,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,s){this._verifyIntegers(l,s),this._core.selectLines(l,s)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,s){this._core.write(l,s)}writeln(l,s){this._core.write(l),this._core.write(`\r
`,s)}paste(l){this._core.paste(l)}refresh(l,s){this._verifyIntegers(l,s),this._core.refresh(l,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return c}_verifyIntegers(...l){for(const s of l)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const s of l)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}U.Terminal=_})(),ge})()))})(Kl)),Kl.exports}var Nf=Hf(),Vl={exports:{}},Lu;function zf(){return Lu||(Lu=1,(function(B,W){(function(D,ee){B.exports=ee()})(self,(()=>(()=>{var D={};return(()=>{var ee=D;Object.defineProperty(ee,"__esModule",{value:!0}),ee.FitAddon=void 0,ee.FitAddon=class{activate(G){this._terminal=G}dispose(){}fit(){const G=this.proposeDimensions();if(!G||!this._terminal||isNaN(G.cols)||isNaN(G.rows))return;const ge=this._terminal._core;this._terminal.rows===G.rows&&this._terminal.cols===G.cols||(ge._renderService.clear(),this._terminal.resize(G.cols,G.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const G=this._terminal._core,ge=G._renderService.dimensions;if(ge.css.cell.width===0||ge.css.cell.height===0)return;const U=this._terminal.options.scrollback===0?0:G.viewport.scrollBarWidth,c=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(c.getPropertyValue("height")),p=Math.max(0,parseInt(c.getPropertyValue("width"))),y=window.getComputedStyle(this._terminal.element),h=u-(parseInt(y.getPropertyValue("padding-top"))+parseInt(y.getPropertyValue("padding-bottom"))),m=p-(parseInt(y.getPropertyValue("padding-right"))+parseInt(y.getPropertyValue("padding-left")))-U;return{cols:Math.max(2,Math.floor(m/ge.css.cell.width)),rows:Math.max(1,Math.floor(h/ge.css.cell.height))}}}})(),D})()))})(Vl)),Vl.exports}var Wf=zf();const $f=pe.lazy(()=>Ld(()=>import("./percentages-BXMCSKIN-DVFUvrx_.js").then(B=>B.i),[]).then(B=>({default:B.Excalidraw})).catch(B=>{throw console.error("Failed to load Excalidraw:",B),B})),Uf=({theme:B,onClick:W})=>T.jsxs("div",{onClick:W,style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",transition:"opacity 0.2s ease",textDecoration:"none"},onMouseEnter:D=>D.currentTarget.style.opacity="0.8",onMouseLeave:D=>D.currentTarget.style.opacity="1",children:[T.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("defs",{children:T.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[T.jsx("stop",{offset:"0%",stopColor:"#2563EB"}),T.jsx("stop",{offset:"100%",stopColor:"#1E40AF"})]})}),T.jsx("circle",{cx:"20",cy:"20",r:"18",fill:"url(#logoGradient)"}),T.jsx("path",{d:"M 20 12 C 15 12 12 15 12 20 C 12 25 15 28 20 28",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),T.jsx("path",{d:"M 26 14 L 24 16 L 26 18",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),T.jsx("path",{d:"M 14 22 L 16 24 L 14 26",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",lineHeight:"1.2"},children:[T.jsx("span",{style:{fontSize:"20px",fontWeight:"700",color:B.text,letterSpacing:"-0.5px",background:`linear-gradient(135deg, ${B.primary} 0%, ${B.accent} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"CeesarCode"}),T.jsx("span",{style:{fontSize:"10px",color:B.textSecondary,fontWeight:"500",letterSpacing:"1px",textTransform:"uppercase"},children:"Technical Interview Practice"})]})]});class Kf extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,D){console.error("Excalidraw Error:",W,D),console.error("Error stack:",W.stack),console.error("Component stack:",D.componentStack)}render(){return this.state.hasError?T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px",color:this.props.theme.error,fontSize:"14px",textAlign:"center"},children:[T.jsx("div",{style:{marginBottom:"10px",fontSize:"16px",fontWeight:"600"},children:"Failed to load drawing canvas"}),T.jsx("div",{style:{color:this.props.theme.textSecondary,fontSize:"12px"},children:this.state.error?.message||"An error occurred while loading Excalidraw"}),T.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{marginTop:"12px",padding:"8px 16px",backgroundColor:this.props.theme.primary,color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Try Again"})]}):this.props.children}}class Vf extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,D){console.error("App Error:",W,D),console.error("Error stack:",W.stack),console.error("Component stack:",D.componentStack)}render(){return this.state.hasError?T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"40px",backgroundColor:"#f5f5f5",color:"#d32f2f",fontSize:"16px",textAlign:"center"},children:[T.jsx("div",{style:{marginBottom:"16px",fontSize:"24px",fontWeight:"600"},children:"Something went wrong"}),T.jsx("div",{style:{color:"#666",fontSize:"14px",maxWidth:"600px",marginBottom:"8px"},children:this.state.error?.message||"An unexpected error occurred"}),T.jsx("div",{style:{color:"#999",fontSize:"12px",maxWidth:"600px",fontFamily:"monospace",marginTop:"12px"},children:"Check the browser console for more details"}),T.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"24px",padding:"12px 24px",backgroundColor:"#2563EB",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Reload Page"})]}):this.props.children}}const Du={light:{primary:"#2563EB",secondary:"#F9FAFB",accent:"#1E40AF",background:"#FFFFFF",surface:"#F3F4F6",text:"#111827",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",error:"#EF4444",warning:"#F59E0B",codeBackground:"#FAFAFA"},dark:{primary:"#3B82F6",secondary:"#1F2937",accent:"#60A5FA",background:"#111827",surface:"#374151",text:"#F9FAFB",textSecondary:"#9CA3AF",border:"#4B5563",success:"#34D399",error:"#F87171",warning:"#FBBF24",codeBackground:"#1E1E1E"}},qf=({output:B,theme:W,isDarkMode:D})=>{const ee=pe.useRef(null),G=pe.useRef(null),ge=pe.useRef(null);return pe.useEffect(()=>{if(!ee.current)return;const U=new Nf.Terminal({theme:{background:D?"#1E1E1E":"#0D1117",foreground:D?"#D4D4D4":"#C9D1D9",cursor:D?"#D4D4D4":"#C9D1D9",selection:"#264F78",black:"#000000",red:"#CD3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#E5E5E5"},fontSize:13,fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, monospace',lineHeight:1.5,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,padding:12}),c=new Wf.FitAddon;U.loadAddon(c),U.open(ee.current),c.fit(),G.current=U,ge.current=c;const u=()=>{ge.current&&ge.current.fit()};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u),U.dispose()}},[D]),pe.useEffect(()=>{if(G.current)if(G.current.clear(),B){const U=B.endsWith(`
`)||B.endsWith(`\r
`)?B:B+`\r
`;G.current.write(U)}else G.current.write(`Run your code to see output here...\r
`)},[B]),pe.useEffect(()=>{ge.current&&setTimeout(()=>{ge.current.fit()},100)},[B]),T.jsx("div",{ref:ee,style:{width:"100%",height:"100%",boxSizing:"border-box"}})},ql=({theme:B})=>T.jsx("div",{style:{display:"inline-block",width:"20px",height:"20px",border:`2px solid ${B.border}`,borderTop:`2px solid ${B.primary}`,borderRadius:"50%",animation:"spin 1s linear infinite"}});class tp extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,D){console.error("ErrorBoundary caught an error:",W,D)}render(){return this.state.hasError?T.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffebee",color:"#c62828",border:"1px solid #ef5350",borderRadius:"4px",margin:"10px 0"},children:[T.jsx("h3",{children:"Something went wrong"}),T.jsx("p",{children:"An error occurred while rendering this section. Please refresh the page."}),T.jsxs("details",{children:[T.jsx("summary",{children:"Error details"}),T.jsx("pre",{children:this.state.error?.toString()})]})]}):this.props.children}}const Gf=(B=[])=>{const[W,D]=pe.useState(Array.isArray(B)?B:[]);return[W,G=>{Array.isArray(G)?D(G):G==null?(console.warn("Attempted to set null/undefined to array state, using empty array instead"),D([])):(console.warn("Attempted to set non-array to array state:",typeof G,G),D([]))}]},Jf={python:{extension:"py",fileName:"Main.py"},cpp:{extension:"cpp",fileName:"Main.cpp"},c:{extension:"cpp",fileName:"Main.cpp"},java:{extension:"java",fileName:"Main.java"},kotlin:{extension:"kt",fileName:"Main.kt"},scala:{extension:"scala",fileName:"Main.scala"},go:{extension:"go",fileName:"main.go"},rust:{extension:"rs",fileName:"main.rs"},swift:{extension:"swift",fileName:"main.swift"},ruby:{extension:"rb",fileName:"main.rb"},javascript:{extension:"js",fileName:"main.js"},typescript:{extension:"ts",fileName:"main.ts"},bash:{extension:"sh",fileName:"script.sh"},sh:{extension:"sh",fileName:"script.sh"},sql:{extension:"txt",fileName:"code.txt"}},xs=B=>Jf[B]?.fileName||"code.txt",Xf=B=>({python:"python",cpp:"cpp",c:"c",java:"java",kotlin:"kotlin",scala:"scala",go:"go",rust:"rust",swift:"swift",ruby:"ruby",javascript:"javascript",typescript:"typescript",bash:"shell",sh:"shell",sql:"sql"})[B]||"plaintext",bs=B=>({python:`# Write your solution here
`,cpp:`#include <iostream>
using namespace std;

int main() {
    // Write your solution here
    return 0;
}`,c:`#include <stdio.h>

int main() {
    // Write your solution here
    return 0;
}`,java:`public class Main {
    public static void main(String[] args) {
        // Write your solution here
    }
}`,kotlin:`fun main() {
    // Write your solution here
}`,scala:`object Main {
  def main(args: Array[String]): Unit = {
    // Write your solution here
  }
}`,go:`package main

import "fmt"

func main() {
    // Write your solution here
}`,rust:`fn main() {
    // Write your solution here
}`,swift:`// Write your solution here
// Note: Use print() for output, avoid Foundation imports for compatibility`,ruby:`# Write your solution here
`,javascript:`// Write your solution here
`,typescript:`// Write your TypeScript solution here
// Note: Basic Node.js globals are available
`,bash:`#!/bin/bash
# Write your solution here
`,sh:`#!/bin/sh
# Write your solution here
`,sql:`-- Write your SQL query here
`})[B]||`// Write your solution here
`;function Qf(){const[B,W]=pe.useState([]),[D,ee]=pe.useState(null),[G,ge]=pe.useState("python"),[U,c]=pe.useState(""),[u,p]=pe.useState(null),[y,h]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-dark-mode");return v?JSON.parse(v):!1}),m=pe.useRef(""),[w,E]=pe.useState(!0),[_,n]=pe.useState(!1),[l,s]=pe.useState(!1),[o,f]=pe.useState(null),[C,S]=pe.useState(0),[x,g]=pe.useState(!0),[L,H]=pe.useState(!1),[N,V]=pe.useState({title:"",statement:"",languages:["python"],stub:{python:""},type:"coding",drawingData:""}),[j,te]=pe.useState(!1),oe=async(v,O)=>{try{if(!(await fetch(`/api/problems/${v}/drawing`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({drawingData:O})})).ok)throw new Error("Failed to save drawing");ee(X=>X?{...X,DrawingData:O}:null)}catch(z){console.error("Error saving drawing:",z)}},he=async v=>{try{console.log("Deleting problem:",v);const O=await fetch(`/api/problems/${v}`,{method:"DELETE"});if(console.log("Delete response status:",O.status,O.statusText),!O.ok){const z=await O.text();throw console.error("Delete error response:",z),new Error(`Failed to delete problem (${O.status}): ${z}`)}W(z=>z.filter(X=>(X.ID||X.id)!==v)),D&&(D.ID||D.id)===v&&(ee(null),c(""),p(null)),console.log("Problem deleted successfully")}catch(O){console.error("Error deleting problem:",O),alert("Failed to delete problem: "+O.message)}},ve=Jt.useCallback((v,O,z)=>{try{const X={...O};delete X.collaborators;const ye=JSON.stringify({elements:v,appState:X,files:z});m.current!==ye&&(m.current=ye,D&&oe(D.ID,ye))}catch(X){console.error("Failed to save drawing data:",X)}},[D]),[Q,k]=pe.useState(!1),[P,b]=Gf([]),[I,ie]=pe.useState(!1),[se,de]=pe.useState([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),[xe,q]=pe.useState(!1),[M,ne]=pe.useState(!1),[J,Se]=pe.useState({company:"",role:"",customRole:"",level:"mid",count:3,jobDescription:"",companyDescription:"",interviewType:"",provider:"gemini",apiKey:"",defaultLanguage:"python",questionType:"coding"}),[we,Fe]=pe.useState(!1),[ze,Ue]=pe.useState(!1),[Ke,Ae]=pe.useState(null),[Tt,ar]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-sidebar-collapsed");return v?JSON.parse(v):!1}),[Xt,Ft]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-sidebar-width");return v?parseInt(v):320}),[cr,ht]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-editor-height");return v?parseInt(v):450}),[Mt,_t]=pe.useState(!1),[Ht,ur]=pe.useState(!1),[lt,hr]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-left-pane-width");return v?parseFloat(v):45}),[gt,Pt]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-console-height");return v?parseInt(v):200}),[Ve,Oi]=pe.useState([]),[Un,Jl]=pe.useState({top:0,left:0}),[Ds,Ts]=pe.useState(0),[zr,ji]=pe.useState(!1),[Ms,Wr]=pe.useState(""),[$r,Kn]=pe.useState(0),[Vn,qn]=pe.useState(0),[Gn,Ps]=pe.useState({start:0,end:0}),Fi=pe.useRef({start:0,end:0}),[Hi,Ur]=pe.useState(()=>{const v=localStorage.getItem("ceesarcode-console-collapsed");return v?JSON.parse(v):!1}),[wr,xr]=pe.useState(!1),[oi,br]=pe.useState(!1),Nt=["python","cpp","c","java","kotlin","scala","go","rust","swift","ruby","javascript","typescript","bash","sh","sql"],li=[{value:"junior",label:"Junior"},{value:"mid",label:"Mid-level"},{value:"senior",label:"Senior"},{value:"staff",label:"Staff"},{value:"principal",label:"Principal"}],Ni=["Software Engineer","Frontend Developer","Backend Developer","Full Stack Developer","DevOps Engineer","Data Engineer","Machine Learning Engineer","Mobile Developer","QA Engineer","Security Engineer"],A=y?Du.dark:Du.light,Jn=()=>{const v=document.querySelector("textarea");if(!v)return;const O=v.selectionStart,z=v.selectionEnd,ye=U.substring(O,z).split(`
`),ue=ye.every(le=>{const ae=le.trim();return ae===""||G==="python"&&ae.startsWith("#")||["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(G)&&ae.startsWith("//")||["bash","sh"].includes(G)&&ae.startsWith("#")||G==="sql"&&ae.startsWith("--")});let be;ue?be=ye.map(le=>{const ae=le.trim();return ae===""?le:G==="python"&&ae.startsWith("#")?le.replace(/^(\s*)#/,"$1"):["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(G)&&ae.startsWith("//")?le.replace(/^(\s*)\/\//,"$1"):["bash","sh"].includes(G)&&ae.startsWith("#")?le.replace(/^(\s*)#/,"$1"):G==="sql"&&ae.startsWith("--")?le.replace(/^(\s*)--/,"$1"):le}).join(`
`):be=ye.map(le=>le.trim()===""?le:G==="python"?le.replace(/^(\s*)/,"$1# "):["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(G)?le.replace(/^(\s*)/,"$1// "):["bash","sh"].includes(G)?le.replace(/^(\s*)/,"$1# "):G==="sql"?le.replace(/^(\s*)/,"$1-- "):le).join(`
`);const ke=U.substring(0,O)+be+U.substring(z);c(ke),setTimeout(()=>{v.focus(),v.setSelectionRange(O,O+be.length)},0)},Xn=()=>{const v=U.split(`
`),O=[];let z=0;const X=zt(G);for(let ye=0;ye<v.length;ye++){let ue=v[ye];ue=ue.replace(/\s+$/,"");const be=ue.trim();/^[}\]\)]/.test(be)&&(z=Math.max(0,z-1));const le=" ".repeat(z*X)+be;(/[{\[\(]$/.test(be)||Kr(be,G))&&z++,O.push(le)}c(O.join(`
`))},ir=()=>{window.confirm("Are you sure you want to clear all code?")&&c("")},As=()=>{const v=document.querySelector("textarea");if(!v)return;const O=v.selectionStart;v.selectionEnd;const z=U.split(`
`);let X=0,ye=0;for(let be=0;be<z.length;be++){if(ye+z[be].length>=O){X=be;break}ye+=z[be].length+1}const ue=z[X];z.splice(X+1,0,ue),c(z.join(`
`))},zi=()=>{const v=!y;h(v),localStorage.setItem("ceesarcode-dark-mode",JSON.stringify(v))},Bs=()=>{const v=!Tt;ar(v),localStorage.setItem("ceesarcode-sidebar-collapsed",JSON.stringify(v))};pe.useEffect(()=>{const v=z=>{if(Mt){const X=Math.max(200,Math.min(600,z.clientX));Ft(X),localStorage.setItem("ceesarcode-sidebar-width",X.toString())}},O=()=>{_t(!1)};return Mt&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",O),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",O),document.body.style.cursor="",document.body.style.userSelect=""}},[Mt]),pe.useEffect(()=>{const v=z=>{if(Ht){const X=document.querySelector("[data-editor-container]");if(X){const ye=X.getBoundingClientRect(),ue=Math.max(200,Math.min(800,z.clientY-ye.top));ht(ue),localStorage.setItem("ceesarcode-editor-height",ue.toString())}}},O=()=>{ur(!1)};return Ht&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",O),document.body.style.cursor="row-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",O),document.body.style.cursor="",document.body.style.userSelect=""}},[Ht]),pe.useEffect(()=>{const v=z=>{if(wr){const X=document.querySelector("[data-panes-container]");if(X){const ye=X.getBoundingClientRect(),ue=(z.clientX-ye.left)/ye.width*100,be=Math.max(25,Math.min(75,ue));hr(be),localStorage.setItem("ceesarcode-left-pane-width",be.toString())}}},O=()=>{xr(!1)};return wr&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",O),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",O),document.body.style.cursor="",document.body.style.userSelect=""}},[wr]),pe.useEffect(()=>{const v=z=>{if(oi){const X=document.querySelector("[data-console-container]");if(X){const ye=X.getBoundingClientRect(),ue=Math.max(100,Math.min(600,ye.bottom-z.clientY));Pt(ue),localStorage.setItem("ceesarcode-console-height",ue.toString())}}},O=()=>{br(!1)};return oi&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",O),document.body.style.cursor="row-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",O),document.body.style.cursor="",document.body.style.userSelect=""}},[oi]);const Wi=()=>{const v=!Hi;Ur(v),localStorage.setItem("ceesarcode-console-collapsed",JSON.stringify(v))},$i=(v=1)=>{const z=(Nt.indexOf(G)+v+Nt.length)%Nt.length,X=Nt[z];ge(X),D&&D.Stub&&D.Stub[X]?c(D.Stub[X]):c(bs(X))},Is=()=>{q(!0)},Os=async()=>{const v=we?J.customRole:J.role;if(!J.company||!v){alert("Please fill in both company and role fields");return}const O=J.count&&!isNaN(parseInt(J.count))?parseInt(J.count):3,z=Math.max(1,Math.min(10,O)),X={company:J.company,role:v,level:J.level,count:z,jobDescription:J.jobDescription||"",companyDescription:J.companyDescription||"",interviewType:J.interviewType||"",provider:J.provider||"gemini",apiKey:J.apiKey||"",defaultLanguage:J.defaultLanguage||"python",questionType:J.questionType||"coding"};console.log("Sending request:",{...X,apiKey:X.apiKey?"***"+X.apiKey.slice(-4):"empty"}),Ue(!0),Ae(null),f(null);const ye=Math.min(9e5,9e4+z*45e3),ue=Math.round(ye/6e4*10)/10;console.log(`Setting timeout to ${ue} minutes for ${z} question(s)`);try{const be=new AbortController,ke=setTimeout(()=>be.abort(),ye),le=await fetch("/api/agent/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X),signal:be.signal});clearTimeout(ke);const ae=await le.json();if(!le.ok)throw console.error("API error response:",ae),new Error(ae.message||`HTTP error! status: ${le.status}`);if(Ae(ae),ae.status==="success"){await(async()=>{try{const Le=await fetch("/api/problems");if(!Le.ok)throw new Error("Failed to fetch problems");const Oe=await Le.json();W(Oe)}catch(Le){console.error("Error fetching problems:",Le)}})();const Ee=ae.problems?ae.problems.length:0;alert(`Successfully generated ${Ee} questions!`)}else console.error("AI generation error:",ae),alert(`Error: ${ae.message||"Failed to generate questions. Please check your API key and try again."}`)}catch(be){if(console.error("Error generating questions:",be),be.name==="AbortError"){const ke=Math.round(ye/6e4*10)/10;f(`Request timed out after ${ke} minutes. The AI generation is taking longer than expected. Try generating fewer questions at once or check your internet connection.`),alert(`Request timed out after ${ke} minutes. Try generating fewer questions at once (e.g., 3-5 questions) or check your internet connection.`)}else f(be.message),alert("Failed to generate questions: "+be.message)}finally{Ue(!1)}},Qn=v=>({python:["def","class","if","else","elif","for","while","try","except","finally","with","import","from","return","yield","lambda","and","or","not","in","is","True","False","None"],javascript:["function","const","let","var","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","class","extends","import","export","async","await"],typescript:["function","const","let","var","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","class","extends","import","export","async","await","interface","type","enum","namespace"],java:["public","private","protected","static","final","abstract","class","interface","extends","implements","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","super"],cpp:["int","float","double","char","bool","void","if","else","for","while","switch","case","break","continue","return","try","catch","throw","new","delete","class","struct","public","private","protected"],c:["int","float","double","char","void","if","else","for","while","switch","case","break","continue","return","struct","typedef","enum"],go:["func","var","const","type","struct","interface","if","else","for","range","switch","case","break","continue","return","go","chan","select","defer","panic","recover"],rust:["fn","let","const","static","if","else","for","while","loop","match","break","continue","return","struct","enum","impl","trait","use","mod","pub","async","await"],kotlin:["fun","val","var","class","interface","if","else","for","while","when","break","continue","return","try","catch","finally","throw","data","object","companion"],scala:["def","val","var","class","object","trait","if","else","for","while","match","case","break","continue","return","try","catch","finally","throw","import","package"],swift:["func","let","var","class","struct","enum","protocol","if","else","for","while","switch","case","break","continue","return","try","catch","throw","import"],ruby:["def","class","module","if","else","elsif","for","while","case","when","break","next","return","begin","rescue","ensure","raise","yield","end"],bash:["if","then","else","elif","fi","for","while","do","done","case","esac","function","return","break","continue","echo","read","cd","ls","grep","awk","sed"],sql:["SELECT","FROM","WHERE","GROUP","BY","ORDER","HAVING","INSERT","UPDATE","DELETE","CREATE","ALTER","DROP","TABLE","INDEX","VIEW","JOIN","INNER","LEFT","RIGHT","OUTER"]})[v]||[],Yn=v=>{v.preventDefault();const O=v.target,z=O.selectionStart,X=O.selectionEnd,ue=U.substring(0,z).split(`
`).pop().split(/\s+/).pop()||"";if(v.shiftKey)Zn(O,z,X);else if(ue.length>0&&!ue.includes(`
`)){const be=ci(ue,G);if(be){const ke=U.substring(0,z-ue.length)+be+U.substring(X);c(ke),setTimeout(()=>{O.focus(),O.setSelectionRange(z-ue.length+be.length,z-ue.length+be.length)},0)}else Xe(O,z,X)}else Xe(O,z,X)},Xe=(v,O,z)=>{const X=U.split(`
`);let ye=0;for(let ke=0;ke<X.length&&!(ye+X[ke].length>=O);ke++)ye+=X[ke].length+1;const ue=zt(G),be=" ".repeat(ue);if(O===z){const ke=U.substring(0,O)+be+U.substring(z);c(ke),setTimeout(()=>{v.focus(),v.setSelectionRange(O+be.length,O+be.length)},0)}else{const ke=[];let le=0;for(let ce=0;ce<X.length;ce++){const Ee=le+X[ce].length;Ee>=O&&le<=z&&ke.push(ce),le=Ee+1}const ae=[...X];ke.forEach(ce=>{ae[ce]=be+ae[ce]}),c(ae.join(`
`)),setTimeout(()=>{v.focus(),v.setSelectionRange(O+be.length,z+be.length*ke.length)},0)}},Zn=(v,O,z)=>{const X=U.split(`
`);let ye=0,ue=0;for(let ke=0;ke<X.length;ke++){if(ue+X[ke].length>=O){ye=ke;break}ue+=X[ke].length+1}const be=zt(G);if(O===z){const le=X[ye].match(/^(\s*)/)[1],ae=Math.min(le.length,be);if(ae>0){const ce=U.substring(0,O-ae)+U.substring(O);c(ce),setTimeout(()=>{v.focus(),v.setSelectionRange(O-ae,O-ae)},0)}}else{const ke=[];let le=0;for(let Ee=0;Ee<X.length;Ee++){const Le=le+X[Ee].length;Le>=O&&le<=z&&ke.push(Ee),le=Le+1}const ae=[...X];let ce=0;ke.forEach(Ee=>{const Le=ae[Ee].match(/^(\s*)/)[1],Oe=Math.min(Le.length,be);ae[Ee]=ae[Ee].substring(Oe),ce+=Oe}),c(ae.join(`
`)),setTimeout(()=>{v.focus(),v.setSelectionRange(Math.max(0,O-be),Math.max(0,z-ce))},0)}},zt=v=>({python:4,javascript:2,typescript:2,java:4,cpp:4,c:4,go:4,rust:4,kotlin:4,scala:2,swift:4,ruby:2,bash:2,sh:2,sql:2})[v]||4,js=v=>{v.preventDefault();const O=v.target,z=O.selectionStart,X=O.selectionEnd,ye=U.split(`
`);let ue=0,be=0;for(let rt=0;rt<ye.length;rt++){if(be+ye[rt].length>=z){ue=rt;break}be+=ye[rt].length+1}const ke=ye[ue]||"",le=ye[ue-1]||"";let ae="";const ce=ke.match(/^(\s*)/)[1],Ee=ke.trim(),Le=/[{\[\(]$/.test(Ee),Oe=/^\s*[}\]\)]/.test(ke),$e=Kr(Ee,G);if(le.match(/^(\s*)/)[1],Le){const rt=zt(G);ae=ce+" ".repeat(rt)}else if(Oe){const rt=zt(G);ae=ce.length>=rt?ce.substring(0,ce.length-rt):""}else if($e){const rt=zt(G);ae=ce+" ".repeat(rt)}else ae=ce;const Qe=U.substring(0,z)+`
`+ae+U.substring(X);c(Qe),setTimeout(()=>{O.focus(),O.setSelectionRange(z+1+ae.length,z+1+ae.length)},0)},Kr=(v,O)=>({python:[/:\s*$/,/^\s*(if|for|while|def|class|with|try|except|finally|elif|else)\s+.*:\s*$/,/^\s*(async\s+)?def\s+\w+.*:\s*$/,/^\s*class\s+\w+.*:\s*$/],javascript:[/:\s*$/,/^\s*(if|for|while|function|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(const|let|var)\s+\w+\s*=\s*\(.*\)\s*=>\s*\{?\s*$/,/^\s*\w+\s*:\s*function\s*\(.*\)\s*\{?\s*$/],typescript:[/:\s*$/,/^\s*(if|for|while|function|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(const|let|var)\s+\w+\s*:\s*\w+\s*=\s*\(.*\)\s*=>\s*\{?\s*$/,/^\s*(public|private|protected)\s+\w+\s*\(.*\)\s*:\s*\w+\s*\{?\s*$/],java:[/^\s*(if|for|while|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(public|private|protected)\s+\w+\s+.*\s*\(.*\)\s*\{?\s*$/,/^\s*class\s+\w+.*\{?\s*$/],cpp:[/^\s*(if|for|while|switch|try|catch)\s*\(.*\)\s*\{?\s*$/,/^\s*\w+\s+.*\s*\(.*\)\s*\{?\s*$/,/^\s*class\s+\w+.*\{?\s*$/],c:[/^\s*(if|for|while|switch)\s*\(.*\)\s*\{?\s*$/,/^\s*\w+\s+.*\s*\(.*\)\s*\{?\s*$/],go:[/^\s*(if|for|switch|func)\s+.*\{?\s*$/,/^\s*func\s+\w+.*\s*\(.*\)\s*\{?\s*$/],rust:[/^\s*(if|for|while|match|fn)\s+.*\{?\s*$/,/^\s*fn\s+\w+.*\s*\(.*\)\s*\{?\s*$/],kotlin:[/^\s*(if|for|while|when|try|catch|finally)\s+.*\{?\s*$/,/^\s*fun\s+\w+.*\s*\(.*\)\s*\{?\s*$/],scala:[/^\s*(if|for|while|match|try|catch|finally)\s+.*\{?\s*$/,/^\s*def\s+\w+.*\s*\(.*\)\s*\{?\s*$/],swift:[/^\s*(if|for|while|switch|func)\s+.*\{?\s*$/,/^\s*func\s+\w+.*\s*\(.*\)\s*\{?\s*$/],ruby:[/^\s*(if|for|while|def|class|module|begin|rescue|ensure)\s+.*$/,/^\s*def\s+\w+.*$/,/^\s*class\s+\w+.*$/],bash:[/^\s*(if|for|while|case|function)\s+.*$/,/^\s*\w+\s*\(\s*\)\s*\{?\s*$/],sql:[/^\s*(SELECT|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP)\s+.*$/,/^\s*(WHERE|FROM|JOIN|GROUP BY|ORDER BY|HAVING)\s+.*$/]}[O]||[]).some(ye=>ye.test(v)),eo=v=>{if(v.key==="Tab"){Yn(v);return}if(v.key==="Enter"){js(v);return}if(v.key==="Backspace"){ai(v);return}if(["(","[","{",'"',"'",")","]","}"].includes(v.key)){io(v);return}if((v.ctrlKey||v.metaKey)&&v.key==="Enter"){v.preventDefault(),D&&U.trim()&&!l&&di();return}if((v.ctrlKey||v.metaKey)&&v.key==="/"){v.preventDefault(),Jn();return}if((v.ctrlKey||v.metaKey)&&v.key==="d"){v.preventDefault(),As();return}if((v.ctrlKey||v.metaKey)&&v.key==="l"){v.preventDefault(),ir();return}if((v.ctrlKey||v.metaKey)&&v.shiftKey&&v.key==="F"){v.preventDefault(),Xn();return}if(v.key==="Escape"&&D){ee(null);return}if((v.ctrlKey||v.metaKey)&&v.shiftKey&&v.key==="?"){v.preventDefault(),q(!0);return}},Fs=v=>{c(v||"")},ai=v=>{const O=v.target,z=O.selectionStart,X=O.selectionEnd;if(z!==X)return;const ye=U.substring(0,z),ue=U.substring(X),be={"(":")","[":"]","{":"}",'"':'"',"'":"'"},ke=ye.charAt(ye.length-1),le=be[ke];if(le&&ue.charAt(0)===le){v.preventDefault();const Qe=U.substring(0,z-1)+U.substring(X+1);c(Qe),setTimeout(()=>{O.focus(),O.setSelectionRange(z-1,z-1)},0);return}const ae=U.split(`
`);let ce=0,Ee=0;for(let Qe=0;Qe<ae.length;Qe++){if(Ee+ae[Qe].length>=z){ce=Qe;break}Ee+=ae[Qe].length+1}const Le=ae[ce]||"",Oe=Le.match(/^(\s*)/)[1];if(z-Ee<=Oe.length&&Oe.length>0){v.preventDefault();const Qe=Wt(ae,ce,G),rt=zt(G),fr=" ".repeat(Qe*rt),lo=fr+Le.trim(),qi=[...ae];qi[ce]=lo,c(qi.join(`
`)),setTimeout(()=>{O.focus();const qr=Ee+fr.length;O.setSelectionRange(qr,qr)},0);return}},Wt=(v,O,z)=>{const X=zt(z),ye=v[O].match(/^(\s*)/)[1],ue=Math.floor(ye.length/X);if(ue<=1)return 0;for(let be=O-1;be>=0;be--){const ke=v[be];if(ke.trim()==="")continue;const ae=ke.match(/^(\s*)/)[1],ce=Math.floor(ae.length/X);if(ce<ue)return ce}return 0},to=(v,O,z)=>{const ye=v.substring(0,O).split(`
`),ue=ye[ye.length-1]||"",ke={python:/#/,javascript:/\/\/|\/\*/,typescript:/\/\/|\/\*/,java:/\/\/|\/\*/,cpp:/\/\/|\/\*/,c:/\/\/|\/\*/,go:/\/\/|\/\*/,rust:/\/\/|\/\*/,ruby:/#/,bash:/#/,sh:/#/}[z];if(!ke)return!1;const le=ue.match(ke);if(le){const ae=ue.indexOf(le[0]),ce=ue.length;if(ae<ce){if(le[0]==="/*"){const Ee=v.substring(0,O),Le=Ee.lastIndexOf("/*"),Oe=Ee.lastIndexOf("*/");return Le>Oe}return!0}}return!1},vt=(v,O,z)=>{const X=v.substring(0,O);let ye=0,ue=0;for(;ue<X.length;)X[ue]===z&&(ue===0||X[ue-1]!=="\\")&&ye++,ue++;return ye%2===1},ro=(v,O,z,X)=>{let ye=1,ue=O+1;for(;ue<v.length&&ye>0;){const be=v[ue];if((ue>0?v[ue-1]:"")==="\\"){ue++;continue}if(be===z)ye++;else if(be===X&&(ye--,ye===0))return ue;ue++}return-1},io=v=>{const O=v.target,z=O.selectionStart,X=O.selectionEnd;if(z!==X)return;const ye={"(":")","[":"]","{":"}",'"':'"',"'":"'"},ue={")":"(","]":"[","}":"{",'"':'"',"'":"'"},be=ye[v.key],ke=ue[v.key];if(ke){if(U.substring(X).charAt(0)===v.key){const ae=U.substring(0,z);let ce=0;for(let Ee=0;Ee<ae.length;Ee++){const Le=ae[Ee];Ee>0&&ae[Ee-1]==="\\"||(Le===ke?ce++:Le===v.key&&(ce=Math.max(0,ce-1)))}if(ce===0){v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(X+1,X+1)},0);return}}if((v.key==='"'||v.key==="'")&&vt(U,z,v.key)){let ae=-1;for(let ce=z-1;ce>=0;ce--)if(U[ce]===v.key&&(ce===0||U[ce-1]!=="\\")){ae=ce;break}if(ae!==-1){const ce=ro(U,ae,v.key,v.key);if(ce!==-1&&ce>=z){v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(ce+1,ce+1)},0);return}}return}}if(be){if(to(U,z,G))return;const le=U.substring(X);if(v.key==='"'||v.key==="'"){if(vt(U,z,v.key))if(le.charAt(0)===v.key){const Ee=U.substring(0,z);let Le=!1,Oe=-1;for(let $e=Ee.length-1;$e>=0;$e--){const Qe=Ee[$e];if(!($e>0&&Ee[$e-1]==="\\")&&Qe===v.key){Le=!0,Oe=$e;break}}if(Le&&Oe!==-1){if(Ee.substring(Oe+1).trim().length>0){v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(X+1,X+1)},0);return}}else{v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(X+1,X+1)},0);return}}else return;v.key==='"'&&vt(U,z,"'")||v.key==="'"&&vt(U,z,'"')}if(le.charAt(0)===be){const ce=U.substring(0,z);let Ee=0;for(let Le=0;Le<ce.length;Le++){const Oe=ce[Le];Le>0&&ce[Le-1]==="\\"||(Oe===v.key?Ee++:Oe===be&&(Ee=Math.max(0,Ee-1)))}if(!(Ee>0)){let Le=0,Oe=!1,$e=-1;for(let Qe=ce.length-1;Qe>=0;Qe--){const rt=ce[Qe];if(!(Qe>0&&ce[Qe-1]==="\\")){if(rt===be)Le++;else if(rt===v.key)if(Le===0){Oe=!0,$e=Qe;break}else Le--}}if(Oe&&$e!==-1){if(ce.substring($e+1).trim().length>0){v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(X+1,X+1)},0);return}}else{v.preventDefault(),setTimeout(()=>{O.focus(),O.setSelectionRange(X+1,X+1)},0);return}}}v.preventDefault();const ae=U.substring(0,z)+v.key+be+U.substring(X);c(ae),setTimeout(()=>{O.focus(),O.setSelectionRange(z+1,z+1)},0)}},so=(v,O)=>{const z={variables:new Set,imports:new Set,functions:new Set},X=v.split(`
`);for(const ye of X){const ue=ye.trim();if(O==="python"){const le=ue.match(/^(?:from\s+(\S+)|import\s+(\S+))/);if(le){const ae=le[1]||le[2];ae&&ae.split(",").forEach(ce=>{const Ee=ce.trim().split(" as ")[0].split(".")[0];z.imports.add(Ee)})}}else if(["javascript","typescript"].includes(O)){const le=ue.match(/import\s+(?:\{[^}]+\}|\*\s+as\s+(\w+)|(\w+))/);if(le){const ae=le[1]||le[2];ae&&z.imports.add(ae);const ce=ue.match(/import\s+\{([^}]+)\}/);ce&&ce[1].split(",").forEach(Ee=>{const Le=Ee.trim().split(" as ")[0];z.imports.add(Le)})}}const ke={python:/^\s*(?:self\.)?(\w+)\s*=/,javascript:/^\s*(?:const|let|var)\s+(\w+)\s*=/,typescript:/^\s*(?:const|let|var)\s+(\w+)\s*[:=]/,java:/^\s*(?:\w+\s+)?(\w+)\s*=/,cpp:/^\s*(?:\w+\s+)?(\w+)\s*=/,c:/^\s*(?:\w+\s+)?(\w+)\s*=/}[O];if(ke){const le=ue.match(ke);le&&z.variables.add(le[1])}if(O==="python"){const le=ue.match(/^\s*def\s+(\w+)\s*\(([^)]*)\)/);if(le){const ce=le[1];ce&&z.functions.add(ce);const Ee=le[2];Ee&&Ee.split(",").forEach(Le=>{const Oe=Le.trim().split("=")[0].trim().split(":")[0].trim();Oe&&/^\w+$/.test(Oe)&&z.variables.add(Oe)})}const ae=ue.match(/lambda\s+([^:]+):/);ae&&ae[1].split(",").forEach(Ee=>{const Le=Ee.trim();Le&&/^\w+$/.test(Le)&&z.variables.add(Le)})}else if(["javascript","typescript"].includes(O)){const le=ue.match(/^\s*function\s+(\w+)\s*\(([^)]*)\)/);if(le){const Ee=le[1];Ee&&z.functions.add(Ee);const Le=le[2];Le&&Le.split(",").forEach(Oe=>{const $e=Oe.trim().split("=")[0].trim().split(":")[0].trim();$e&&/^\w+$/.test($e)&&z.variables.add($e)})}const ae=ue.match(/^\s*(?:const|let|var)\s+(\w+)\s*[:=]\s*(?:async\s*)?(?:\(([^)]+)\)|(\w+))\s*=>/);if(ae){const Ee=ae[1];Ee&&z.functions.add(Ee);const Le=ae[2]||ae[3];if(Le)if(ae[3]){const Oe=Le.trim();Oe&&/^\w+$/.test(Oe)&&z.variables.add(Oe)}else Le.split(",").forEach(Oe=>{const $e=Oe.trim().split("=")[0].trim().split(":")[0].trim();$e&&/^\w+$/.test($e)&&z.variables.add($e)})}const ce=ue.match(/^\s*(?:\(([^)]+)\)|(\w+))\s*=>/);if(ce&&!ae){const Ee=ce[1]||ce[2];if(Ee)if(ce[2]){const Le=Ee.trim();Le&&/^\w+$/.test(Le)&&z.variables.add(Le)}else Ee.split(",").forEach(Le=>{const Oe=Le.trim().split("=")[0].trim().split(":")[0].trim();Oe&&/^\w+$/.test(Oe)&&z.variables.add(Oe)})}}else if(["java","cpp","c"].includes(O)){const le=ue.match(/^\s*(?:\w+\s+)*\w+\s+(\w+)\s*\(([^)]*)\)/);if(le){const ae=le[1];ae&&z.functions.add(ae);const ce=le[2];ce&&ce.split(",").forEach(Ee=>{const Le=Ee.trim().split(/\s+/);if(Le.length>=2){const Oe=Le[Le.length-1].split("=")[0].trim();Oe&&/^\w+$/.test(Oe)&&z.variables.add(Oe)}else if(Le.length===1){const Oe=Le[0].trim();Oe&&/^\w+$/.test(Oe)&&z.variables.add(Oe)}})}}if(O==="python"){const le=ue.match(/^\s*for\s+([^:]+)\s+in\s+/);le&&le[1].split(",").forEach(ce=>{const Ee=ce.trim();Ee&&/^\w+$/.test(Ee)&&z.variables.add(Ee)})}else if(["javascript","typescript"].includes(O)){const le=ue.match(/^\s*for\s*\(\s*(?:const|let|var)?\s*(\w+)/);if(le){const ce=le[1];ce&&z.variables.add(ce)}const ae=ue.match(/^\s*for\s*\(\s*(?:const|let|var)?\s*\[([^\]]+)\]/);ae&&ae[1].split(",").forEach(Ee=>{const Le=Ee.trim();Le&&/^\w+$/.test(Le)&&z.variables.add(Le)})}else if(["java","cpp","c"].includes(O)){const le=ue.match(/^\s*for\s*\(\s*(?:\w+\s+)?(\w+)/);if(le){const ce=le[1];ce&&ce!=="int"&&ce!=="long"&&ce!=="double"&&ce!=="float"&&ce!=="char"&&z.variables.add(ce)}const ae=ue.match(/^\s*for\s*\(\s*\w+\s+(\w+)\s*:/);if(ae){const ce=ae[1];ce&&z.variables.add(ce)}}}return z},ci=(v,O)=>{const X=Qn(O).filter(le=>le.toLowerCase().startsWith(v.toLowerCase())&&le.toLowerCase()!==v.toLowerCase()),ye=so(U,O),be=[...ye.variables,...ye.imports,...ye.functions].filter(le=>le.toLowerCase().startsWith(v.toLowerCase())&&le.toLowerCase()!==v.toLowerCase()),ke=[...X,...be];if(ke.length===1)return ke[0];if(ke.length>1){const le=ui(ke);if(le.length>v.length)return le}return null},ui=v=>{if(v.length===0)return"";if(v.length===1)return v[0];let O=v[0];for(let z=1;z<v.length;z++)for(;O.length>0&&!v[z].toLowerCase().startsWith(O.toLowerCase());)O=O.slice(0,-1);return O};pe.useEffect(()=>{const v=O=>{if(zr){const z=document.querySelector("[data-autocomplete]"),X=document.querySelector("textarea");z&&!z.contains(O.target)&&X&&!X.contains(O.target)&&ji(!1)}};if(zr)return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[zr]),pe.useEffect(()=>{const v=document.querySelector("textarea");if(!v)return;const O=()=>{const z=v.selectionStart,X=v.selectionEnd;Fi.current={start:z,end:X},Ps({start:z,end:X})};return v.addEventListener("focus",O),()=>v.removeEventListener("focus",O)},[U]),pe.useEffect(()=>{const v=O=>{if(console.log("Pop state:",O.state),O.state){const{problemId:z}=O.state;if(z){const X=B.find(ye=>ye.ID===z);X&&(ee(X),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]))}else ee(null),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1}])}else ee(null),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1}]),H(!1),window.location.hash&&window.history.replaceState({page:"home"},"","/")};return window.history.state||window.history.replaceState({page:"home"},"","/"),window.addEventListener("popstate",v),()=>{window.removeEventListener("popstate",v)}},[B]);const Vr=async v=>{try{const O=await fetch(`/api/problem/${v}/files`);if(O.ok){const z=await O.json();let X=[];Array.isArray(z)?X=z:z&&typeof z=="object"?(X=[],console.warn("Expected array but got object for uploaded files:",z)):z==null?(X=[],console.warn("Received null/undefined for uploaded files, using empty array")):(X=[],console.warn("Unexpected data type for uploaded files:",typeof z,z)),b(X)}else console.warn("Failed to fetch uploaded files, status:",O.status),b([])}catch(O){console.error("Failed to fetch uploaded files:",O),b([])}},hi=()=>{const v={id:Date.now(),code:"",output:"",isRunning:!1,hasExecuted:!1};de([...se,v])},no=(v,O)=>{de(se.map(z=>z.id===v?{...z,code:O}:z))},oo=async()=>{if(se.length!==0){de(se.map(v=>({...v,isRunning:!0,output:""})));for(let v=0;v<se.length;v++){const O=se[v];if(O.code.trim())try{const z=se.slice(0,v).filter(ae=>ae.hasExecuted);let X="",ye={};const ue=xs(G);G==="scala"?ye[ue]=O.code:(X=z.map(ae=>ae.code).join(`
`)+`
`+O.code,ye[ue]=X);const ke=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:D?.ID||"jupyter-cell",language:G,files:ye})})).json();let le="";ke.result?le=ke.result:ke.verdict==="Accepted"?le="Cell executed successfully":ke.error?le=`Error: ${ke.error}`:ke.tests&&ke.tests.length>0?le=`${ke.tests[0]?.message||"Execution failed"}`:le="Cell executed",de(ae=>ae.map(ce=>ce.id===O.id?{...ce,isRunning:!1,output:le,hasExecuted:!0}:ce)),await new Promise(ae=>setTimeout(ae,100))}catch(z){de(X=>X.map(ye=>ye.id===O.id?{...ye,isRunning:!1,output:`Error: ${z.message}`}:ye))}}}},Ui=async v=>{const O=se.find(z=>z.id===v);if(O){de(se.map(z=>z.id===v?{...z,isRunning:!0,output:""}:z));try{const z=se.findIndex(ce=>ce.id===v),X=se.slice(0,z).filter(ce=>ce.hasExecuted);let ye="",ue={};const be=xs(G);G==="scala"?ue[be]=O.code:(ye=X.map(ce=>ce.code).join(`
`)+`
`+O.code,ue[be]=ye);const le=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:D?.ID||"jupyter-cell",language:G,files:ue})})).json();let ae="";le.result?ae=le.result:le.verdict==="Accepted"?ae="Cell executed successfully":le.error?ae=`Error: ${le.error}`:le.tests&&le.tests.length>0?ae=`${le.tests[0]?.message||"Execution failed"}`:ae="Cell executed",de(se.map(ce=>ce.id===v?{...ce,isRunning:!1,output:ae,hasExecuted:!0}:ce))}catch(z){de(se.map(X=>X.id===v?{...X,isRunning:!1,output:`Error: ${z.message}`}:X))}}},Hs=v=>{se.length>1&&de(se.filter(O=>O.id!==v))},Ki=v=>{de(se.map(O=>O.id===v?{...O,code:"",output:"",hasExecuted:!1}:O))};pe.useEffect(()=>{(()=>{const O=window.location.hash;if(O.startsWith("#problem=")){const z=O.substring(1),X=new URLSearchParams(z),ye=decodeURIComponent(X.get("problem")||"");X.get("view");const ue=()=>{if(B.length>0){const be=B.find(ke=>(ke.ID||ke.id)===ye);be&&(ee(be),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]))}else setTimeout(ue,100)};ue()}else window.history.state||window.history.replaceState({page:"home"},"","/"),ee(null),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1}])})()},[B]),pe.useEffect(()=>{const v=async(O=0)=>{try{const z=await fetch("/api/problems");if(!z.ok)throw new Error("Failed to fetch problems");const X=await z.json();W(X),f(null)}catch(z){console.error("Error fetching problems:",z),g(!1),O<3?setTimeout(()=>v(O+1),1e3*(O+1)):f("Failed to load problems. Please check if the backend is running.")}finally{E(!1)}};v()},[]),pe.useEffect(()=>{const v=O=>{if(!(O.target.tagName==="INPUT"||O.target.tagName==="TEXTAREA"||O.target.contentEditable==="true")){if(O.key==="F5"){O.preventDefault(),D&&U.trim()&&!l&&di();return}if((O.ctrlKey||O.metaKey)&&O.shiftKey&&O.key==="Enter"){O.preventDefault(),D&&U.trim()&&!Q&&dr();return}if(O.key==="Escape"){xe?q(!1):D&&ee(null);return}if((O.ctrlKey||O.metaKey)&&O.shiftKey&&O.key==="L"){O.preventDefault(),$i(1);return}if((O.ctrlKey||O.metaKey)&&O.shiftKey&&O.key==="J"){O.preventDefault(),$i(-1);return}if((O.ctrlKey||O.metaKey)&&O.shiftKey&&O.key==="D"){O.preventDefault(),zi();return}if((O.ctrlKey||O.metaKey)&&O.shiftKey&&O.key==="?"){O.preventDefault(),Is();return}if((O.ctrlKey||O.metaKey)&&O.key>="1"&&O.key<="9"){O.preventDefault();const z=parseInt(O.key)-1;if(z<Nt.length){const X=Nt[z];ge(X),D&&D.Stub&&D.Stub[X]?c(D.Stub[X]):c(bs(X))}return}}};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[D,U,l,Q,G,xe,y]),pe.useEffect(()=>{if(!D)return;(async()=>{n(!0),f(null);try{const O=await fetch(`/api/problem/${encodeURIComponent(D.ID)}`);if(!O.ok)throw O.status===404?new Error("Problem not found"):new Error("Failed to fetch problem details");const z=await O.json();if(!z||!z.ID)throw new Error("Invalid problem data");const X=z.Languages&&z.Languages[0]?z.Languages[0]:"python";ge(X);let ye="";z.Stub&&z.Stub[X]?ye=z.Stub[X]:ye=bs(X),c(ye),Vr(D.ID),f(null)}catch(O){console.error("Error fetching problem details:",O),f(`Failed to load problem details: ${O.message}`)}finally{n(!1)}})()},[D]);const dr=async()=>{if(D){k(!0),p(null),f(null);try{let v={};if(I){const ye=se.filter(be=>be.hasExecuted&&be.code.trim()).map(be=>be.code).join(`
`),ue=xs(G);v[ue]=ye}else{const X=xs(G);v[X]=U}const z=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ProblemID:D.ID,Language:G,Files:v})})).json();p(z),z.verdict==="Accepted"?alert("Code submitted successfully!"):alert("Submission completed. Check the results for details.")}catch(v){console.error("Submit failed:",v),f("Submission failed: "+v.message)}finally{k(!1)}}},di=async()=>{if(D){s(!0),p(null),f(null);try{const v={},O=xs(G);v[O]=U,console.log("Running code:",{language:G,files:v});const z=await fetch("/api/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:G,files:v,input:""})});if(console.log("Response status:",z.status),console.log("Response ok:",z.ok),!z.ok){let ue="Code execution failed";const ke=await z.clone().text();console.error("HTTP Error Response:",z.status,ke);try{const le=JSON.parse(ke);console.error("Parsed error data:",le),le.error?ue=le.error:le.message?ue=le.message:ue=ke||`HTTP ${z.status} error`}catch{ue=ke||`HTTP ${z.status}: ${z.statusText}`}p({result:"",error:ue,compile_log:""}),f(null);return}const X=await z.json();if(console.log("Response data:",X),console.log("result.result:",X.result),console.log("result.error:",X.error),console.log("result type:",typeof X.result),console.log("result length:",X.result?X.result.length:0),!X||typeof X!="object"){p({result:"",error:"Invalid response from server",compile_log:""}),f(null);return}const ye={result:X.result||"",error:X.error||"",compile_log:""};console.log("Setting result:",ye),p(ye),f(null)}catch(v){console.error("Error running code:",v);const O=v.message.includes("fetch")||v.message.includes("network")?"Network error. Please check your connection and try again.":"Code execution failed. Please check your code and try again.";p({result:"",error:O,compile_log:""}),f(null)}finally{s(!1)}}},Vi=()=>{ee(null),c(""),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),ie(!1),te(!1),window.history.pushState({},"",window.location.pathname),window.scrollTo({top:0,behavior:"smooth"})};return T.jsxs("div",{style:{minHeight:"100vh",backgroundColor:A.background,color:A.text,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsxs("header",{style:{height:"56px",backgroundColor:A.background,borderBottom:`1px solid ${A.border}`,padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:1e3,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[T.jsx(Uf,{theme:A,onClick:Vi}),T.jsxs("button",{onClick:()=>H(!0),style:{backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:v=>v.target.style.backgroundColor=A.accent,onMouseLeave:v=>v.target.style.backgroundColor=A.primary,children:[T.jsx("span",{style:{marginRight:"6px"},children:"+"}),"Create Problem"]}),T.jsx("button",{onClick:()=>ne(!0),style:{backgroundColor:A.accent,color:"#FFFFFF",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:"AI Agent"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsxs("span",{style:{fontSize:"12px",color:A.textSecondary},children:[T.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:x?A.success:A.error,marginRight:"6px"}}),x?"Connected":"Disconnected"]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("button",{onClick:()=>window.history.back(),style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"4px",padding:"6px 10px",color:A.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Go back",children:" Back"}),T.jsx("button",{onClick:()=>window.history.forward(),style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"4px",padding:"6px 10px",color:A.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Go forward",children:"Forward "}),T.jsxs("button",{onClick:()=>window.location.reload(),style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"4px",padding:"6px 10px",color:A.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Refresh page",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Refresh"]})]}),T.jsx("button",{onClick:zi,style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"6px",padding:"8px 12px",color:A.text,cursor:"pointer",fontSize:"12px"},children:y?"Light Mode":"Dark Mode"})]})]}),L&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:T.jsxs("div",{style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[T.jsx("h2",{style:{margin:0,color:A.text,fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px",marginBottom:"24px"},children:"Create New Problem"}),T.jsx("button",{onClick:()=>H(!1),style:{backgroundColor:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:A.textSecondary},children:""})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",minHeight:"200px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Problem Title"}),T.jsx("input",{type:"text",value:N.title,onChange:v=>V({...N,title:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"Enter problem title"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Problem Statement"}),T.jsx("textarea",{value:N.statement,onChange:v=>V({...N,statement:v.target.value}),style:{width:"100%",height:"150px",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",resize:"vertical",transition:"border-color 0.2s ease",fontFamily:"inherit",lineHeight:"1.6"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"Describe the problem"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Question Type"}),T.jsxs("select",{value:N.type,onChange:v=>V({...N,type:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:[T.jsx("option",{value:"coding",children:"Coding Question"}),T.jsx("option",{value:"system_design",children:"System Design Question"})]})]}),N.type==="system_design"&&T.jsx("div",{style:{padding:"16px",backgroundColor:A.secondary,borderRadius:"8px",border:`1px solid ${A.border}`},children:T.jsxs("p",{style:{margin:0,color:A.textSecondary,fontSize:"14px",lineHeight:"1.6"},children:[" ",T.jsx("strong",{children:"Note:"})," After creating this system design question, you'll be able to draw your architecture diagram in the main workspace using the Excalidraw canvas."]})}),N.type==="coding"&&T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"4px",color:A.text,fontSize:"14px",fontWeight:"500"},children:"Supported Languages"}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Nt.map(v=>T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:N.languages.includes(v)?A.primary:A.secondary,color:N.languages.includes(v)?"#FFFFFF":A.text,padding:"6px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",border:`1px solid ${A.border}`},children:[T.jsx("input",{type:"checkbox",checked:N.languages.includes(v),onChange:O=>{const z=Array.from(document.querySelectorAll('input[name="languages"]:checked'),X=>X.value);V({...N,languages:z})},name:"languages",value:v,style:{display:"none"}}),v]},v))})]}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[T.jsx("button",{onClick:()=>H(!1),style:{flex:1,backgroundColor:A.secondary,color:A.text,border:`1px solid ${A.border}`,borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer"},children:"Cancel"}),T.jsx("button",{onClick:async()=>{if(!N.title.trim()||!N.statement.trim()){alert("Please fill in title and statement");return}try{const v=await fetch("/api/problems/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!v.ok)throw new Error("Failed to create problem");const O=await v.json();console.log("Problem created:",O),(async()=>{try{const X=await fetch("/api/problems");if(!X.ok)throw new Error("Failed to fetch problems");const ye=await X.json();W(ye)}catch(X){console.error("Error fetching problems:",X)}})(),H(!1),V({title:"",statement:"",languages:["python"],stub:{python:""},type:"coding",drawingData:""})}catch(v){console.error("Error creating problem:",v),alert("Failed to create problem: "+v.message)}},style:{flex:1,backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:"Create Problem"})]})]})]})}),M&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:T.jsxs("div",{style:{backgroundColor:A.background,border:`1px solid ${A.border}`,borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.12)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[T.jsx("h2",{style:{margin:0,color:A.text,fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px"},children:"AI Question Generator"}),T.jsx("button",{onClick:()=>ne(!1),style:{backgroundColor:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:A.textSecondary},children:""})]}),T.jsx("div",{style:{marginBottom:"20px"},children:T.jsx("p",{style:{margin:"0 0 16px 0",color:A.textSecondary,fontSize:"14px",lineHeight:"1.5"},children:"Generate custom coding interview questions tailored to specific companies, roles, and experience levels."})}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"6px",color:A.text,fontSize:"14px",fontWeight:"500"},children:"Company Name *"}),T.jsx("input",{type:"text",value:J.company,onChange:v=>Se({...J,company:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"e.g., Google, Microsoft, Amazon"})]}),T.jsxs("div",{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[T.jsx("label",{style:{margin:0,color:A.text,fontSize:"14px",fontWeight:"600"},children:"Role *"}),T.jsx("button",{onClick:()=>{Fe(!we),Se({...J,role:"",customRole:""})},style:{backgroundColor:we?A.primary:A.surface,color:we?"#FFFFFF":A.text,border:`1px solid ${A.border}`,borderRadius:"6px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},children:we?"Use Preset Roles":"Custom Role"})]}),we?T.jsx("input",{type:"text",value:J.customRole,onChange:v=>Se({...J,customRole:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"e.g., Blockchain Engineer, AI Researcher"}):T.jsxs("select",{value:J.role,onChange:v=>Se({...J,role:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:[T.jsx("option",{value:"",children:"Select a role"}),Ni.map(v=>T.jsx("option",{value:v,children:v},v))]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Experience Level"}),T.jsx("select",{value:J.level,onChange:v=>Se({...J,level:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:li.map(v=>T.jsx("option",{value:v.value,children:v.label},v.value))})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Number of Questions"}),T.jsx("input",{type:"number",min:"1",max:"10",value:J.count,onChange:v=>{const O=v.target.value;if(O==="")Se({...J,count:""});else{const z=parseInt(O);isNaN(z)||Se({...J,count:Math.max(1,Math.min(10,z))})}},style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>{v.target.style.borderColor=A.border,(v.target.value===""||isNaN(parseInt(v.target.value)))&&Se({...J,count:3})}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Question Type"}),T.jsxs("select",{value:J.questionType,onChange:v=>Se({...J,questionType:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:[T.jsx("option",{value:"coding",children:"Coding Questions"}),T.jsx("option",{value:"system_design",children:"System Design Questions"})]}),T.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:A.textSecondary,fontStyle:"italic"},children:J.questionType==="system_design"?"Generate system design interview questions with architecture diagrams":"Generate coding interview questions with programming challenges"})]}),J.questionType==="coding"&&T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Default Programming Language"}),T.jsxs("select",{value:J.defaultLanguage,onChange:v=>Se({...J,defaultLanguage:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"javascript",children:"JavaScript"}),T.jsx("option",{value:"java",children:"Java"}),T.jsx("option",{value:"cpp",children:"C++"}),T.jsx("option",{value:"go",children:"Go"}),T.jsx("option",{value:"rust",children:"Rust"}),T.jsx("option",{value:"c",children:"C"}),T.jsx("option",{value:"typescript",children:"TypeScript"}),T.jsx("option",{value:"ruby",children:"Ruby"}),T.jsx("option",{value:"swift",children:"Swift"})]}),T.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:A.textSecondary,fontStyle:"italic"},children:"Generated questions will prioritize this language"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"AI Provider"}),T.jsxs("select",{value:J.provider,onChange:v=>Se({...J,provider:v.target.value,apiKey:""}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,children:[T.jsx("option",{value:"gemini",children:"Google Gemini"}),T.jsx("option",{value:"openai",children:"OpenAI (GPT-4o-mini)"}),T.jsx("option",{value:"claude",children:"Anthropic Claude"})]})]}),T.jsxs("div",{children:[T.jsxs("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:["API Key ",J.provider==="gemini"?"(Optional - uses env var if not provided)":"(Required)"]}),T.jsx("input",{type:"password",value:J.apiKey,onChange:v=>Se({...J,apiKey:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:`Enter your ${J.provider==="gemini"?"Gemini":J.provider==="openai"?"OpenAI":"Claude"} API key...`}),T.jsxs("p",{style:{margin:"8px 0 0 0",color:A.textSecondary,fontSize:"12px",lineHeight:"1.4"},children:[J.provider==="gemini"&&"Get your key from ",J.provider==="openai"&&"Get your key from ",J.provider==="claude"&&"Get your key from ",J.provider==="gemini"&&T.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:A.primary},children:"Google AI Studio"}),J.provider==="openai"&&T.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",style:{color:A.primary},children:"OpenAI Platform"}),J.provider==="claude"&&T.jsx("a",{href:"https://console.anthropic.com/",target:"_blank",rel:"noopener noreferrer",style:{color:A.primary},children:"Anthropic Console"})]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Job Description (Optional)"}),T.jsx("textarea",{value:J.jobDescription,onChange:v=>Se({...J,jobDescription:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"Paste the job description here to generate more relevant questions..."})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Company Description (Optional)"}),T.jsx("textarea",{value:J.companyDescription,onChange:v=>Se({...J,companyDescription:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"Add company information for better context (e.g., tech stack, company culture, etc.)..."})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:A.text,fontSize:"14px",fontWeight:"600"},children:"Interview Type / Description (Optional)"}),T.jsx("textarea",{value:J.interviewType,onChange:v=>Se({...J,interviewType:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:A.background,color:A.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=A.primary,onBlur:v=>v.target.style.borderColor=A.border,placeholder:"Describe the interview type or format (e.g., 'Technical phone screen focusing on algorithms', 'On-site system design interview', 'Take-home assignment style', 'Live coding with pair programming', etc.)..."})]})]}),Ke&&T.jsxs("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:Ke.status==="success"?`${A.success}15`:`${A.error}15`,border:`1px solid ${Ke.status==="success"?A.success:A.error}`,borderRadius:"6px"},children:[T.jsx("p",{style:{margin:0,color:Ke.status==="success"?A.success:A.error,fontSize:"14px",fontWeight:"500"},children:Ke.message}),Ke.status==="success"&&Ke.problems&&T.jsxs("div",{style:{marginTop:"8px"},children:[T.jsx("p",{style:{margin:"0 0 8px 0",color:A.text,fontSize:"12px"},children:"Generated problems:"}),T.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:A.textSecondary,fontSize:"12px"},children:Ke.problems.map((v,O)=>T.jsx("li",{children:v.Title||v.title},O))})]})]}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[T.jsx("button",{onClick:()=>ne(!1),style:{flex:1,backgroundColor:A.secondary,color:A.text,border:`1px solid ${A.border}`,borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),T.jsxs("button",{onClick:()=>{Se({company:"",role:"",level:"mid",count:3}),Ae(null)},style:{backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Reset"]}),T.jsx("button",{onClick:Os,disabled:ze||!J.company||(we?!J.customRole:!J.role),style:{flex:1,backgroundColor:ze||!J.company||(we?!J.customRole:!J.role)?A.border:A.accent,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:ze||!J.company||(we?!J.customRole:!J.role)?"not-allowed":"pointer",fontWeight:"500",opacity:ze||!J.company||(we?!J.customRole:!J.role)?.6:1},children:ze?"Generating...":T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"6px"},children:""}),"Generate Questions"]})})]})]})}),T.jsxs("div",{style:{display:"flex",height:"calc(100vh - 56px)",overflow:"hidden",position:"relative"},children:[!Tt&&T.jsxs(T.Fragment,{children:[T.jsx("aside",{style:{width:`${Xt}px`,backgroundColor:A.background,borderRight:`1px solid ${A.border}`,padding:"20px",overflowY:"auto",overflowX:"hidden",boxShadow:"2px 0 12px rgba(0,0,0,0.08)",transition:"width 0.2s ease",position:"relative",minWidth:"200px",maxWidth:"600px",height:"100%"},children:T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[T.jsx("h2",{style:{margin:0,color:A.text,fontSize:"18px",fontWeight:"700",letterSpacing:"-0.4px"},children:"Problems"}),T.jsx("button",{onClick:Bs,style:{backgroundColor:"transparent",border:"none",color:A.textSecondary,cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"16px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{v.target.style.backgroundColor=A.surface,v.target.style.color=A.text},onMouseLeave:v=>{v.target.style.backgroundColor="transparent",v.target.style.color=A.textSecondary},title:"Collapse sidebar",children:""}),T.jsxs("div",{style:{display:"flex",gap:"8px"},children:[T.jsxs("button",{onClick:async()=>{if(window.confirm("This will remove ALL questions, including default and sample questions. Are you sure?")){E(!0);try{const v=await fetch("/api/problems/clear",{method:"POST",headers:{"Content-Type":"application/json"}});if(!v.ok){const X=await v.text();throw new Error(`HTTP ${v.status}: ${X||"Failed to clear all problems"}`)}const O=await v.json();alert(O.message||`Cleared ${O.count||0} problems`);const z=await fetch("/api/problems");if(z.ok){const X=await z.json();W(X||[]),ee(null)}}catch(v){console.error("Error clearing all problems:",v),alert("Failed to clear all problems: "+(v.message||"Unknown error"))}finally{E(!1)}}},style:{backgroundColor:A.error,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Clear All"]}),T.jsxs("button",{onClick:async()=>{if(window.confirm("This will remove all AI-generated problems. Are you sure?")){E(!0);try{const v=await fetch("/api/agent/clean",{method:"POST",headers:{"Content-Type":"application/json"}});if(!v.ok)throw new Error("Failed to clean AI problems");const O=await v.json();alert(O.message);const z=await fetch("/api/problems");if(z.ok){const X=await z.json();W(X||[])}}catch(v){console.error("Error cleaning AI problems:",v),alert("Failed to clean AI problems: "+v.message)}finally{E(!1)}}},style:{backgroundColor:A.error,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Clean AI"]})]})]}),w?T.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[T.jsx(ql,{theme:A}),T.jsx("p",{style:{margin:"12px 0 0 0",color:A.textSecondary},children:"Loading problems..."})]}):T.jsx("div",{children:B.map(v=>{const O=v.ID||v.id,z=v.Title||v.title,X=v.Languages||v.languages||[],ye=v.Type||v.type||"coding";return T.jsxs("div",{style:{marginBottom:"10px",padding:"16px",border:`1px solid ${A.border}`,borderRadius:"8px",backgroundColor:D&&(D.ID||D.id)===O?A.primary:A.background,color:D&&(D.ID||D.id)===O?"#FFFFFF":A.text,cursor:"pointer",transition:"all 0.2s ease",boxShadow:D&&(D.ID||D.id)===O?"0 4px 12px rgba(0,0,0,0.15)":"0 1px 2px rgba(0,0,0,0.05)",borderLeft:D&&(D.ID||D.id)===O?`4px solid ${A.accent}`:"4px solid transparent"},onMouseEnter:ue=>{(!D||(D.ID||D.id)!==O)&&(ue.currentTarget.style.backgroundColor=A.surface,ue.currentTarget.style.transform="translateX(2px)",ue.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)")},onMouseLeave:ue=>{(!D||(D.ID||D.id)!==O)&&(ue.currentTarget.style.backgroundColor=A.background,ue.currentTarget.style.transform="translateX(0)",ue.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)")},onClick:()=>{ee(v),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),window.history.pushState({problemId:O},"",`#problem=${encodeURIComponent(O)}`)},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[T.jsx("div",{style:{fontWeight:"600",fontSize:"15px",lineHeight:"1.4",flex:1},children:z}),ye==="system_design"&&T.jsx("span",{style:{backgroundColor:D&&(D.ID||D.id)===O?"rgba(255,255,255,0.2)":A.primary,color:(D&&(D.ID||D.id)===O,"#FFFFFF"),padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"System Design"}),T.jsx("button",{onClick:ue=>{ue.stopPropagation(),window.confirm(`Are you sure you want to delete "${z}"?`)&&he(O)},style:{backgroundColor:"transparent",border:"none",color:D&&(D.ID||D.id)===O?"rgba(255,255,255,0.7)":A.error,cursor:"pointer",fontSize:"16px",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:ue=>{ue.target.style.backgroundColor=D&&(D.ID||D.id)===O?"rgba(255,255,255,0.1)":"rgba(239, 68, 68, 0.1)"},onMouseLeave:ue=>{ue.target.style.backgroundColor="transparent"},title:"Delete problem",children:""})]}),T.jsx("div",{style:{fontSize:"12px",opacity:D&&(D.ID||D.id)===O?.9:.6,marginTop:"6px",display:"flex",alignItems:"center",gap:"8px"},children:T.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",backgroundColor:D&&(D.ID||D.id)===O?"rgba(255,255,255,0.2)":A.surface,borderRadius:"12px",fontSize:"11px"},children:[X.length||0," ",X.length===1?"language":"languages"]})})]},O)})})]})}),T.jsx("div",{onMouseDown:v=>{v.preventDefault(),_t(!0)},style:{width:"4px",backgroundColor:A.border,cursor:"col-resize",position:"relative",flexShrink:0,transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=A.primary,onMouseLeave:v=>{Mt||(v.target.style.backgroundColor=A.border)}})]}),Tt&&T.jsx("button",{onClick:Bs,style:{position:"absolute",left:0,top:"calc(56px + 56px)",backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderTopRightRadius:"6px",borderBottomRightRadius:"6px",padding:"12px 6px",cursor:"pointer",zIndex:10,boxShadow:"2px 0 8px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:""}),T.jsxs("main",{style:{padding:"0",overflow:"hidden",backgroundColor:A.background,flex:1,display:"flex",flexDirection:"column",width:"100%",minHeight:0},children:[o&&T.jsxs("div",{style:{padding:"12px 16px",backgroundColor:A.surface,border:`1px solid ${A.error}`,borderRadius:"8px",marginBottom:"20px",color:A.error},children:[T.jsx("strong",{children:"Error:"})," ",o]}),_?T.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[T.jsx(ql,{theme:A}),T.jsx("p",{style:{margin:"12px 0 0 0",color:A.textSecondary},children:"Loading problem..."})]}):D?T.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,minHeight:0,overflow:"hidden"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",backgroundColor:A.background,borderBottom:`1px solid ${A.border}`,flexShrink:0},children:[T.jsx("h2",{style:{margin:"0",color:A.text,fontSize:"18px",fontWeight:"600",letterSpacing:"-0.3px",lineHeight:"1.4"},children:D.Title}),T.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[T.jsx("button",{onClick:()=>ie(!I),style:{backgroundColor:I?A.primary:A.surface,color:I?"#FFFFFF":A.text,border:`1px solid ${A.border}`,borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:"pointer"},children:I?T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"IDE Mode"]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Jupyter Mode"]})}),T.jsx("button",{onClick:()=>{ee(null),p(null),f(null),de([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),window.history.pushState({page:"home"},"","/")},style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"4px",padding:"4px 10px",color:A.text,cursor:"pointer",fontSize:"11px"},children:" Back"})]})]}),T.jsxs("div",{"data-panes-container":!0,style:{display:"flex",flex:1,overflow:"hidden",minHeight:0},children:[T.jsxs("div",{style:{width:`${lt}%`,display:"flex",flexDirection:"column",borderRight:`1px solid ${A.border}`,backgroundColor:A.background,overflow:"hidden",minWidth:"200px",maxWidth:"75%"},children:[T.jsx("div",{style:{padding:"8px 16px",borderBottom:`1px solid ${A.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:T.jsx("h4",{style:{margin:0,color:A.text,fontSize:"13px",fontWeight:"600",paddingLeft:Tt?"32px":"0"},children:"Problem Statement"})}),T.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px",fontSize:"14px",lineHeight:"1.6",color:A.text},children:T.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.6",color:A.text,margin:0},children:D.Statement})})]}),T.jsx("div",{onMouseDown:v=>{v.preventDefault(),xr(!0)},style:{width:"4px",backgroundColor:A.border,cursor:"col-resize",position:"relative",flexShrink:0,transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=A.primary,onMouseLeave:v=>{wr||(v.target.style.backgroundColor=A.border)}}),D&&(D.Type==="system_design"||D.type==="system_design")?T.jsxs("div",{style:{width:j?"100vw":`${100-lt}%`,height:j?"100vh":"auto",position:j?"fixed":"relative",top:j?0:"auto",left:j?0:"auto",zIndex:j?9999:"auto",display:"flex",flexDirection:"column",backgroundColor:A.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${A.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,backgroundColor:A.surface},children:[T.jsx("h4",{style:{margin:0,color:A.text,fontSize:"14px",fontWeight:"600"},children:"System Design Canvas"}),T.jsx("button",{onClick:()=>te(!j),style:{padding:"8px 16px",backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=A.accent,onMouseLeave:v=>v.target.style.backgroundColor=A.primary,children:j?" Exit Fullscreen":" Fullscreen"})]}),T.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:T.jsx(Kf,{theme:A,children:T.jsx(pe.Suspense,{fallback:T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:A.textSecondary,fontSize:"14px"},children:"Loading design canvas..."}),children:T.jsx($f,{onChange:ve,initialData:(()=>{try{if(D.DrawingData){const v=JSON.parse(D.DrawingData);return v.appState&&!v.appState.collaborators&&(v.appState.collaborators=new Map),v}return{elements:[],appState:{collaborators:new Map},files:{}}}catch(v){return console.error("Failed to parse drawing data:",v),{elements:[],appState:{collaborators:new Map},files:{}}}})(),theme:y?"dark":"light"})})})})]}):I?T.jsxs("div",{style:{width:`${100-lt}%`,display:"flex",flexDirection:"column",backgroundColor:A.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${A.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[T.jsx("h4",{style:{margin:0,color:A.text,fontSize:"14px",fontWeight:"600"},children:"Jupyter Notebook"}),T.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[T.jsxs("select",{value:G,onChange:v=>{const O=v.target.value;ge(O);let z="";D&&D.Stub&&D.Stub[O]?z=D.Stub[O]:z=bs(O),c(z)},style:{padding:"4px 8px",border:`1px solid ${A.border}`,borderRadius:"4px",backgroundColor:A.background,color:A.text,fontSize:"12px",fontWeight:"500",cursor:"pointer",minWidth:"100px",fontFamily:"inherit"},children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"scala",children:"Scala"}),T.jsx("option",{value:"javascript",children:"JavaScript"})]}),T.jsx("button",{onClick:oo,disabled:l||se.length===0,style:{backgroundColor:l?A.secondary:A.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:l?"not-allowed":"pointer",fontWeight:"500"},children:l?"Running...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Run All"]})}),T.jsx("button",{onClick:dr,disabled:l||Q||se.length===0,style:{backgroundColor:l||Q?A.secondary:A.success,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:l||Q?"not-allowed":"pointer",fontWeight:"500"},children:Q?"Submitting...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Submit"]})})]})]}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px",backgroundColor:A.background},children:[se.map((v,O)=>T.jsxs("div",{style:{marginBottom:O<se.length-1?"12px":0,border:`1px solid ${A.border}`,borderRadius:"4px",overflow:"hidden"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:A.secondary,borderBottom:`1px solid ${A.border}`},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsxs("span",{style:{fontSize:"12px",color:A.textSecondary,fontWeight:"500"},children:["In [",O+1,"]:"]}),T.jsx("button",{onClick:()=>Ui(v.id),disabled:v.isRunning,style:{backgroundColor:v.isRunning?A.secondary:A.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:v.isRunning?"not-allowed":"pointer"},children:v.isRunning?"Running...":"Run"}),T.jsx("button",{onClick:()=>Ki(v.id),style:{backgroundColor:A.warning||"#f39c12",color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:"pointer"},children:"Clear"})]}),se.length>1&&T.jsx("button",{onClick:()=>Hs(v.id),style:{backgroundColor:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:A.error},children:""})]}),T.jsxs("div",{style:{padding:"12px"},children:[T.jsx("textarea",{value:v.code,onChange:z=>no(v.id,z.target.value),onKeyDown:eo,style:{width:"100%",height:"80px",padding:"8px",border:`1px solid ${A.border}`,borderRadius:"4px",backgroundColor:A.surface,color:A.text,fontFamily:"monospace",fontSize:"13px",resize:"vertical",outline:"none"},placeholder:"Enter code here..."}),v.output&&T.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:A.background,border:`1px solid ${A.border}`,borderRadius:"4px"},children:[T.jsxs("div",{style:{fontSize:"12px",color:A.textSecondary,marginBottom:"4px",fontWeight:"500"},children:["Out [",O+1,"]:"]}),T.jsx("pre",{style:{margin:0,fontSize:"13px",color:A.text,whiteSpace:"pre-wrap"},children:v.output})]})]})]},v.id)),T.jsx("button",{onClick:hi,style:{backgroundColor:A.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",width:"100%",marginTop:"12px"},children:"+ Add Cell"})]})]}):T.jsxs("div",{style:{width:`${100-lt}%`,display:"flex",flexDirection:"column",backgroundColor:A.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"8px 16px",borderBottom:`1px solid ${A.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[T.jsx("h4",{style:{margin:0,color:A.text,fontSize:"13px",fontWeight:"600"},children:"Code Editor"}),T.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[T.jsxs("select",{value:G,onChange:v=>{const O=v.target.value;ge(O);let z="";D&&D.Stub&&D.Stub[O]?z=D.Stub[O]:z=bs(O),c(z)},style:{padding:"4px 8px",border:`1px solid ${A.border}`,borderRadius:"4px",backgroundColor:A.background,color:A.text,fontSize:"12px",fontWeight:"500",cursor:"pointer",minWidth:"100px",fontFamily:"inherit"},children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"cpp",children:"C++"}),T.jsx("option",{value:"c",children:"C"}),T.jsx("option",{value:"java",children:"Java"}),T.jsx("option",{value:"javascript",children:"JavaScript"}),T.jsx("option",{value:"typescript",children:"TypeScript"}),T.jsx("option",{value:"swift",children:"Swift"}),T.jsx("option",{value:"kotlin",children:"Kotlin"}),T.jsx("option",{value:"scala",children:"Scala"}),T.jsx("option",{value:"go",children:"Go"}),T.jsx("option",{value:"ruby",children:"Ruby"}),T.jsx("option",{value:"rust",children:"Rust"}),T.jsx("option",{value:"sql",children:"SQL"}),T.jsx("option",{value:"bash",children:"Bash"})]}),T.jsx("button",{onClick:di,disabled:l||Q,style:{backgroundColor:l||Q?A.secondary:A.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:l||Q?"not-allowed":"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},children:l?"Running...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Run"]})}),T.jsx("button",{onClick:dr,disabled:l||Q,style:{backgroundColor:l||Q?A.secondary:A.success,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:l||Q?"not-allowed":"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},children:Q?"Submitting...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Submit"]})})]})]}),T.jsx("div",{"data-editor-container":!0,style:{position:"relative",flex:1,minHeight:0,overflow:"hidden",backgroundColor:A.codeBackground},children:T.jsx(Ff,{height:"100%",language:Xf(G),value:U,onChange:v=>Fs(v||""),theme:y?"vs-dark":"light",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",wrappingIndent:"indent",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Liberation Mono", "Courier New", monospace',lineHeight:24,padding:{top:16,bottom:16},scrollbar:{vertical:"auto",horizontal:"auto",useShadows:!1,verticalHasArrows:!1,horizontalHasArrows:!1},readOnly:!1,cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",smoothScrolling:!0,renderWhitespace:"selection",renderLineHighlight:"all",selectOnLineNumbers:!0,roundedSelection:!1,contextmenu:!0,mouseWheelZoom:!1,quickSuggestions:!0,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",tabCompletion:"on",wordBasedSuggestions:"matchingDocuments",formatOnPaste:!1,formatOnType:!1},onMount:(v,O)=>{v.addCommand(O.KeyMod.CtrlCmd|O.KeyCode.Enter,()=>{D&&U.trim()&&!l&&di()}),v.addCommand(O.KeyMod.CtrlCmd|O.KeyCode.KeyL,()=>{D&&ir()})}})}),Hi?T.jsxs("div",{style:{height:"40px",borderTop:`2px solid ${A.primary}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",backgroundColor:y?"#252526":"#161B22",cursor:"pointer",flexShrink:0,transition:"all 0.2s ease",position:"relative",zIndex:5,boxShadow:"0 -2px 8px rgba(0,0,0,0.1)"},onClick:Wi,onMouseEnter:v=>{v.currentTarget.style.backgroundColor=y?"#2D2D30":"#1F2329",v.currentTarget.style.borderTopColor=A.accent},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=y?"#252526":"#161B22",v.currentTarget.style.borderTopColor=A.primary},title:"Click to expand console output",children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:y?"#CCCCCC":"#C9D1D9",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Output"}),T.jsx("span",{style:{fontSize:"11px",color:y?"#999":"#888",fontStyle:"italic",fontWeight:"normal"},children:"(Collapsed - Click to expand)"})]}),T.jsx("span",{style:{fontSize:"16px",color:A.primary,fontWeight:"bold",transition:"transform 0.2s ease"},children:""})]}):T.jsxs("div",{"data-console-container":!0,style:{height:`${gt}px`,display:"flex",flexDirection:"column",backgroundColor:y?"#1E1E1E":"#0D1117",borderTop:`1px solid ${A.border}`,overflow:"hidden",flexShrink:0,position:"relative"},children:[T.jsx("div",{onMouseDown:v=>{v.preventDefault(),br(!0)},style:{position:"absolute",top:0,left:0,right:0,height:"4px",cursor:"row-resize",backgroundColor:"transparent",zIndex:10},onMouseEnter:v=>{v.target.style.backgroundColor=A.primary,v.target.style.opacity="0.3"},onMouseLeave:v=>{oi||(v.target.style.backgroundColor="transparent",v.target.style.opacity="1")}}),T.jsxs("div",{style:{padding:"8px 16px",borderBottom:`1px solid ${A.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:y?"#252526":"#161B22",flexShrink:0},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:y?"#CCCCCC":"#C9D1D9",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Output"}),l&&T.jsxs("span",{style:{fontSize:"11px",color:A.primary,display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(ql,{theme:A}),"Running..."]})]}),T.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u&&T.jsx("button",{onClick:()=>p(null),style:{backgroundColor:"transparent",color:y?"#CCCCCC":"#C9D1D9",border:"none",fontSize:"12px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:v=>v.target.style.backgroundColor="transparent",children:"Clear"}),T.jsx("button",{onClick:Wi,style:{backgroundColor:"transparent",color:y?"#CCCCCC":"#C9D1D9",border:"none",fontSize:"12px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:v=>v.target.style.backgroundColor="transparent",title:"Collapse console",children:""})]})]}),T.jsx("div",{style:{flex:1,overflow:"hidden",padding:"0"},children:T.jsx(qf,{output:u?u.result&&u.result.trim()!==""?u.result:u.error&&u.error.trim()!==""?`\x1B[31mError: ${u.error}\x1B[0m`:u.compile_log&&u.compile_log.trim()!==""?`\x1B[31m${u.compile_log}\x1B[0m`:"(No output)":null,theme:A,isDarkMode:y})})]})]})]})]}):T.jsx("div",{style:{textAlign:"center",padding:"40px"},children:T.jsx("p",{style:{color:A.textSecondary,fontSize:"16px"},children:"Select a problem from the sidebar to get started"})})]})]}),xe&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:T.jsxs("div",{style:{backgroundColor:A.background,border:`1px solid ${A.border}`,borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:`1px solid ${A.border}`,paddingBottom:"12px"},children:[T.jsx("h2",{style:{margin:0,color:A.text,fontSize:"20px"},children:"Keyboard Shortcuts"}),T.jsx("button",{onClick:()=>q(!1),style:{background:"none",border:"none",fontSize:"24px",color:A.textSecondary,cursor:"pointer",padding:"4px"},children:""})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[T.jsxs("div",{children:[T.jsx("h3",{style:{color:A.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Code Execution"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(pt,{keys:["Ctrl","Enter"],description:"Run code",theme:A}),T.jsx(pt,{keys:["F5"],description:"Run code",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","Enter"],description:"Submit code",theme:A})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:A.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Code Editing"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(pt,{keys:["Ctrl","/"],description:"Comment/Uncomment",theme:A}),T.jsx(pt,{keys:["Ctrl","D"],description:"Duplicate line",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","K"],description:"Delete line",theme:A}),T.jsx(pt,{keys:["Alt",""],description:"Move line up",theme:A}),T.jsx(pt,{keys:["Alt",""],description:"Move line down",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","F"],description:"Format code",theme:A}),T.jsx(pt,{keys:["Tab"],description:"Smart indentation / Tab completion",theme:A}),T.jsx(pt,{keys:["Shift","Tab"],description:"Remove indentation",theme:A})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:A.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Navigation"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(pt,{keys:["Esc"],description:"Back to problems",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","L"],description:"Next language",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","J"],description:"Previous language",theme:A})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:A.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Utilities"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(pt,{keys:["Ctrl","K"],description:"Clear code",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","D"],description:"Toggle dark mode",theme:A}),T.jsx(pt,{keys:["Ctrl","Shift","?"],description:"Show shortcuts",theme:A})]})]})]}),T.jsx("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:A.surface,borderRadius:"8px",border:`1px solid ${A.border}`},children:T.jsxs("p",{style:{margin:0,fontSize:"12px",color:A.textSecondary,textAlign:"center"},children:["Tip: Press ",T.jsx("kbd",{style:{backgroundColor:A.surface,border:`1px solid ${A.border}`,borderRadius:"3px",padding:"2px 6px",fontSize:"11px",fontFamily:"monospace"},children:"Ctrl+Shift+?"})," anytime to see this help!"]})})]})})]})}const pt=({keys:B,description:W,theme:D})=>T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0"},children:[T.jsx("span",{style:{color:D.text,fontSize:"14px"},children:W}),T.jsx("div",{style:{display:"flex",gap:"4px"},children:B.map((ee,G)=>T.jsxs(Jt.Fragment,{children:[T.jsx("kbd",{style:{backgroundColor:D.surface,border:`1px solid ${D.border}`,borderRadius:"4px",padding:"2px 6px",fontSize:"11px",fontFamily:"monospace",color:D.text,fontWeight:"500"},children:ee}),G<B.length-1&&T.jsx("span",{style:{color:D.textSecondary,fontSize:"12px"},children:"+"})]},G))})]});function Yf(){return T.jsx(Vf,{children:T.jsx(Qf,{})})}kd.createRoot(document.getElementById("root")).render(T.jsx(Yf,{}));export{ep as $,Ld as _,xd as a,Gl as b,Zf as c,gd as g,T as j,pe as r,Jt as v};
