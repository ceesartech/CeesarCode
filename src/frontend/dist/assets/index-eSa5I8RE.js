function _d(O,W){for(var x=0;x<W.length;x++){const ee=W[x];if(typeof ee!="string"&&!Array.isArray(ee)){for(const J in ee)if(J!=="default"&&!(J in O)){const ve=Object.getOwnPropertyDescriptor(ee,J);ve&&Object.defineProperty(O,J,ve.get?ve:{enumerable:!0,get:()=>ee[J]})}}}return Object.freeze(Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}))}(function(){const W=document.createElement("link").relList;if(W&&W.supports&&W.supports("modulepreload"))return;for(const J of document.querySelectorAll('link[rel="modulepreload"]'))ee(J);new MutationObserver(J=>{for(const ve of J)if(ve.type==="childList")for(const U of ve.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&ee(U)}).observe(document,{childList:!0,subtree:!0});function x(J){const ve={};return J.integrity&&(ve.integrity=J.integrity),J.referrerPolicy&&(ve.referrerPolicy=J.referrerPolicy),J.crossOrigin==="use-credentials"?ve.credentials="include":J.crossOrigin==="anonymous"?ve.credentials="omit":ve.credentials="same-origin",ve}function ee(J){if(J.ep)return;J.ep=!0;const ve=x(J);fetch(J.href,ve)}})();var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}var Nl={exports:{}},bs={},zl={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu;function vd(){if(fu)return ze;fu=1;var O=Symbol.for("react.element"),W=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),U=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),h=Symbol.iterator;function m(E){return E===null||typeof E!="object"?null:(E=h&&E[h]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,g={};function n(E,A,se){this.props=E,this.context=A,this.refs=g,this.updater=se||w}n.prototype.isReactComponent={},n.prototype.setState=function(E,A){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,A,"setState")},n.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function l(){}l.prototype=n.prototype;function s(E,A,se){this.props=E,this.context=A,this.refs=g,this.updater=se||w}var o=s.prototype=new l;o.constructor=s,k(o,n.prototype),o.isPureReactComponent=!0;var f=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function _(E,A,se){var ce,Ce={},be=null,q=null;if(A!=null)for(ce in A.ref!==void 0&&(q=A.ref),A.key!==void 0&&(be=""+A.key),A)S.call(A,ce)&&!b.hasOwnProperty(ce)&&(Ce[ce]=A[ce]);var P=arguments.length-2;if(P===1)Ce.children=se;else if(1<P){for(var re=Array(P),he=0;he<P;he++)re[he]=arguments[he+2];Ce.children=re}if(E&&E.defaultProps)for(ce in P=E.defaultProps,P)Ce[ce]===void 0&&(Ce[ce]=P[ce]);return{$$typeof:O,type:E,key:be,ref:q,props:Ce,_owner:C.current}}function D(E,A){return{$$typeof:O,type:E.type,key:A,ref:E.ref,props:E.props,_owner:E._owner}}function N(E){return typeof E=="object"&&E!==null&&E.$$typeof===O}function z(E){var A={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(se){return A[se]})}var G=/\/+/g;function j(E,A){return typeof E=="object"&&E!==null&&E.key!=null?z(""+E.key):A.toString(36)}function te(E,A,se,ce,Ce){var be=typeof E;(be==="undefined"||be==="boolean")&&(E=null);var q=!1;if(E===null)q=!0;else switch(be){case"string":case"number":q=!0;break;case"object":switch(E.$$typeof){case O:case W:q=!0}}if(q)return q=E,Ce=Ce(q),E=ce===""?"."+j(q,0):ce,f(Ce)?(se="",E!=null&&(se=E.replace(G,"$&/")+"/"),te(Ce,A,se,"",function(he){return he})):Ce!=null&&(N(Ce)&&(Ce=D(Ce,se+(!Ce.key||q&&q.key===Ce.key?"":(""+Ce.key).replace(G,"$&/")+"/")+E)),A.push(Ce)),1;if(q=0,ce=ce===""?".":ce+":",f(E))for(var P=0;P<E.length;P++){be=E[P];var re=ce+j(be,P);q+=te(be,A,se,re,Ce)}else if(re=m(E),typeof re=="function")for(E=re.call(E),P=0;!(be=E.next()).done;)be=be.value,re=ce+j(be,P++),q+=te(be,A,se,re,Ce);else if(be==="object")throw A=String(E),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return q}function X(E,A,se){if(E==null)return E;var ce=[],Ce=0;return te(E,ce,"","",function(be){return A.call(se,be,Ce++)}),ce}function le(E){if(E._status===-1){var A=E._result;A=A(),A.then(function(se){(E._status===0||E._status===-1)&&(E._status=1,E._result=se)},function(se){(E._status===0||E._status===-1)&&(E._status=2,E._result=se)}),E._status===-1&&(E._status=0,E._result=A)}if(E._status===1)return E._result.default;throw E._result}var pe={current:null},Y={transition:null},R={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:Y,ReactCurrentOwner:C};function I(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:X,forEach:function(E,A,se){X(E,function(){A.apply(this,arguments)},se)},count:function(E){var A=0;return X(E,function(){A++}),A},toArray:function(E){return X(E,function(A){return A})||[]},only:function(E){if(!N(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},ze.Component=n,ze.Fragment=x,ze.Profiler=J,ze.PureComponent=s,ze.StrictMode=ee,ze.Suspense=u,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,ze.act=I,ze.cloneElement=function(E,A,se){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var ce=k({},E.props),Ce=E.key,be=E.ref,q=E._owner;if(A!=null){if(A.ref!==void 0&&(be=A.ref,q=C.current),A.key!==void 0&&(Ce=""+A.key),E.type&&E.type.defaultProps)var P=E.type.defaultProps;for(re in A)S.call(A,re)&&!b.hasOwnProperty(re)&&(ce[re]=A[re]===void 0&&P!==void 0?P[re]:A[re])}var re=arguments.length-2;if(re===1)ce.children=se;else if(1<re){P=Array(re);for(var he=0;he<re;he++)P[he]=arguments[he+2];ce.children=P}return{$$typeof:O,type:E.type,key:Ce,ref:be,props:ce,_owner:q}},ze.createContext=function(E){return E={$$typeof:U,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:ve,_context:E},E.Consumer=E},ze.createElement=_,ze.createFactory=function(E){var A=_.bind(null,E);return A.type=E,A},ze.createRef=function(){return{current:null}},ze.forwardRef=function(E){return{$$typeof:c,render:E}},ze.isValidElement=N,ze.lazy=function(E){return{$$typeof:y,_payload:{_status:-1,_result:E},_init:le}},ze.memo=function(E,A){return{$$typeof:p,type:E,compare:A===void 0?null:A}},ze.startTransition=function(E){var A=Y.transition;Y.transition={};try{E()}finally{Y.transition=A}},ze.unstable_act=I,ze.useCallback=function(E,A){return pe.current.useCallback(E,A)},ze.useContext=function(E){return pe.current.useContext(E)},ze.useDebugValue=function(){},ze.useDeferredValue=function(E){return pe.current.useDeferredValue(E)},ze.useEffect=function(E,A){return pe.current.useEffect(E,A)},ze.useId=function(){return pe.current.useId()},ze.useImperativeHandle=function(E,A,se){return pe.current.useImperativeHandle(E,A,se)},ze.useInsertionEffect=function(E,A){return pe.current.useInsertionEffect(E,A)},ze.useLayoutEffect=function(E,A){return pe.current.useLayoutEffect(E,A)},ze.useMemo=function(E,A){return pe.current.useMemo(E,A)},ze.useReducer=function(E,A,se){return pe.current.useReducer(E,A,se)},ze.useRef=function(E){return pe.current.useRef(E)},ze.useState=function(E){return pe.current.useState(E)},ze.useSyncExternalStore=function(E,A,se){return pe.current.useSyncExternalStore(E,A,se)},ze.useTransition=function(){return pe.current.useTransition()},ze.version="18.3.1",ze}var pu;function Ql(){return pu||(pu=1,zl.exports=vd()),zl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u;function md(){if(_u)return bs;_u=1;var O=Ql(),W=Symbol.for("react.element"),x=Symbol.for("react.fragment"),ee=Object.prototype.hasOwnProperty,J=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ve={key:!0,ref:!0,__self:!0,__source:!0};function U(c,u,p){var y,h={},m=null,w=null;p!==void 0&&(m=""+p),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(w=u.ref);for(y in u)ee.call(u,y)&&!ve.hasOwnProperty(y)&&(h[y]=u[y]);if(c&&c.defaultProps)for(y in u=c.defaultProps,u)h[y]===void 0&&(h[y]=u[y]);return{$$typeof:W,type:c,key:m,ref:w,props:h,_owner:J.current}}return bs.Fragment=x,bs.jsx=U,bs.jsxs=U,bs}var gu;function yd(){return gu||(gu=1,Nl.exports=md()),Nl.exports}var T=yd(),fe=Ql();const Jt=gd(fe),ep=_d({__proto__:null,default:Jt},[fe]);var Gn={},Wl={exports:{}},At={},$l={exports:{}},Ul={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function Sd(){return vu||(vu=1,(function(O){function W(Y,R){var I=Y.length;Y.push(R);e:for(;0<I;){var E=I-1>>>1,A=Y[E];if(0<J(A,R))Y[E]=R,Y[I]=A,I=E;else break e}}function x(Y){return Y.length===0?null:Y[0]}function ee(Y){if(Y.length===0)return null;var R=Y[0],I=Y.pop();if(I!==R){Y[0]=I;e:for(var E=0,A=Y.length,se=A>>>1;E<se;){var ce=2*(E+1)-1,Ce=Y[ce],be=ce+1,q=Y[be];if(0>J(Ce,I))be<A&&0>J(q,Ce)?(Y[E]=q,Y[be]=I,E=be):(Y[E]=Ce,Y[ce]=I,E=ce);else if(be<A&&0>J(q,I))Y[E]=q,Y[be]=I,E=be;else break e}}return R}function J(Y,R){var I=Y.sortIndex-R.sortIndex;return I!==0?I:Y.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ve=performance;O.unstable_now=function(){return ve.now()}}else{var U=Date,c=U.now();O.unstable_now=function(){return U.now()-c}}var u=[],p=[],y=1,h=null,m=3,w=!1,k=!1,g=!1,n=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,s=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function o(Y){for(var R=x(p);R!==null;){if(R.callback===null)ee(p);else if(R.startTime<=Y)ee(p),R.sortIndex=R.expirationTime,W(u,R);else break;R=x(p)}}function f(Y){if(g=!1,o(Y),!k)if(x(u)!==null)k=!0,le(S);else{var R=x(p);R!==null&&pe(f,R.startTime-Y)}}function S(Y,R){k=!1,g&&(g=!1,l(_),_=-1),w=!0;var I=m;try{for(o(R),h=x(u);h!==null&&(!(h.expirationTime>R)||Y&&!z());){var E=h.callback;if(typeof E=="function"){h.callback=null,m=h.priorityLevel;var A=E(h.expirationTime<=R);R=O.unstable_now(),typeof A=="function"?h.callback=A:h===x(u)&&ee(u),o(R)}else ee(u);h=x(u)}if(h!==null)var se=!0;else{var ce=x(p);ce!==null&&pe(f,ce.startTime-R),se=!1}return se}finally{h=null,m=I,w=!1}}var C=!1,b=null,_=-1,D=5,N=-1;function z(){return!(O.unstable_now()-N<D)}function G(){if(b!==null){var Y=O.unstable_now();N=Y;var R=!0;try{R=b(!0,Y)}finally{R?j():(C=!1,b=null)}}else C=!1}var j;if(typeof s=="function")j=function(){s(G)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,X=te.port2;te.port1.onmessage=G,j=function(){X.postMessage(null)}}else j=function(){n(G,0)};function le(Y){b=Y,C||(C=!0,j())}function pe(Y,R){_=n(function(){Y(O.unstable_now())},R)}O.unstable_IdlePriority=5,O.unstable_ImmediatePriority=1,O.unstable_LowPriority=4,O.unstable_NormalPriority=3,O.unstable_Profiling=null,O.unstable_UserBlockingPriority=2,O.unstable_cancelCallback=function(Y){Y.callback=null},O.unstable_continueExecution=function(){k||w||(k=!0,le(S))},O.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},O.unstable_getCurrentPriorityLevel=function(){return m},O.unstable_getFirstCallbackNode=function(){return x(u)},O.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var I=m;m=R;try{return Y()}finally{m=I}},O.unstable_pauseExecution=function(){},O.unstable_requestPaint=function(){},O.unstable_runWithPriority=function(Y,R){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var I=m;m=Y;try{return R()}finally{m=I}},O.unstable_scheduleCallback=function(Y,R,I){var E=O.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?E+I:E):I=E,Y){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=I+A,Y={id:y++,callback:R,priorityLevel:Y,startTime:I,expirationTime:A,sortIndex:-1},I>E?(Y.sortIndex=I,W(p,Y),x(u)===null&&Y===x(p)&&(g?(l(_),_=-1):g=!0,pe(f,I-E))):(Y.sortIndex=A,W(u,Y),k||w||(k=!0,le(S))),Y},O.unstable_shouldYield=z,O.unstable_wrapCallback=function(Y){var R=m;return function(){var I=m;m=R;try{return Y.apply(this,arguments)}finally{m=I}}}})(Ul)),Ul}var mu;function Cd(){return mu||(mu=1,$l.exports=Sd()),$l.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yu;function wd(){if(yu)return At;yu=1;var O=Ql(),W=Cd();function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ee=new Set,J={};function ve(e,t){U(e,t),U(e+"Capture",t)}function U(e,t){for(J[e]=t,e=0;e<t.length;e++)ee.add(t[e])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},h={};function m(e){return u.call(h,e)?!0:u.call(y,e)?!1:p.test(e)?h[e]=!0:(y[e]=!0,!1)}function w(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,t,r,i){if(t===null||typeof t>"u"||w(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function g(e,t,r,i,a,d,L){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=L}var n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){n[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];n[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){n[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){n[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){n[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){n[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){n[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){n[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){n[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var l=/[\-:]([a-z])/g;function s(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(l,s);n[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(l,s);n[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(l,s);n[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){n[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),n.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){n[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});function o(e,t,r,i){var a=n.hasOwnProperty(t)?n[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k(t,r,a,i)&&(r=null),i||a===null?m(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var f=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),Y=Symbol.iterator;function R(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var I=Object.assign,E;function A(e){if(E===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var se=!1;function ce(e,t){if(!e||se)return"";se=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(ie){var i=ie}Reflect.construct(e,[],t)}else{try{t.call()}catch(ie){i=ie}e.call(t.prototype)}else{try{throw Error()}catch(ie){i=ie}e()}}catch(ie){if(ie&&i&&typeof ie.stack=="string"){for(var a=ie.stack.split(`
`),d=i.stack.split(`
`),L=a.length-1,F=d.length-1;1<=L&&0<=F&&a[L]!==d[F];)F--;for(;1<=L&&0<=F;L--,F--)if(a[L]!==d[F]){if(L!==1||F!==1)do if(L--,F--,0>F||a[L]!==d[F]){var $=`
`+a[L].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=L&&0<=F);break}}}finally{se=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?A(e):""}function Ce(e){switch(e.tag){case 5:return A(e.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return e=ce(e.type,!1),e;case 11:return e=ce(e.type.render,!1),e;case 1:return e=ce(e.type,!0),e;default:return""}}function be(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case b:return"Fragment";case C:return"Portal";case D:return"Profiler";case _:return"StrictMode";case j:return"Suspense";case te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function P(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function he(e){var t=re(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(L){i=""+L,d.call(this,L)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(L){i=""+L},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ke(e){e._valueTracker||(e._valueTracker=he(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=re(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function He(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function me(e,t){var r=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ne(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=P(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ve(e,t){t=t.checked,t!=null&&o(e,"checked",t,!1)}function Oe(e,t){Ve(e,t);var r=P(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rr(e,t.type,r):t.hasOwnProperty("defaultValue")&&rr(e,t.type,P(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function rr(e,t,r){(t!=="number"||He(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var at=Array.isArray;function Rt(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+P(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function wt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(x(92));if(at(r)){if(1<r.length)throw Error(x(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:P(r)}}function ir(e,t){var r=P(t.value),i=P(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function xt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dr(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ct,sr=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ut(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ue=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(e){Ue.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bt[t]=Bt[e]})});function ai(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bt.hasOwnProperty(e)&&Bt[e]?(""+t).trim():t+"px"}function ci(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=ai(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var Ts=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $i(e,t){if(t){if(Ts[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function Ui(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Ps(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,zr=null,Wr=null;function Zn(e){if(e=cs(e)){if(typeof Ms!="function")throw Error(x(280));var t=e.stateNode;t&&(t=cn(t),Ms(e.stateNode,e.type,t))}}function eo(e){zr?Wr?Wr.push(e):Wr=[e]:zr=e}function ui(){if(zr){var e=zr,t=Wr;if(Wr=zr=null,Zn(e),t)for(e=0;e<t.length;e++)Zn(t[e])}}function As(e,t){return e(t)}function to(){}var Bs=!1;function ro(e,t,r){if(Bs)return e(t,r);Bs=!0;try{return As(e,t,r)}finally{Bs=!1,(zr!==null||Wr!==null)&&(to(),ui())}}function hi(e,t){var r=e.stateNode;if(r===null)return null;var i=cn(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(x(231,t,typeof r));return r}var Is=!1;if(c)try{var di={};Object.defineProperty(di,"passive",{get:function(){Is=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{Is=!1}function Yl(e,t,r,i,a,d,L,F,$){var ie=Array.prototype.slice.call(arguments,3);try{t.apply(r,ie)}catch(ge){this.onError(ge)}}var $r=!1,fi=null,Ur=!1,Vi=null,pi={onError:function(e){$r=!0,fi=e}};function Os(e,t,r,i,a,d,L,F,$){$r=!1,fi=null,Yl.apply(pi,arguments)}function _i(e,t,r,i,a,d,L,F,$){if(Os.apply(this,arguments),$r){if($r){var ie=fi;$r=!1,fi=null}else throw Error(x(198));Ur||(Ur=!0,Vi=ie)}}function nr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function or(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function js(e){if(nr(e)!==e)throw Error(x(188))}function io(e){var t=e.alternate;if(!t){if(t=nr(e),t===null)throw Error(x(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var d=a.alternate;if(d===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===d.child){for(d=a.child;d;){if(d===r)return js(a),e;if(d===i)return js(a),t;d=d.sibling}throw Error(x(188))}if(r.return!==i.return)r=a,i=d;else{for(var L=!1,F=a.child;F;){if(F===r){L=!0,r=a,i=d;break}if(F===i){L=!0,i=a,r=d;break}F=F.sibling}if(!L){for(F=d.child;F;){if(F===r){L=!0,r=d,i=a;break}if(F===i){L=!0,i=d,r=a;break}F=F.sibling}if(!L)throw Error(x(189))}}if(r.alternate!==i)throw Error(x(190))}if(r.tag!==3)throw Error(x(188));return r.stateNode.current===r?e:t}function M(e){return e=io(e),e!==null?Fs(e):null}function Fs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fs(e);if(t!==null)return t;e=e.sibling}return null}var Hs=W.unstable_scheduleCallback,qi=W.unstable_cancelCallback,so=W.unstable_shouldYield,Ns=W.unstable_requestPaint,Qe=W.unstable_now,zs=W.unstable_getCurrentPriorityLevel,gi=W.unstable_ImmediatePriority,Ws=W.unstable_UserBlockingPriority,vi=W.unstable_NormalPriority,no=W.unstable_LowPriority,$s=W.unstable_IdlePriority,Kr=null,Wt=null;function lr(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Kr,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:lo,Us=Math.log,oo=Math.LN2;function lo(e){return e>>>=0,e===0?32:31-(Us(e)/oo|0)|0}var mi=64,yi=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pr(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,d=e.pingedLanes,L=r&268435455;if(L!==0){var F=L&~a;F!==0?i=Vr(F):(d&=L,d!==0&&(i=Vr(d)))}else L=r&~a,L!==0?i=Vr(L):d!==0&&(i=Vr(d));if(i===0)return 0;if(t!==0&&t!==i&&(t&a)===0&&(a=i&-i,d=t&-t,a>=d||a===16&&(d&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-It(t),a=1<<r,i|=e[r],t&=~a;return i}function ao(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,d=e.pendingLanes;0<d;){var L=31-It(d),F=1<<L,$=a[L];$===-1?((F&r)===0||(F&i)!==0)&&(a[L]=ao(F,t)):$<=t&&(e.expiredLanes|=F),d&=~F}}function Gi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ks(){var e=mi;return mi<<=1,(mi&4194240)===0&&(mi=64),e}function Ji(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=r}function uo(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-It(r),d=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~d}}function Xi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-It(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var Ke=0;function Vs(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var qs,Qi,Si,Gr,Gs,v=!1,B=[],H=null,K=null,ne=null,oe=new Map,Se=new Map,we=[],ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(e,t){switch(e){case"focusin":case"focusout":H=null;break;case"dragenter":case"dragleave":K=null;break;case"mouseover":case"mouseout":ne=null;break;case"pointerover":case"pointerout":oe.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Se.delete(t.pointerId)}}function ue(e,t,r,i,a,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:d,targetContainers:[a]},t!==null&&(t=cs(t),t!==null&&Qi(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Le(e,t,r,i,a){switch(t){case"focusin":return H=ue(H,e,t,r,i,a),!0;case"dragenter":return K=ue(K,e,t,r,i,a),!0;case"mouseover":return ne=ue(ne,e,t,r,i,a),!0;case"pointerover":var d=a.pointerId;return oe.set(d,ue(oe.get(d)||null,e,t,r,i,a)),!0;case"gotpointercapture":return d=a.pointerId,Se.set(d,ue(Se.get(d)||null,e,t,r,i,a)),!0}return!1}function De(e){var t=Xr(e.target);if(t!==null){var r=nr(t);if(r!==null){if(t=r.tag,t===13){if(t=or(r),t!==null){e.blockedOn=t,Gs(e.priority,function(){Si(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function je(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ki=i,r.target.dispatchEvent(i),Ki=null}else return t=cs(r),t!==null&&Qi(t),e.blockedOn=r,!1;t.shift()}return!0}function Ge(e,t,r){je(e)&&r.delete(t)}function Ye(){v=!1,H!==null&&je(H)&&(H=null),K!==null&&je(K)&&(K=null),ne!==null&&je(ne)&&(ne=null),oe.forEach(Ge),Se.forEach(Ge)}function Ze(e,t){e.blockedOn===t&&(e.blockedOn=null,v||(v=!0,W.unstable_scheduleCallback(W.unstable_NormalPriority,Ye)))}function _r(e){function t(a){return Ze(a,e)}if(0<B.length){Ze(B[0],e);for(var r=1;r<B.length;r++){var i=B[r];i.blockedOn===e&&(i.blockedOn=null)}}for(H!==null&&Ze(H,e),K!==null&&Ze(K,e),ne!==null&&Ze(ne,e),oe.forEach(t),Se.forEach(t),r=0;r<we.length;r++)i=we[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<we.length&&(r=we[0],r.blockedOn===null);)De(r),r.blockedOn===null&&we.shift()}var br=f.ReactCurrentBatchConfig,Jr=!0;function Js(e,t,r,i){var a=Ke,d=br.transition;br.transition=null;try{Ke=1,ho(e,t,r,i)}finally{Ke=a,br.transition=d}}function zu(e,t,r,i){var a=Ke,d=br.transition;br.transition=null;try{Ke=4,ho(e,t,r,i)}finally{Ke=a,br.transition=d}}function ho(e,t,r,i){if(Jr){var a=fo(e,t,r,i);if(a===null)To(e,t,i,Xs,r),de(e,i);else if(Le(a,e,t,r,i))i.stopPropagation();else if(de(e,i),t&4&&-1<ae.indexOf(e)){for(;a!==null;){var d=cs(a);if(d!==null&&qs(d),d=fo(e,t,r,i),d===null&&To(e,t,i,Xs,r),d===a)break;a=d}a!==null&&i.stopPropagation()}else To(e,t,i,null,r)}}var Xs=null;function fo(e,t,r,i){if(Xs=null,e=Ps(i),e=Xr(e),e!==null)if(t=nr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=or(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xs=e,null}function Zl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zs()){case gi:return 1;case Ws:return 4;case vi:case no:return 16;case $s:return 536870912;default:return 16}default:return 16}}var kr=null,po=null,Qs=null;function ea(){if(Qs)return Qs;var e,t=po,r=t.length,i,a="value"in kr?kr.value:kr.textContent,d=a.length;for(e=0;e<r&&t[e]===a[e];e++);var L=r-e;for(i=1;i<=L&&t[r-i]===a[d-i];i++);return Qs=a.slice(e,1<i?1-i:void 0)}function Ys(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function ta(){return!1}function Ot(e){function t(r,i,a,d,L){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=d,this.target=L,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(r=e[F],this[F]=r?r(d):d[F]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zs:ta,this.isPropagationStopped=ta,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Ot(Ci),Yi=I({},Ci,{view:0,detail:0}),Wu=Ot(Yi),go,vo,Zi,en=I({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zi&&(Zi&&e.type==="mousemove"?(go=e.screenX-Zi.screenX,vo=e.screenY-Zi.screenY):vo=go=0,Zi=e),go)},movementY:function(e){return"movementY"in e?e.movementY:vo}}),ra=Ot(en),$u=I({},en,{dataTransfer:0}),Uu=Ot($u),Ku=I({},Yi,{relatedTarget:0}),mo=Ot(Ku),Vu=I({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Ot(Vu),Gu=I({},Ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ju=Ot(Gu),Xu=I({},Ci,{data:0}),ia=Ot(Xu),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zu[e])?!!t[e]:!1}function yo(){return eh}var th=I({},Yi,{key:function(e){if(e.key){var t=Qu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?Ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rh=Ot(th),ih=I({},en,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sa=Ot(ih),sh=I({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),nh=Ot(sh),oh=I({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=Ot(oh),ah=I({},en,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ch=Ot(ah),uh=[9,13,27,32],So=c&&"CompositionEvent"in window,es=null;c&&"documentMode"in document&&(es=document.documentMode);var hh=c&&"TextEvent"in window&&!es,na=c&&(!So||es&&8<es&&11>=es),oa=" ",la=!1;function aa(e,t){switch(e){case"keyup":return uh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ca(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wi=!1;function dh(e,t){switch(e){case"compositionend":return ca(t);case"keypress":return t.which!==32?null:(la=!0,oa);case"textInput":return e=t.data,e===oa&&la?null:e;default:return null}}function fh(e,t){if(wi)return e==="compositionend"||!So&&aa(e,t)?(e=ea(),Qs=po=kr=null,wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return na&&t.locale!=="ko"?null:t.data;default:return null}}var ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ua(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ph[e.type]:t==="textarea"}function ha(e,t,r,i){eo(i),t=on(t,"onChange"),0<t.length&&(r=new _o("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ts=null,rs=null;function _h(e){Da(e,0)}function tn(e){var t=Ri(e);if(Ee(t))return e}function gh(e,t){if(e==="change")return t}var da=!1;if(c){var Co;if(c){var wo="oninput"in document;if(!wo){var fa=document.createElement("div");fa.setAttribute("oninput","return;"),wo=typeof fa.oninput=="function"}Co=wo}else Co=!1;da=Co&&(!document.documentMode||9<document.documentMode)}function pa(){ts&&(ts.detachEvent("onpropertychange",_a),rs=ts=null)}function _a(e){if(e.propertyName==="value"&&tn(rs)){var t=[];ha(t,rs,e,Ps(e)),ro(_h,t)}}function vh(e,t,r){e==="focusin"?(pa(),ts=t,rs=r,ts.attachEvent("onpropertychange",_a)):e==="focusout"&&pa()}function mh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tn(rs)}function yh(e,t){if(e==="click")return tn(t)}function Sh(e,t){if(e==="input"||e==="change")return tn(t)}function Ch(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:Ch;function is(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!u.call(t,a)||!Xt(e[a],t[a]))return!1}return!0}function ga(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function va(e,t){var r=ga(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ga(r)}}function ma(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ma(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ya(){for(var e=window,t=He();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=He(e.document)}return t}function xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wh(e){var t=ya(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ma(r.ownerDocument.documentElement,r)){if(i!==null&&xo(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,d=Math.min(i.start,a);i=i.end===void 0?d:Math.min(i.end,a),!e.extend&&d>i&&(a=i,i=d,d=a),a=va(r,d);var L=va(r,i);a&&L&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==L.node||e.focusOffset!==L.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(L.node,L.offset)):(t.setEnd(L.node,L.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xh=c&&"documentMode"in document&&11>=document.documentMode,xi=null,bo=null,ss=null,ko=!1;function Sa(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ko||xi==null||xi!==He(i)||(i=xi,"selectionStart"in i&&xo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ss&&is(ss,i)||(ss=i,i=on(bo,"onSelect"),0<i.length&&(t=new _o("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=xi)))}function rn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bi={animationend:rn("Animation","AnimationEnd"),animationiteration:rn("Animation","AnimationIteration"),animationstart:rn("Animation","AnimationStart"),transitionend:rn("Transition","TransitionEnd")},Eo={},Ca={};c&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function sn(e){if(Eo[e])return Eo[e];if(!bi[e])return e;var t=bi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ca)return Eo[e]=t[r];return e}var wa=sn("animationend"),xa=sn("animationiteration"),ba=sn("animationstart"),ka=sn("transitionend"),Ea=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Ea.set(e,t),ve(t,[e])}for(var Ro=0;Ro<Ra.length;Ro++){var Lo=Ra[Ro],bh=Lo.toLowerCase(),kh=Lo[0].toUpperCase()+Lo.slice(1);Er(bh,"on"+kh)}Er(wa,"onAnimationEnd"),Er(xa,"onAnimationIteration"),Er(ba,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(ka,"onTransitionEnd"),U("onMouseEnter",["mouseout","mouseover"]),U("onMouseLeave",["mouseout","mouseover"]),U("onPointerEnter",["pointerout","pointerover"]),U("onPointerLeave",["pointerout","pointerover"]),ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function La(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,_i(i,t,void 0,e),e.currentTarget=null}function Da(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var L=i.length-1;0<=L;L--){var F=i[L],$=F.instance,ie=F.currentTarget;if(F=F.listener,$!==d&&a.isPropagationStopped())break e;La(a,F,ie),d=$}else for(L=0;L<i.length;L++){if(F=i[L],$=F.instance,ie=F.currentTarget,F=F.listener,$!==d&&a.isPropagationStopped())break e;La(a,F,ie),d=$}}}if(Ur)throw e=Vi,Ur=!1,Vi=null,e}function Je(e,t){var r=t[Oo];r===void 0&&(r=t[Oo]=new Set);var i=e+"__bubble";r.has(i)||(Ta(t,e,2,!1),r.add(i))}function Do(e,t,r){var i=0;t&&(i|=4),Ta(r,e,i,t)}var nn="_reactListening"+Math.random().toString(36).slice(2);function os(e){if(!e[nn]){e[nn]=!0,ee.forEach(function(r){r!=="selectionchange"&&(Eh.has(r)||Do(r,!1,e),Do(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nn]||(t[nn]=!0,Do("selectionchange",!1,t))}}function Ta(e,t,r,i){switch(Zl(t)){case 1:var a=Js;break;case 4:a=zu;break;default:a=ho}r=a.bind(null,t,r,e),a=void 0,!Is||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function To(e,t,r,i,a){var d=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var L=i.tag;if(L===3||L===4){var F=i.stateNode.containerInfo;if(F===a||F.nodeType===8&&F.parentNode===a)break;if(L===4)for(L=i.return;L!==null;){var $=L.tag;if(($===3||$===4)&&($=L.stateNode.containerInfo,$===a||$.nodeType===8&&$.parentNode===a))return;L=L.return}for(;F!==null;){if(L=Xr(F),L===null)return;if($=L.tag,$===5||$===6){i=d=L;continue e}F=F.parentNode}}i=i.return}ro(function(){var ie=d,ge=Ps(r),ye=[];e:{var _e=Ea.get(e);if(_e!==void 0){var Re=_o,Pe=e;switch(e){case"keypress":if(Ys(r)===0)break e;case"keydown":case"keyup":Re=rh;break;case"focusin":Pe="focus",Re=mo;break;case"focusout":Pe="blur",Re=mo;break;case"beforeblur":case"afterblur":Re=mo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=nh;break;case wa:case xa:case ba:Re=qu;break;case ka:Re=lh;break;case"scroll":Re=Wu;break;case"wheel":Re=ch;break;case"copy":case"cut":case"paste":Re=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=sa}var Me=(t&4)!==0,st=!Me&&e==="scroll",Q=Me?_e!==null?_e+"Capture":null:_e;Me=[];for(var V=ie,Z;V!==null;){Z=V;var xe=Z.stateNode;if(Z.tag===5&&xe!==null&&(Z=xe,Q!==null&&(xe=hi(V,Q),xe!=null&&Me.push(ls(V,xe,Z)))),st)break;V=V.return}0<Me.length&&(_e=new Re(_e,Pe,null,r,ge),ye.push({event:_e,listeners:Me}))}}if((t&7)===0){e:{if(_e=e==="mouseover"||e==="pointerover",Re=e==="mouseout"||e==="pointerout",_e&&r!==Ki&&(Pe=r.relatedTarget||r.fromElement)&&(Xr(Pe)||Pe[gr]))break e;if((Re||_e)&&(_e=ge.window===ge?ge:(_e=ge.ownerDocument)?_e.defaultView||_e.parentWindow:window,Re?(Pe=r.relatedTarget||r.toElement,Re=ie,Pe=Pe?Xr(Pe):null,Pe!==null&&(st=nr(Pe),Pe!==st||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Re=null,Pe=ie),Re!==Pe)){if(Me=ra,xe="onMouseLeave",Q="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Me=sa,xe="onPointerLeave",Q="onPointerEnter",V="pointer"),st=Re==null?_e:Ri(Re),Z=Pe==null?_e:Ri(Pe),_e=new Me(xe,V+"leave",Re,r,ge),_e.target=st,_e.relatedTarget=Z,xe=null,Xr(ge)===ie&&(Me=new Me(Q,V+"enter",Pe,r,ge),Me.target=Z,Me.relatedTarget=st,xe=Me),st=xe,Re&&Pe)t:{for(Me=Re,Q=Pe,V=0,Z=Me;Z;Z=ki(Z))V++;for(Z=0,xe=Q;xe;xe=ki(xe))Z++;for(;0<V-Z;)Me=ki(Me),V--;for(;0<Z-V;)Q=ki(Q),Z--;for(;V--;){if(Me===Q||Q!==null&&Me===Q.alternate)break t;Me=ki(Me),Q=ki(Q)}Me=null}else Me=null;Re!==null&&Pa(ye,_e,Re,Me,!1),Pe!==null&&st!==null&&Pa(ye,st,Pe,Me,!0)}}e:{if(_e=ie?Ri(ie):window,Re=_e.nodeName&&_e.nodeName.toLowerCase(),Re==="select"||Re==="input"&&_e.type==="file")var Ae=gh;else if(ua(_e))if(da)Ae=Sh;else{Ae=mh;var Be=vh}else(Re=_e.nodeName)&&Re.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Ae=yh);if(Ae&&(Ae=Ae(e,ie))){ha(ye,Ae,r,ge);break e}Be&&Be(e,_e,ie),e==="focusout"&&(Be=_e._wrapperState)&&Be.controlled&&_e.type==="number"&&rr(_e,"number",_e.value)}switch(Be=ie?Ri(ie):window,e){case"focusin":(ua(Be)||Be.contentEditable==="true")&&(xi=Be,bo=ie,ss=null);break;case"focusout":ss=bo=xi=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Sa(ye,r,ge);break;case"selectionchange":if(xh)break;case"keydown":case"keyup":Sa(ye,r,ge)}var Ie;if(So)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else wi?aa(e,r)&&(Fe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Fe="onCompositionStart");Fe&&(na&&r.locale!=="ko"&&(wi||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&wi&&(Ie=ea()):(kr=ge,po="value"in kr?kr.value:kr.textContent,wi=!0)),Be=on(ie,Fe),0<Be.length&&(Fe=new ia(Fe,e,null,r,ge),ye.push({event:Fe,listeners:Be}),Ie?Fe.data=Ie:(Ie=ca(r),Ie!==null&&(Fe.data=Ie)))),(Ie=hh?dh(e,r):fh(e,r))&&(ie=on(ie,"onBeforeInput"),0<ie.length&&(ge=new ia("onBeforeInput","beforeinput",null,r,ge),ye.push({event:ge,listeners:ie}),ge.data=Ie))}Da(ye,t)})}function ls(e,t,r){return{instance:e,listener:t,currentTarget:r}}function on(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,d=a.stateNode;a.tag===5&&d!==null&&(a=d,d=hi(e,r),d!=null&&i.unshift(ls(e,d,a)),d=hi(e,t),d!=null&&i.push(ls(e,d,a))),e=e.return}return i}function ki(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pa(e,t,r,i,a){for(var d=t._reactName,L=[];r!==null&&r!==i;){var F=r,$=F.alternate,ie=F.stateNode;if($!==null&&$===i)break;F.tag===5&&ie!==null&&(F=ie,a?($=hi(r,d),$!=null&&L.unshift(ls(r,$,F))):a||($=hi(r,d),$!=null&&L.push(ls(r,$,F)))),r=r.return}L.length!==0&&e.push({event:t,listeners:L})}var Rh=/\r\n?/g,Lh=/\u0000|\uFFFD/g;function Ma(e){return(typeof e=="string"?e:""+e).replace(Rh,`
`).replace(Lh,"")}function ln(e,t,r){if(t=Ma(t),Ma(e)!==t&&r)throw Error(x(425))}function an(){}var Po=null,Mo=null;function Ao(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,Dh=typeof clearTimeout=="function"?clearTimeout:void 0,Aa=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof Aa<"u"?function(e){return Aa.resolve(null).then(e).catch(Ph)}:Bo;function Ph(e){setTimeout(function(){throw e})}function Io(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),_r(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);_r(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ba(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),ar="__reactFiber$"+Ei,as="__reactProps$"+Ei,gr="__reactContainer$"+Ei,Oo="__reactEvents$"+Ei,Mh="__reactListeners$"+Ei,Ah="__reactHandles$"+Ei;function Xr(e){var t=e[ar];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gr]||r[ar]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ba(e);e!==null;){if(r=e[ar])return r;e=Ba(e)}return t}e=r,r=e.parentNode}return null}function cs(e){return e=e[ar]||e[gr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ri(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function cn(e){return e[as]||null}var jo=[],Li=-1;function Lr(e){return{current:e}}function Xe(e){0>Li||(e.current=jo[Li],jo[Li]=null,Li--)}function qe(e,t){Li++,jo[Li]=e.current,e.current=t}var Dr={},mt=Lr(Dr),Lt=Lr(!1),Qr=Dr;function Di(e,t){var r=e.type.contextTypes;if(!r)return Dr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},d;for(d in r)a[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Dt(e){return e=e.childContextTypes,e!=null}function un(){Xe(Lt),Xe(mt)}function Ia(e,t,r){if(mt.current!==Dr)throw Error(x(168));qe(mt,t),qe(Lt,r)}function Oa(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(x(108,q(e)||"Unknown",a));return I({},r,i)}function hn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Qr=mt.current,qe(mt,e),qe(Lt,Lt.current),!0}function ja(e,t,r){var i=e.stateNode;if(!i)throw Error(x(169));r?(e=Oa(e,t,Qr),i.__reactInternalMemoizedMergedChildContext=e,Xe(Lt),Xe(mt),qe(mt,e)):Xe(Lt),qe(Lt,r)}var vr=null,dn=!1,Fo=!1;function Fa(e){vr===null?vr=[e]:vr.push(e)}function Bh(e){dn=!0,Fa(e)}function Tr(){if(!Fo&&vr!==null){Fo=!0;var e=0,t=Ke;try{var r=vr;for(Ke=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}vr=null,dn=!1}catch(a){throw vr!==null&&(vr=vr.slice(e+1)),Hs(gi,Tr),a}finally{Ke=t,Fo=!1}}return null}var Ti=[],Pi=0,fn=null,pn=0,$t=[],Ut=0,Yr=null,mr=1,yr="";function Zr(e,t){Ti[Pi++]=pn,Ti[Pi++]=fn,fn=e,pn=t}function Ha(e,t,r){$t[Ut++]=mr,$t[Ut++]=yr,$t[Ut++]=Yr,Yr=e;var i=mr;e=yr;var a=32-It(i)-1;i&=~(1<<a),r+=1;var d=32-It(t)+a;if(30<d){var L=a-a%5;d=(i&(1<<L)-1).toString(32),i>>=L,a-=L,mr=1<<32-It(t)+a|r<<a|i,yr=d+e}else mr=1<<d|r<<a|i,yr=e}function Ho(e){e.return!==null&&(Zr(e,1),Ha(e,1,0))}function No(e){for(;e===fn;)fn=Ti[--Pi],Ti[Pi]=null,pn=Ti[--Pi],Ti[Pi]=null;for(;e===Yr;)Yr=$t[--Ut],$t[Ut]=null,yr=$t[--Ut],$t[Ut]=null,mr=$t[--Ut],$t[Ut]=null}var jt=null,Ft=null,et=!1,Qt=null;function Na(e,t){var r=Gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function za(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,Ft=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yr!==null?{id:mr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,jt=e,Ft=null,!0):!1;default:return!1}}function zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wo(e){if(et){var t=Ft;if(t){var r=t;if(!za(e,t)){if(zo(e))throw Error(x(418));t=Rr(r.nextSibling);var i=jt;t&&za(e,t)?Na(i,r):(e.flags=e.flags&-4097|2,et=!1,jt=e)}}else{if(zo(e))throw Error(x(418));e.flags=e.flags&-4097|2,et=!1,jt=e}}}function Wa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function _n(e){if(e!==jt)return!1;if(!et)return Wa(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ao(e.type,e.memoizedProps)),t&&(t=Ft)){if(zo(e))throw $a(),Error(x(418));for(;t;)Na(e,t),t=Rr(t.nextSibling)}if(Wa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ft=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=jt?Rr(e.stateNode.nextSibling):null;return!0}function $a(){for(var e=Ft;e;)e=Rr(e.nextSibling)}function Mi(){Ft=jt=null,et=!1}function $o(e){Qt===null?Qt=[e]:Qt.push(e)}var Ih=f.ReactCurrentBatchConfig;function us(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(x(309));var i=r.stateNode}if(!i)throw Error(x(147,e));var a=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(L){var F=a.refs;L===null?delete F[d]:F[d]=L},t._stringRef=d,t)}if(typeof e!="string")throw Error(x(284));if(!r._owner)throw Error(x(290,e))}return e}function gn(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ua(e){var t=e._init;return t(e._payload)}function Ka(e){function t(Q,V){if(e){var Z=Q.deletions;Z===null?(Q.deletions=[V],Q.flags|=16):Z.push(V)}}function r(Q,V){if(!e)return null;for(;V!==null;)t(Q,V),V=V.sibling;return null}function i(Q,V){for(Q=new Map;V!==null;)V.key!==null?Q.set(V.key,V):Q.set(V.index,V),V=V.sibling;return Q}function a(Q,V){return Q=Fr(Q,V),Q.index=0,Q.sibling=null,Q}function d(Q,V,Z){return Q.index=Z,e?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<V?(Q.flags|=2,V):Z):(Q.flags|=2,V)):(Q.flags|=1048576,V)}function L(Q){return e&&Q.alternate===null&&(Q.flags|=2),Q}function F(Q,V,Z,xe){return V===null||V.tag!==6?(V=Bl(Z,Q.mode,xe),V.return=Q,V):(V=a(V,Z),V.return=Q,V)}function $(Q,V,Z,xe){var Ae=Z.type;return Ae===b?ge(Q,V,Z.props.children,xe,Z.key):V!==null&&(V.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===le&&Ua(Ae)===V.type)?(xe=a(V,Z.props),xe.ref=us(Q,V,Z),xe.return=Q,xe):(xe=Nn(Z.type,Z.key,Z.props,null,Q.mode,xe),xe.ref=us(Q,V,Z),xe.return=Q,xe)}function ie(Q,V,Z,xe){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=Il(Z,Q.mode,xe),V.return=Q,V):(V=a(V,Z.children||[]),V.return=Q,V)}function ge(Q,V,Z,xe,Ae){return V===null||V.tag!==7?(V=li(Z,Q.mode,xe,Ae),V.return=Q,V):(V=a(V,Z),V.return=Q,V)}function ye(Q,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Bl(""+V,Q.mode,Z),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return Z=Nn(V.type,V.key,V.props,null,Q.mode,Z),Z.ref=us(Q,null,V),Z.return=Q,Z;case C:return V=Il(V,Q.mode,Z),V.return=Q,V;case le:var xe=V._init;return ye(Q,xe(V._payload),Z)}if(at(V)||R(V))return V=li(V,Q.mode,Z,null),V.return=Q,V;gn(Q,V)}return null}function _e(Q,V,Z,xe){var Ae=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Ae!==null?null:F(Q,V,""+Z,xe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return Z.key===Ae?$(Q,V,Z,xe):null;case C:return Z.key===Ae?ie(Q,V,Z,xe):null;case le:return Ae=Z._init,_e(Q,V,Ae(Z._payload),xe)}if(at(Z)||R(Z))return Ae!==null?null:ge(Q,V,Z,xe,null);gn(Q,Z)}return null}function Re(Q,V,Z,xe,Ae){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return Q=Q.get(Z)||null,F(V,Q,""+xe,Ae);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case S:return Q=Q.get(xe.key===null?Z:xe.key)||null,$(V,Q,xe,Ae);case C:return Q=Q.get(xe.key===null?Z:xe.key)||null,ie(V,Q,xe,Ae);case le:var Be=xe._init;return Re(Q,V,Z,Be(xe._payload),Ae)}if(at(xe)||R(xe))return Q=Q.get(Z)||null,ge(V,Q,xe,Ae,null);gn(V,xe)}return null}function Pe(Q,V,Z,xe){for(var Ae=null,Be=null,Ie=V,Fe=V=0,ft=null;Ie!==null&&Fe<Z.length;Fe++){Ie.index>Fe?(ft=Ie,Ie=null):ft=Ie.sibling;var $e=_e(Q,Ie,Z[Fe],xe);if($e===null){Ie===null&&(Ie=ft);break}e&&Ie&&$e.alternate===null&&t(Q,Ie),V=d($e,V,Fe),Be===null?Ae=$e:Be.sibling=$e,Be=$e,Ie=ft}if(Fe===Z.length)return r(Q,Ie),et&&Zr(Q,Fe),Ae;if(Ie===null){for(;Fe<Z.length;Fe++)Ie=ye(Q,Z[Fe],xe),Ie!==null&&(V=d(Ie,V,Fe),Be===null?Ae=Ie:Be.sibling=Ie,Be=Ie);return et&&Zr(Q,Fe),Ae}for(Ie=i(Q,Ie);Fe<Z.length;Fe++)ft=Re(Ie,Q,Fe,Z[Fe],xe),ft!==null&&(e&&ft.alternate!==null&&Ie.delete(ft.key===null?Fe:ft.key),V=d(ft,V,Fe),Be===null?Ae=ft:Be.sibling=ft,Be=ft);return e&&Ie.forEach(function(Hr){return t(Q,Hr)}),et&&Zr(Q,Fe),Ae}function Me(Q,V,Z,xe){var Ae=R(Z);if(typeof Ae!="function")throw Error(x(150));if(Z=Ae.call(Z),Z==null)throw Error(x(151));for(var Be=Ae=null,Ie=V,Fe=V=0,ft=null,$e=Z.next();Ie!==null&&!$e.done;Fe++,$e=Z.next()){Ie.index>Fe?(ft=Ie,Ie=null):ft=Ie.sibling;var Hr=_e(Q,Ie,$e.value,xe);if(Hr===null){Ie===null&&(Ie=ft);break}e&&Ie&&Hr.alternate===null&&t(Q,Ie),V=d(Hr,V,Fe),Be===null?Ae=Hr:Be.sibling=Hr,Be=Hr,Ie=ft}if($e.done)return r(Q,Ie),et&&Zr(Q,Fe),Ae;if(Ie===null){for(;!$e.done;Fe++,$e=Z.next())$e=ye(Q,$e.value,xe),$e!==null&&(V=d($e,V,Fe),Be===null?Ae=$e:Be.sibling=$e,Be=$e);return et&&Zr(Q,Fe),Ae}for(Ie=i(Q,Ie);!$e.done;Fe++,$e=Z.next())$e=Re(Ie,Q,Fe,$e.value,xe),$e!==null&&(e&&$e.alternate!==null&&Ie.delete($e.key===null?Fe:$e.key),V=d($e,V,Fe),Be===null?Ae=$e:Be.sibling=$e,Be=$e);return e&&Ie.forEach(function(pd){return t(Q,pd)}),et&&Zr(Q,Fe),Ae}function st(Q,V,Z,xe){if(typeof Z=="object"&&Z!==null&&Z.type===b&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:e:{for(var Ae=Z.key,Be=V;Be!==null;){if(Be.key===Ae){if(Ae=Z.type,Ae===b){if(Be.tag===7){r(Q,Be.sibling),V=a(Be,Z.props.children),V.return=Q,Q=V;break e}}else if(Be.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===le&&Ua(Ae)===Be.type){r(Q,Be.sibling),V=a(Be,Z.props),V.ref=us(Q,Be,Z),V.return=Q,Q=V;break e}r(Q,Be);break}else t(Q,Be);Be=Be.sibling}Z.type===b?(V=li(Z.props.children,Q.mode,xe,Z.key),V.return=Q,Q=V):(xe=Nn(Z.type,Z.key,Z.props,null,Q.mode,xe),xe.ref=us(Q,V,Z),xe.return=Q,Q=xe)}return L(Q);case C:e:{for(Be=Z.key;V!==null;){if(V.key===Be)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){r(Q,V.sibling),V=a(V,Z.children||[]),V.return=Q,Q=V;break e}else{r(Q,V);break}else t(Q,V);V=V.sibling}V=Il(Z,Q.mode,xe),V.return=Q,Q=V}return L(Q);case le:return Be=Z._init,st(Q,V,Be(Z._payload),xe)}if(at(Z))return Pe(Q,V,Z,xe);if(R(Z))return Me(Q,V,Z,xe);gn(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,V!==null&&V.tag===6?(r(Q,V.sibling),V=a(V,Z),V.return=Q,Q=V):(r(Q,V),V=Bl(Z,Q.mode,xe),V.return=Q,Q=V),L(Q)):r(Q,V)}return st}var Ai=Ka(!0),Va=Ka(!1),vn=Lr(null),mn=null,Bi=null,Uo=null;function Ko(){Uo=Bi=mn=null}function Vo(e){var t=vn.current;Xe(vn),e._currentValue=t}function qo(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Ii(e,t){mn=e,Uo=Bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Tt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Uo!==e)if(e={context:e,memoizedValue:t,next:null},Bi===null){if(mn===null)throw Error(x(308));Bi=e,mn.dependencies={lanes:0,firstContext:e}}else Bi=Bi.next=e;return t}var ei=null;function Go(e){ei===null?ei=[e]:ei.push(e)}function qa(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,Go(t)):(r.next=a.next,a.next=r),t.interleaved=r,Sr(e,i)}function Sr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pr=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ga(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(We&2)!==0){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Sr(e,r)}return a=i.interleaved,a===null?(t.next=t,Go(i)):(t.next=a.next,a.next=t),i.interleaved=t,Sr(e,r)}function yn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Xi(e,r)}}function Ja(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var L={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?a=d=L:d=d.next=L,r=r.next}while(r!==null);d===null?a=d=t:d=d.next=t}else a=d=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sn(e,t,r,i){var a=e.updateQueue;Pr=!1;var d=a.firstBaseUpdate,L=a.lastBaseUpdate,F=a.shared.pending;if(F!==null){a.shared.pending=null;var $=F,ie=$.next;$.next=null,L===null?d=ie:L.next=ie,L=$;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,F=ge.lastBaseUpdate,F!==L&&(F===null?ge.firstBaseUpdate=ie:F.next=ie,ge.lastBaseUpdate=$))}if(d!==null){var ye=a.baseState;L=0,ge=ie=$=null,F=d;do{var _e=F.lane,Re=F.eventTime;if((i&_e)===_e){ge!==null&&(ge=ge.next={eventTime:Re,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Pe=e,Me=F;switch(_e=t,Re=r,Me.tag){case 1:if(Pe=Me.payload,typeof Pe=="function"){ye=Pe.call(Re,ye,_e);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Me.payload,_e=typeof Pe=="function"?Pe.call(Re,ye,_e):Pe,_e==null)break e;ye=I({},ye,_e);break e;case 2:Pr=!0}}F.callback!==null&&F.lane!==0&&(e.flags|=64,_e=a.effects,_e===null?a.effects=[F]:_e.push(F))}else Re={eventTime:Re,lane:_e,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ge===null?(ie=ge=Re,$=ye):ge=ge.next=Re,L|=_e;if(F=F.next,F===null){if(F=a.shared.pending,F===null)break;_e=F,F=_e.next,_e.next=null,a.lastBaseUpdate=_e,a.shared.pending=null}}while(!0);if(ge===null&&($=ye),a.baseState=$,a.firstBaseUpdate=ie,a.lastBaseUpdate=ge,t=a.shared.interleaved,t!==null){a=t;do L|=a.lane,a=a.next;while(a!==t)}else d===null&&(a.shared.lanes=0);ii|=L,e.lanes=L,e.memoizedState=ye}}function Xa(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(x(191,a));a.call(i)}}}var hs={},cr=Lr(hs),ds=Lr(hs),fs=Lr(hs);function ti(e){if(e===hs)throw Error(x(174));return e}function Xo(e,t){switch(qe(fs,t),qe(ds,e),qe(cr,hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fr(t,e)}Xe(cr),qe(cr,t)}function Oi(){Xe(cr),Xe(ds),Xe(fs)}function Qa(e){ti(fs.current);var t=ti(cr.current),r=fr(t,e.type);t!==r&&(qe(ds,e),qe(cr,r))}function Qo(e){ds.current===e&&(Xe(cr),Xe(ds))}var tt=Lr(0);function Cn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yo=[];function Zo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var wn=f.ReactCurrentDispatcher,el=f.ReactCurrentBatchConfig,ri=0,rt=null,ot=null,ht=null,xn=!1,ps=!1,_s=0,Oh=0;function yt(){throw Error(x(321))}function tl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function rl(e,t,r,i,a,d){if(ri=d,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wn.current=e===null||e.memoizedState===null?Nh:zh,e=r(i,a),ps){d=0;do{if(ps=!1,_s=0,25<=d)throw Error(x(301));d+=1,ht=ot=null,t.updateQueue=null,wn.current=Wh,e=r(i,a)}while(ps)}if(wn.current=En,t=ot!==null&&ot.next!==null,ri=0,ht=ot=rt=null,xn=!1,t)throw Error(x(300));return e}function il(){var e=_s!==0;return _s=0,e}function ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?rt.memoizedState=ht=e:ht=ht.next=e,ht}function Vt(){if(ot===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ht===null?rt.memoizedState:ht.next;if(t!==null)ht=t,ot=e;else{if(e===null)throw Error(x(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?rt.memoizedState=ht=e:ht=ht.next=e}return ht}function gs(e,t){return typeof t=="function"?t(e):t}function sl(e){var t=Vt(),r=t.queue;if(r===null)throw Error(x(311));r.lastRenderedReducer=e;var i=ot,a=i.baseQueue,d=r.pending;if(d!==null){if(a!==null){var L=a.next;a.next=d.next,d.next=L}i.baseQueue=a=d,r.pending=null}if(a!==null){d=a.next,i=i.baseState;var F=L=null,$=null,ie=d;do{var ge=ie.lane;if((ri&ge)===ge)$!==null&&($=$.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),i=ie.hasEagerState?ie.eagerState:e(i,ie.action);else{var ye={lane:ge,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};$===null?(F=$=ye,L=i):$=$.next=ye,rt.lanes|=ge,ii|=ge}ie=ie.next}while(ie!==null&&ie!==d);$===null?L=i:$.next=F,Xt(i,t.memoizedState)||(Tt=!0),t.memoizedState=i,t.baseState=L,t.baseQueue=$,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do d=a.lane,rt.lanes|=d,ii|=d,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nl(e){var t=Vt(),r=t.queue;if(r===null)throw Error(x(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,d=t.memoizedState;if(a!==null){r.pending=null;var L=a=a.next;do d=e(d,L.action),L=L.next;while(L!==a);Xt(d,t.memoizedState)||(Tt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,i]}function Ya(){}function Za(e,t){var r=rt,i=Vt(),a=t(),d=!Xt(i.memoizedState,a);if(d&&(i.memoizedState=a,Tt=!0),i=i.queue,ol(rc.bind(null,r,i,e),[e]),i.getSnapshot!==t||d||ht!==null&&ht.memoizedState.tag&1){if(r.flags|=2048,vs(9,tc.bind(null,r,i,a,t),void 0,null),dt===null)throw Error(x(349));(ri&30)!==0||ec(r,t,a)}return a}function ec(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function tc(e,t,r,i){t.value=r,t.getSnapshot=i,ic(t)&&sc(e)}function rc(e,t,r){return r(function(){ic(t)&&sc(e)})}function ic(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function sc(e){var t=Sr(e,1);t!==null&&tr(t,e,1,-1)}function nc(e){var t=ur();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:e},t.queue=e,e=e.dispatch=Hh.bind(null,rt,e),[t.memoizedState,e]}function vs(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function oc(){return Vt().memoizedState}function bn(e,t,r,i){var a=ur();rt.flags|=e,a.memoizedState=vs(1|t,r,void 0,i===void 0?null:i)}function kn(e,t,r,i){var a=Vt();i=i===void 0?null:i;var d=void 0;if(ot!==null){var L=ot.memoizedState;if(d=L.destroy,i!==null&&tl(i,L.deps)){a.memoizedState=vs(t,r,d,i);return}}rt.flags|=e,a.memoizedState=vs(1|t,r,d,i)}function lc(e,t){return bn(8390656,8,e,t)}function ol(e,t){return kn(2048,8,e,t)}function ac(e,t){return kn(4,2,e,t)}function cc(e,t){return kn(4,4,e,t)}function uc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hc(e,t,r){return r=r!=null?r.concat([e]):null,kn(4,4,uc.bind(null,t,e),r)}function ll(){}function dc(e,t){var r=Vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&tl(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function fc(e,t){var r=Vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&tl(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function pc(e,t,r){return(ri&21)===0?(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=r):(Xt(r,t)||(r=Ks(),rt.lanes|=r,ii|=r,e.baseState=!0),t)}function jh(e,t){var r=Ke;Ke=r!==0&&4>r?r:4,e(!0);var i=el.transition;el.transition={};try{e(!1),t()}finally{Ke=r,el.transition=i}}function _c(){return Vt().memoizedState}function Fh(e,t,r){var i=Or(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},gc(e))vc(t,r);else if(r=qa(e,t,r,i),r!==null){var a=kt();tr(r,e,i,a),mc(r,t,i)}}function Hh(e,t,r){var i=Or(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(gc(e))vc(t,a);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var L=t.lastRenderedState,F=d(L,r);if(a.hasEagerState=!0,a.eagerState=F,Xt(F,L)){var $=t.interleaved;$===null?(a.next=a,Go(t)):(a.next=$.next,$.next=a),t.interleaved=a;return}}catch{}finally{}r=qa(e,t,a,i),r!==null&&(a=kt(),tr(r,e,i,a),mc(r,t,i))}}function gc(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function vc(e,t){ps=xn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mc(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Xi(e,r)}}var En={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Nh={readContext:Kt,useCallback:function(e,t){return ur().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:lc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bn(4194308,4,uc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bn(4194308,4,e,t)},useInsertionEffect:function(e,t){return bn(4,2,e,t)},useMemo:function(e,t){var r=ur();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ur();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Fh.bind(null,rt,e),[i.memoizedState,e]},useRef:function(e){var t=ur();return e={current:e},t.memoizedState=e},useState:nc,useDebugValue:ll,useDeferredValue:function(e){return ur().memoizedState=e},useTransition:function(){var e=nc(!1),t=e[0];return e=jh.bind(null,e[1]),ur().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=rt,a=ur();if(et){if(r===void 0)throw Error(x(407));r=r()}else{if(r=t(),dt===null)throw Error(x(349));(ri&30)!==0||ec(i,t,r)}a.memoizedState=r;var d={value:r,getSnapshot:t};return a.queue=d,lc(rc.bind(null,i,d,e),[e]),i.flags|=2048,vs(9,tc.bind(null,i,d,r,t),void 0,null),r},useId:function(){var e=ur(),t=dt.identifierPrefix;if(et){var r=yr,i=mr;r=(i&~(1<<32-It(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=_s++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Oh++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zh={readContext:Kt,useCallback:dc,useContext:Kt,useEffect:ol,useImperativeHandle:hc,useInsertionEffect:ac,useLayoutEffect:cc,useMemo:fc,useReducer:sl,useRef:oc,useState:function(){return sl(gs)},useDebugValue:ll,useDeferredValue:function(e){var t=Vt();return pc(t,ot.memoizedState,e)},useTransition:function(){var e=sl(gs)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:Ya,useSyncExternalStore:Za,useId:_c,unstable_isNewReconciler:!1},Wh={readContext:Kt,useCallback:dc,useContext:Kt,useEffect:ol,useImperativeHandle:hc,useInsertionEffect:ac,useLayoutEffect:cc,useMemo:fc,useReducer:nl,useRef:oc,useState:function(){return nl(gs)},useDebugValue:ll,useDeferredValue:function(e){var t=Vt();return ot===null?t.memoizedState=e:pc(t,ot.memoizedState,e)},useTransition:function(){var e=nl(gs)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:Ya,useSyncExternalStore:Za,useId:_c,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=I({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function al(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:I({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rn={isMounted:function(e){return(e=e._reactInternals)?nr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=kt(),a=Or(e),d=Cr(i,a);d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,a),t!==null&&(tr(t,e,a,i),yn(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=kt(),a=Or(e),d=Cr(i,a);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Mr(e,d,a),t!==null&&(tr(t,e,a,i),yn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=kt(),i=Or(e),a=Cr(r,i);a.tag=2,t!=null&&(a.callback=t),t=Mr(e,a,i),t!==null&&(tr(t,e,i,r),yn(t,e,i))}};function yc(e,t,r,i,a,d,L){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,L):t.prototype&&t.prototype.isPureReactComponent?!is(r,i)||!is(a,d):!0}function Sc(e,t,r){var i=!1,a=Dr,d=t.contextType;return typeof d=="object"&&d!==null?d=Kt(d):(a=Dt(t)?Qr:mt.current,i=t.contextTypes,d=(i=i!=null)?Di(e,a):Dr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rn,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=d),t}function Cc(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Rn.enqueueReplaceState(t,t.state,null)}function cl(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Jo(e);var d=t.contextType;typeof d=="object"&&d!==null?a.context=Kt(d):(d=Dt(t)?Qr:mt.current,a.context=Di(e,d)),a.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(al(e,t,d,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Rn.enqueueReplaceState(a,a.state,null),Sn(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var r="",i=t;do r+=Ce(i),i=i.return;while(i);var a=r}catch(d){a=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:a,digest:null}}function ul(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function hl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $h=typeof WeakMap=="function"?WeakMap:Map;function wc(e,t,r){r=Cr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Bn||(Bn=!0,El=i),hl(e,t)},r}function xc(e,t,r){r=Cr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){hl(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){hl(e,t),typeof i!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var L=t.stack;this.componentDidCatch(t.value,{componentStack:L!==null?L:""})}),r}function bc(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new $h;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=id.bind(null,e,t,r),t.then(e,e))}function kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ec(e,t,r,i,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Cr(-1,1),t.tag=2,Mr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Uh=f.ReactCurrentOwner,Tt=!1;function bt(e,t,r,i){t.child=e===null?Va(t,null,r,i):Ai(t,e.child,r,i)}function Rc(e,t,r,i,a){r=r.render;var d=t.ref;return Ii(t,a),i=rl(e,t,r,i,d,a),r=il(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wr(e,t,a)):(et&&r&&Ho(t),t.flags|=1,bt(e,t,i,a),t.child)}function Lc(e,t,r,i,a){if(e===null){var d=r.type;return typeof d=="function"&&!Al(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Dc(e,t,d,i,a)):(e=Nn(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&a)===0){var L=d.memoizedProps;if(r=r.compare,r=r!==null?r:is,r(L,i)&&e.ref===t.ref)return wr(e,t,a)}return t.flags|=1,e=Fr(d,i),e.ref=t.ref,e.return=t,t.child=e}function Dc(e,t,r,i,a){if(e!==null){var d=e.memoizedProps;if(is(d,i)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=i=d,(e.lanes&a)!==0)(e.flags&131072)!==0&&(Tt=!0);else return t.lanes=e.lanes,wr(e,t,a)}return dl(e,t,r,i,a)}function Tc(e,t,r){var i=t.pendingProps,a=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Hi,Ht),Ht|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Hi,Ht),Ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:r,qe(Hi,Ht),Ht|=i}else d!==null?(i=d.baseLanes|r,t.memoizedState=null):i=r,qe(Hi,Ht),Ht|=i;return bt(e,t,a,r),t.child}function Pc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dl(e,t,r,i,a){var d=Dt(r)?Qr:mt.current;return d=Di(t,d),Ii(t,a),r=rl(e,t,r,i,d,a),i=il(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wr(e,t,a)):(et&&i&&Ho(t),t.flags|=1,bt(e,t,r,a),t.child)}function Mc(e,t,r,i,a){if(Dt(r)){var d=!0;hn(t)}else d=!1;if(Ii(t,a),t.stateNode===null)Dn(e,t),Sc(t,r,i),cl(t,r,i,a),i=!0;else if(e===null){var L=t.stateNode,F=t.memoizedProps;L.props=F;var $=L.context,ie=r.contextType;typeof ie=="object"&&ie!==null?ie=Kt(ie):(ie=Dt(r)?Qr:mt.current,ie=Di(t,ie));var ge=r.getDerivedStateFromProps,ye=typeof ge=="function"||typeof L.getSnapshotBeforeUpdate=="function";ye||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(F!==i||$!==ie)&&Cc(t,L,i,ie),Pr=!1;var _e=t.memoizedState;L.state=_e,Sn(t,i,L,a),$=t.memoizedState,F!==i||_e!==$||Lt.current||Pr?(typeof ge=="function"&&(al(t,r,ge,i),$=t.memoizedState),(F=Pr||yc(t,r,F,i,_e,$,ie))?(ye||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(t.flags|=4194308)):(typeof L.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=$),L.props=i,L.state=$,L.context=ie,i=F):(typeof L.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{L=t.stateNode,Ga(e,t),F=t.memoizedProps,ie=t.type===t.elementType?F:Yt(t.type,F),L.props=ie,ye=t.pendingProps,_e=L.context,$=r.contextType,typeof $=="object"&&$!==null?$=Kt($):($=Dt(r)?Qr:mt.current,$=Di(t,$));var Re=r.getDerivedStateFromProps;(ge=typeof Re=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(F!==ye||_e!==$)&&Cc(t,L,i,$),Pr=!1,_e=t.memoizedState,L.state=_e,Sn(t,i,L,a);var Pe=t.memoizedState;F!==ye||_e!==Pe||Lt.current||Pr?(typeof Re=="function"&&(al(t,r,Re,i),Pe=t.memoizedState),(ie=Pr||yc(t,r,ie,i,_e,Pe,$)||!1)?(ge||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(i,Pe,$),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(i,Pe,$)),typeof L.componentDidUpdate=="function"&&(t.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof L.componentDidUpdate!="function"||F===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Pe),L.props=i,L.state=Pe,L.context=$,i=ie):(typeof L.componentDidUpdate!="function"||F===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),i=!1)}return fl(e,t,r,i,d,a)}function fl(e,t,r,i,a,d){Pc(e,t);var L=(t.flags&128)!==0;if(!i&&!L)return a&&ja(t,r,!1),wr(e,t,d);i=t.stateNode,Uh.current=t;var F=L&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&L?(t.child=Ai(t,e.child,null,d),t.child=Ai(t,null,F,d)):bt(e,t,F,d),t.memoizedState=i.state,a&&ja(t,r,!0),t.child}function Ac(e){var t=e.stateNode;t.pendingContext?Ia(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(e,t.context,!1),Xo(e,t.containerInfo)}function Bc(e,t,r,i,a){return Mi(),$o(a),t.flags|=256,bt(e,t,r,i),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function _l(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ic(e,t,r){var i=t.pendingProps,a=tt.current,d=!1,L=(t.flags&128)!==0,F;if((F=L)||(F=e!==null&&e.memoizedState===null?!1:(a&2)!==0),F?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),qe(tt,a&1),e===null)return Wo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(L=i.children,e=i.fallback,d?(i=t.mode,d=t.child,L={mode:"hidden",children:L},(i&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=L):d=zn(L,i,0,null),e=li(e,i,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=_l(r),t.memoizedState=pl,e):gl(t,L));if(a=e.memoizedState,a!==null&&(F=a.dehydrated,F!==null))return Kh(e,t,L,i,F,a,r);if(d){d=i.fallback,L=t.mode,a=e.child,F=a.sibling;var $={mode:"hidden",children:i.children};return(L&1)===0&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=$,t.deletions=null):(i=Fr(a,$),i.subtreeFlags=a.subtreeFlags&14680064),F!==null?d=Fr(F,d):(d=li(d,L,r,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,L=e.child.memoizedState,L=L===null?_l(r):{baseLanes:L.baseLanes|r,cachePool:null,transitions:L.transitions},d.memoizedState=L,d.childLanes=e.childLanes&~r,t.memoizedState=pl,i}return d=e.child,e=d.sibling,i=Fr(d,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function gl(e,t){return t=zn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ln(e,t,r,i){return i!==null&&$o(i),Ai(t,e.child,null,r),e=gl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kh(e,t,r,i,a,d,L){if(r)return t.flags&256?(t.flags&=-257,i=ul(Error(x(422))),Ln(e,t,L,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,a=t.mode,i=zn({mode:"visible",children:i.children},a,0,null),d=li(d,a,L,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,(t.mode&1)!==0&&Ai(t,e.child,null,L),t.child.memoizedState=_l(L),t.memoizedState=pl,d);if((t.mode&1)===0)return Ln(e,t,L,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var F=i.dgst;return i=F,d=Error(x(419)),i=ul(d,i,void 0),Ln(e,t,L,i)}if(F=(L&e.childLanes)!==0,Tt||F){if(i=dt,i!==null){switch(L&-L){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(i.suspendedLanes|L))!==0?0:a,a!==0&&a!==d.retryLane&&(d.retryLane=a,Sr(e,a),tr(i,e,a,-1))}return Ml(),i=ul(Error(x(421))),Ln(e,t,L,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=sd.bind(null,e),a._reactRetry=t,null):(e=d.treeContext,Ft=Rr(a.nextSibling),jt=t,et=!0,Qt=null,e!==null&&($t[Ut++]=mr,$t[Ut++]=yr,$t[Ut++]=Yr,mr=e.id,yr=e.overflow,Yr=t),t=gl(t,i.children),t.flags|=4096,t)}function Oc(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),qo(e.return,t,r)}function vl(e,t,r,i,a){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=r,d.tailMode=a)}function jc(e,t,r){var i=t.pendingProps,a=i.revealOrder,d=i.tail;if(bt(e,t,i.children,r),i=tt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,r,t);else if(e.tag===19)Oc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(qe(tt,i),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Cn(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),vl(t,!1,a,r,d);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Cn(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}vl(t,!0,r,null,d);break;case"together":vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dn(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ii|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,r=Fr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Vh(e,t,r){switch(t.tag){case 3:Ac(t),Mi();break;case 5:Qa(t);break;case 1:Dt(t.type)&&hn(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;qe(vn,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(qe(tt,tt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Ic(e,t,r):(qe(tt,tt.current&1),e=wr(e,t,r),e!==null?e.sibling:null);qe(tt,tt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return jc(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qe(tt,tt.current),i)break;return null;case 22:case 23:return t.lanes=0,Tc(e,t,r)}return wr(e,t,r)}var Fc,ml,Hc,Nc;Fc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ml=function(){},Hc=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,ti(cr.current);var d=null;switch(r){case"input":a=me(e,a),i=me(e,i),d=[];break;case"select":a=I({},a,{value:void 0}),i=I({},i,{value:void 0}),d=[];break;case"textarea":a=wt(e,a),i=wt(e,i),d=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=an)}$i(r,i);var L;r=null;for(ie in a)if(!i.hasOwnProperty(ie)&&a.hasOwnProperty(ie)&&a[ie]!=null)if(ie==="style"){var F=a[ie];for(L in F)F.hasOwnProperty(L)&&(r||(r={}),r[L]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(J.hasOwnProperty(ie)?d||(d=[]):(d=d||[]).push(ie,null));for(ie in i){var $=i[ie];if(F=a?.[ie],i.hasOwnProperty(ie)&&$!==F&&($!=null||F!=null))if(ie==="style")if(F){for(L in F)!F.hasOwnProperty(L)||$&&$.hasOwnProperty(L)||(r||(r={}),r[L]="");for(L in $)$.hasOwnProperty(L)&&F[L]!==$[L]&&(r||(r={}),r[L]=$[L])}else r||(d||(d=[]),d.push(ie,r)),r=$;else ie==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(d=d||[]).push(ie,$)):ie==="children"?typeof $!="string"&&typeof $!="number"||(d=d||[]).push(ie,""+$):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(J.hasOwnProperty(ie)?($!=null&&ie==="onScroll"&&Je("scroll",e),d||F===$||(d=[])):(d=d||[]).push(ie,$))}r&&(d=d||[]).push("style",r);var ie=d;(t.updateQueue=ie)&&(t.flags|=4)}},Nc=function(e,t,r,i){r!==i&&(t.flags|=4)};function ms(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function qh(e,t,r){var i=t.pendingProps;switch(No(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Dt(t.type)&&un(),St(t),null;case 3:return i=t.stateNode,Oi(),Xe(Lt),Xe(mt),Zo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(_n(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qt!==null&&(Dl(Qt),Qt=null))),ml(e,t),St(t),null;case 5:Qo(t);var a=ti(fs.current);if(r=t.type,e!==null&&t.stateNode!=null)Hc(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(x(166));return St(t),null}if(e=ti(cr.current),_n(t)){i=t.stateNode,r=t.type;var d=t.memoizedProps;switch(i[ar]=t,i[as]=d,e=(t.mode&1)!==0,r){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(a=0;a<ns.length;a++)Je(ns[a],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Ne(i,d),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Je("invalid",i);break;case"textarea":pt(i,d),Je("invalid",i)}$i(r,d),a=null;for(var L in d)if(d.hasOwnProperty(L)){var F=d[L];L==="children"?typeof F=="string"?i.textContent!==F&&(d.suppressHydrationWarning!==!0&&ln(i.textContent,F,e),a=["children",F]):typeof F=="number"&&i.textContent!==""+F&&(d.suppressHydrationWarning!==!0&&ln(i.textContent,F,e),a=["children",""+F]):J.hasOwnProperty(L)&&F!=null&&L==="onScroll"&&Je("scroll",i)}switch(r){case"input":ke(i),Et(i,d,!0);break;case"textarea":ke(i),xt(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=an)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{L=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dr(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=L.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=L.createElement(r,{is:i.is}):(e=L.createElement(r),r==="select"&&(L=e,i.multiple?L.multiple=!0:i.size&&(L.size=i.size))):e=L.createElementNS(e,r),e[ar]=t,e[as]=i,Fc(e,t,!1,!1),t.stateNode=e;e:{switch(L=Ui(r,i),r){case"dialog":Je("cancel",e),Je("close",e),a=i;break;case"iframe":case"object":case"embed":Je("load",e),a=i;break;case"video":case"audio":for(a=0;a<ns.length;a++)Je(ns[a],e);a=i;break;case"source":Je("error",e),a=i;break;case"img":case"image":case"link":Je("error",e),Je("load",e),a=i;break;case"details":Je("toggle",e),a=i;break;case"input":Ne(e,i),a=me(e,i),Je("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=I({},i,{value:void 0}),Je("invalid",e);break;case"textarea":pt(e,i),a=wt(e,i),Je("invalid",e);break;default:a=i}$i(r,a),F=a;for(d in F)if(F.hasOwnProperty(d)){var $=F[d];d==="style"?ci(e,$):d==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&sr(e,$)):d==="children"?typeof $=="string"?(r!=="textarea"||$!=="")&&ut(e,$):typeof $=="number"&&ut(e,""+$):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(J.hasOwnProperty(d)?$!=null&&d==="onScroll"&&Je("scroll",e):$!=null&&o(e,d,$,L))}switch(r){case"input":ke(e),Et(e,i,!1);break;case"textarea":ke(e),xt(e);break;case"option":i.value!=null&&e.setAttribute("value",""+P(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?Rt(e,!!i.multiple,d,!1):i.defaultValue!=null&&Rt(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=an)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Nc(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(x(166));if(r=ti(fs.current),ti(cr.current),_n(t)){if(i=t.stateNode,r=t.memoizedProps,i[ar]=t,(d=i.nodeValue!==r)&&(e=jt,e!==null))switch(e.tag){case 3:ln(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ln(i.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[ar]=t,t.stateNode=i}return St(t),null;case 13:if(Xe(tt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&Ft!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$a(),Mi(),t.flags|=98560,d=!1;else if(d=_n(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(x(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(x(317));d[ar]=t}else Mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),d=!1}else Qt!==null&&(Dl(Qt),Qt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(tt.current&1)!==0?lt===0&&(lt=3):Ml())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return Oi(),ml(e,t),e===null&&os(t.stateNode.containerInfo),St(t),null;case 10:return Vo(t.type._context),St(t),null;case 17:return Dt(t.type)&&un(),St(t),null;case 19:if(Xe(tt),d=t.memoizedState,d===null)return St(t),null;if(i=(t.flags&128)!==0,L=d.rendering,L===null)if(i)ms(d,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(L=Cn(e),L!==null){for(t.flags|=128,ms(d,!1),i=L.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)d=r,e=i,d.flags&=14680066,L=d.alternate,L===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=L.childLanes,d.lanes=L.lanes,d.child=L.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=L.memoizedProps,d.memoizedState=L.memoizedState,d.updateQueue=L.updateQueue,d.type=L.type,e=L.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(tt,tt.current&1|2),t.child}e=e.sibling}d.tail!==null&&Qe()>Ni&&(t.flags|=128,i=!0,ms(d,!1),t.lanes=4194304)}else{if(!i)if(e=Cn(L),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ms(d,!0),d.tail===null&&d.tailMode==="hidden"&&!L.alternate&&!et)return St(t),null}else 2*Qe()-d.renderingStartTime>Ni&&r!==1073741824&&(t.flags|=128,i=!0,ms(d,!1),t.lanes=4194304);d.isBackwards?(L.sibling=t.child,t.child=L):(r=d.last,r!==null?r.sibling=L:t.child=L,d.last=L)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Qe(),t.sibling=null,r=tt.current,qe(tt,i?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Pl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Ht&1073741824)!==0&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function Gh(e,t){switch(No(t),t.tag){case 1:return Dt(t.type)&&un(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oi(),Xe(Lt),Xe(mt),Zo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Qo(t),null;case 13:if(Xe(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));Mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(tt),null;case 4:return Oi(),null;case 10:return Vo(t.type._context),null;case 22:case 23:return Pl(),null;case 24:return null;default:return null}}var Tn=!1,Ct=!1,Jh=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Fi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){it(e,t,i)}else r.current=null}function yl(e,t,r){try{r()}catch(i){it(e,t,i)}}var zc=!1;function Xh(e,t){if(Po=Jr,e=ya(),xo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var L=0,F=-1,$=-1,ie=0,ge=0,ye=e,_e=null;t:for(;;){for(var Re;ye!==r||a!==0&&ye.nodeType!==3||(F=L+a),ye!==d||i!==0&&ye.nodeType!==3||($=L+i),ye.nodeType===3&&(L+=ye.nodeValue.length),(Re=ye.firstChild)!==null;)_e=ye,ye=Re;for(;;){if(ye===e)break t;if(_e===r&&++ie===a&&(F=L),_e===d&&++ge===i&&($=L),(Re=ye.nextSibling)!==null)break;ye=_e,_e=ye.parentNode}ye=Re}r=F===-1||$===-1?null:{start:F,end:$}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mo={focusedElem:e,selectionRange:r},Jr=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var Pe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Me=Pe.memoizedProps,st=Pe.memoizedState,Q=t.stateNode,V=Q.getSnapshotBeforeUpdate(t.elementType===t.type?Me:Yt(t.type,Me),st);Q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(xe){it(t,t.return,xe)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return Pe=zc,zc=!1,Pe}function ys(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var d=a.destroy;a.destroy=void 0,d!==void 0&&yl(t,r,d)}a=a.next}while(a!==i)}}function Pn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Sl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Wc(e){var t=e.alternate;t!==null&&(e.alternate=null,Wc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[as],delete t[Oo],delete t[Mh],delete t[Ah])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $c(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$c(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=an));else if(i!==4&&(e=e.child,e!==null))for(Cl(e,t,r),e=e.sibling;e!==null;)Cl(e,t,r),e=e.sibling}function wl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(wl(e,t,r),e=e.sibling;e!==null;)wl(e,t,r),e=e.sibling}var _t=null,Zt=!1;function Ar(e,t,r){for(r=r.child;r!==null;)Kc(e,t,r),r=r.sibling}function Kc(e,t,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Kr,r)}catch{}switch(r.tag){case 5:Ct||Fi(r,t);case 6:var i=_t,a=Zt;_t=null,Ar(e,t,r),_t=i,Zt=a,_t!==null&&(Zt?(e=_t,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_t.removeChild(r.stateNode));break;case 18:_t!==null&&(Zt?(e=_t,r=r.stateNode,e.nodeType===8?Io(e.parentNode,r):e.nodeType===1&&Io(e,r),_r(e)):Io(_t,r.stateNode));break;case 4:i=_t,a=Zt,_t=r.stateNode.containerInfo,Zt=!0,Ar(e,t,r),_t=i,Zt=a;break;case 0:case 11:case 14:case 15:if(!Ct&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var d=a,L=d.destroy;d=d.tag,L!==void 0&&((d&2)!==0||(d&4)!==0)&&yl(r,t,L),a=a.next}while(a!==i)}Ar(e,t,r);break;case 1:if(!Ct&&(Fi(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(F){it(r,t,F)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(Ct=(i=Ct)||r.memoizedState!==null,Ar(e,t,r),Ct=i):Ar(e,t,r);break;default:Ar(e,t,r)}}function Vc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jh),t.forEach(function(i){var a=nd.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function er(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var d=e,L=t,F=L;e:for(;F!==null;){switch(F.tag){case 5:_t=F.stateNode,Zt=!1;break e;case 3:_t=F.stateNode.containerInfo,Zt=!0;break e;case 4:_t=F.stateNode.containerInfo,Zt=!0;break e}F=F.return}if(_t===null)throw Error(x(160));Kc(d,L,a),_t=null,Zt=!1;var $=a.alternate;$!==null&&($.return=null),a.return=null}catch(ie){it(a,t,ie)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qc(t,e),t=t.sibling}function qc(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(t,e),hr(e),i&4){try{ys(3,e,e.return),Pn(3,e)}catch(Me){it(e,e.return,Me)}try{ys(5,e,e.return)}catch(Me){it(e,e.return,Me)}}break;case 1:er(t,e),hr(e),i&512&&r!==null&&Fi(r,r.return);break;case 5:if(er(t,e),hr(e),i&512&&r!==null&&Fi(r,r.return),e.flags&32){var a=e.stateNode;try{ut(a,"")}catch(Me){it(e,e.return,Me)}}if(i&4&&(a=e.stateNode,a!=null)){var d=e.memoizedProps,L=r!==null?r.memoizedProps:d,F=e.type,$=e.updateQueue;if(e.updateQueue=null,$!==null)try{F==="input"&&d.type==="radio"&&d.name!=null&&Ve(a,d),Ui(F,L);var ie=Ui(F,d);for(L=0;L<$.length;L+=2){var ge=$[L],ye=$[L+1];ge==="style"?ci(a,ye):ge==="dangerouslySetInnerHTML"?sr(a,ye):ge==="children"?ut(a,ye):o(a,ge,ye,ie)}switch(F){case"input":Oe(a,d);break;case"textarea":ir(a,d);break;case"select":var _e=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!d.multiple;var Re=d.value;Re!=null?Rt(a,!!d.multiple,Re,!1):_e!==!!d.multiple&&(d.defaultValue!=null?Rt(a,!!d.multiple,d.defaultValue,!0):Rt(a,!!d.multiple,d.multiple?[]:"",!1))}a[as]=d}catch(Me){it(e,e.return,Me)}}break;case 6:if(er(t,e),hr(e),i&4){if(e.stateNode===null)throw Error(x(162));a=e.stateNode,d=e.memoizedProps;try{a.nodeValue=d}catch(Me){it(e,e.return,Me)}}break;case 3:if(er(t,e),hr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{_r(t.containerInfo)}catch(Me){it(e,e.return,Me)}break;case 4:er(t,e),hr(e);break;case 13:er(t,e),hr(e),a=e.child,a.flags&8192&&(d=a.memoizedState!==null,a.stateNode.isHidden=d,!d||a.alternate!==null&&a.alternate.memoizedState!==null||(kl=Qe())),i&4&&Vc(e);break;case 22:if(ge=r!==null&&r.memoizedState!==null,e.mode&1?(Ct=(ie=Ct)||ge,er(t,e),Ct=ie):er(t,e),hr(e),i&8192){if(ie=e.memoizedState!==null,(e.stateNode.isHidden=ie)&&!ge&&(e.mode&1)!==0)for(Te=e,ge=e.child;ge!==null;){for(ye=Te=ge;Te!==null;){switch(_e=Te,Re=_e.child,_e.tag){case 0:case 11:case 14:case 15:ys(4,_e,_e.return);break;case 1:Fi(_e,_e.return);var Pe=_e.stateNode;if(typeof Pe.componentWillUnmount=="function"){i=_e,r=_e.return;try{t=i,Pe.props=t.memoizedProps,Pe.state=t.memoizedState,Pe.componentWillUnmount()}catch(Me){it(i,r,Me)}}break;case 5:Fi(_e,_e.return);break;case 22:if(_e.memoizedState!==null){Xc(ye);continue}}Re!==null?(Re.return=_e,Te=Re):Xc(ye)}ge=ge.sibling}e:for(ge=null,ye=e;;){if(ye.tag===5){if(ge===null){ge=ye;try{a=ye.stateNode,ie?(d=a.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(F=ye.stateNode,$=ye.memoizedProps.style,L=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=ai("display",L))}catch(Me){it(e,e.return,Me)}}}else if(ye.tag===6){if(ge===null)try{ye.stateNode.nodeValue=ie?"":ye.memoizedProps}catch(Me){it(e,e.return,Me)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===e)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===e)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===e)break e;ge===ye&&(ge=null),ye=ye.return}ge===ye&&(ge=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:er(t,e),hr(e),i&4&&Vc(e);break;case 21:break;default:er(t,e),hr(e)}}function hr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($c(r)){var i=r;break e}r=r.return}throw Error(x(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(ut(a,""),i.flags&=-33);var d=Uc(e);wl(e,d,a);break;case 3:case 4:var L=i.stateNode.containerInfo,F=Uc(e);Cl(e,F,L);break;default:throw Error(x(161))}}catch($){it(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qh(e,t,r){Te=e,Gc(e)}function Gc(e,t,r){for(var i=(e.mode&1)!==0;Te!==null;){var a=Te,d=a.child;if(a.tag===22&&i){var L=a.memoizedState!==null||Tn;if(!L){var F=a.alternate,$=F!==null&&F.memoizedState!==null||Ct;F=Tn;var ie=Ct;if(Tn=L,(Ct=$)&&!ie)for(Te=a;Te!==null;)L=Te,$=L.child,L.tag===22&&L.memoizedState!==null?Qc(a):$!==null?($.return=L,Te=$):Qc(a);for(;d!==null;)Te=d,Gc(d),d=d.sibling;Te=a,Tn=F,Ct=ie}Jc(e)}else(a.subtreeFlags&8772)!==0&&d!==null?(d.return=a,Te=d):Jc(e)}}function Jc(e){for(;Te!==null;){var t=Te;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ct||Pn(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ct)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Yt(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Xa(t,d,i);break;case 3:var L=t.updateQueue;if(L!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Xa(t,L,r)}break;case 5:var F=t.stateNode;if(r===null&&t.flags&4){r=F;var $=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&r.focus();break;case"img":$.src&&(r.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var ie=t.alternate;if(ie!==null){var ge=ie.memoizedState;if(ge!==null){var ye=ge.dehydrated;ye!==null&&_r(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Ct||t.flags&512&&Sl(t)}catch(_e){it(t,t.return,_e)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function Xc(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function Qc(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Pn(4,t)}catch($){it(t,r,$)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch($){it(t,a,$)}}var d=t.return;try{Sl(t)}catch($){it(t,d,$)}break;case 5:var L=t.return;try{Sl(t)}catch($){it(t,L,$)}}}catch($){it(t,t.return,$)}if(t===e){Te=null;break}var F=t.sibling;if(F!==null){F.return=t.return,Te=F;break}Te=t.return}}var Yh=Math.ceil,Mn=f.ReactCurrentDispatcher,xl=f.ReactCurrentOwner,qt=f.ReactCurrentBatchConfig,We=0,dt=null,nt=null,gt=0,Ht=0,Hi=Lr(0),lt=0,Ss=null,ii=0,An=0,bl=0,Cs=null,Pt=null,kl=0,Ni=1/0,xr=null,Bn=!1,El=null,Br=null,In=!1,Ir=null,On=0,ws=0,Rl=null,jn=-1,Fn=0;function kt(){return(We&6)!==0?Qe():jn!==-1?jn:jn=Qe()}function Or(e){return(e.mode&1)===0?1:(We&2)!==0&&gt!==0?gt&-gt:Ih.transition!==null?(Fn===0&&(Fn=Ks()),Fn):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:Zl(e.type)),e)}function tr(e,t,r,i){if(50<ws)throw ws=0,Rl=null,Error(x(185));qr(e,r,i),((We&2)===0||e!==dt)&&(e===dt&&((We&2)===0&&(An|=r),lt===4&&jr(e,gt)),Mt(e,i),r===1&&We===0&&(t.mode&1)===0&&(Ni=Qe()+500,dn&&Tr()))}function Mt(e,t){var r=e.callbackNode;co(e,t);var i=pr(e,e===dt?gt:0);if(i===0)r!==null&&qi(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&qi(r),t===1)e.tag===0?Bh(Zc.bind(null,e)):Fa(Zc.bind(null,e)),Th(function(){(We&6)===0&&Tr()}),r=null;else{switch(Vs(i)){case 1:r=gi;break;case 4:r=Ws;break;case 16:r=vi;break;case 536870912:r=$s;break;default:r=vi}r=lu(r,Yc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Yc(e,t){if(jn=-1,Fn=0,(We&6)!==0)throw Error(x(327));var r=e.callbackNode;if(zi()&&e.callbackNode!==r)return null;var i=pr(e,e===dt?gt:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Hn(e,i);else{t=i;var a=We;We|=2;var d=tu();(dt!==e||gt!==t)&&(xr=null,Ni=Qe()+500,ni(e,t));do try{td();break}catch(F){eu(e,F)}while(!0);Ko(),Mn.current=d,We=a,nt!==null?t=0:(dt=null,gt=0,t=lt)}if(t!==0){if(t===2&&(a=Gi(e),a!==0&&(i=a,t=Ll(e,a))),t===1)throw r=Ss,ni(e,0),jr(e,i),Mt(e,Qe()),r;if(t===6)jr(e,i);else{if(a=e.current.alternate,(i&30)===0&&!Zh(a)&&(t=Hn(e,i),t===2&&(d=Gi(e),d!==0&&(i=d,t=Ll(e,d))),t===1))throw r=Ss,ni(e,0),jr(e,i),Mt(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(x(345));case 2:oi(e,Pt,xr);break;case 3:if(jr(e,i),(i&130023424)===i&&(t=kl+500-Qe(),10<t)){if(pr(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){kt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Bo(oi.bind(null,e,Pt,xr),t);break}oi(e,Pt,xr);break;case 4:if(jr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var L=31-It(i);d=1<<L,L=t[L],L>a&&(a=L),i&=~d}if(i=a,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yh(i/1960))-i,10<i){e.timeoutHandle=Bo(oi.bind(null,e,Pt,xr),i);break}oi(e,Pt,xr);break;case 5:oi(e,Pt,xr);break;default:throw Error(x(329))}}}return Mt(e,Qe()),e.callbackNode===r?Yc.bind(null,e):null}function Ll(e,t){var r=Cs;return e.current.memoizedState.isDehydrated&&(ni(e,t).flags|=256),e=Hn(e,t),e!==2&&(t=Pt,Pt=r,t!==null&&Dl(t)),e}function Dl(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Zh(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],d=a.getSnapshot;a=a.value;try{if(!Xt(d(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t){for(t&=~bl,t&=~An,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-It(t),i=1<<r;e[r]=-1,t&=~i}}function Zc(e){if((We&6)!==0)throw Error(x(327));zi();var t=pr(e,0);if((t&1)===0)return Mt(e,Qe()),null;var r=Hn(e,t);if(e.tag!==0&&r===2){var i=Gi(e);i!==0&&(t=i,r=Ll(e,i))}if(r===1)throw r=Ss,ni(e,0),jr(e,t),Mt(e,Qe()),r;if(r===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oi(e,Pt,xr),Mt(e,Qe()),null}function Tl(e,t){var r=We;We|=1;try{return e(t)}finally{We=r,We===0&&(Ni=Qe()+500,dn&&Tr())}}function si(e){Ir!==null&&Ir.tag===0&&(We&6)===0&&zi();var t=We;We|=1;var r=qt.transition,i=Ke;try{if(qt.transition=null,Ke=1,e)return e()}finally{Ke=i,qt.transition=r,We=t,(We&6)===0&&Tr()}}function Pl(){Ht=Hi.current,Xe(Hi)}function ni(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dh(r)),nt!==null)for(r=nt.return;r!==null;){var i=r;switch(No(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&un();break;case 3:Oi(),Xe(Lt),Xe(mt),Zo();break;case 5:Qo(i);break;case 4:Oi();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:Vo(i.type._context);break;case 22:case 23:Pl()}r=r.return}if(dt=e,nt=e=Fr(e.current,null),gt=Ht=t,lt=0,Ss=null,bl=An=ii=0,Pt=Cs=null,ei!==null){for(t=0;t<ei.length;t++)if(r=ei[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,d=r.pending;if(d!==null){var L=d.next;d.next=a,i.next=L}r.pending=i}ei=null}return e}function eu(e,t){do{var r=nt;try{if(Ko(),wn.current=En,xn){for(var i=rt.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}xn=!1}if(ri=0,ht=ot=rt=null,ps=!1,_s=0,xl.current=null,r===null||r.return===null){lt=1,Ss=t,nt=null;break}e:{var d=e,L=r.return,F=r,$=t;if(t=gt,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var ie=$,ge=F,ye=ge.tag;if((ge.mode&1)===0&&(ye===0||ye===11||ye===15)){var _e=ge.alternate;_e?(ge.updateQueue=_e.updateQueue,ge.memoizedState=_e.memoizedState,ge.lanes=_e.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Re=kc(L);if(Re!==null){Re.flags&=-257,Ec(Re,L,F,d,t),Re.mode&1&&bc(d,ie,t),t=Re,$=ie;var Pe=t.updateQueue;if(Pe===null){var Me=new Set;Me.add($),t.updateQueue=Me}else Pe.add($);break e}else{if((t&1)===0){bc(d,ie,t),Ml();break e}$=Error(x(426))}}else if(et&&F.mode&1){var st=kc(L);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),Ec(st,L,F,d,t),$o(ji($,F));break e}}d=$=ji($,F),lt!==4&&(lt=2),Cs===null?Cs=[d]:Cs.push(d),d=L;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var Q=wc(d,$,t);Ja(d,Q);break e;case 1:F=$;var V=d.type,Z=d.stateNode;if((d.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Br===null||!Br.has(Z)))){d.flags|=65536,t&=-t,d.lanes|=t;var xe=xc(d,F,t);Ja(d,xe);break e}}d=d.return}while(d!==null)}iu(r)}catch(Ae){t=Ae,nt===r&&r!==null&&(nt=r=r.return);continue}break}while(!0)}function tu(){var e=Mn.current;return Mn.current=En,e===null?En:e}function Ml(){(lt===0||lt===3||lt===2)&&(lt=4),dt===null||(ii&268435455)===0&&(An&268435455)===0||jr(dt,gt)}function Hn(e,t){var r=We;We|=2;var i=tu();(dt!==e||gt!==t)&&(xr=null,ni(e,t));do try{ed();break}catch(a){eu(e,a)}while(!0);if(Ko(),We=r,Mn.current=i,nt!==null)throw Error(x(261));return dt=null,gt=0,lt}function ed(){for(;nt!==null;)ru(nt)}function td(){for(;nt!==null&&!so();)ru(nt)}function ru(e){var t=ou(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?iu(e):nt=t,xl.current=null}function iu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=qh(r,t,Ht),r!==null){nt=r;return}}else{if(r=Gh(r,t),r!==null){r.flags&=32767,nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,nt=null;return}}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);lt===0&&(lt=5)}function oi(e,t,r){var i=Ke,a=qt.transition;try{qt.transition=null,Ke=1,rd(e,t,r,i)}finally{qt.transition=a,Ke=i}return null}function rd(e,t,r,i){do zi();while(Ir!==null);if((We&6)!==0)throw Error(x(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(uo(e,d),e===dt&&(nt=dt=null,gt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||In||(In=!0,lu(vi,function(){return zi(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=qt.transition,qt.transition=null;var L=Ke;Ke=1;var F=We;We|=4,xl.current=null,Xh(e,r),qc(r,e),wh(Mo),Jr=!!Po,Mo=Po=null,e.current=r,Qh(r),Ns(),We=F,Ke=L,qt.transition=d}else e.current=r;if(In&&(In=!1,Ir=e,On=a),d=e.pendingLanes,d===0&&(Br=null),lr(r.stateNode),Mt(e,Qe()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Bn)throw Bn=!1,e=El,El=null,e;return(On&1)!==0&&e.tag!==0&&zi(),d=e.pendingLanes,(d&1)!==0?e===Rl?ws++:(ws=0,Rl=e):ws=0,Tr(),null}function zi(){if(Ir!==null){var e=Vs(On),t=qt.transition,r=Ke;try{if(qt.transition=null,Ke=16>e?16:e,Ir===null)var i=!1;else{if(e=Ir,Ir=null,On=0,(We&6)!==0)throw Error(x(331));var a=We;for(We|=4,Te=e.current;Te!==null;){var d=Te,L=d.child;if((Te.flags&16)!==0){var F=d.deletions;if(F!==null){for(var $=0;$<F.length;$++){var ie=F[$];for(Te=ie;Te!==null;){var ge=Te;switch(ge.tag){case 0:case 11:case 15:ys(8,ge,d)}var ye=ge.child;if(ye!==null)ye.return=ge,Te=ye;else for(;Te!==null;){ge=Te;var _e=ge.sibling,Re=ge.return;if(Wc(ge),ge===ie){Te=null;break}if(_e!==null){_e.return=Re,Te=_e;break}Te=Re}}}var Pe=d.alternate;if(Pe!==null){var Me=Pe.child;if(Me!==null){Pe.child=null;do{var st=Me.sibling;Me.sibling=null,Me=st}while(Me!==null)}}Te=d}}if((d.subtreeFlags&2064)!==0&&L!==null)L.return=d,Te=L;else e:for(;Te!==null;){if(d=Te,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:ys(9,d,d.return)}var Q=d.sibling;if(Q!==null){Q.return=d.return,Te=Q;break e}Te=d.return}}var V=e.current;for(Te=V;Te!==null;){L=Te;var Z=L.child;if((L.subtreeFlags&2064)!==0&&Z!==null)Z.return=L,Te=Z;else e:for(L=V;Te!==null;){if(F=Te,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Pn(9,F)}}catch(Ae){it(F,F.return,Ae)}if(F===L){Te=null;break e}var xe=F.sibling;if(xe!==null){xe.return=F.return,Te=xe;break e}Te=F.return}}if(We=a,Tr(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Kr,e)}catch{}i=!0}return i}finally{Ke=r,qt.transition=t}}return!1}function su(e,t,r){t=ji(r,t),t=wc(e,t,1),e=Mr(e,t,1),t=kt(),e!==null&&(qr(e,1,t),Mt(e,t))}function it(e,t,r){if(e.tag===3)su(e,e,r);else for(;t!==null;){if(t.tag===3){su(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Br===null||!Br.has(i))){e=ji(r,e),e=xc(t,e,1),t=Mr(t,e,1),e=kt(),t!==null&&(qr(t,1,e),Mt(t,e));break}}t=t.return}}function id(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=kt(),e.pingedLanes|=e.suspendedLanes&r,dt===e&&(gt&r)===r&&(lt===4||lt===3&&(gt&130023424)===gt&&500>Qe()-kl?ni(e,0):bl|=r),Mt(e,t)}function nu(e,t){t===0&&((e.mode&1)===0?t=1:(t=yi,yi<<=1,(yi&130023424)===0&&(yi=4194304)));var r=kt();e=Sr(e,t),e!==null&&(qr(e,t,r),Mt(e,r))}function sd(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nu(e,r)}function nd(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(x(314))}i!==null&&i.delete(t),nu(e,r)}var ou;ou=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lt.current)Tt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Tt=!1,Vh(e,t,r);Tt=(e.flags&131072)!==0}else Tt=!1,et&&(t.flags&1048576)!==0&&Ha(t,pn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Dn(e,t),e=t.pendingProps;var a=Di(t,mt.current);Ii(t,r),a=rl(null,t,i,e,a,r);var d=il();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(i)?(d=!0,hn(t)):d=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jo(t),a.updater=Rn,t.stateNode=a,a._reactInternals=t,cl(t,i,e,r),t=fl(null,t,i,!0,d,r)):(t.tag=0,et&&d&&Ho(t),bt(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Dn(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=ld(i),e=Yt(i,e),a){case 0:t=dl(null,t,i,e,r);break e;case 1:t=Mc(null,t,i,e,r);break e;case 11:t=Rc(null,t,i,e,r);break e;case 14:t=Lc(null,t,i,Yt(i.type,e),r);break e}throw Error(x(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Yt(i,a),dl(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Yt(i,a),Mc(e,t,i,a,r);case 3:e:{if(Ac(t),e===null)throw Error(x(387));i=t.pendingProps,d=t.memoizedState,a=d.element,Ga(e,t),Sn(t,i,null,r);var L=t.memoizedState;if(i=L.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){a=ji(Error(x(423)),t),t=Bc(e,t,i,r,a);break e}else if(i!==a){a=ji(Error(x(424)),t),t=Bc(e,t,i,r,a);break e}else for(Ft=Rr(t.stateNode.containerInfo.firstChild),jt=t,et=!0,Qt=null,r=Va(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mi(),i===a){t=wr(e,t,r);break e}bt(e,t,i,r)}t=t.child}return t;case 5:return Qa(t),e===null&&Wo(t),i=t.type,a=t.pendingProps,d=e!==null?e.memoizedProps:null,L=a.children,Ao(i,a)?L=null:d!==null&&Ao(i,d)&&(t.flags|=32),Pc(e,t),bt(e,t,L,r),t.child;case 6:return e===null&&Wo(t),null;case 13:return Ic(e,t,r);case 4:return Xo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ai(t,null,i,r):bt(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Yt(i,a),Rc(e,t,i,a,r);case 7:return bt(e,t,t.pendingProps,r),t.child;case 8:return bt(e,t,t.pendingProps.children,r),t.child;case 12:return bt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,d=t.memoizedProps,L=a.value,qe(vn,i._currentValue),i._currentValue=L,d!==null)if(Xt(d.value,L)){if(d.children===a.children&&!Lt.current){t=wr(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var F=d.dependencies;if(F!==null){L=d.child;for(var $=F.firstContext;$!==null;){if($.context===i){if(d.tag===1){$=Cr(-1,r&-r),$.tag=2;var ie=d.updateQueue;if(ie!==null){ie=ie.shared;var ge=ie.pending;ge===null?$.next=$:($.next=ge.next,ge.next=$),ie.pending=$}}d.lanes|=r,$=d.alternate,$!==null&&($.lanes|=r),qo(d.return,r,t),F.lanes|=r;break}$=$.next}}else if(d.tag===10)L=d.type===t.type?null:d.child;else if(d.tag===18){if(L=d.return,L===null)throw Error(x(341));L.lanes|=r,F=L.alternate,F!==null&&(F.lanes|=r),qo(L,r,t),L=d.sibling}else L=d.child;if(L!==null)L.return=d;else for(L=d;L!==null;){if(L===t){L=null;break}if(d=L.sibling,d!==null){d.return=L.return,L=d;break}L=L.return}d=L}bt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Ii(t,r),a=Kt(a),i=i(a),t.flags|=1,bt(e,t,i,r),t.child;case 14:return i=t.type,a=Yt(i,t.pendingProps),a=Yt(i.type,a),Lc(e,t,i,a,r);case 15:return Dc(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Yt(i,a),Dn(e,t),t.tag=1,Dt(i)?(e=!0,hn(t)):e=!1,Ii(t,r),Sc(t,i,a),cl(t,i,a,r),fl(null,t,i,!0,e,r);case 19:return jc(e,t,r);case 22:return Tc(e,t,r)}throw Error(x(156,t.tag))};function lu(e,t){return Hs(e,t)}function od(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,r,i){return new od(e,t,r,i)}function Al(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ld(e){if(typeof e=="function")return Al(e)?1:0;if(e!=null){if(e=e.$$typeof,e===G)return 11;if(e===X)return 14}return 2}function Fr(e,t){var r=e.alternate;return r===null?(r=Gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nn(e,t,r,i,a,d){var L=2;if(i=e,typeof e=="function")Al(e)&&(L=1);else if(typeof e=="string")L=5;else e:switch(e){case b:return li(r.children,a,d,t);case _:L=8,a|=8;break;case D:return e=Gt(12,r,t,a|2),e.elementType=D,e.lanes=d,e;case j:return e=Gt(13,r,t,a),e.elementType=j,e.lanes=d,e;case te:return e=Gt(19,r,t,a),e.elementType=te,e.lanes=d,e;case pe:return zn(r,a,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:L=10;break e;case z:L=9;break e;case G:L=11;break e;case X:L=14;break e;case le:L=16,i=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=Gt(L,r,t,a),t.elementType=e,t.type=i,t.lanes=d,t}function li(e,t,r,i){return e=Gt(7,e,i,t),e.lanes=r,e}function zn(e,t,r,i){return e=Gt(22,e,i,t),e.elementType=pe,e.lanes=r,e.stateNode={isHidden:!1},e}function Bl(e,t,r){return e=Gt(6,e,null,t),e.lanes=r,e}function Il(e,t,r){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ad(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ji(0),this.expirationTimes=Ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ol(e,t,r,i,a,d,L,F,$){return e=new ad(e,t,r,F,$),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Gt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(d),e}function cd(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function au(e){if(!e)return Dr;e=e._reactInternals;e:{if(nr(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var r=e.type;if(Dt(r))return Oa(e,r,t)}return t}function cu(e,t,r,i,a,d,L,F,$){return e=Ol(r,i,!0,e,a,d,L,F,$),e.context=au(null),r=e.current,i=kt(),a=Or(r),d=Cr(i,a),d.callback=t??null,Mr(r,d,a),e.current.lanes=a,qr(e,a,i),Mt(e,i),e}function Wn(e,t,r,i){var a=t.current,d=kt(),L=Or(a);return r=au(r),t.context===null?t.context=r:t.pendingContext=r,t=Cr(d,L),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Mr(a,t,L),e!==null&&(tr(e,a,L,d),yn(e,a,L)),L}function $n(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jl(e,t){uu(e,t),(e=e.alternate)&&uu(e,t)}function ud(){return null}var hu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fl(e){this._internalRoot=e}Un.prototype.render=Fl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));Wn(e,t,null,null)},Un.prototype.unmount=Fl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;si(function(){Wn(null,e,null,null)}),t[gr]=null}};function Un(e){this._internalRoot=e}Un.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<we.length&&t!==0&&t<we[r].priority;r++);we.splice(r,0,e),r===0&&De(e)}};function Hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function du(){}function hd(e,t,r,i,a){if(a){if(typeof i=="function"){var d=i;i=function(){var ie=$n(L);d.call(ie)}}var L=cu(t,i,e,0,null,!1,!1,"",du);return e._reactRootContainer=L,e[gr]=L.current,os(e.nodeType===8?e.parentNode:e),si(),L}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var F=i;i=function(){var ie=$n($);F.call(ie)}}var $=Ol(e,0,!1,null,null,!1,!1,"",du);return e._reactRootContainer=$,e[gr]=$.current,os(e.nodeType===8?e.parentNode:e),si(function(){Wn(t,$,r,i)}),$}function Vn(e,t,r,i,a){var d=r._reactRootContainer;if(d){var L=d;if(typeof a=="function"){var F=a;a=function(){var $=$n(L);F.call($)}}Wn(t,L,e,a)}else L=hd(r,t,e,a,i);return $n(L)}qs=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vr(t.pendingLanes);r!==0&&(Xi(t,r|1),Mt(t,Qe()),(We&6)===0&&(Ni=Qe()+500,Tr()))}break;case 13:si(function(){var i=Sr(e,1);if(i!==null){var a=kt();tr(i,e,1,a)}}),jl(e,1)}},Qi=function(e){if(e.tag===13){var t=Sr(e,134217728);if(t!==null){var r=kt();tr(t,e,134217728,r)}jl(e,134217728)}},Si=function(e){if(e.tag===13){var t=Or(e),r=Sr(e,t);if(r!==null){var i=kt();tr(r,e,t,i)}jl(e,t)}},Gr=function(){return Ke},Gs=function(e,t){var r=Ke;try{return Ke=e,t()}finally{Ke=r}},Ms=function(e,t,r){switch(t){case"input":if(Oe(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=cn(i);if(!a)throw Error(x(90));Ee(i),Oe(i,a)}}}break;case"textarea":ir(e,r);break;case"select":t=r.value,t!=null&&Rt(e,!!r.multiple,t,!1)}},As=Tl,to=si;var dd={usingClientEntryPoint:!1,Events:[cs,Ri,cn,eo,ui,Tl]},xs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fd={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=M(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||ud,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qn.isDisabled&&qn.supportsFiber)try{Kr=qn.inject(fd),Wt=qn}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dd,At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hl(t))throw Error(x(200));return cd(e,t,null,r)},At.createRoot=function(e,t){if(!Hl(e))throw Error(x(299));var r=!1,i="",a=hu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ol(e,1,!1,null,null,r,!1,i,a),e[gr]=t.current,os(e.nodeType===8?e.parentNode:e),new Fl(t)},At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=M(t),e=e===null?null:e.stateNode,e},At.flushSync=function(e){return si(e)},At.hydrate=function(e,t,r){if(!Kn(t))throw Error(x(200));return Vn(null,e,t,!0,r)},At.hydrateRoot=function(e,t,r){if(!Hl(e))throw Error(x(405));var i=r!=null&&r.hydratedSources||null,a=!1,d="",L=hu;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(L=r.onRecoverableError)),t=cu(t,null,e,1,r??null,a,!1,d,L),e[gr]=t.current,os(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Un(t)},At.render=function(e,t,r){if(!Kn(t))throw Error(x(200));return Vn(null,e,t,!1,r)},At.unmountComponentAtNode=function(e){if(!Kn(e))throw Error(x(40));return e._reactRootContainer?(si(function(){Vn(null,null,e,!1,function(){e._reactRootContainer=null,e[gr]=null})}),!0):!1},At.unstable_batchedUpdates=Tl,At.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Kn(r))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return Vn(e,t,r,!1,i)},At.version="18.3.1-next-f1338f8080-20240426",At}var Su;function xd(){if(Su)return Wl.exports;Su=1;function O(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O)}catch(W){console.error(W)}}return O(),Wl.exports=wd(),Wl.exports}var Cu;function bd(){if(Cu)return Gn;Cu=1;var O=xd();return Gn.createRoot=O.createRoot,Gn.hydrateRoot=O.hydrateRoot,Gn}var kd=bd();const Ed="modulepreload",Rd=function(O){return"/"+O},wu={},Ld=function(W,x,ee){let J=Promise.resolve();if(x&&x.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const U=document.querySelector("meta[property=csp-nonce]"),c=U?.nonce||U?.getAttribute("nonce");J=u(x.map(p=>{if(p=Rd(p),p in wu)return;wu[p]=!0;const y=p.endsWith(".css"),h=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${h}`))return;const m=document.createElement("link");if(m.rel=y?"stylesheet":Ed,y||(m.as="script"),m.crossOrigin="",m.href=p,c&&m.setAttribute("nonce",c),document.head.appendChild(m),y)return new Promise((w,k)=>{m.addEventListener("load",w),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function ve(U){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=U,window.dispatchEvent(c),!c.defaultPrevented)throw U}return J.then(U=>{for(const c of U||[])c.status==="rejected"&&ve(c.reason);return W().catch(ve)})};function xu(O,W){(W==null||W>O.length)&&(W=O.length);for(var x=0,ee=Array(W);x<W;x++)ee[x]=O[x];return ee}function Dd(O){if(Array.isArray(O))return O}function Td(O,W,x){return(W=jd(W))in O?Object.defineProperty(O,W,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[W]=x,O}function Pd(O,W){var x=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(x!=null){var ee,J,ve,U,c=[],u=!0,p=!1;try{if(ve=(x=x.call(O)).next,W!==0)for(;!(u=(ee=ve.call(x)).done)&&(c.push(ee.value),c.length!==W);u=!0);}catch(y){p=!0,J=y}finally{try{if(!u&&x.return!=null&&(U=x.return(),Object(U)!==U))return}finally{if(p)throw J}}return c}}function Md(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bu(O,W){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(O);W&&(ee=ee.filter(function(J){return Object.getOwnPropertyDescriptor(O,J).enumerable})),x.push.apply(x,ee)}return x}function ku(O){for(var W=1;W<arguments.length;W++){var x=arguments[W]!=null?arguments[W]:{};W%2?bu(Object(x),!0).forEach(function(ee){Td(O,ee,x[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):bu(Object(x)).forEach(function(ee){Object.defineProperty(O,ee,Object.getOwnPropertyDescriptor(x,ee))})}return O}function Ad(O,W){if(O==null)return{};var x,ee,J=Bd(O,W);if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(O);for(ee=0;ee<ve.length;ee++)x=ve[ee],W.indexOf(x)===-1&&{}.propertyIsEnumerable.call(O,x)&&(J[x]=O[x])}return J}function Bd(O,W){if(O==null)return{};var x={};for(var ee in O)if({}.hasOwnProperty.call(O,ee)){if(W.indexOf(ee)!==-1)continue;x[ee]=O[ee]}return x}function Id(O,W){return Dd(O)||Pd(O,W)||Fd(O,W)||Md()}function Od(O,W){if(typeof O!="object"||!O)return O;var x=O[Symbol.toPrimitive];if(x!==void 0){var ee=x.call(O,W);if(typeof ee!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(O)}function jd(O){var W=Od(O,"string");return typeof W=="symbol"?W:W+""}function Fd(O,W){if(O){if(typeof O=="string")return xu(O,W);var x={}.toString.call(O).slice(8,-1);return x==="Object"&&O.constructor&&(x=O.constructor.name),x==="Map"||x==="Set"?Array.from(O):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?xu(O,W):void 0}}function Hd(O,W,x){return W in O?Object.defineProperty(O,W,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[W]=x,O}function Eu(O,W){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(O);W&&(ee=ee.filter(function(J){return Object.getOwnPropertyDescriptor(O,J).enumerable})),x.push.apply(x,ee)}return x}function Ru(O){for(var W=1;W<arguments.length;W++){var x=arguments[W]!=null?arguments[W]:{};W%2?Eu(Object(x),!0).forEach(function(ee){Hd(O,ee,x[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):Eu(Object(x)).forEach(function(ee){Object.defineProperty(O,ee,Object.getOwnPropertyDescriptor(x,ee))})}return O}function Nd(){for(var O=arguments.length,W=new Array(O),x=0;x<O;x++)W[x]=arguments[x];return function(ee){return W.reduceRight(function(J,ve){return ve(J)},ee)}}function Es(O){return function W(){for(var x=this,ee=arguments.length,J=new Array(ee),ve=0;ve<ee;ve++)J[ve]=arguments[ve];return J.length>=O.length?O.apply(this,J):function(){for(var U=arguments.length,c=new Array(U),u=0;u<U;u++)c[u]=arguments[u];return W.apply(x,[].concat(J,c))}}}function Qn(O){return{}.toString.call(O).includes("Object")}function zd(O){return!Object.keys(O).length}function Ls(O){return typeof O=="function"}function Wd(O,W){return Object.prototype.hasOwnProperty.call(O,W)}function $d(O,W){return Qn(W)||Nr("changeType"),Object.keys(W).some(function(x){return!Wd(O,x)})&&Nr("changeField"),W}function Ud(O){Ls(O)||Nr("selectorType")}function Kd(O){Ls(O)||Qn(O)||Nr("handlerType"),Qn(O)&&Object.values(O).some(function(W){return!Ls(W)})&&Nr("handlersType")}function Vd(O){O||Nr("initialIsRequired"),Qn(O)||Nr("initialType"),zd(O)&&Nr("initialContent")}function qd(O,W){throw new Error(O[W]||O.default)}var Gd={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Nr=Es(qd)(Gd),Jn={changes:$d,selector:Ud,handler:Kd,initial:Vd};function Jd(O){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jn.initial(O),Jn.handler(W);var x={current:O},ee=Es(Yd)(x,W),J=Es(Qd)(x),ve=Es(Jn.changes)(O),U=Es(Xd)(x);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(y){return y};return Jn.selector(p),p(x.current)}function u(p){Nd(ee,J,ve,U)(p)}return[c,u]}function Xd(O,W){return Ls(W)?W(O.current):W}function Qd(O,W){return O.current=Ru(Ru({},O.current),W),W}function Yd(O,W,x){return Ls(W)?W(O.current):Object.keys(x).forEach(function(ee){var J;return(J=W[ee])===null||J===void 0?void 0:J.call(W,O.current[ee])}),x}var Zd={create:Jd},ef={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function tf(O){return function W(){for(var x=this,ee=arguments.length,J=new Array(ee),ve=0;ve<ee;ve++)J[ve]=arguments[ve];return J.length>=O.length?O.apply(this,J):function(){for(var U=arguments.length,c=new Array(U),u=0;u<U;u++)c[u]=arguments[u];return W.apply(x,[].concat(J,c))}}}function rf(O){return{}.toString.call(O).includes("Object")}function sf(O){return O||Lu("configIsRequired"),rf(O)||Lu("configType"),O.urls?(nf(),{paths:{vs:O.urls.monacoBase}}):O}function nf(){console.warn(Mu.deprecation)}function of(O,W){throw new Error(O[W]||O.default)}var Mu={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Lu=tf(of)(Mu),lf={config:sf},af=function(){for(var W=arguments.length,x=new Array(W),ee=0;ee<W;ee++)x[ee]=arguments[ee];return function(J){return x.reduceRight(function(ve,U){return U(ve)},J)}};function Au(O,W){return Object.keys(W).forEach(function(x){W[x]instanceof Object&&O[x]&&Object.assign(W[x],Au(O[x],W[x]))}),ku(ku({},O),W)}var cf={type:"cancelation",msg:"operation is manually canceled"};function Kl(O){var W=!1,x=new Promise(function(ee,J){O.then(function(ve){return W?J(cf):ee(ve)}),O.catch(J)});return x.cancel=function(){return W=!0},x}var uf=["monaco"],hf=Zd.create({config:ef,isInitialized:!1,resolve:null,reject:null,monaco:null}),Bu=Id(hf,2),Ds=Bu[0],Yn=Bu[1];function df(O){var W=lf.config(O),x=W.monaco,ee=Ad(W,uf);Yn(function(J){return{config:Au(J.config,ee),monaco:x}})}function ff(){var O=Ds(function(W){var x=W.monaco,ee=W.isInitialized,J=W.resolve;return{monaco:x,isInitialized:ee,resolve:J}});if(!O.isInitialized){if(Yn({isInitialized:!0}),O.monaco)return O.resolve(O.monaco),Kl(Vl);if(window.monaco&&window.monaco.editor)return Iu(window.monaco),O.resolve(window.monaco),Kl(Vl);af(pf,gf)(vf)}return Kl(Vl)}function pf(O){return document.body.appendChild(O)}function _f(O){var W=document.createElement("script");return O&&(W.src=O),W}function gf(O){var W=Ds(function(ee){var J=ee.config,ve=ee.reject;return{config:J,reject:ve}}),x=_f("".concat(W.config.paths.vs,"/loader.js"));return x.onload=function(){return O()},x.onerror=W.reject,x}function vf(){var O=Ds(function(x){var ee=x.config,J=x.resolve,ve=x.reject;return{config:ee,resolve:J,reject:ve}}),W=window.require;W.config(O.config),W(["vs/editor/editor.main"],function(x){var ee=x.m;Iu(ee),O.resolve(ee)},function(x){O.reject(x)})}function Iu(O){Ds().monaco||Yn({monaco:O})}function mf(){return Ds(function(O){var W=O.monaco;return W})}var Vl=new Promise(function(O,W){return Yn({resolve:O,reject:W})}),Ou={config:df,init:ff,__getMonacoInstance:mf},yf={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ql=yf,Sf={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Cf=Sf;function wf({children:O}){return Jt.createElement("div",{style:Cf.container},O)}var xf=wf,bf=xf;function kf({width:O,height:W,isEditorReady:x,loading:ee,_ref:J,className:ve,wrapperProps:U}){return Jt.createElement("section",{style:{...ql.wrapper,width:O,height:W},...U},!x&&Jt.createElement(bf,null,ee),Jt.createElement("div",{ref:J,style:{...ql.fullWidth,...!x&&ql.hide},className:ve}))}var Ef=kf,ju=fe.memo(Ef);function Rf(O){fe.useEffect(O,[])}var Fu=Rf;function Lf(O,W,x=!0){let ee=fe.useRef(!0);fe.useEffect(ee.current||!x?()=>{ee.current=!1}:O,W)}var zt=Lf;function Rs(){}function Wi(O,W,x,ee){return Df(O,ee)||Tf(O,W,x,ee)}function Df(O,W){return O.editor.getModel(Hu(O,W))}function Tf(O,W,x,ee){return O.editor.createModel(W,x,ee?Hu(O,ee):void 0)}function Hu(O,W){return O.Uri.parse(W)}function Pf({original:O,modified:W,language:x,originalLanguage:ee,modifiedLanguage:J,originalModelPath:ve,modifiedModelPath:U,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:u=!1,theme:p="light",loading:y="Loading...",options:h={},height:m="100%",width:w="100%",className:k,wrapperProps:g={},beforeMount:n=Rs,onMount:l=Rs}){let[s,o]=fe.useState(!1),[f,S]=fe.useState(!0),C=fe.useRef(null),b=fe.useRef(null),_=fe.useRef(null),D=fe.useRef(l),N=fe.useRef(n),z=fe.useRef(!1);Fu(()=>{let X=Ou.init();return X.then(le=>(b.current=le)&&S(!1)).catch(le=>le?.type!=="cancelation"&&console.error("Monaco initialization: error:",le)),()=>C.current?te():X.cancel()}),zt(()=>{if(C.current&&b.current){let X=C.current.getOriginalEditor(),le=Wi(b.current,O||"",ee||x||"text",ve||"");le!==X.getModel()&&X.setModel(le)}},[ve],s),zt(()=>{if(C.current&&b.current){let X=C.current.getModifiedEditor(),le=Wi(b.current,W||"",J||x||"text",U||"");le!==X.getModel()&&X.setModel(le)}},[U],s),zt(()=>{let X=C.current.getModifiedEditor();X.getOption(b.current.editor.EditorOption.readOnly)?X.setValue(W||""):W!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:W||"",forceMoveMarkers:!0}]),X.pushUndoStop())},[W],s),zt(()=>{C.current?.getModel()?.original.setValue(O||"")},[O],s),zt(()=>{let{original:X,modified:le}=C.current.getModel();b.current.editor.setModelLanguage(X,ee||x||"text"),b.current.editor.setModelLanguage(le,J||x||"text")},[x,ee,J],s),zt(()=>{b.current?.editor.setTheme(p)},[p],s),zt(()=>{C.current?.updateOptions(h)},[h],s);let G=fe.useCallback(()=>{if(!b.current)return;N.current(b.current);let X=Wi(b.current,O||"",ee||x||"text",ve||""),le=Wi(b.current,W||"",J||x||"text",U||"");C.current?.setModel({original:X,modified:le})},[x,W,J,O,ee,ve,U]),j=fe.useCallback(()=>{!z.current&&_.current&&(C.current=b.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...h}),G(),b.current?.editor.setTheme(p),o(!0),z.current=!0)},[h,p,G]);fe.useEffect(()=>{s&&D.current(C.current,b.current)},[s]),fe.useEffect(()=>{!f&&!s&&j()},[f,s,j]);function te(){let X=C.current?.getModel();c||X?.original?.dispose(),u||X?.modified?.dispose(),C.current?.dispose()}return Jt.createElement(ju,{width:w,height:m,isEditorReady:s,loading:y,_ref:_,className:k,wrapperProps:g})}var Mf=Pf;fe.memo(Mf);function Af(O){let W=fe.useRef();return fe.useEffect(()=>{W.current=O},[O]),W.current}var Bf=Af,Xn=new Map;function If({defaultValue:O,defaultLanguage:W,defaultPath:x,value:ee,language:J,path:ve,theme:U="light",line:c,loading:u="Loading...",options:p={},overrideServices:y={},saveViewState:h=!0,keepCurrentModel:m=!1,width:w="100%",height:k="100%",className:g,wrapperProps:n={},beforeMount:l=Rs,onMount:s=Rs,onChange:o,onValidate:f=Rs}){let[S,C]=fe.useState(!1),[b,_]=fe.useState(!0),D=fe.useRef(null),N=fe.useRef(null),z=fe.useRef(null),G=fe.useRef(s),j=fe.useRef(l),te=fe.useRef(),X=fe.useRef(ee),le=Bf(ve),pe=fe.useRef(!1),Y=fe.useRef(!1);Fu(()=>{let E=Ou.init();return E.then(A=>(D.current=A)&&_(!1)).catch(A=>A?.type!=="cancelation"&&console.error("Monaco initialization: error:",A)),()=>N.current?I():E.cancel()}),zt(()=>{let E=Wi(D.current,O||ee||"",W||J||"",ve||x||"");E!==N.current?.getModel()&&(h&&Xn.set(le,N.current?.saveViewState()),N.current?.setModel(E),h&&N.current?.restoreViewState(Xn.get(ve)))},[ve],S),zt(()=>{N.current?.updateOptions(p)},[p],S),zt(()=>{!N.current||ee===void 0||(N.current.getOption(D.current.editor.EditorOption.readOnly)?N.current.setValue(ee):ee!==N.current.getValue()&&(Y.current=!0,N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:ee,forceMoveMarkers:!0}]),N.current.pushUndoStop(),Y.current=!1))},[ee],S),zt(()=>{let E=N.current?.getModel();E&&J&&D.current?.editor.setModelLanguage(E,J)},[J],S),zt(()=>{c!==void 0&&N.current?.revealLine(c)},[c],S),zt(()=>{D.current?.editor.setTheme(U)},[U],S);let R=fe.useCallback(()=>{if(!(!z.current||!D.current)&&!pe.current){j.current(D.current);let E=ve||x,A=Wi(D.current,ee||O||"",W||J||"",E||"");N.current=D.current?.editor.create(z.current,{model:A,automaticLayout:!0,...p},y),h&&N.current.restoreViewState(Xn.get(E)),D.current.editor.setTheme(U),c!==void 0&&N.current.revealLine(c),C(!0),pe.current=!0}},[O,W,x,ee,J,ve,p,y,h,U,c]);fe.useEffect(()=>{S&&G.current(N.current,D.current)},[S]),fe.useEffect(()=>{!b&&!S&&R()},[b,S,R]),X.current=ee,fe.useEffect(()=>{S&&o&&(te.current?.dispose(),te.current=N.current?.onDidChangeModelContent(E=>{Y.current||o(N.current.getValue(),E)}))},[S,o]),fe.useEffect(()=>{if(S){let E=D.current.editor.onDidChangeMarkers(A=>{let se=N.current.getModel()?.uri;if(se&&A.find(ce=>ce.path===se.path)){let ce=D.current.editor.getModelMarkers({resource:se});f?.(ce)}});return()=>{E?.dispose()}}return()=>{}},[S,f]);function I(){te.current?.dispose(),m?h&&Xn.set(ve,N.current.saveViewState()):N.current.getModel()?.dispose(),N.current.dispose()}return Jt.createElement(ju,{width:w,height:k,isEditorReady:S,loading:u,_ref:z,className:g,wrapperProps:n})}var Of=If,jf=fe.memo(Of),Ff=jf,Gl={exports:{}},Du;function Hf(){return Du||(Du=1,(function(O,W){(function(x,ee){O.exports=ee()})(globalThis,(()=>(()=>{var x={4567:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,S){var C,b=arguments.length,_=b<3?o:S===null?S=Object.getOwnPropertyDescriptor(o,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(s,o,f,S);else for(var D=s.length-1;D>=0;D--)(C=s[D])&&(_=(b<3?C(_):b>3?C(o,f,_):C(o,f))||_);return b>3&&_&&Object.defineProperty(o,f,_),_},y=this&&this.__param||function(s,o){return function(f,S){o(f,S,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.AccessibilityManager=void 0;const h=u(9042),m=u(9924),w=u(844),k=u(4725),g=u(2585),n=u(3656);let l=c.AccessibilityManager=class extends w.Disposable{constructor(s,o,f,S){super(),this._terminal=s,this._coreBrowserService=f,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((C=>this._handleResize(C.rows)))),this.register(this._terminal.onRender((C=>this._refreshRows(C.start,C.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((C=>this._handleChar(C)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((C=>this._handleTab(C)))),this.register(this._terminal.onKey((C=>this._handleKey(C.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,n.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,w.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(s){for(let o=0;o<s;o++)this._handleChar(" ")}_handleChar(s){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(s){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(s)||this._charsToConsume.push(s)}_refreshRows(s,o){this._liveRegionDebouncer.refresh(s,o,this._terminal.rows)}_renderRows(s,o){const f=this._terminal.buffer,S=f.lines.length.toString();for(let C=s;C<=o;C++){const b=f.lines.get(f.ydisp+C),_=[],D=b?.translateToString(!0,void 0,void 0,_)||"",N=(f.ydisp+C+1).toString(),z=this._rowElements[C];z&&(D.length===0?(z.innerText="",this._rowColumns.set(z,[0,1])):(z.textContent=D,this._rowColumns.set(z,_)),z.setAttribute("aria-posinset",N),z.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(s,o){const f=s.target,S=this._rowElements[o===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(o===0?"1":`${this._terminal.buffer.lines.length}`)||s.relatedTarget!==S)return;let C,b;if(o===0?(C=f,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(C=this._rowElements.shift(),b=f,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),o===0){const _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{const _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(o===0?-1:1),this._rowElements[o===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const s=document.getSelection();if(!s)return;if(s.isCollapsed)return void(this._rowContainer.contains(s.anchorNode)&&this._terminal.clearSelection());if(!s.anchorNode||!s.focusNode)return void console.error("anchorNode and/or focusNode are null");let o={node:s.anchorNode,offset:s.anchorOffset},f={node:s.focusNode,offset:s.focusOffset};if((o.node.compareDocumentPosition(f.node)&Node.DOCUMENT_POSITION_PRECEDING||o.node===f.node&&o.offset>f.offset)&&([o,f]=[f,o]),o.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(o={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(o.node))return;const S=this._rowElements.slice(-1)[0];if(f.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(f={node:S,offset:S.textContent?.length??0}),!this._rowContainer.contains(f.node))return;const C=({node:D,offset:N})=>{const z=D instanceof Text?D.parentNode:D;let G=parseInt(z?.getAttribute("aria-posinset"),10)-1;if(isNaN(G))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(z);if(!j)return console.warn("columns is null. Race condition?"),null;let te=N<j.length?j[N]:j.slice(-1)[0]+1;return te>=this._terminal.cols&&(++G,te=0),{row:G,column:te}},b=C(o),_=C(f);if(b&&_){if(b.row>_.row||b.row===_.row&&b.column>=_.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(_.row-b.row)*this._terminal.cols-b.column+_.column)}}_handleResize(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let o=this._rowContainer.children.length;o<this._terminal.rows;o++)this._rowElements[o]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[o]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const s=this._coreBrowserService.mainDocument.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}}_refreshRowDimensions(s){s.style.height=`${this._renderService.dimensions.css.cell.height}px`}};c.AccessibilityManager=l=p([y(1,g.IInstantiationService),y(2,k.ICoreBrowserService),y(3,k.IRenderService)],l)},3614:(U,c)=>{function u(m){return m.replace(/\r?\n/g,"\r")}function p(m,w){return w?"\x1B[200~"+m+"\x1B[201~":m}function y(m,w,k,g){m=p(m=u(m),k.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),k.triggerDataEvent(m,!0),w.value=""}function h(m,w,k){const g=k.getBoundingClientRect(),n=m.clientX-g.left-10,l=m.clientY-g.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${l}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(c,"__esModule",{value:!0}),c.rightClickHandler=c.moveTextAreaUnderMouseCursor=c.paste=c.handlePasteEvent=c.copyHandler=c.bracketTextForPaste=c.prepareTextForTerminal=void 0,c.prepareTextForTerminal=u,c.bracketTextForPaste=p,c.copyHandler=function(m,w){m.clipboardData&&m.clipboardData.setData("text/plain",w.selectionText),m.preventDefault()},c.handlePasteEvent=function(m,w,k,g){m.stopPropagation(),m.clipboardData&&y(m.clipboardData.getData("text/plain"),w,k,g)},c.paste=y,c.moveTextAreaUnderMouseCursor=h,c.rightClickHandler=function(m,w,k,g,n){h(m,w,k),n&&g.rightClickSelect(m),w.value=g.selectionText,w.select()}},7239:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorContrastCache=void 0;const p=u(1505);c.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(y,h,m){this._css.set(y,h,m)}getCss(y,h){return this._css.get(y,h)}setColor(y,h,m){this._color.set(y,h,m)}getColor(y,h){return this._color.get(y,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(u,p,y,h){u.addEventListener(p,y,h);let m=!1;return{dispose:()=>{m||(m=!0,u.removeEventListener(p,y,h))}}}},3551:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var S,C=arguments.length,b=C<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,s,o,f);else for(var _=l.length-1;_>=0;_--)(S=l[_])&&(b=(C<3?S(b):C>3?S(s,o,b):S(s,o))||b);return C>3&&b&&Object.defineProperty(s,o,b),b},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Linkifier=void 0;const h=u(3656),m=u(8460),w=u(844),k=u(2585),g=u(4725);let n=c.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(l,s,o,f,S){super(),this._element=l,this._mouseService=s,this._renderService=o,this._bufferService=f,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){this._lastMouseEvent=l;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const o=l.composedPath();for(let f=0;f<o.length;f++){const S=o[f];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,s){this._activeProviderReplies&&s||(this._activeProviderReplies?.forEach((f=>{f?.forEach((S=>{S.link.dispose&&S.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=l.y);let o=!1;for(const[f,S]of this._linkProviderService.linkProviders.entries())s?this._activeProviderReplies?.get(f)&&(o=this._checkLinkProviderResult(f,l,o)):S.provideLinks(l.y,(C=>{if(this._isMouseOut)return;const b=C?.map((_=>({link:_})));this._activeProviderReplies?.set(f,b),o=this._checkLinkProviderResult(f,l,o),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)}))}_removeIntersectingLinks(l,s){const o=new Set;for(let f=0;f<s.size;f++){const S=s.get(f);if(S)for(let C=0;C<S.length;C++){const b=S[C],_=b.link.range.start.y<l?0:b.link.range.start.x,D=b.link.range.end.y>l?this._bufferService.cols:b.link.range.end.x;for(let N=_;N<=D;N++){if(o.has(N)){S.splice(C--,1);break}o.add(N)}}}}_checkLinkProviderResult(l,s,o){if(!this._activeProviderReplies)return o;const f=this._activeProviderReplies.get(l);let S=!1;for(let C=0;C<l;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(S=!0);if(!S&&f){const C=f.find((b=>this._linkAtPosition(b.link,s)));C&&(o=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!o)for(let C=0;C<this._activeProviderReplies.size;C++){const b=this._activeProviderReplies.get(C)?.find((_=>this._linkAtPosition(_.link,s)));if(b){o=!0,this._handleNewLink(b);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._currentLink)return;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,s){this._currentLink&&this._lastMouseEvent&&(!l||!s||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._lastMouseEvent)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(l.link,s)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:o=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",o))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:o=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((o=>{if(!this._currentLink)return;const f=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(f,S),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}}))))}_linkHover(l,s,o){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(o,s.text)}_fireUnderlineEvent(l,s){const o=l.range,f=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-f-1,o.end.x,o.end.y-f-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(l,s,o){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(o,s.text)}_linkAtPosition(l,s){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,f=l.range.end.y*this._bufferService.cols+l.range.end.x,S=s.y*this._bufferService.cols+s.x;return o<=S&&S<=f}_positionFromMouseEvent(l,s,o){const f=o.getCoords(l,s,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,s,o,f,S){return{x1:l,y1:s,x2:o,y2:f,cols:this._bufferService.cols,fg:S}}};c.Linkifier=n=p([y(1,g.IMouseService),y(2,g.IRenderService),y(3,k.IBufferService),y(4,g.ILinkProviderService)],n)},9042:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tooMuchOutput=c.promptLabel=void 0,c.promptLabel="Terminal input",c.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(U,c,u){var p=this&&this.__decorate||function(g,n,l,s){var o,f=arguments.length,S=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,n,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(S=(f<3?o(S):f>3?o(n,l,S):o(n,l))||S);return f>3&&S&&Object.defineProperty(n,l,S),S},y=this&&this.__param||function(g,n){return function(l,s){n(l,s,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkProvider=void 0;const h=u(511),m=u(2585);let w=c.OscLinkProvider=class{constructor(g,n,l){this._bufferService=g,this._optionsService=n,this._oscLinkService=l}provideLinks(g,n){const l=this._bufferService.buffer.lines.get(g-1);if(!l)return void n(void 0);const s=[],o=this._optionsService.rawOptions.linkHandler,f=new h.CellData,S=l.getTrimmedLength();let C=-1,b=-1,_=!1;for(let D=0;D<S;D++)if(b!==-1||l.hasContent(D)){if(l.loadCell(D,f),f.hasExtendedAttrs()&&f.extended.urlId){if(b===-1){b=D,C=f.extended.urlId;continue}_=f.extended.urlId!==C}else b!==-1&&(_=!0);if(_||b!==-1&&D===S-1){const N=this._oscLinkService.getLinkData(C)?.uri;if(N){const z={start:{x:b+1,y:g},end:{x:D+(_||D!==S-1?0:1),y:g}};let G=!1;if(!o?.allowNonHttpProtocols)try{const j=new URL(N);["http:","https:"].includes(j.protocol)||(G=!0)}catch{G=!0}G||s.push({text:N,range:z,activate:(j,te)=>o?o.activate(j,te,z):k(0,te),hover:(j,te)=>o?.hover?.(j,te,z),leave:(j,te)=>o?.leave?.(j,te,z)})}_=!1,f.hasExtendedAttrs()&&f.extended.urlId?(b=D,C=f.extended.urlId):(b=-1,C=-1)}}n(s)}};function k(g,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}c.OscLinkProvider=w=p([y(0,m.IBufferService),y(1,m.IOptionsService),y(2,m.IOscLinkService)],w)},6193:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RenderDebouncer=void 0,c.RenderDebouncer=class{constructor(u,p){this._renderCallback=u,this._coreBrowserService=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(u,p,y){this._rowCount=y,u=u!==void 0?u:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},3236:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const p=u(3614),y=u(3656),h=u(3551),m=u(9042),w=u(3730),k=u(1680),g=u(3107),n=u(5744),l=u(2950),s=u(1296),o=u(428),f=u(4269),S=u(5114),C=u(8934),b=u(3230),_=u(9312),D=u(4725),N=u(6731),z=u(8055),G=u(8969),j=u(8460),te=u(844),X=u(6114),le=u(8437),pe=u(2584),Y=u(7399),R=u(5941),I=u(9074),E=u(2585),A=u(5435),se=u(4567),ce=u(779);class Ce extends G.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(q={}){super(q),this.browser=X,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new te.MutableDisposable),this._onCursorMove=this.register(new j.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new j.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new j.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new j.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new j.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new j.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new j.EventEmitter),this._onBlur=this.register(new j.EventEmitter),this._onA11yCharEmitter=this.register(new j.EventEmitter),this._onA11yTabEmitter=this.register(new j.EventEmitter),this._onWillOpen=this.register(new j.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(E.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ce.LinkProviderService),this._instantiationService.setService(D.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((P,re)=>this.refresh(P,re)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((P=>this._reportWindowsOptions(P)))),this.register(this._inputHandler.onColor((P=>this._handleColorEvent(P)))),this.register((0,j.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,j.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((P=>this._afterResize(P.cols,P.rows)))),this.register((0,te.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(q){if(this._themeService)for(const P of q){let re,he="";switch(P.index){case 256:re="foreground",he="10";break;case 257:re="background",he="11";break;case 258:re="cursor",he="12";break;default:re="ansi",he="4;"+P.index}switch(P.type){case 0:const ke=z.color.toColorRGB(re==="ansi"?this._themeService.colors.ansi[P.index]:this._themeService.colors[re]);this.coreService.triggerDataEvent(`${pe.C0.ESC}]${he};${(0,R.toRgbString)(ke)}${pe.C1_ESCAPED.ST}`);break;case 1:if(re==="ansi")this._themeService.modifyColors((Ee=>Ee.ansi[P.index]=z.channels.toColor(...P.color)));else{const Ee=re;this._themeService.modifyColors((He=>He[Ee]=z.channels.toColor(...P.color)))}break;case 2:this._themeService.restoreColor(P.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(q){q?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(q){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(pe.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(pe.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const q=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(q);if(!P)return;const re=Math.min(this.buffer.x,this.cols-1),he=this._renderService.dimensions.css.cell.height,ke=P.getWidth(re),Ee=this._renderService.dimensions.css.cell.width*ke,He=this.buffer.y*this._renderService.dimensions.css.cell.height,me=re*this._renderService.dimensions.css.cell.width;this.textarea.style.left=me+"px",this.textarea.style.top=He+"px",this.textarea.style.width=Ee+"px",this.textarea.style.height=he+"px",this.textarea.style.lineHeight=he+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,y.addDisposableDomListener)(this.element,"copy",(P=>{this.hasSelection()&&(0,p.copyHandler)(P,this._selectionService)})));const q=P=>(0,p.handlePasteEvent)(P,this.textarea,this.coreService,this.optionsService);this.register((0,y.addDisposableDomListener)(this.textarea,"paste",q)),this.register((0,y.addDisposableDomListener)(this.element,"paste",q)),X.isFirefox?this.register((0,y.addDisposableDomListener)(this.element,"mousedown",(P=>{P.button===2&&(0,p.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,y.addDisposableDomListener)(this.element,"contextmenu",(P=>{(0,p.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),X.isLinux&&this.register((0,y.addDisposableDomListener)(this.element,"auxclick",(P=>{P.button===1&&(0,p.moveTextAreaUnderMouseCursor)(P,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,y.addDisposableDomListener)(this.textarea,"keyup",(q=>this._keyUp(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keydown",(q=>this._keyDown(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"keypress",(q=>this._keyPress(q)),!0)),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionupdate",(q=>this._compositionHelper.compositionupdate(q)))),this.register((0,y.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,y.addDisposableDomListener)(this.textarea,"input",(q=>this._inputEvent(q)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(q){if(!q)throw new Error("Terminal requires a parent element.");if(q.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=q.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),q.appendChild(this.element);const P=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,y.addDisposableDomListener)(this.screenElement,"mousemove",(re=>this.updateCursorStyle(re)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),X.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,q.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(D.ICoreBrowserService,this._coreBrowserService),this.register((0,y.addDisposableDomListener)(this.textarea,"focus",(re=>this._handleTextAreaFocus(re)))),this.register((0,y.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(D.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(N.ThemeService),this._instantiationService.setService(D.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(D.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(D.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((re=>this._onRender.fire(re)))),this.onResize((re=>this._renderService.resize(re.cols,re.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(D.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(k.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((re=>this.scrollLines(re.amount,re.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(D.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((re=>this.scrollLines(re.amount,re.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((re=>this._renderService.handleSelectionChanged(re.start,re.end,re.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((re=>{this.textarea.value=re,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((re=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,y.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,y.addDisposableDomListener)(this.element,"mousedown",(re=>this._selectionService.handleMouseDown(re)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(re=>this._handleScreenReaderModeOptionChange(re)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(re=>{!this._overviewRulerRenderer&&re&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const q=this,P=this.element;function re(Ee){const He=q._mouseService.getMouseReportCoords(Ee,q.screenElement);if(!He)return!1;let me,Ne;switch(Ee.overrideType||Ee.type){case"mousemove":Ne=32,Ee.buttons===void 0?(me=3,Ee.button!==void 0&&(me=Ee.button<3?Ee.button:3)):me=1&Ee.buttons?0:4&Ee.buttons?1:2&Ee.buttons?2:3;break;case"mouseup":Ne=0,me=Ee.button<3?Ee.button:3;break;case"mousedown":Ne=1,me=Ee.button<3?Ee.button:3;break;case"wheel":if(q._customWheelEventHandler&&q._customWheelEventHandler(Ee)===!1||q.viewport.getLinesScrolled(Ee)===0)return!1;Ne=Ee.deltaY<0?0:1,me=4;break;default:return!1}return!(Ne===void 0||me===void 0||me>4)&&q.coreMouseService.triggerMouseEvent({col:He.col,row:He.row,x:He.x,y:He.y,button:me,action:Ne,ctrl:Ee.ctrlKey,alt:Ee.altKey,shift:Ee.shiftKey})}const he={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ke={mouseup:Ee=>(re(Ee),Ee.buttons||(this._document.removeEventListener("mouseup",he.mouseup),he.mousedrag&&this._document.removeEventListener("mousemove",he.mousedrag)),this.cancel(Ee)),wheel:Ee=>(re(Ee),this.cancel(Ee,!0)),mousedrag:Ee=>{Ee.buttons&&re(Ee)},mousemove:Ee=>{Ee.buttons||re(Ee)}};this.register(this.coreMouseService.onProtocolChange((Ee=>{Ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ee?he.mousemove||(P.addEventListener("mousemove",ke.mousemove),he.mousemove=ke.mousemove):(P.removeEventListener("mousemove",he.mousemove),he.mousemove=null),16&Ee?he.wheel||(P.addEventListener("wheel",ke.wheel,{passive:!1}),he.wheel=ke.wheel):(P.removeEventListener("wheel",he.wheel),he.wheel=null),2&Ee?he.mouseup||(he.mouseup=ke.mouseup):(this._document.removeEventListener("mouseup",he.mouseup),he.mouseup=null),4&Ee?he.mousedrag||(he.mousedrag=ke.mousedrag):(this._document.removeEventListener("mousemove",he.mousedrag),he.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,y.addDisposableDomListener)(P,"mousedown",(Ee=>{if(Ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ee))return re(Ee),he.mouseup&&this._document.addEventListener("mouseup",he.mouseup),he.mousedrag&&this._document.addEventListener("mousemove",he.mousedrag),this.cancel(Ee)}))),this.register((0,y.addDisposableDomListener)(P,"wheel",(Ee=>{if(!he.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Ee)===!1)return!1;if(!this.buffer.hasScrollback){const He=this.viewport.getLinesScrolled(Ee);if(He===0)return;const me=pe.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ee.deltaY<0?"A":"B");let Ne="";for(let Ve=0;Ve<Math.abs(He);Ve++)Ne+=me;return this.coreService.triggerDataEvent(Ne,!0),this.cancel(Ee,!0)}return this.viewport.handleWheel(Ee)?this.cancel(Ee):void 0}}),{passive:!1})),this.register((0,y.addDisposableDomListener)(P,"touchstart",(Ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ee),this.cancel(Ee)}),{passive:!0})),this.register((0,y.addDisposableDomListener)(P,"touchmove",(Ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ee)?void 0:this.cancel(Ee)}),{passive:!1}))}refresh(q,P){this._renderService?.refreshRows(q,P)}updateCursorStyle(q){this._selectionService?.shouldColumnSelect(q)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(q,P,re=0){re===1?(super.scrollLines(q,P,re),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(q)}paste(q){(0,p.paste)(q,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(q){this._customKeyEventHandler=q}attachCustomWheelEventHandler(q){this._customWheelEventHandler=q}registerLinkProvider(q){return this._linkProviderService.registerLinkProvider(q)}registerCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const P=this._characterJoinerService.register(q);return this.refresh(0,this.rows-1),P}deregisterCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(q)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(q){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+q)}registerDecoration(q){return this._decorationService.registerDecoration(q)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(q,P,re){this._selectionService.setSelection(q,P,re)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(q,P){this._selectionService?.selectLines(q,P)}_keyDown(q){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;const P=this.browser.isMac&&this.options.macOptionIsMeta&&q.altKey;if(!P&&!this._compositionHelper.keydown(q))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;P||q.key!=="Dead"&&q.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const re=(0,Y.evaluateKeyboardEvent)(q,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(q),re.type===3||re.type===2){const he=this.rows-1;return this.scrollLines(re.type===2?-he:he),this.cancel(q,!0)}return re.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,q)||(re.cancel&&this.cancel(q,!0),!re.key||!!(q.key&&!q.ctrlKey&&!q.altKey&&!q.metaKey&&q.key.length===1&&q.key.charCodeAt(0)>=65&&q.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(re.key!==pe.C0.ETX&&re.key!==pe.C0.CR||(this.textarea.value=""),this._onKey.fire({key:re.key,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(re.key,!0),!this.optionsService.rawOptions.screenReaderMode||q.altKey||q.ctrlKey?this.cancel(q,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(q,P){const re=q.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||q.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||q.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?re:re&&(!P.keyCode||P.keyCode>47)}_keyUp(q){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1||((function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18})(q)||this.focus(),this.updateCursorStyle(q),this._keyPressHandled=!1)}_keyPress(q){let P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(this.cancel(q),q.charCode)P=q.charCode;else if(q.which===null||q.which===void 0)P=q.keyCode;else{if(q.which===0||q.charCode===0)return!1;P=q.which}return!(!P||(q.altKey||q.ctrlKey||q.metaKey)&&!this._isThirdLevelShift(this.browser,q)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(q){if(q.data&&q.inputType==="insertText"&&(!q.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const P=q.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(q),!0}return!1}resize(q,P){q!==this.cols||P!==this.rows?super.resize(q,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(q,P){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let q=1;q<this.rows;q++)this.buffer.lines.push(this.buffer.getBlankLine(le.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const q=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(pe.C0.ESC+"[I"):this.coreService.triggerDataEvent(pe.C0.ESC+"[O")}_reportWindowsOptions(q){if(this._renderService)switch(q){case A.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const P=this._renderService.dimensions.css.canvas.width.toFixed(0),re=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${pe.C0.ESC}[4;${re};${P}t`);break;case A.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const he=this._renderService.dimensions.css.cell.width.toFixed(0),ke=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${pe.C0.ESC}[6;${ke};${he}t`)}}cancel(q,P){if(this.options.cancelEvents||P)return q.preventDefault(),q.stopPropagation(),!1}}c.Terminal=Ce},9924:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TimeBasedDebouncer=void 0,c.TimeBasedDebouncer=class{constructor(u,p=1e3){this._renderCallback=u,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,p,y){this._rowCount=y,u=u!==void 0?u:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=h-this._lastRefreshMs,w=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,p)}}},1680:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var S,C=arguments.length,b=C<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,s,o,f);else for(var _=l.length-1;_>=0;_--)(S=l[_])&&(b=(C<3?S(b):C>3?S(s,o,b):S(s,o))||b);return C>3&&b&&Object.defineProperty(s,o,b),b},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Viewport=void 0;const h=u(3656),m=u(4725),w=u(8460),k=u(844),g=u(2585);let n=c.Viewport=class extends k.Disposable{constructor(l,s,o,f,S,C,b,_){super(),this._viewportElement=l,this._scrollArea=s,this._bufferService=o,this._optionsService=f,this._charSizeService=S,this._renderService=C,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((D=>this._activeBuffer=D.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((D=>this._renderDimensions=D))),this._handleThemeChange(_.colors),this.register(_.onChangeColors((D=>this._handleThemeChange(D)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,s){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&o<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const s=this._getPixelsScrolled(l);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const s=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(l,s){let o,f="";const S=[],C=s??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let _=l;_<C;_++){const D=b.get(_);if(!D)continue;const N=b.get(_+1)?.isWrapped;if(f+=D.translateToString(!N),!N||_===b.length-1){const z=document.createElement("div");z.textContent=f,S.push(z),f.length>0&&(o=z),f=""}}return{bufferElements:S,cursorElement:o}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(l,s){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&s.altKey||o==="ctrl"&&s.ctrlKey||o==="shift"&&s.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const s=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}};c.Viewport=n=p([y(2,g.IBufferService),y(3,g.IOptionsService),y(4,m.ICharSizeService),y(5,m.IRenderService),y(6,m.ICoreBrowserService),y(7,m.IThemeService)],n)},3107:function(U,c,u){var p=this&&this.__decorate||function(g,n,l,s){var o,f=arguments.length,S=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,n,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(S=(f<3?o(S):f>3?o(n,l,S):o(n,l))||S);return f>3&&S&&Object.defineProperty(n,l,S),S},y=this&&this.__param||function(g,n){return function(l,s){n(l,s,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferDecorationRenderer=void 0;const h=u(4725),m=u(844),w=u(2585);let k=c.BufferDecorationRenderer=class extends m.Disposable{constructor(g,n,l,s,o){super(),this._screenElement=g,this._bufferService=n,this._coreBrowserService=l,this._decorationService=s,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((f=>this._removeDecoration(f)))),this.register((0,m.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),n.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const l=g.options.x??0;return l&&l>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(g,n),n}_refreshStyle(g){const n=g.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let l=this._decorationElements.get(g);l||(l=this._createElement(g),g.element=l,this._decorationElements.set(g,l),this._container.appendChild(l),g.onDispose((()=>{this._decorationElements.delete(g),l.remove()}))),l.style.top=n*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(l)}}_refreshXPosition(g,n=g.element){if(!n)return;const l=g.options.x??0;(g.options.anchor||"left")==="right"?n.style.right=l?l*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=l?l*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};c.BufferDecorationRenderer=k=p([y(1,w.IBufferService),y(2,h.ICoreBrowserService),y(3,w.IDecorationService),y(4,h.IRenderService)],k)},5871:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorZoneStore=void 0,c.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const p of this._zones)if(p.color===u.options.overviewRulerOptions.color&&p.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,u.marker.line))return;if(this._lineAdjacentToZone(p,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(p,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,p){return p>=u.startBufferLine&&p<=u.endBufferLine}_lineAdjacentToZone(u,p,y){return p>=u.startBufferLine-this._linePadding[y||"full"]&&p<=u.endBufferLine+this._linePadding[y||"full"]}_addLineToZone(u,p){u.startBufferLine=Math.min(u.startBufferLine,p),u.endBufferLine=Math.max(u.endBufferLine,p)}}},5744:function(U,c,u){var p=this&&this.__decorate||function(o,f,S,C){var b,_=arguments.length,D=_<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(o,f,S,C);else for(var N=o.length-1;N>=0;N--)(b=o[N])&&(D=(_<3?b(D):_>3?b(f,S,D):b(f,S))||D);return _>3&&D&&Object.defineProperty(f,S,D),D},y=this&&this.__param||function(o,f){return function(S,C){f(S,C,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OverviewRulerRenderer=void 0;const h=u(5871),m=u(4725),w=u(844),k=u(2585),g={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let s=c.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(o,f,S,C,b,_,D){super(),this._viewportElement=o,this._screenElement=f,this._bufferService=S,this._decorationService=C,this._renderService=b,this._optionsService=_,this._coreBrowserService=D,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const N=this._canvas.getContext("2d");if(!N)throw new Error("Ctx cannot be null");this._ctx=N,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const o=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=o,n.center=f,n.right=o,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=n.left,l.right=n.left+n.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const o=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(o,12),6)*this._coreBrowserService.dpr);g.left=f,g.center=f,g.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const o=this._colorZoneStore.zones;for(const f of o)f.position!=="full"&&this._renderColorZone(f);for(const f of o)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(o){this._ctx.fillStyle=o.color,this._ctx.fillRect(l[o.position||"full"],Math.round((this._canvas.height-1)*(o.startBufferLine/this._bufferService.buffers.active.lines.length)-g[o.position||"full"]/2),n[o.position||"full"],Math.round((this._canvas.height-1)*((o.endBufferLine-o.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[o.position||"full"]))}_queueRefresh(o,f){this._shouldUpdateDimensions=o||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};c.OverviewRulerRenderer=s=p([y(2,k.IBufferService),y(3,k.IDecorationService),y(4,m.IRenderService),y(5,k.IOptionsService),y(6,m.ICoreBrowserService)],s)},2950:function(U,c,u){var p=this&&this.__decorate||function(g,n,l,s){var o,f=arguments.length,S=f<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,n,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(S=(f<3?o(S):f>3?o(n,l,S):o(n,l))||S);return f>3&&S&&Object.defineProperty(n,l,S),S},y=this&&this.__param||function(g,n){return function(l,s){n(l,s,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CompositionHelper=void 0;const h=u(4725),m=u(2585),w=u(2584);let k=c.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,n,l,s,o,f){this._textarea=g,this._compositionView=n,this._bufferService=l,this._optionsService=s,this._coreService=o,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}}),0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const n=this._textarea.value,l=n.replace(g,"");this._dataAlreadySent=l,n.length>g.length?this._coreService.triggerDataEvent(l,!0):n.length<g.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===g.length&&n!==g&&this._coreService.triggerDataEvent(n,!0)}}),0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}g||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};c.CompositionHelper=k=p([y(2,m.IBufferService),y(3,m.IOptionsService),y(4,m.ICoreService),y(5,h.IRenderService)],k)},9806:(U,c)=>{function u(p,y,h){const m=h.getBoundingClientRect(),w=p.getComputedStyle(h),k=parseInt(w.getPropertyValue("padding-left")),g=parseInt(w.getPropertyValue("padding-top"));return[y.clientX-m.left-k,y.clientY-m.top-g]}Object.defineProperty(c,"__esModule",{value:!0}),c.getCoords=c.getCoordsRelativeToElement=void 0,c.getCoordsRelativeToElement=u,c.getCoords=function(p,y,h,m,w,k,g,n,l){if(!k)return;const s=u(p,y,h);return s?(s[0]=Math.ceil((s[0]+(l?g/2:0))/g),s[1]=Math.ceil(s[1]/n),s[0]=Math.min(Math.max(s[0],1),m+(l?1:0)),s[1]=Math.min(Math.max(s[1],1),w),s):void 0}},9504:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.moveToCellSequence=void 0;const p=u(2584);function y(n,l,s,o){const f=n-h(n,s),S=l-h(l,s),C=Math.abs(f-S)-(function(b,_,D){let N=0;const z=b-h(b,D),G=_-h(_,D);for(let j=0;j<Math.abs(z-G);j++){const te=m(b,_)==="A"?-1:1;D.buffer.lines.get(z+te*j)?.isWrapped&&N++}return N})(n,l,s);return g(C,k(m(n,l),o))}function h(n,l){let s=0,o=l.buffer.lines.get(n),f=o?.isWrapped;for(;f&&n>=0&&n<l.rows;)s++,o=l.buffer.lines.get(--n),f=o?.isWrapped;return s}function m(n,l){return n>l?"A":"B"}function w(n,l,s,o,f,S){let C=n,b=l,_="";for(;C!==s||b!==o;)C+=f?1:-1,f&&C>S.cols-1?(_+=S.buffer.translateBufferLineToString(b,!1,n,C),C=0,n=0,b++):!f&&C<0&&(_+=S.buffer.translateBufferLineToString(b,!1,0,n+1),C=S.cols-1,n=C,b--);return _+S.buffer.translateBufferLineToString(b,!1,n,C)}function k(n,l){const s=l?"O":"[";return p.C0.ESC+s+n}function g(n,l){n=Math.floor(n);let s="";for(let o=0;o<n;o++)s+=l;return s}c.moveToCellSequence=function(n,l,s,o){const f=s.buffer.x,S=s.buffer.y;if(!s.buffer.hasScrollback)return(function(_,D,N,z,G,j){return y(D,z,G,j).length===0?"":g(w(_,D,_,D-h(D,G),!1,G).length,k("D",j))})(f,S,0,l,s,o)+y(S,l,s,o)+(function(_,D,N,z,G,j){let te;te=y(D,z,G,j).length>0?z-h(z,G):D;const X=z,le=(function(pe,Y,R,I,E,A){let se;return se=y(R,I,E,A).length>0?I-h(I,E):Y,pe<R&&se<=I||pe>=R&&se<I?"C":"D"})(_,D,N,z,G,j);return g(w(_,te,N,X,le==="C",G).length,k(le,j))})(f,S,n,l,s,o);let C;if(S===l)return C=f>n?"D":"C",g(Math.abs(f-n),k(C,o));C=S>l?"D":"C";const b=Math.abs(S-l);return g((function(_,D){return D.cols-_})(S>l?n:f,s)+(b-1)*s.cols+1+((S>l?f:n)-1),k(C,o))}},1296:function(U,c,u){var p=this&&this.__decorate||function(j,te,X,le){var pe,Y=arguments.length,R=Y<3?te:le===null?le=Object.getOwnPropertyDescriptor(te,X):le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(j,te,X,le);else for(var I=j.length-1;I>=0;I--)(pe=j[I])&&(R=(Y<3?pe(R):Y>3?pe(te,X,R):pe(te,X))||R);return Y>3&&R&&Object.defineProperty(te,X,R),R},y=this&&this.__param||function(j,te){return function(X,le){te(X,le,j)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRenderer=void 0;const h=u(3787),m=u(2550),w=u(2223),k=u(6171),g=u(6052),n=u(4725),l=u(8055),s=u(8460),o=u(844),f=u(2585),S="xterm-dom-renderer-owner-",C="xterm-rows",b="xterm-fg-",_="xterm-bg-",D="xterm-focus",N="xterm-selection";let z=1,G=c.DomRenderer=class extends o.Disposable{constructor(j,te,X,le,pe,Y,R,I,E,A,se,ce,Ce){super(),this._terminal=j,this._document=te,this._element=X,this._screenElement=le,this._viewportElement=pe,this._helperContainer=Y,this._linkifier2=R,this._charSizeService=E,this._optionsService=A,this._bufferService=se,this._coreBrowserService=ce,this._themeService=Ce,this._terminalClass=z++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(N),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,k.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((be=>this._injectCss(be)))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((be=>this._handleLinkHover(be)))),this.register(this._linkifier2.onHideLinkUnderline((be=>this._handleLinkLeave(be)))),this.register((0,o.toDisposable)((()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const j=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*j,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*j),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/j),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/j),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const X of this._rowElements)X.style.width=`${this.dimensions.css.canvas.width}px`,X.style.height=`${this.dimensions.css.cell.height}px`,X.style.lineHeight=`${this.dimensions.css.cell.height}px`,X.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const te=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=te,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(j){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let te=`${this._terminalSelector} .${C} { color: ${j.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;te+=`${this._terminalSelector} .${C} .xterm-dim { color: ${l.color.multiplyOpacity(j.foreground,.5).css};}`,te+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const X=`blink_underline_${this._terminalClass}`,le=`blink_bar_${this._terminalClass}`,pe=`blink_block_${this._terminalClass}`;te+=`@keyframes ${X} { 50% {  border-bottom-style: hidden; }}`,te+=`@keyframes ${le} { 50% {  box-shadow: none; }}`,te+=`@keyframes ${pe} { 0% {  background-color: ${j.cursor.css};  color: ${j.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${j.cursor.css}; }}`,te+=`${this._terminalSelector} .${C}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${C}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${le} 1s step-end infinite;}${this._terminalSelector} .${C}.${D} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${pe} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${j.cursor.css}; color: ${j.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${j.cursor.css} !important; color: ${j.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${j.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${j.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${j.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,te+=`${this._terminalSelector} .${N} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${N} div { position: absolute; background-color: ${j.selectionBackgroundOpaque.css};}${this._terminalSelector} .${N} div { position: absolute; background-color: ${j.selectionInactiveBackgroundOpaque.css};}`;for(const[Y,R]of j.ansi.entries())te+=`${this._terminalSelector} .${b}${Y} { color: ${R.css}; }${this._terminalSelector} .${b}${Y}.xterm-dim { color: ${l.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${_}${Y} { background-color: ${R.css}; }`;te+=`${this._terminalSelector} .${b}${w.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(j.background).css}; }${this._terminalSelector} .${b}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(j.background),.5).css}; }${this._terminalSelector} .${_}${w.INVERTED_DEFAULT_COLOR} { background-color: ${j.foreground.css}; }`,this._themeStyleElement.textContent=te}_setDefaultSpacing(){const j=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${j}px`,this._rowFactory.defaultSpacing=j}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(j,te){for(let X=this._rowElements.length;X<=te;X++){const le=this._document.createElement("div");this._rowContainer.appendChild(le),this._rowElements.push(le)}for(;this._rowElements.length>te;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(j,te){this._refreshRowElements(j,te),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(D),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(D),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(j,te,X){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(j,te,X),this.renderRows(0,this._bufferService.rows-1),!j||!te)return;this._selectionRenderModel.update(this._terminal,j,te,X);const le=this._selectionRenderModel.viewportStartRow,pe=this._selectionRenderModel.viewportEndRow,Y=this._selectionRenderModel.viewportCappedStartRow,R=this._selectionRenderModel.viewportCappedEndRow;if(Y>=this._bufferService.rows||R<0)return;const I=this._document.createDocumentFragment();if(X){const E=j[0]>te[0];I.appendChild(this._createSelectionElement(Y,E?te[0]:j[0],E?j[0]:te[0],R-Y+1))}else{const E=le===Y?j[0]:0,A=Y===pe?te[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(Y,E,A));const se=R-Y-1;if(I.appendChild(this._createSelectionElement(Y+1,0,this._bufferService.cols,se)),Y!==R){const ce=pe===R?te[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,0,ce))}}this._selectionContainer.appendChild(I)}_createSelectionElement(j,te,X,le=1){const pe=this._document.createElement("div"),Y=te*this.dimensions.css.cell.width;let R=this.dimensions.css.cell.width*(X-te);return Y+R>this.dimensions.css.canvas.width&&(R=this.dimensions.css.canvas.width-Y),pe.style.height=le*this.dimensions.css.cell.height+"px",pe.style.top=j*this.dimensions.css.cell.height+"px",pe.style.left=`${Y}px`,pe.style.width=`${R}px`,pe}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const j of this._rowElements)j.replaceChildren()}renderRows(j,te){const X=this._bufferService.buffer,le=X.ybase+X.y,pe=Math.min(X.x,this._bufferService.cols-1),Y=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let E=j;E<=te;E++){const A=E+X.ydisp,se=this._rowElements[E],ce=X.lines.get(A);if(!se||!ce)break;se.replaceChildren(...this._rowFactory.createRow(ce,A,A===le,R,I,pe,Y,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(j){this._setCellUnderline(j.x1,j.x2,j.y1,j.y2,j.cols,!0)}_handleLinkLeave(j){this._setCellUnderline(j.x1,j.x2,j.y1,j.y2,j.cols,!1)}_setCellUnderline(j,te,X,le,pe,Y){X<0&&(j=0),le<0&&(te=0);const R=this._bufferService.rows-1;X=Math.max(Math.min(X,R),0),le=Math.max(Math.min(le,R),0),pe=Math.min(pe,this._bufferService.cols);const I=this._bufferService.buffer,E=I.ybase+I.y,A=Math.min(I.x,pe-1),se=this._optionsService.rawOptions.cursorBlink,ce=this._optionsService.rawOptions.cursorStyle,Ce=this._optionsService.rawOptions.cursorInactiveStyle;for(let be=X;be<=le;++be){const q=be+I.ydisp,P=this._rowElements[be],re=I.lines.get(q);if(!P||!re)break;P.replaceChildren(...this._rowFactory.createRow(re,q,q===E,ce,Ce,A,se,this.dimensions.css.cell.width,this._widthCache,Y?be===X?j:0:-1,Y?(be===le?te:pe)-1:-1))}}};c.DomRenderer=G=p([y(7,f.IInstantiationService),y(8,n.ICharSizeService),y(9,f.IOptionsService),y(10,f.IBufferService),y(11,n.ICoreBrowserService),y(12,n.IThemeService)],G)},3787:function(U,c,u){var p=this&&this.__decorate||function(C,b,_,D){var N,z=arguments.length,G=z<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,_):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(C,b,_,D);else for(var j=C.length-1;j>=0;j--)(N=C[j])&&(G=(z<3?N(G):z>3?N(b,_,G):N(b,_))||G);return z>3&&G&&Object.defineProperty(b,_,G),G},y=this&&this.__param||function(C,b){return function(_,D){b(_,D,C)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRendererRowFactory=void 0;const h=u(2223),m=u(643),w=u(511),k=u(2585),g=u(8055),n=u(4725),l=u(4269),s=u(6171),o=u(3734);let f=c.DomRendererRowFactory=class{constructor(C,b,_,D,N,z,G){this._document=C,this._characterJoinerService=b,this._optionsService=_,this._coreBrowserService=D,this._coreService=N,this._decorationService=z,this._themeService=G,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,b,_){this._selectionStart=C,this._selectionEnd=b,this._columnSelectMode=_}createRow(C,b,_,D,N,z,G,j,te,X,le){const pe=[],Y=this._characterJoinerService.getJoinedCharacters(b),R=this._themeService.colors;let I,E=C.getNoBgTrimmedLength();_&&E<z+1&&(E=z+1);let A=0,se="",ce=0,Ce=0,be=0,q=!1,P=0,re=!1,he=0;const ke=[],Ee=X!==-1&&le!==-1;for(let He=0;He<E;He++){C.loadCell(He,this._workCell);let me=this._workCell.getWidth();if(me===0)continue;let Ne=!1,Ve=He,Oe=this._workCell;if(Y.length>0&&He===Y[0][0]){Ne=!0;const Ue=Y.shift();Oe=new l.JoinedCellData(this._workCell,C.translateToString(!0,Ue[0],Ue[1]),Ue[1]-Ue[0]),Ve=Ue[1]-1,me=Oe.getWidth()}const Et=this._isCellInSelection(He,b),rr=_&&He===z,at=Ee&&He>=X&&He<=le;let Rt=!1;this._decorationService.forEachDecorationAtCell(He,b,void 0,(Ue=>{Rt=!0}));let wt=Oe.getChars()||m.WHITESPACE_CELL_CHAR;if(wt===" "&&(Oe.isUnderline()||Oe.isOverline())&&(wt=""),he=me*j-te.get(wt,Oe.isBold(),Oe.isItalic()),I){if(A&&(Et&&re||!Et&&!re&&Oe.bg===ce)&&(Et&&re&&R.selectionForeground||Oe.fg===Ce)&&Oe.extended.ext===be&&at===q&&he===P&&!rr&&!Ne&&!Rt){Oe.isInvisible()?se+=m.WHITESPACE_CELL_CHAR:se+=wt,A++;continue}A&&(I.textContent=se),I=this._document.createElement("span"),A=0,se=""}else I=this._document.createElement("span");if(ce=Oe.bg,Ce=Oe.fg,be=Oe.extended.ext,q=at,P=he,re=Et,Ne&&z>=He&&z<=Ve&&(z=He),!this._coreService.isCursorHidden&&rr&&this._coreService.isCursorInitialized){if(ke.push("xterm-cursor"),this._coreBrowserService.isFocused)G&&ke.push("xterm-cursor-blink"),ke.push(D==="bar"?"xterm-cursor-bar":D==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(N)switch(N){case"outline":ke.push("xterm-cursor-outline");break;case"block":ke.push("xterm-cursor-block");break;case"bar":ke.push("xterm-cursor-bar");break;case"underline":ke.push("xterm-cursor-underline")}}if(Oe.isBold()&&ke.push("xterm-bold"),Oe.isItalic()&&ke.push("xterm-italic"),Oe.isDim()&&ke.push("xterm-dim"),se=Oe.isInvisible()?m.WHITESPACE_CELL_CHAR:Oe.getChars()||m.WHITESPACE_CELL_CHAR,Oe.isUnderline()&&(ke.push(`xterm-underline-${Oe.extended.underlineStyle}`),se===" "&&(se=""),!Oe.isUnderlineColorDefault()))if(Oe.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(Oe.getUnderlineColor()).join(",")})`;else{let Ue=Oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Oe.isBold()&&Ue<8&&(Ue+=8),I.style.textDecorationColor=R.ansi[Ue].css}Oe.isOverline()&&(ke.push("xterm-overline"),se===" "&&(se="")),Oe.isStrikethrough()&&ke.push("xterm-strikethrough"),at&&(I.style.textDecoration="underline");let pt=Oe.getFgColor(),ir=Oe.getFgColorMode(),xt=Oe.getBgColor(),dr=Oe.getBgColorMode();const fr=!!Oe.isInverse();if(fr){const Ue=pt;pt=xt,xt=Ue;const ai=ir;ir=dr,dr=ai}let ct,sr,ut,Bt=!1;switch(this._decorationService.forEachDecorationAtCell(He,b,void 0,(Ue=>{Ue.options.layer!=="top"&&Bt||(Ue.backgroundColorRGB&&(dr=50331648,xt=Ue.backgroundColorRGB.rgba>>8&16777215,ct=Ue.backgroundColorRGB),Ue.foregroundColorRGB&&(ir=50331648,pt=Ue.foregroundColorRGB.rgba>>8&16777215,sr=Ue.foregroundColorRGB),Bt=Ue.options.layer==="top")})),!Bt&&Et&&(ct=this._coreBrowserService.isFocused?R.selectionBackgroundOpaque:R.selectionInactiveBackgroundOpaque,xt=ct.rgba>>8&16777215,dr=50331648,Bt=!0,R.selectionForeground&&(ir=50331648,pt=R.selectionForeground.rgba>>8&16777215,sr=R.selectionForeground)),Bt&&ke.push("xterm-decoration-top"),dr){case 16777216:case 33554432:ut=R.ansi[xt],ke.push(`xterm-bg-${xt}`);break;case 50331648:ut=g.channels.toColor(xt>>16,xt>>8&255,255&xt),this._addStyle(I,`background-color:#${S((xt>>>0).toString(16),"0",6)}`);break;default:fr?(ut=R.foreground,ke.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):ut=R.background}switch(ct||Oe.isDim()&&(ct=g.color.multiplyOpacity(ut,.5)),ir){case 16777216:case 33554432:Oe.isBold()&&pt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(pt+=8),this._applyMinimumContrast(I,ut,R.ansi[pt],Oe,ct,void 0)||ke.push(`xterm-fg-${pt}`);break;case 50331648:const Ue=g.channels.toColor(pt>>16&255,pt>>8&255,255&pt);this._applyMinimumContrast(I,ut,Ue,Oe,ct,sr)||this._addStyle(I,`color:#${S(pt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,ut,R.foreground,Oe,ct,sr)||fr&&ke.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}ke.length&&(I.className=ke.join(" "),ke.length=0),rr||Ne||Rt?I.textContent=se:A++,he!==this.defaultSpacing&&(I.style.letterSpacing=`${he}px`),pe.push(I),He=Ve}return I&&A&&(I.textContent=se),pe}_applyMinimumContrast(C,b,_,D,N,z){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.treatGlyphAsBackgroundColor)(D.getCode()))return!1;const G=this._getContrastCache(D);let j;if(N||z||(j=G.getColor(b.rgba,_.rgba)),j===void 0){const te=this._optionsService.rawOptions.minimumContrastRatio/(D.isDim()?2:1);j=g.color.ensureContrastRatio(N||b,z||_,te),G.setColor((N||b).rgba,(z||_).rgba,j??null)}return!!j&&(this._addStyle(C,`color:${j.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,b){C.setAttribute("style",`${C.getAttribute("style")||""}${b};`)}_isCellInSelection(C,b){const _=this._selectionStart,D=this._selectionEnd;return!(!_||!D)&&(this._columnSelectMode?_[0]<=D[0]?C>=_[0]&&b>=_[1]&&C<D[0]&&b<=D[1]:C<_[0]&&b>=_[1]&&C>=D[0]&&b<=D[1]:b>_[1]&&b<D[1]||_[1]===D[1]&&b===_[1]&&C>=_[0]&&C<D[0]||_[1]<D[1]&&b===D[1]&&C<D[0]||_[1]<D[1]&&b===_[1]&&C>=_[0])}};function S(C,b,_){for(;C.length<_;)C=b+C;return C}c.DomRendererRowFactory=f=p([y(1,n.ICharacterJoinerService),y(2,k.IOptionsService),y(3,n.ICoreBrowserService),y(4,k.ICoreService),y(5,k.IDecorationService),y(6,n.IThemeService)],f)},2550:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WidthCache=void 0,c.WidthCache=class{constructor(u,p){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const y=u.createElement("span");y.classList.add("xterm-char-measure-element");const h=u.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const m=u.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const w=u.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[y,h,m,w],this._container.appendChild(y),this._container.appendChild(h),this._container.appendChild(m),this._container.appendChild(w),p.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,p,y,h){u===this._font&&p===this._fontSize&&y===this._weight&&h===this._weightBold||(this._font=u,this._fontSize=p,this._weight=y,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${y}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${y}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(u,p,y){let h=0;if(!p&&!y&&u.length===1&&(h=u.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const k=this._measure(u,0);return k>0&&(this._flat[h]=k),k}let m=u;p&&(m+="B"),y&&(m+="I");let w=this._holey.get(m);if(w===void 0){let k=0;p&&(k|=1),y&&(k|=2),w=this._measure(u,k),w>0&&this._holey.set(m,w)}return w}_measure(u,p){const y=this._measureElements[p];return y.textContent=u.repeat(32),y.offsetWidth/32}}},2223:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;const p=u(6114);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(U,c)=>{function u(y){return 57508<=y&&y<=57558}function p(y){return y>=128512&&y<=128591||y>=127744&&y<=128511||y>=128640&&y<=128767||y>=9728&&y<=9983||y>=9984&&y<=10175||y>=65024&&y<=65039||y>=129280&&y<=129535||y>=127462&&y<=127487}Object.defineProperty(c,"__esModule",{value:!0}),c.computeNextVariantOffset=c.createRenderDimensions=c.treatGlyphAsBackgroundColor=c.allowRescaling=c.isEmoji=c.isRestrictedPowerlineGlyph=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(y){if(!y)throw new Error("value must not be falsy");return y},c.isPowerlineGlyph=u,c.isRestrictedPowerlineGlyph=function(y){return 57520<=y&&y<=57527},c.isEmoji=p,c.allowRescaling=function(y,h,m,w){return h===1&&m>Math.ceil(1.5*w)&&y!==void 0&&y>255&&!p(y)&&!u(y)&&!(function(k){return 57344<=k&&k<=63743})(y)},c.treatGlyphAsBackgroundColor=function(y){return u(y)||(function(h){return 9472<=h&&h<=9631})(y)},c.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},c.computeNextVariantOffset=function(y,h,m=0){return(y-(2*Math.round(h)-m))%(2*Math.round(h))}},6052:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createSelectionRenderModel=void 0;class u{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(y,h,m,w=!1){if(this.selectionStart=h,this.selectionEnd=m,!h||!m||h[0]===m[0]&&h[1]===m[1])return void this.clear();const k=y.buffers.active.ydisp,g=h[1]-k,n=m[1]-k,l=Math.max(g,0),s=Math.min(n,y.rows-1);l>=y.rows||s<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=g,this.viewportEndRow=n,this.viewportCappedStartRow=l,this.viewportCappedEndRow=s,this.startCol=h[0],this.endCol=m[0])}isCellSelected(y,h,m){return!!this.hasSelection&&(m-=y.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&m>=this.viewportCappedStartRow&&h<this.endCol&&m<=this.viewportCappedEndRow:h<this.startCol&&m>=this.viewportCappedStartRow&&h>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&h>=this.startCol)}}c.createSelectionRenderModel=function(){return new u}},456:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionModel=void 0,c.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,p=this.selectionEnd;return!(!u||!p)&&(u[1]>p[1]||u[1]===p[1]&&u[0]>p[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,S){var C,b=arguments.length,_=b<3?o:S===null?S=Object.getOwnPropertyDescriptor(o,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(s,o,f,S);else for(var D=s.length-1;D>=0;D--)(C=s[D])&&(_=(b<3?C(_):b>3?C(o,f,_):C(o,f))||_);return b>3&&_&&Object.defineProperty(o,f,_),_},y=this&&this.__param||function(s,o){return function(f,S){o(f,S,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharSizeService=void 0;const h=u(2585),m=u(8460),w=u(844);let k=c.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,o,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new l(this._optionsService))}catch{this._measureStrategy=this.register(new n(s,o,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};c.CharSizeService=k=p([y(2,h.IOptionsService)],k);class g extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(o,f){o!==void 0&&o>0&&f!==void 0&&f>0&&(this._result.width=o,this._result.height=f)}}class n extends g{constructor(o,f,S){super(),this._document=o,this._parentElement=f,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class l extends g{constructor(o){super(),this._optionsService=o,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const f=this._ctx.measureText("W");if(!("width"in f&&"fontBoundingBoxAscent"in f&&"fontBoundingBoxDescent"in f))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const o=this._ctx.measureText("W");return this._validateAndSet(o.width,o.fontBoundingBoxAscent+o.fontBoundingBoxDescent),this._result}}},4269:function(U,c,u){var p=this&&this.__decorate||function(l,s,o,f){var S,C=arguments.length,b=C<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,s,o,f);else for(var _=l.length-1;_>=0;_--)(S=l[_])&&(b=(C<3?S(b):C>3?S(s,o,b):S(s,o))||b);return C>3&&b&&Object.defineProperty(s,o,b),b},y=this&&this.__param||function(l,s){return function(o,f){s(o,f,l)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;const h=u(3734),m=u(643),w=u(511),k=u(2585);class g extends h.AttributeData{constructor(s,o,f){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=o,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.JoinedCellData=g;let n=c.CharacterJoinerService=class Nu{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(s){const o={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(o),o.id}deregister(s){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===s)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(s);if(!o||o.length===0)return[];const f=[],S=o.translateToString(!0);let C=0,b=0,_=0,D=o.getFg(0),N=o.getBg(0);for(let z=0;z<o.getTrimmedLength();z++)if(o.loadCell(z,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==N){if(z-C>1){const G=this._getJoinedRanges(S,_,b,o,C);for(let j=0;j<G.length;j++)f.push(G[j])}C=z,_=b,D=this._workCell.fg,N=this._workCell.bg}b+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const z=this._getJoinedRanges(S,_,b,o,C);for(let G=0;G<z.length;G++)f.push(z[G])}return f}_getJoinedRanges(s,o,f,S,C){const b=s.substring(o,f);let _=[];try{_=this._characterJoiners[0].handler(b)}catch(D){console.error(D)}for(let D=1;D<this._characterJoiners.length;D++)try{const N=this._characterJoiners[D].handler(b);for(let z=0;z<N.length;z++)Nu._mergeRanges(_,N[z])}catch(N){console.error(N)}return this._stringRangesToCellRanges(_,S,C),_}_stringRangesToCellRanges(s,o,f){let S=0,C=!1,b=0,_=s[S];if(_){for(let D=f;D<this._bufferService.cols;D++){const N=o.getWidth(D),z=o.getString(D).length||m.WHITESPACE_CELL_CHAR.length;if(N!==0){if(!C&&_[0]<=b&&(_[0]=D,C=!0),_[1]<=b){if(_[1]=D,_=s[++S],!_)break;_[0]<=b?(_[0]=D,C=!0):C=!1}b+=z}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(s,o){let f=!1;for(let S=0;S<s.length;S++){const C=s[S];if(f){if(o[1]<=C[0])return s[S-1][1]=o[1],s;if(o[1]<=C[1])return s[S-1][1]=Math.max(o[1],C[1]),s.splice(S,1),s;s.splice(S,1),S--}else{if(o[1]<=C[0])return s.splice(S,0,o),s;if(o[1]<=C[1])return C[0]=Math.min(o[0],C[0]),s;o[0]<C[1]&&(C[0]=Math.min(o[0],C[0]),f=!0)}}return f?s[s.length-1][1]=o[1]:s.push(o),s}};c.CharacterJoinerService=n=p([y(0,k.IBufferService)],n)},5114:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreBrowserService=void 0;const p=u(844),y=u(8460),h=u(3656);class m extends p.Disposable{constructor(g,n,l){super(),this._textarea=g,this._window=n,this.mainDocument=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new y.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((s=>this._screenDprMonitor.setWindow(s)))),this.register((0,y.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}c.CoreBrowserService=m;class w extends p.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new p.MutableDisposable),this._onDprChange=this.register(new y.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,p.toDisposable)((()=>this.clearListener())))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LinkProviderService=void 0;const p=u(844);class y extends p.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,p.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const w=this.linkProviders.indexOf(m);w!==-1&&this.linkProviders.splice(w,1)}}}}c.LinkProviderService=y},8934:function(U,c,u){var p=this&&this.__decorate||function(k,g,n,l){var s,o=arguments.length,f=o<3?g:l===null?l=Object.getOwnPropertyDescriptor(g,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(k,g,n,l);else for(var S=k.length-1;S>=0;S--)(s=k[S])&&(f=(o<3?s(f):o>3?s(g,n,f):s(g,n))||f);return o>3&&f&&Object.defineProperty(g,n,f),f},y=this&&this.__param||function(k,g){return function(n,l){g(n,l,k)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseService=void 0;const h=u(4725),m=u(9806);let w=c.MouseService=class{constructor(k,g){this._renderService=k,this._charSizeService=g}getCoords(k,g,n,l,s){return(0,m.getCoords)(window,k,g,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(k,g){const n=(0,m.getCoordsRelativeToElement)(window,k,g);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};c.MouseService=w=p([y(0,h.IRenderService),y(1,h.ICharSizeService)],w)},3230:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,S){var C,b=arguments.length,_=b<3?o:S===null?S=Object.getOwnPropertyDescriptor(o,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(s,o,f,S);else for(var D=s.length-1;D>=0;D--)(C=s[D])&&(_=(b<3?C(_):b>3?C(o,f,_):C(o,f))||_);return b>3&&_&&Object.defineProperty(o,f,_),_},y=this&&this.__param||function(s,o){return function(f,S){o(f,S,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderService=void 0;const h=u(6193),m=u(4725),w=u(8460),k=u(844),g=u(7226),n=u(2585);let l=c.RenderService=class extends k.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(s,o,f,S,C,b,_,D){super(),this._rowCount=s,this._charSizeService=S,this._renderer=this.register(new k.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new k.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(((N,z)=>this._renderRows(N,z)),_),this.register(this._renderDebouncer),this.register(_.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(b.onResize((()=>this._fullRefresh()))),this.register(b.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(f.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(C.onDecorationRegistered((()=>this._fullRefresh()))),this.register(C.onDecorationRemoved((()=>this._fullRefresh()))),this.register(f.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()}))),this.register(f.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(b.buffer.y,b.buffer.y,!0)))),this.register(D.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(_.window,o),this.register(_.onWindowChange((N=>this._registerIntersectionObserver(N,o))))}_registerIntersectionObserver(s,o){if("IntersectionObserver"in s){const f=new s.IntersectionObserver((S=>this._handleIntersectionChange(S[S.length-1])),{threshold:0});f.observe(o),this._observerDisposable.value=(0,k.toDisposable)((()=>f.disconnect()))}}_handleIntersectionChange(s){this._isPaused=s.isIntersecting===void 0?s.intersectionRatio===0:!s.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(s,o,f=!1){this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(s,o,this._rowCount))}_renderRows(s,o){this._renderer.value&&(s=Math.min(s,this._rowCount-1),o=Math.min(o,this._rowCount-1),this._renderer.value.renderRows(s,o),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:s,end:o}),this._onRender.fire({start:s,end:o}),this._isNextRenderRedrawOnly=!0)}resize(s,o){this._rowCount=o,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(s){this._renderer.value=s,this._renderer.value&&(this._renderer.value.onRequestRedraw((o=>this.refreshRows(o.start,o.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(s){return this._renderDebouncer.addRefreshCallback(s)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(s,o){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(s,o))):this._renderer.value.handleResize(s,o),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(s,o,f){this._selectionState.start=s,this._selectionState.end=o,this._selectionState.columnSelectMode=f,this._renderer.value?.handleSelectionChanged(s,o,f)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};c.RenderService=l=p([y(2,n.IOptionsService),y(3,m.ICharSizeService),y(4,n.IDecorationService),y(5,n.IBufferService),y(6,m.ICoreBrowserService),y(7,m.IThemeService)],l)},9312:function(U,c,u){var p=this&&this.__decorate||function(_,D,N,z){var G,j=arguments.length,te=j<3?D:z===null?z=Object.getOwnPropertyDescriptor(D,N):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(_,D,N,z);else for(var X=_.length-1;X>=0;X--)(G=_[X])&&(te=(j<3?G(te):j>3?G(D,N,te):G(D,N))||te);return j>3&&te&&Object.defineProperty(D,N,te),te},y=this&&this.__param||function(_,D){return function(N,z){D(N,z,_)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionService=void 0;const h=u(9806),m=u(9504),w=u(456),k=u(4725),g=u(8460),n=u(844),l=u(6114),s=u(4841),o=u(511),f=u(2585),S="",C=new RegExp(S,"g");let b=c.SelectionService=class extends n.Disposable{constructor(_,D,N,z,G,j,te,X,le){super(),this._element=_,this._screenElement=D,this._linkifier=N,this._bufferService=z,this._coreService=G,this._mouseService=j,this._optionsService=te,this._renderService=X,this._coreBrowserService=le,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=pe=>this._handleMouseMove(pe),this._mouseUpListener=pe=>this._handleMouseUp(pe),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((pe=>this._handleTrim(pe))),this.register(this._bufferService.buffers.onBufferActivate((pe=>this._handleBufferActivate(pe)))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const _=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!_||!D||_[0]===D[0]&&_[1]===D[1])}get selectionText(){const _=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;if(!_||!D)return"";const N=this._bufferService.buffer,z=[];if(this._activeSelectionMode===3){if(_[0]===D[0])return"";const G=_[0]<D[0]?_[0]:D[0],j=_[0]<D[0]?D[0]:_[0];for(let te=_[1];te<=D[1];te++){const X=N.translateBufferLineToString(te,!0,G,j);z.push(X)}}else{const G=_[1]===D[1]?D[0]:void 0;z.push(N.translateBufferLineToString(_[1],!0,_[0],G));for(let j=_[1]+1;j<=D[1]-1;j++){const te=N.lines.get(j),X=N.translateBufferLineToString(j,!0);te?.isWrapped?z[z.length-1]+=X:z.push(X)}if(_[1]!==D[1]){const j=N.lines.get(D[1]),te=N.translateBufferLineToString(D[1],!0,0,D[0]);j&&j.isWrapped?z[z.length-1]+=te:z.push(te)}}return z.map((G=>G.replace(C," "))).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),l.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){const D=this._getMouseBufferCoords(_),N=this._model.finalSelectionStart,z=this._model.finalSelectionEnd;return!!(N&&z&&D)&&this._areCoordsInSelection(D,N,z)}isCellInSelection(_,D){const N=this._model.finalSelectionStart,z=this._model.finalSelectionEnd;return!(!N||!z)&&this._areCoordsInSelection([_,D],N,z)}_areCoordsInSelection(_,D,N){return _[1]>D[1]&&_[1]<N[1]||D[1]===N[1]&&_[1]===D[1]&&_[0]>=D[0]&&_[0]<N[0]||D[1]<N[1]&&_[1]===N[1]&&_[0]<N[0]||D[1]<N[1]&&_[1]===D[1]&&_[0]>=D[0]}_selectWordAtCursor(_,D){const N=this._linkifier.currentLink?.link?.range;if(N)return this._model.selectionStart=[N.start.x-1,N.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(N,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const z=this._getMouseBufferCoords(_);return!!z&&(this._selectWordAt(z,D),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,D){this._model.clearSelection(),_=Math.max(_,0),D=Math.min(D,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,D],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){const D=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(D)return D[0]--,D[1]--,D[1]+=this._bufferService.buffer.ydisp,D}_getMouseEventScrollAmount(_){let D=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1];const N=this._renderService.dimensions.css.canvas.height;return D>=0&&D<=N?0:(D>N&&(D-=N),D=Math.min(Math.max(D,-50),50),D/=50,D/Math.abs(D)+Math.round(14*D))}shouldForceSelection(_){return l.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const D=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);D&&D.length!==this._model.selectionStart[0]&&D.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){const D=this._getMouseBufferCoords(_);D&&(this._activeSelectionMode=2,this._selectLineAt(D[1]))}shouldColumnSelect(_){return _.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;const D=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const N=this._bufferService.buffer;if(this._model.selectionEnd[1]<N.lines.length){const z=N.lines.get(this._model.selectionEnd[1]);z&&z.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}D&&D[0]===this._model.selectionEnd[0]&&D[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){const D=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&D<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const N=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(N&&N[0]!==void 0&&N[1]!==void 0){const z=(0,m.moveToCellSequence)(N[0]-1,N[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(z,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const _=this._model.finalSelectionStart,D=this._model.finalSelectionEnd,N=!(!_||!D||_[0]===D[0]&&_[1]===D[1]);N?_&&D&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&D[0]===this._oldSelectionEnd[0]&&D[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,D,N)):this._oldHasSelection&&this._fireOnSelectionChange(_,D,N)}_fireOnSelectionChange(_,D,N){this._oldSelectionStart=_,this._oldSelectionEnd=D,this._oldHasSelection=N,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim((D=>this._handleTrim(D)))}_convertViewportColToCharacterIndex(_,D){let N=D;for(let z=0;D>=z;z++){const G=_.loadCell(z,this._workCell).getChars().length;this._workCell.getWidth()===0?N--:G>1&&D!==z&&(N+=G-1)}return N}setSelection(_,D,N){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,D],this._model.selectionStartLength=N,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,D,N=!0,z=!0){if(_[0]>=this._bufferService.cols)return;const G=this._bufferService.buffer,j=G.lines.get(_[1]);if(!j)return;const te=G.translateBufferLineToString(_[1],!1);let X=this._convertViewportColToCharacterIndex(j,_[0]),le=X;const pe=_[0]-X;let Y=0,R=0,I=0,E=0;if(te.charAt(X)===" "){for(;X>0&&te.charAt(X-1)===" ";)X--;for(;le<te.length&&te.charAt(le+1)===" ";)le++}else{let ce=_[0],Ce=_[0];j.getWidth(ce)===0&&(Y++,ce--),j.getWidth(Ce)===2&&(R++,Ce++);const be=j.getString(Ce).length;for(be>1&&(E+=be-1,le+=be-1);ce>0&&X>0&&!this._isCharWordSeparator(j.loadCell(ce-1,this._workCell));){j.loadCell(ce-1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,ce--):q>1&&(I+=q-1,X-=q-1),X--,ce--}for(;Ce<j.length&&le+1<te.length&&!this._isCharWordSeparator(j.loadCell(Ce+1,this._workCell));){j.loadCell(Ce+1,this._workCell);const q=this._workCell.getChars().length;this._workCell.getWidth()===2?(R++,Ce++):q>1&&(E+=q-1,le+=q-1),le++,Ce++}}le++;let A=X+pe-Y+I,se=Math.min(this._bufferService.cols,le-X+Y+R-I-E);if(D||te.slice(X,le).trim()!==""){if(N&&A===0&&j.getCodePoint(0)!==32){const ce=G.lines.get(_[1]-1);if(ce&&j.isWrapped&&ce.getCodePoint(this._bufferService.cols-1)!==32){const Ce=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(Ce){const be=this._bufferService.cols-Ce.start;A-=be,se+=be}}}if(z&&A+se===this._bufferService.cols&&j.getCodePoint(this._bufferService.cols-1)!==32){const ce=G.lines.get(_[1]+1);if(ce?.isWrapped&&ce.getCodePoint(0)!==32){const Ce=this._getWordAt([0,_[1]+1],!1,!1,!0);Ce&&(se+=Ce.length)}}return{start:A,length:se}}}_selectWordAt(_,D){const N=this._getWordAt(_,D);if(N){for(;N.start<0;)N.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[N.start,_[1]],this._model.selectionStartLength=N.length}}_selectToWordAt(_){const D=this._getWordAt(_,!0);if(D){let N=_[1];for(;D.start<0;)D.start+=this._bufferService.cols,N--;if(!this._model.areSelectionValuesReversed())for(;D.start+D.length>this._bufferService.cols;)D.length-=this._bufferService.cols,N++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?D.start:D.start+D.length,N]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){const D=this._bufferService.buffer.getWrappedRangeForLine(_),N={start:{x:0,y:D.first},end:{x:this._bufferService.cols-1,y:D.last}};this._model.selectionStart=[0,D.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(N,this._bufferService.cols)}};c.SelectionService=b=p([y(3,f.IBufferService),y(4,f.ICoreService),y(5,k.IMouseService),y(6,f.IOptionsService),y(7,k.IRenderService),y(8,k.ICoreBrowserService)],b)},4725:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ILinkProviderService=c.IThemeService=c.ICharacterJoinerService=c.ISelectionService=c.IRenderService=c.IMouseService=c.ICoreBrowserService=c.ICharSizeService=void 0;const p=u(8343);c.ICharSizeService=(0,p.createDecorator)("CharSizeService"),c.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),c.IMouseService=(0,p.createDecorator)("MouseService"),c.IRenderService=(0,p.createDecorator)("RenderService"),c.ISelectionService=(0,p.createDecorator)("SelectionService"),c.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),c.IThemeService=(0,p.createDecorator)("ThemeService"),c.ILinkProviderService=(0,p.createDecorator)("LinkProviderService")},6731:function(U,c,u){var p=this&&this.__decorate||function(b,_,D,N){var z,G=arguments.length,j=G<3?_:N===null?N=Object.getOwnPropertyDescriptor(_,D):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(b,_,D,N);else for(var te=b.length-1;te>=0;te--)(z=b[te])&&(j=(G<3?z(j):G>3?z(_,D,j):z(_,D))||j);return G>3&&j&&Object.defineProperty(_,D,j),j},y=this&&this.__param||function(b,_){return function(D,N){_(D,N,b)}};Object.defineProperty(c,"__esModule",{value:!0}),c.ThemeService=c.DEFAULT_ANSI_COLORS=void 0;const h=u(7239),m=u(8055),w=u(8460),k=u(844),g=u(2585),n=m.css.toColor("#ffffff"),l=m.css.toColor("#000000"),s=m.css.toColor("#ffffff"),o=m.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};c.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let D=0;D<216;D++){const N=_[D/36%6|0],z=_[D/6%6|0],G=_[D%6];b.push({css:m.channels.toCss(N,z,G),rgba:m.channels.toRgba(N,z,G)})}for(let D=0;D<24;D++){const N=8+10*D;b.push({css:m.channels.toCss(N,N,N),rgba:m.channels.toRgba(N,N,N)})}return b})());let S=c.ThemeService=class extends k.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:l,cursor:s,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:m.color.blend(l,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:m.color.blend(l,f),ansi:c.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(b={}){const _=this._colors;if(_.foreground=C(b.foreground,n),_.background=C(b.background,l),_.cursor=C(b.cursor,s),_.cursorAccent=C(b.cursorAccent,o),_.selectionBackgroundTransparent=C(b.selectionBackground,f),_.selectionBackgroundOpaque=m.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=C(b.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=m.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=b.selectionForeground?C(b.selectionForeground,m.NULL_COLOR):void 0,_.selectionForeground===m.NULL_COLOR&&(_.selectionForeground=void 0),m.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=m.color.opacity(_.selectionBackgroundTransparent,.3)),m.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=m.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=c.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=C(b.black,c.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=C(b.red,c.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=C(b.green,c.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=C(b.yellow,c.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=C(b.blue,c.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=C(b.magenta,c.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=C(b.cyan,c.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=C(b.white,c.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=C(b.brightBlack,c.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=C(b.brightRed,c.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=C(b.brightGreen,c.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=C(b.brightYellow,c.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=C(b.brightBlue,c.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=C(b.brightMagenta,c.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=C(b.brightCyan,c.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=C(b.brightWhite,c.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const D=Math.min(_.ansi.length-16,b.extendedAnsi.length);for(let N=0;N<D;N++)_.ansi[N+16]=C(b.extendedAnsi[N],c.DEFAULT_ANSI_COLORS[N+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(b,_){if(b!==void 0)try{return m.css.toColor(b)}catch{}return _}c.ThemeService=S=p([y(0,g.IOptionsService)],S)},6349:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CircularList=void 0;const p=u(8460),y=u(844);class h extends y.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const k=new Array(w);for(let g=0;g<Math.min(w,this.length);g++)k[g]=this._array[this._getCyclicIndex(g)];this._array=k,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let k=this._length;k<w;k++)this._array[k]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,k){this._array[this._getCyclicIndex(w)]=k}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,k,...g){if(k){for(let n=w;n<this._length-k;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+k)];this._length-=k,this.onDeleteEmitter.fire({index:w,amount:k})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+g.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<g.length;n++)this._array[this._getCyclicIndex(w+n)]=g[n];if(g.length&&this.onInsertEmitter.fire({index:w,amount:g.length}),this._length+g.length>this._maxLength){const n=this._length+g.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=g.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,k,g){if(!(k<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let l=k-1;l>=0;l--)this.set(w+l+g,this.get(w+l));const n=w+k+g-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<k;n++)this.set(w+n+g,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}c.CircularList=h},1439:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function u(p,y=5){if(typeof p!="object")return p;const h=Array.isArray(p)?[]:{};for(const m in p)h[m]=y<=1?p[m]:p[m]&&u(p[m],y-1);return h}},8055:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=c.NULL_COLOR=void 0;let u=0,p=0,y=0,h=0;var m,w,k,g,n;function l(o){const f=o.toString(16);return f.length<2?"0"+f:f}function s(o,f){return o<f?(f+.05)/(o+.05):(o+.05)/(f+.05)}c.NULL_COLOR={css:"#00000000",rgba:0},(function(o){o.toCss=function(f,S,C,b){return b!==void 0?`#${l(f)}${l(S)}${l(C)}${l(b)}`:`#${l(f)}${l(S)}${l(C)}`},o.toRgba=function(f,S,C,b=255){return(f<<24|S<<16|C<<8|b)>>>0},o.toColor=function(f,S,C,b){return{css:o.toCss(f,S,C,b),rgba:o.toRgba(f,S,C,b)}}})(m||(c.channels=m={})),(function(o){function f(S,C){return h=Math.round(255*C),[u,p,y]=n.toChannels(S.rgba),{css:m.toCss(u,p,y,h),rgba:m.toRgba(u,p,y,h)}}o.blend=function(S,C){if(h=(255&C.rgba)/255,h===1)return{css:C.css,rgba:C.rgba};const b=C.rgba>>24&255,_=C.rgba>>16&255,D=C.rgba>>8&255,N=S.rgba>>24&255,z=S.rgba>>16&255,G=S.rgba>>8&255;return u=N+Math.round((b-N)*h),p=z+Math.round((_-z)*h),y=G+Math.round((D-G)*h),{css:m.toCss(u,p,y),rgba:m.toRgba(u,p,y)}},o.isOpaque=function(S){return(255&S.rgba)==255},o.ensureContrastRatio=function(S,C,b){const _=n.ensureContrastRatio(S.rgba,C.rgba,b);if(_)return m.toColor(_>>24&255,_>>16&255,_>>8&255)},o.opaque=function(S){const C=(255|S.rgba)>>>0;return[u,p,y]=n.toChannels(C),{css:m.toCss(u,p,y),rgba:C}},o.opacity=f,o.multiplyOpacity=function(S,C){return h=255&S.rgba,f(S,h*C/255)},o.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}})(w||(c.color=w={})),(function(o){let f,S;try{const C=document.createElement("canvas");C.width=1,C.height=1;const b=C.getContext("2d",{willReadFrequently:!0});b&&(f=b,f.globalCompositeOperation="copy",S=f.createLinearGradient(0,0,1,1))}catch{}o.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return u=parseInt(C.slice(1,2).repeat(2),16),p=parseInt(C.slice(2,3).repeat(2),16),y=parseInt(C.slice(3,4).repeat(2),16),m.toColor(u,p,y);case 5:return u=parseInt(C.slice(1,2).repeat(2),16),p=parseInt(C.slice(2,3).repeat(2),16),y=parseInt(C.slice(3,4).repeat(2),16),h=parseInt(C.slice(4,5).repeat(2),16),m.toColor(u,p,y,h);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const b=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),p=parseInt(b[2]),y=parseInt(b[3]),h=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),m.toColor(u,p,y,h);if(!f||!S)throw new Error("css.toColor: Unsupported css format");if(f.fillStyle=S,f.fillStyle=C,typeof f.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(f.fillRect(0,0,1,1),[u,p,y,h]=f.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(u,p,y,h),css:C}}})(k||(c.css=k={})),(function(o){function f(S,C,b){const _=S/255,D=C/255,N=b/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.0722*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))}o.relativeLuminance=function(S){return f(S>>16&255,S>>8&255,255&S)},o.relativeLuminance2=f})(g||(c.rgb=g={})),(function(o){function f(C,b,_){const D=C>>24&255,N=C>>16&255,z=C>>8&255;let G=b>>24&255,j=b>>16&255,te=b>>8&255,X=s(g.relativeLuminance2(G,j,te),g.relativeLuminance2(D,N,z));for(;X<_&&(G>0||j>0||te>0);)G-=Math.max(0,Math.ceil(.1*G)),j-=Math.max(0,Math.ceil(.1*j)),te-=Math.max(0,Math.ceil(.1*te)),X=s(g.relativeLuminance2(G,j,te),g.relativeLuminance2(D,N,z));return(G<<24|j<<16|te<<8|255)>>>0}function S(C,b,_){const D=C>>24&255,N=C>>16&255,z=C>>8&255;let G=b>>24&255,j=b>>16&255,te=b>>8&255,X=s(g.relativeLuminance2(G,j,te),g.relativeLuminance2(D,N,z));for(;X<_&&(G<255||j<255||te<255);)G=Math.min(255,G+Math.ceil(.1*(255-G))),j=Math.min(255,j+Math.ceil(.1*(255-j))),te=Math.min(255,te+Math.ceil(.1*(255-te))),X=s(g.relativeLuminance2(G,j,te),g.relativeLuminance2(D,N,z));return(G<<24|j<<16|te<<8|255)>>>0}o.blend=function(C,b){if(h=(255&b)/255,h===1)return b;const _=b>>24&255,D=b>>16&255,N=b>>8&255,z=C>>24&255,G=C>>16&255,j=C>>8&255;return u=z+Math.round((_-z)*h),p=G+Math.round((D-G)*h),y=j+Math.round((N-j)*h),m.toRgba(u,p,y)},o.ensureContrastRatio=function(C,b,_){const D=g.relativeLuminance(C>>8),N=g.relativeLuminance(b>>8);if(s(D,N)<_){if(N<D){const j=f(C,b,_),te=s(D,g.relativeLuminance(j>>8));if(te<_){const X=S(C,b,_);return te>s(D,g.relativeLuminance(X>>8))?j:X}return j}const z=S(C,b,_),G=s(D,g.relativeLuminance(z>>8));if(G<_){const j=f(C,b,_);return G>s(D,g.relativeLuminance(j>>8))?z:j}return z}},o.reduceLuminance=f,o.increaseLuminance=S,o.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}})(n||(c.rgba=n={})),c.toPaddedHex=l,c.contrastRatio=s},8969:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreTerminal=void 0;const p=u(844),y=u(2585),h=u(4348),m=u(7866),w=u(744),k=u(7302),g=u(6975),n=u(8460),l=u(1753),s=u(1480),o=u(7994),f=u(9282),S=u(5435),C=u(5981),b=u(2660);let _=!1;class D extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event((z=>{this._onScrollApi?.fire(z.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(z){for(const G in z)this.optionsService.options[G]=z[G]}constructor(z){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new k.OptionsService(z)),this._instantiationService.setService(y.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(y.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(y.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(y.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(y.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(y.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(y.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(y.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((G=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((G=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new C.WriteBuffer(((G,j)=>this._inputHandler.parse(G,j)))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(z,G){this._writeBuffer.write(z,G)}writeSync(z,G){this._logService.logLevel<=y.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(z,G)}input(z,G=!0){this.coreService.triggerDataEvent(z,G)}resize(z,G){isNaN(z)||isNaN(G)||(z=Math.max(z,w.MINIMUM_COLS),G=Math.max(G,w.MINIMUM_ROWS),this._bufferService.resize(z,G))}scroll(z,G=!1){this._bufferService.scroll(z,G)}scrollLines(z,G,j){this._bufferService.scrollLines(z,G,j)}scrollPages(z){this.scrollLines(z*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(z){const G=z-this._bufferService.buffer.ydisp;G!==0&&this.scrollLines(G)}registerEscHandler(z,G){return this._inputHandler.registerEscHandler(z,G)}registerDcsHandler(z,G){return this._inputHandler.registerDcsHandler(z,G)}registerCsiHandler(z,G){return this._inputHandler.registerCsiHandler(z,G)}registerOscHandler(z,G){return this._inputHandler.registerOscHandler(z,G)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let z=!1;const G=this.optionsService.rawOptions.windowsPty;G&&G.buildNumber!==void 0&&G.buildNumber!==void 0?z=G.backend==="conpty"&&G.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(z=!0),z?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const z=[];z.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),z.push(this.registerCsiHandler({final:"H"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)((()=>{for(const G of z)G.dispose()}))}}}c.CoreTerminal=D},8460:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.runAndSubscribe=c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===u)return void this._listeners.splice(p,1)}}})),this._event}fire(u,p){const y=[];for(let h=0;h<this._listeners.length;h++)y.push(this._listeners[h]);for(let h=0;h<y.length;h++)y[h].call(void 0,u,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},c.forwardEvent=function(u,p){return u((y=>p.fire(y)))},c.runAndSubscribe=function(u,p){return p(void 0),u((y=>p(y)))}},5435:function(U,c,u){var p=this&&this.__decorate||function(Y,R,I,E){var A,se=arguments.length,ce=se<3?R:E===null?E=Object.getOwnPropertyDescriptor(R,I):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(Y,R,I,E);else for(var Ce=Y.length-1;Ce>=0;Ce--)(A=Y[Ce])&&(ce=(se<3?A(ce):se>3?A(R,I,ce):A(R,I))||ce);return se>3&&ce&&Object.defineProperty(R,I,ce),ce},y=this&&this.__param||function(Y,R){return function(I,E){R(I,E,Y)}};Object.defineProperty(c,"__esModule",{value:!0}),c.InputHandler=c.WindowsOptionsReportType=void 0;const h=u(2584),m=u(7116),w=u(2015),k=u(844),g=u(482),n=u(8437),l=u(8460),s=u(643),o=u(511),f=u(3734),S=u(2585),C=u(1480),b=u(6242),_=u(6351),D=u(5941),N={"(":0,")":1,"*":2,"+":3,"-":1,".":2},z=131072;function G(Y,R){if(Y>24)return R.setWinLines||!1;switch(Y){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var j;(function(Y){Y[Y.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Y[Y.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(j||(c.WindowsOptionsReportType=j={}));let te=0;class X extends k.Disposable{getAttrData(){return this._curAttrData}constructor(R,I,E,A,se,ce,Ce,be,q=new w.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=I,this._coreService=E,this._logService=A,this._optionsService=se,this._oscLinkService=ce,this._coreMouseService=Ce,this._unicodeService=be,this._parser=q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new le(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((P=>this._activeBuffer=P.activeBuffer))),this._parser.setCsiHandlerFallback(((P,re)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(P),params:re.toArray()})})),this._parser.setEscHandlerFallback((P=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(P)})})),this._parser.setExecuteHandlerFallback((P=>{this._logService.debug("Unknown EXECUTE code: ",{code:P})})),this._parser.setOscHandlerFallback(((P,re,he)=>{this._logService.debug("Unknown OSC code: ",{identifier:P,action:re,data:he})})),this._parser.setDcsHandlerFallback(((P,re,he)=>{re==="HOOK"&&(he=he.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(P),action:re,payload:he})})),this._parser.setPrintHandler(((P,re,he)=>this.print(P,re,he))),this._parser.registerCsiHandler({final:"@"},(P=>this.insertChars(P))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(P=>this.scrollLeft(P))),this._parser.registerCsiHandler({final:"A"},(P=>this.cursorUp(P))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(P=>this.scrollRight(P))),this._parser.registerCsiHandler({final:"B"},(P=>this.cursorDown(P))),this._parser.registerCsiHandler({final:"C"},(P=>this.cursorForward(P))),this._parser.registerCsiHandler({final:"D"},(P=>this.cursorBackward(P))),this._parser.registerCsiHandler({final:"E"},(P=>this.cursorNextLine(P))),this._parser.registerCsiHandler({final:"F"},(P=>this.cursorPrecedingLine(P))),this._parser.registerCsiHandler({final:"G"},(P=>this.cursorCharAbsolute(P))),this._parser.registerCsiHandler({final:"H"},(P=>this.cursorPosition(P))),this._parser.registerCsiHandler({final:"I"},(P=>this.cursorForwardTab(P))),this._parser.registerCsiHandler({final:"J"},(P=>this.eraseInDisplay(P,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(P=>this.eraseInDisplay(P,!0))),this._parser.registerCsiHandler({final:"K"},(P=>this.eraseInLine(P,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(P=>this.eraseInLine(P,!0))),this._parser.registerCsiHandler({final:"L"},(P=>this.insertLines(P))),this._parser.registerCsiHandler({final:"M"},(P=>this.deleteLines(P))),this._parser.registerCsiHandler({final:"P"},(P=>this.deleteChars(P))),this._parser.registerCsiHandler({final:"S"},(P=>this.scrollUp(P))),this._parser.registerCsiHandler({final:"T"},(P=>this.scrollDown(P))),this._parser.registerCsiHandler({final:"X"},(P=>this.eraseChars(P))),this._parser.registerCsiHandler({final:"Z"},(P=>this.cursorBackwardTab(P))),this._parser.registerCsiHandler({final:"`"},(P=>this.charPosAbsolute(P))),this._parser.registerCsiHandler({final:"a"},(P=>this.hPositionRelative(P))),this._parser.registerCsiHandler({final:"b"},(P=>this.repeatPrecedingCharacter(P))),this._parser.registerCsiHandler({final:"c"},(P=>this.sendDeviceAttributesPrimary(P))),this._parser.registerCsiHandler({prefix:">",final:"c"},(P=>this.sendDeviceAttributesSecondary(P))),this._parser.registerCsiHandler({final:"d"},(P=>this.linePosAbsolute(P))),this._parser.registerCsiHandler({final:"e"},(P=>this.vPositionRelative(P))),this._parser.registerCsiHandler({final:"f"},(P=>this.hVPosition(P))),this._parser.registerCsiHandler({final:"g"},(P=>this.tabClear(P))),this._parser.registerCsiHandler({final:"h"},(P=>this.setMode(P))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(P=>this.setModePrivate(P))),this._parser.registerCsiHandler({final:"l"},(P=>this.resetMode(P))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(P=>this.resetModePrivate(P))),this._parser.registerCsiHandler({final:"m"},(P=>this.charAttributes(P))),this._parser.registerCsiHandler({final:"n"},(P=>this.deviceStatus(P))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(P=>this.deviceStatusPrivate(P))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(P=>this.softReset(P))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(P=>this.setCursorStyle(P))),this._parser.registerCsiHandler({final:"r"},(P=>this.setScrollRegion(P))),this._parser.registerCsiHandler({final:"s"},(P=>this.saveCursor(P))),this._parser.registerCsiHandler({final:"t"},(P=>this.windowOptions(P))),this._parser.registerCsiHandler({final:"u"},(P=>this.restoreCursor(P))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(P=>this.insertColumns(P))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(P=>this.deleteColumns(P))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(P=>this.selectProtected(P))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(P=>this.requestMode(P,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(P=>this.requestMode(P,!1))),this._parser.setExecuteHandler(h.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(h.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(h.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(h.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(h.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(h.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(h.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(h.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(h.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new b.OscHandler((P=>(this.setTitle(P),this.setIconName(P),!0)))),this._parser.registerOscHandler(1,new b.OscHandler((P=>this.setIconName(P)))),this._parser.registerOscHandler(2,new b.OscHandler((P=>this.setTitle(P)))),this._parser.registerOscHandler(4,new b.OscHandler((P=>this.setOrReportIndexedColor(P)))),this._parser.registerOscHandler(8,new b.OscHandler((P=>this.setHyperlink(P)))),this._parser.registerOscHandler(10,new b.OscHandler((P=>this.setOrReportFgColor(P)))),this._parser.registerOscHandler(11,new b.OscHandler((P=>this.setOrReportBgColor(P)))),this._parser.registerOscHandler(12,new b.OscHandler((P=>this.setOrReportCursorColor(P)))),this._parser.registerOscHandler(104,new b.OscHandler((P=>this.restoreIndexedColor(P)))),this._parser.registerOscHandler(110,new b.OscHandler((P=>this.restoreFgColor(P)))),this._parser.registerOscHandler(111,new b.OscHandler((P=>this.restoreBgColor(P)))),this._parser.registerOscHandler(112,new b.OscHandler((P=>this.restoreCursorColor(P)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const P in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:P},(()=>this.selectCharset("("+P))),this._parser.registerEscHandler({intermediates:")",final:P},(()=>this.selectCharset(")"+P))),this._parser.registerEscHandler({intermediates:"*",final:P},(()=>this.selectCharset("*"+P))),this._parser.registerEscHandler({intermediates:"+",final:P},(()=>this.selectCharset("+"+P))),this._parser.registerEscHandler({intermediates:"-",final:P},(()=>this.selectCharset("-"+P))),this._parser.registerEscHandler({intermediates:".",final:P},(()=>this.selectCharset("."+P))),this._parser.registerEscHandler({intermediates:"/",final:P},(()=>this.selectCharset("/"+P)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((P=>(this._logService.error("Parsing error: ",P),P))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler(((P,re)=>this.requestStatusString(P,re))))}_preserveStack(R,I,E,A){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=E,this._parseStack.position=A}_logSlowResolvingAsync(R){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([R,new Promise(((I,E)=>setTimeout((()=>E("#SLOW_TIMEOUT")),5e3)))]).catch((I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,I){let E,A=this._activeBuffer.x,se=this._activeBuffer.y,ce=0;const Ce=this._parseStack.paused;if(Ce){if(E=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(E),E;A=this._parseStack.cursorStartX,se=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>z&&(ce=this._parseStack.position+z)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,(P=>String.fromCharCode(P))).join("")}"`),typeof R=="string"?R.split("").map((P=>P.charCodeAt(0))):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<z&&(this._parseBuffer=new Uint32Array(Math.min(R.length,z))),Ce||this._dirtyRowTracker.clearRange(),R.length>z)for(let P=ce;P<R.length;P+=z){const re=P+z<R.length?P+z:R.length,he=typeof R=="string"?this._stringDecoder.decode(R.substring(P,re),this._parseBuffer):this._utf8Decoder.decode(R.subarray(P,re),this._parseBuffer);if(E=this._parser.parse(this._parseBuffer,he))return this._preserveStack(A,se,he,P),this._logSlowResolvingAsync(E),E}else if(!Ce){const P=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(E=this._parser.parse(this._parseBuffer,P))return this._preserveStack(A,se,P,0),this._logSlowResolvingAsync(E),E}this._activeBuffer.x===A&&this._activeBuffer.y===se||this._onCursorMove.fire();const be=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),q=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);q<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(q,this._bufferService.rows-1),Math.min(be,this._bufferService.rows-1))}print(R,I,E){let A,se;const ce=this._charsetService.charset,Ce=this._optionsService.rawOptions.screenReaderMode,be=this._bufferService.cols,q=this._coreService.decPrivateModes.wraparound,P=this._coreService.modes.insertMode,re=this._curAttrData;let he=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&E-I>0&&he.getWidth(this._activeBuffer.x-1)===2&&he.setCellFromCodepoint(this._activeBuffer.x-1,0,1,re);let ke=this._parser.precedingJoinState;for(let Ee=I;Ee<E;++Ee){if(A=R[Ee],A<127&&ce){const Ve=ce[String.fromCharCode(A)];Ve&&(A=Ve.charCodeAt(0))}const He=this._unicodeService.charProperties(A,ke);se=C.UnicodeService.extractWidth(He);const me=C.UnicodeService.extractShouldJoin(He),Ne=me?C.UnicodeService.extractWidth(ke):0;if(ke=He,Ce&&this._onA11yChar.fire((0,g.stringFromCodePoint)(A)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+se-Ne>be){if(q){const Ve=he;let Oe=this._activeBuffer.x-Ne;for(this._activeBuffer.x=Ne,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),he=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ne>0&&he instanceof n.BufferLine&&he.copyCellsFrom(Ve,Oe,0,Ne,!1);Oe<be;)Ve.setCellFromCodepoint(Oe++,0,1,re)}else if(this._activeBuffer.x=be-1,se===2)continue}if(me&&this._activeBuffer.x){const Ve=he.getWidth(this._activeBuffer.x-1)?1:2;he.addCodepointToCell(this._activeBuffer.x-Ve,A,se);for(let Oe=se-Ne;--Oe>=0;)he.setCellFromCodepoint(this._activeBuffer.x++,0,0,re)}else if(P&&(he.insertCells(this._activeBuffer.x,se-Ne,this._activeBuffer.getNullCell(re)),he.getWidth(be-1)===2&&he.setCellFromCodepoint(be-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,re)),he.setCellFromCodepoint(this._activeBuffer.x++,A,se,re),se>0)for(;--se;)he.setCellFromCodepoint(this._activeBuffer.x++,0,0,re)}this._parser.precedingJoinState=ke,this._activeBuffer.x<be&&E-I>0&&he.getWidth(this._activeBuffer.x)===0&&!he.hasContent(this._activeBuffer.x)&&he.setCellFromCodepoint(this._activeBuffer.x,0,1,re),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,I){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,I):this._parser.registerCsiHandler(R,(E=>!G(E.params[0],this._optionsService.rawOptions.windowOptions)||I(E)))}registerDcsHandler(R,I){return this._parser.registerDcsHandler(R,new _.DcsHandler(I))}registerEscHandler(R,I){return this._parser.registerEscHandler(R,I)}registerOscHandler(R,I){return this._parser.registerOscHandler(R,new b.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=R,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+I)}cursorUp(R){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const I=R.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=R.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=R.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const I=R.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,I,E,A=!1,se=!1){const ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);ce.replaceCells(I,E,this._activeBuffer.getNullCell(this._eraseAttrData()),se),A&&(ce.isWrapped=!1)}_resetBufferLine(R,I=!1){const E=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);E&&(E.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),E.isWrapped=!1)}eraseInDisplay(R,I=!1){let E;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(E=this._activeBuffer.y,this._dirtyRowTracker.markDirty(E),this._eraseInBufferLine(E++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);E<this._bufferService.rows;E++)this._resetBufferLine(E,I);this._dirtyRowTracker.markDirty(E);break;case 1:for(E=this._activeBuffer.y,this._dirtyRowTracker.markDirty(E),this._eraseInBufferLine(E,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(E+1).isWrapped=!1);E--;)this._resetBufferLine(E,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(E=this._bufferService.rows,this._dirtyRowTracker.markDirty(E-1);E--;)this._resetBufferLine(E,I);this._dirtyRowTracker.markDirty(0);break;case 3:const A=this._activeBuffer.lines.length-this._bufferService.rows;A>0&&(this._activeBuffer.lines.trimStart(A),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-A,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-A,0),this._onScroll.fire(0))}return!0}eraseInLine(R,I=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let I=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=this._activeBuffer.ybase+this._activeBuffer.y,A=this._bufferService.rows-1-this._activeBuffer.scrollBottom,se=this._bufferService.rows-1+this._activeBuffer.ybase-A+1;for(;I--;)this._activeBuffer.lines.splice(se-1,1),this._activeBuffer.lines.splice(E,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let I=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=this._activeBuffer.ybase+this._activeBuffer.y;let A;for(A=this._bufferService.rows-1-this._activeBuffer.scrollBottom,A=this._bufferService.rows-1+this._activeBuffer.ybase-A;I--;)this._activeBuffer.lines.splice(E,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let I=R.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let I=R.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=R.params[0]||1;for(let E=this._activeBuffer.scrollTop;E<=this._activeBuffer.scrollBottom;++E){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);A.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),A.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=R.params[0]||1;for(let E=this._activeBuffer.scrollTop;E<=this._activeBuffer.scrollBottom;++E){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);A.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),A.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=R.params[0]||1;for(let E=this._activeBuffer.scrollTop;E<=this._activeBuffer.scrollBottom;++E){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);A.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),A.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=R.params[0]||1;for(let E=this._activeBuffer.scrollTop;E<=this._activeBuffer.scrollBottom;++E){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);A.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),A.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){const I=this._parser.precedingJoinState;if(!I)return!0;const E=R.params[0]||1,A=C.UnicodeService.extractWidth(I),se=this._activeBuffer.x-A,ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(se),Ce=new Uint32Array(ce.length*E);let be=0;for(let P=0;P<ce.length;){const re=ce.codePointAt(P)||0;Ce[be++]=re,P+=re>65535?2:1}let q=be;for(let P=1;P<E;++P)Ce.copyWithin(q,0,be),q+=be;return this.print(Ce,0,q),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let I=0;I<R.length;I++)switch(R.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let I=0;I<R.length;I++)switch(R.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let I=0;I<R.length;I++)switch(R.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let I=0;I<R.length;I++)switch(R.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,I){const E=this._coreService.decPrivateModes,{activeProtocol:A,activeEncoding:se}=this._coreMouseService,ce=this._coreService,{buffers:Ce,cols:be}=this._bufferService,{active:q,alt:P}=Ce,re=this._optionsService.rawOptions,he=me=>me?1:2,ke=R.params[0];return Ee=ke,He=I?ke===2?4:ke===4?he(ce.modes.insertMode):ke===12?3:ke===20?he(re.convertEol):0:ke===1?he(E.applicationCursorKeys):ke===3?re.windowOptions.setWinLines?be===80?2:be===132?1:0:0:ke===6?he(E.origin):ke===7?he(E.wraparound):ke===8?3:ke===9?he(A==="X10"):ke===12?he(re.cursorBlink):ke===25?he(!ce.isCursorHidden):ke===45?he(E.reverseWraparound):ke===66?he(E.applicationKeypad):ke===67?4:ke===1e3?he(A==="VT200"):ke===1002?he(A==="DRAG"):ke===1003?he(A==="ANY"):ke===1004?he(E.sendFocus):ke===1005?4:ke===1006?he(se==="SGR"):ke===1015?4:ke===1016?he(se==="SGR_PIXELS"):ke===1048?1:ke===47||ke===1047||ke===1049?he(q===P):ke===2004?he(E.bracketedPasteMode):0,ce.triggerDataEvent(`${h.C0.ESC}[${I?"":"?"}${Ee};${He}$y`),!0;var Ee,He}_updateAttrColor(R,I,E,A,se){return I===2?(R|=50331648,R&=-16777216,R|=f.AttributeData.fromColorRGB([E,A,se])):I===5&&(R&=-50331904,R|=33554432|255&E),R}_extractColor(R,I,E){const A=[0,0,-1,0,0,0];let se=0,ce=0;do{if(A[ce+se]=R.params[I+ce],R.hasSubParams(I+ce)){const Ce=R.getSubParams(I+ce);let be=0;do A[1]===5&&(se=1),A[ce+be+1+se]=Ce[be];while(++be<Ce.length&&be+ce+1+se<A.length);break}if(A[1]===5&&ce+se>=2||A[1]===2&&ce+se>=5)break;A[1]&&(se=1)}while(++ce+I<R.length&&ce+se<A.length);for(let Ce=2;Ce<A.length;++Ce)A[Ce]===-1&&(A[Ce]=0);switch(A[0]){case 38:E.fg=this._updateAttrColor(E.fg,A[1],A[3],A[4],A[5]);break;case 48:E.bg=this._updateAttrColor(E.bg,A[1],A[3],A[4],A[5]);break;case 58:E.extended=E.extended.clone(),E.extended.underlineColor=this._updateAttrColor(E.extended.underlineColor,A[1],A[3],A[4],A[5])}return ce}_processUnderline(R,I){I.extended=I.extended.clone(),(!~R||R>5)&&(R=1),I.extended.underlineStyle=R,I.fg|=268435456,R===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(R){R.fg=n.DEFAULT_ATTR_DATA.fg,R.bg=n.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=R.length;let E;const A=this._curAttrData;for(let se=0;se<I;se++)E=R.params[se],E>=30&&E<=37?(A.fg&=-50331904,A.fg|=16777216|E-30):E>=40&&E<=47?(A.bg&=-50331904,A.bg|=16777216|E-40):E>=90&&E<=97?(A.fg&=-50331904,A.fg|=16777224|E-90):E>=100&&E<=107?(A.bg&=-50331904,A.bg|=16777224|E-100):E===0?this._processSGR0(A):E===1?A.fg|=134217728:E===3?A.bg|=67108864:E===4?(A.fg|=268435456,this._processUnderline(R.hasSubParams(se)?R.getSubParams(se)[0]:1,A)):E===5?A.fg|=536870912:E===7?A.fg|=67108864:E===8?A.fg|=1073741824:E===9?A.fg|=2147483648:E===2?A.bg|=134217728:E===21?this._processUnderline(2,A):E===22?(A.fg&=-134217729,A.bg&=-134217729):E===23?A.bg&=-67108865:E===24?(A.fg&=-268435457,this._processUnderline(0,A)):E===25?A.fg&=-536870913:E===27?A.fg&=-67108865:E===28?A.fg&=-1073741825:E===29?A.fg&=2147483647:E===39?(A.fg&=-67108864,A.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):E===49?(A.bg&=-67108864,A.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):E===38||E===48||E===58?se+=this._extractColor(R,se,A):E===53?A.bg|=1073741824:E===55?A.bg&=-1073741825:E===59?(A.extended=A.extended.clone(),A.extended.underlineColor=-1,A.updateExtended()):E===100?(A.fg&=-67108864,A.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,A.bg&=-67108864,A.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",E);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,E=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${I};${E}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const I=this._activeBuffer.y+1,E=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${I};${E}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const I=R.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const E=I%2==1;return this._optionsService.options.cursorBlink=E,!0}setScrollRegion(R){const I=R.params[0]||1;let E;return(R.length<2||(E=R.params[1])>this._bufferService.rows||E===0)&&(E=this._bufferService.rows),E>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=E-1,this._setCursor(0,0)),!0}windowOptions(R){if(!G(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(j.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(j.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const I=[],E=R.split(";");for(;E.length>1;){const A=E.shift(),se=E.shift();if(/^\d+$/.exec(A)){const ce=parseInt(A);if(pe(ce))if(se==="?")I.push({type:0,index:ce});else{const Ce=(0,D.parseColor)(se);Ce&&I.push({type:1,index:ce,color:Ce})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(R){const I=R.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(R,I){this._getCurrentLinkId()&&this._finishHyperlink();const E=R.split(":");let A;const se=E.findIndex((ce=>ce.startsWith("id=")));return se!==-1&&(A=E[se].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:A,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,I){const E=R.split(";");for(let A=0;A<E.length&&!(I>=this._specialColors.length);++A,++I)if(E[A]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const se=(0,D.parseColor)(E[A]);se&&this._onColor.fire([{type:1,index:this._specialColors[I],color:se}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const I=[],E=R.split(";");for(let A=0;A<E.length;++A)if(/^\d+$/.exec(E[A])){const se=parseInt(E[A]);pe(se)&&I.push({type:2,index:se})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(N[R[0]],m.CHARSETS[R[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new o.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const E=this._activeBuffer.ybase+this._activeBuffer.y+I,A=this._activeBuffer.lines.get(E);A&&(A.fill(R),A.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,I){const E=this._bufferService.buffer,A=this._optionsService.rawOptions;return(se=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${se}${h.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${E.scrollTop+1};${E.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[A.cursorStyle]-(A.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,I){this._dirtyRowTracker.markRangeDirty(R,I)}}c.InputHandler=X;let le=class{constructor(Y){this._bufferService=Y,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Y){Y<this.start?this.start=Y:Y>this.end&&(this.end=Y)}markRangeDirty(Y,R){Y>R&&(te=Y,Y=R,R=te),Y<this.start&&(this.start=Y),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function pe(Y){return 0<=Y&&Y<256}le=p([y(0,S.IBufferService)],le)},844:(U,c)=>{function u(p){for(const y of p)y.dispose();p.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.MutableDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const y=this._disposables.indexOf(p);y!==-1&&this._disposables.splice(y,1)}},c.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){this._isDisposed||p===this._value||(this._value?.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},c.toDisposable=function(p){return{dispose:p}},c.disposeArray=u,c.getDisposeArrayDisposable=function(p){return{dispose:()=>u(p)}}},1505:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FourKeyMap=c.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(y,h,m){this._data[y]||(this._data[y]={}),this._data[y][h]=m}get(y,h){return this._data[y]?this._data[y][h]:void 0}clear(){this._data={}}}c.TwoKeyMap=u,c.FourKeyMap=class{constructor(){this._data=new u}set(p,y,h,m,w){this._data.get(p,y)||this._data.set(p,y,new u),this._data.get(p,y).set(h,m,w)}get(p,y,h,m){return this._data.get(p,y)?.get(h,m)}clear(){this._data.clear()}}},6114:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isChromeOS=c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.getSafariVersion=c.isSafari=c.isLegacyEdge=c.isFirefox=c.isNode=void 0,c.isNode=typeof process<"u"&&"title"in process;const u=c.isNode?"node":navigator.userAgent,p=c.isNode?"node":navigator.platform;c.isFirefox=u.includes("Firefox"),c.isLegacyEdge=u.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(u),c.getSafariVersion=function(){if(!c.isSafari)return 0;const y=u.match(/Version\/(\d+)/);return y===null||y.length<2?0:parseInt(y[1])},c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),c.isIpad=p==="iPad",c.isIphone=p==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),c.isLinux=p.indexOf("Linux")>=0,c.isChromeOS=/\bCrOS\b/.test(u)},6106:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SortedList=void 0;let u=0;c.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(u=this._search(this._getKey(p)),this._array.splice(u,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;const y=this._getKey(p);if(y===void 0||(u=this._search(y),u===-1)||this._getKey(this._array[u])!==y)return!1;do if(this._array[u]===p)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===y);return!1}*getKeyIterator(p){if(this._array.length!==0&&(u=this._search(p),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===p))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===p)}forEachByKey(p,y){if(this._array.length!==0&&(u=this._search(p),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===p))do y(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===p)}values(){return[...this._array].values()}_search(p){let y=0,h=this._array.length-1;for(;h>=y;){let m=y+h>>1;const w=this._getKey(this._array[m]);if(w>p)h=m-1;else{if(!(w<p)){for(;m>0&&this._getKey(this._array[m-1])===p;)m--;return m}y=m+1}}return y}}},7226:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DebouncedIdleTask=c.IdleTaskQueue=c.PriorityTaskQueue=void 0;const p=u(6114);class y{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let k=0,g=0,n=w.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(k=Date.now(),this._tasks[this._i]()||this._i++,k=Math.max(1,Date.now()-k),g=Math.max(k,g),l=w.timeRemaining(),1.5*g>l)return n-k<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-k))}ms`),void this._start();n=l}this.clear()}}class h extends y{_requestCallback(w){return setTimeout((()=>w(this._createDeadline(16))))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const k=Date.now()+w;return{timeRemaining:()=>Math.max(0,k-Date.now())}}}c.PriorityTaskQueue=h,c.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends y{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:h,c.DebouncedIdleTask=class{constructor(){this._queue=new c.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.updateWindowsModeWrappedState=void 0;const p=u(643);c.updateWindowsModeWrappedState=function(y){const h=y.buffer.lines.get(y.buffer.ybase+y.buffer.y-1),m=h?.get(y.cols-1),w=y.buffer.lines.get(y.buffer.ybase+y.buffer.y);w&&m&&(w.isWrapped=m[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&m[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new u;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}c.AttributeData=u;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,m=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=m}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}c.ExtendedAttrs=p},9092:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Buffer=c.MAX_BUFFER_SIZE=void 0;const p=u(6349),y=u(7226),h=u(3734),m=u(8437),w=u(4634),k=u(511),g=u(643),n=u(4863),l=u(7116);c.MAX_BUFFER_SIZE=4294967295,c.Buffer=class{constructor(s,o,f){this._hasScrollback=s,this._optionsService=o,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=k.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=k.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new y.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,o){return new m.BufferLine(this._bufferService.cols,this.getNullCell(s),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;const o=s+this._optionsService.rawOptions.scrollback;return o>c.MAX_BUFFER_SIZE?c.MAX_BUFFER_SIZE:o}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=m.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,o){const f=this.getNullCell(m.DEFAULT_ATTR_DATA);let S=0;const C=this._getCorrectBufferLength(o);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<s)for(let _=0;_<this.lines.length;_++)S+=+this.lines.get(_).resize(s,f);let b=0;if(this._rows<o)for(let _=this._rows;_<o;_++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(s,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(s,f)));else for(let _=this._rows;_>o;_--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const _=this.lines.length-C;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=C}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,o-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(s,o),this._cols>s))for(let b=0;b<this.lines.length;b++)S+=+this.lines.get(b).resize(s,f);this._cols=s,this._rows=o,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return s}get _isReflowEnabled(){const s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,o){this._cols!==s&&(s>this._cols?this._reflowLarger(s,o):this._reflowSmaller(s,o))}_reflowLarger(s,o){const f=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(f.length>0){const S=(0,w.reflowLargerCreateNewLayout)(this.lines,f);(0,w.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(s,o,S.countRemoved)}}_reflowLargerAdjustViewport(s,o,f){const S=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=f;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new m.BufferLine(s,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(s,o){const f=this.getNullCell(m.DEFAULT_ATTR_DATA),S=[];let C=0;for(let b=this.lines.length-1;b>=0;b--){let _=this.lines.get(b);if(!_||!_.isWrapped&&_.getTrimmedLength()<=s)continue;const D=[_];for(;_.isWrapped&&b>0;)_=this.lines.get(--b),D.unshift(_);const N=this.ybase+this.y;if(N>=b&&N<b+D.length)continue;const z=D[D.length-1].getTrimmedLength(),G=(0,w.reflowSmallerGetNewLineLengths)(D,this._cols,s),j=G.length-D.length;let te;te=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+j):Math.max(0,this.lines.length-this.lines.maxLength+j);const X=[];for(let E=0;E<j;E++){const A=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);X.push(A)}X.length>0&&(S.push({start:b+D.length+C,newLines:X}),C+=X.length),D.push(...X);let le=G.length-1,pe=G[le];pe===0&&(le--,pe=G[le]);let Y=D.length-j-1,R=z;for(;Y>=0;){const E=Math.min(R,pe);if(D[le]===void 0)break;if(D[le].copyCellsFrom(D[Y],R-E,pe-E,E,!0),pe-=E,pe===0&&(le--,pe=G[le]),R-=E,R===0){Y--;const A=Math.max(Y,0);R=(0,w.getWrappedLineTrimmedLength)(D,A,this._cols)}}for(let E=0;E<D.length;E++)G[E]<s&&D[E].setCell(G[E],f);let I=j-te;for(;I-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+o-1)}if(S.length>0){const b=[],_=[];for(let le=0;le<this.lines.length;le++)_.push(this.lines.get(le));const D=this.lines.length;let N=D-1,z=0,G=S[z];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let j=0;for(let le=Math.min(this.lines.maxLength-1,D+C-1);le>=0;le--)if(G&&G.start>N+j){for(let pe=G.newLines.length-1;pe>=0;pe--)this.lines.set(le--,G.newLines[pe]);le++,b.push({index:N+1,amount:G.newLines.length}),j+=G.newLines.length,G=S[++z]}else this.lines.set(le,_[N--]);let te=0;for(let le=b.length-1;le>=0;le--)b[le].index+=te,this.lines.onInsertEmitter.fire(b[le]),te+=b[le].amount;const X=Math.max(0,D+C-this.lines.maxLength);X>0&&this.lines.onTrimEmitter.fire(X)}}translateBufferLineToString(s,o,f=0,S){const C=this.lines.get(s);return C?C.translateToString(o,f,S):""}getWrappedRangeForLine(s){let o=s,f=s;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:o,last:f}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===s&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){const o=new n.Marker(s);return this.markers.push(o),o.register(this.lines.onTrim((f=>{o.line-=f,o.line<0&&o.dispose()}))),o.register(this.lines.onInsert((f=>{o.line>=f.index&&(o.line+=f.amount)}))),o.register(this.lines.onDelete((f=>{o.line>=f.index&&o.line<f.index+f.amount&&o.dispose(),o.line>f.index&&(o.line-=f.amount)}))),o.register(o.onDispose((()=>this._removeMarker(o)))),o}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLine=c.DEFAULT_ATTR_DATA=void 0;const p=u(3734),y=u(511),h=u(643),m=u(482);c.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let w=0;class k{constructor(n,l,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const o=l||y.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let f=0;f<n;++f)this.setCell(f,o);this.length=n}get(n){const l=this._data[3*n+0],s=2097151&l;return[this._data[3*n+1],2097152&l?this._combined[n]:s?(0,m.stringFromCodePoint)(s):"",l>>22,2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):s]}set(n,l){this._data[3*n+1]=l[h.CHAR_DATA_ATTR_INDEX],l[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=l[1],this._data[3*n+0]=2097152|n|l[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&l}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n]:2097151&l?(0,m.stringFromCodePoint)(2097151&l):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,l){return w=3*n,l.content=this._data[w+0],l.fg=this._data[w+1],l.bg=this._data[w+2],2097152&l.content&&(l.combinedData=this._combined[n]),268435456&l.bg&&(l.extended=this._extendedAttrs[n]),l}setCell(n,l){2097152&l.content&&(this._combined[n]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=l.content,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}setCellFromCodepoint(n,l,s,o){268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=l|s<<22,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg}addCodepointToCell(n,l,s){let o=this._data[3*n+0];2097152&o?this._combined[n]+=(0,m.stringFromCodePoint)(l):2097151&o?(this._combined[n]=(0,m.stringFromCodePoint)(2097151&o)+(0,m.stringFromCodePoint)(l),o&=-2097152,o|=2097152):o=l|4194304,s&&(o&=-12582913,o|=s<<22),this._data[3*n+0]=o}insertCells(n,l,s){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length-n){const o=new y.CellData;for(let f=this.length-n-l-1;f>=0;--f)this.setCell(n+l+f,this.loadCell(n+f,o));for(let f=0;f<l;++f)this.setCell(n+f,s)}else for(let o=n;o<this.length;++o)this.setCell(o,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(n,l,s){if(n%=this.length,l<this.length-n){const o=new y.CellData;for(let f=0;f<this.length-n-l;++f)this.setCell(n+f,this.loadCell(n+l+f,o));for(let f=this.length-l;f<this.length;++f)this.setCell(f,s)}else for(let o=n;o<this.length;++o)this.setCell(o,s);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,s)}replaceCells(n,l,s,o=!1){if(o)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodepoint(l,0,1,s);n<l&&n<this.length;)this.isProtected(n)||this.setCell(n,s),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l,0,1,s);n<l&&n<this.length;)this.setCell(n++,s)}resize(n,l){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const s=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{const o=new Uint32Array(s);o.set(this._data),this._data=o}for(let o=this.length;o<n;++o)this.setCell(o,l)}else{this._data=this._data.subarray(0,s);const o=Object.keys(this._combined);for(let S=0;S<o.length;S++){const C=parseInt(o[S],10);C>=n&&delete this._combined[C]}const f=Object.keys(this._extendedAttrs);for(let S=0;S<f.length;S++){const C=parseInt(f[S],10);C>=n&&delete this._extendedAttrs[C]}}return this.length=n,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,l=!1){if(l)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,n);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const l in n._combined)this._combined[l]=n._combined[l];this._extendedAttrs={};for(const l in n._extendedAttrs)this._extendedAttrs[l]=n._extendedAttrs[l];this.isWrapped=n.isWrapped}clone(){const n=new k(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const l in this._combined)n._combined[l]=this._combined[l];for(const l in this._extendedAttrs)n._extendedAttrs[l]=this._extendedAttrs[l];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,l,s,o,f){const S=n._data;if(f)for(let b=o-1;b>=0;b--){for(let _=0;_<3;_++)this._data[3*(s+b)+_]=S[3*(l+b)+_];268435456&S[3*(l+b)+2]&&(this._extendedAttrs[s+b]=n._extendedAttrs[l+b])}else for(let b=0;b<o;b++){for(let _=0;_<3;_++)this._data[3*(s+b)+_]=S[3*(l+b)+_];268435456&S[3*(l+b)+2]&&(this._extendedAttrs[s+b]=n._extendedAttrs[l+b])}const C=Object.keys(n._combined);for(let b=0;b<C.length;b++){const _=parseInt(C[b],10);_>=l&&(this._combined[_-l+s]=n._combined[_])}}translateToString(n,l,s,o){l=l??0,s=s??this.length,n&&(s=Math.min(s,this.getTrimmedLength())),o&&(o.length=0);let f="";for(;l<s;){const S=this._data[3*l+0],C=2097151&S,b=2097152&S?this._combined[l]:C?(0,m.stringFromCodePoint)(C):h.WHITESPACE_CELL_CHAR;if(f+=b,o)for(let _=0;_<b.length;++_)o.push(l);l+=S>>22||1}return o&&o.push(l),f}}c.BufferLine=k},4841:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getRangeLength=void 0,c.getRangeLength=function(u,p){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return p*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(U,c)=>{function u(p,y,h){if(y===p.length-1)return p[y].getTrimmedLength();const m=!p[y].hasContent(h-1)&&p[y].getWidth(h-1)===1,w=p[y+1].getWidth(0)===2;return m&&w?h-1:h}Object.defineProperty(c,"__esModule",{value:!0}),c.getWrappedLineTrimmedLength=c.reflowSmallerGetNewLineLengths=c.reflowLargerApplyNewLayout=c.reflowLargerCreateNewLayout=c.reflowLargerGetLinesToRemove=void 0,c.reflowLargerGetLinesToRemove=function(p,y,h,m,w){const k=[];for(let g=0;g<p.length-1;g++){let n=g,l=p.get(++n);if(!l.isWrapped)continue;const s=[p.get(g)];for(;n<p.length&&l.isWrapped;)s.push(l),l=p.get(++n);if(m>=g&&m<n){g+=s.length-1;continue}let o=0,f=u(s,o,y),S=1,C=0;for(;S<s.length;){const _=u(s,S,y),D=_-C,N=h-f,z=Math.min(D,N);s[o].copyCellsFrom(s[S],C,f,z,!1),f+=z,f===h&&(o++,f=0),C+=z,C===_&&(S++,C=0),f===0&&o!==0&&s[o-1].getWidth(h-1)===2&&(s[o].copyCellsFrom(s[o-1],h-1,f++,1,!1),s[o-1].setCell(h-1,w))}s[o].replaceCells(f,h,w);let b=0;for(let _=s.length-1;_>0&&(_>o||s[_].getTrimmedLength()===0);_--)b++;b>0&&(k.push(g+s.length-b),k.push(b)),g+=s.length-1}return k},c.reflowLargerCreateNewLayout=function(p,y){const h=[];let m=0,w=y[m],k=0;for(let g=0;g<p.length;g++)if(w===g){const n=y[++m];p.onDeleteEmitter.fire({index:g-k,amount:n}),g+=n-1,k+=n,w=y[++m]}else h.push(g);return{layout:h,countRemoved:k}},c.reflowLargerApplyNewLayout=function(p,y){const h=[];for(let m=0;m<y.length;m++)h.push(p.get(y[m]));for(let m=0;m<h.length;m++)p.set(m,h[m]);p.length=y.length},c.reflowSmallerGetNewLineLengths=function(p,y,h){const m=[],w=p.map(((l,s)=>u(p,s,y))).reduce(((l,s)=>l+s));let k=0,g=0,n=0;for(;n<w;){if(w-n<h){m.push(w-n);break}k+=h;const l=u(p,g,y);k>l&&(k-=l,g++);const s=p[g].getWidth(k-1)===2;s&&k--;const o=s?h-1:h;m.push(o),n+=o}return m},c.getWrappedLineTrimmedLength=u},5295:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferSet=void 0;const p=u(8460),y=u(844),h=u(9092);class m extends y.Disposable{constructor(k,g){super(),this._optionsService=k,this._bufferService=g,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(k){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(k),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(k,g){this._normal.resize(k,g),this._alt.resize(k,g),this.setupTabStops(k)}setupTabStops(k){this._normal.setupTabStops(k),this._alt.setupTabStops(k)}}c.BufferSet=m},511:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;const p=u(482),y=u(643),h=u(3734);class m extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(k){const g=new m;return g.setFromCharData(k),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(k){this.fg=k[y.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(k[y.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(k[y.CHAR_DATA_CHAR_INDEX].length===2){const n=k[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=k[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|k[y.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=k[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|k[y.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=k[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|k[y.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.CellData=m},643:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_EXT=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=0,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.DEFAULT_EXT=0,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},4863:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Marker=void 0;const p=u(8460),y=u(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,y.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}c.Marker=h,h._nextId=1},7116:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CHARSET=c.CHARSETS=void 0,c.CHARSETS={},c.DEFAULT_CHARSET=c.CHARSETS.B,c.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},c.CHARSETS.A={"#":""},c.CHARSETS.B=void 0,c.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},c.CHARSETS.C=c.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},c.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.E=c.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},c.CHARSETS.H=c.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},c.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(U,c)=>{var u,p,y;Object.defineProperty(c,"__esModule",{value:!0}),c.C1_ESCAPED=c.C1=c.C0=void 0,(function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""})(u||(c.C0=u={})),(function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""})(p||(c.C1=p={})),(function(h){h.ST=`${u.ESC}\\`})(y||(c.C1_ESCAPED=y={}))},7399:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.evaluateKeyboardEvent=void 0;const p=u(2584),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};c.evaluateKeyboardEvent=function(h,m,w,k){const g={type:0,cancel:!1,key:void 0},n=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?g.key=m?p.C0.ESC+"OA":p.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?g.key=m?p.C0.ESC+"OD":p.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?g.key=m?p.C0.ESC+"OC":p.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(g.key=m?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:g.key=h.ctrlKey?"\b":p.C0.DEL,h.altKey&&(g.key=p.C0.ESC+g.key);break;case 9:if(h.shiftKey){g.key=p.C0.ESC+"[Z";break}g.key=p.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,g.cancel=!0;break;case 27:g.key=p.C0.ESC,h.altKey&&(g.key=p.C0.ESC+p.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;n?(g.key=p.C0.ESC+"[1;"+(n+1)+"D",g.key===p.C0.ESC+"[1;3D"&&(g.key=p.C0.ESC+(w?"b":"[1;5D"))):g.key=m?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(h.metaKey)break;n?(g.key=p.C0.ESC+"[1;"+(n+1)+"C",g.key===p.C0.ESC+"[1;3C"&&(g.key=p.C0.ESC+(w?"f":"[1;5C"))):g.key=m?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(h.metaKey)break;n?(g.key=p.C0.ESC+"[1;"+(n+1)+"A",w||g.key!==p.C0.ESC+"[1;3A"||(g.key=p.C0.ESC+"[1;5A")):g.key=m?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(h.metaKey)break;n?(g.key=p.C0.ESC+"[1;"+(n+1)+"B",w||g.key!==p.C0.ESC+"[1;3B"||(g.key=p.C0.ESC+"[1;5B")):g.key=m?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=p.C0.ESC+"[2~");break;case 46:g.key=n?p.C0.ESC+"[3;"+(n+1)+"~":p.C0.ESC+"[3~";break;case 36:g.key=n?p.C0.ESC+"[1;"+(n+1)+"H":m?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:g.key=n?p.C0.ESC+"[1;"+(n+1)+"F":m?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:h.ctrlKey?g.key=p.C0.ESC+"[5;"+(n+1)+"~":g.key=p.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:h.ctrlKey?g.key=p.C0.ESC+"[6;"+(n+1)+"~":g.key=p.C0.ESC+"[6~";break;case 112:g.key=n?p.C0.ESC+"[1;"+(n+1)+"P":p.C0.ESC+"OP";break;case 113:g.key=n?p.C0.ESC+"[1;"+(n+1)+"Q":p.C0.ESC+"OQ";break;case 114:g.key=n?p.C0.ESC+"[1;"+(n+1)+"R":p.C0.ESC+"OR";break;case 115:g.key=n?p.C0.ESC+"[1;"+(n+1)+"S":p.C0.ESC+"OS";break;case 116:g.key=n?p.C0.ESC+"[15;"+(n+1)+"~":p.C0.ESC+"[15~";break;case 117:g.key=n?p.C0.ESC+"[17;"+(n+1)+"~":p.C0.ESC+"[17~";break;case 118:g.key=n?p.C0.ESC+"[18;"+(n+1)+"~":p.C0.ESC+"[18~";break;case 119:g.key=n?p.C0.ESC+"[19;"+(n+1)+"~":p.C0.ESC+"[19~";break;case 120:g.key=n?p.C0.ESC+"[20;"+(n+1)+"~":p.C0.ESC+"[20~";break;case 121:g.key=n?p.C0.ESC+"[21;"+(n+1)+"~":p.C0.ESC+"[21~";break;case 122:g.key=n?p.C0.ESC+"[23;"+(n+1)+"~":p.C0.ESC+"[23~";break;case 123:g.key=n?p.C0.ESC+"[24;"+(n+1)+"~":p.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!k||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?g.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(g.key=p.C0.US),h.key==="@"&&(g.key=p.C0.NUL)):h.keyCode===65&&(g.type=1);else{const l=y[h.keyCode],s=l?.[h.shiftKey?1:0];if(s)g.key=p.C0.ESC+s;else if(h.keyCode>=65&&h.keyCode<=90){const o=h.ctrlKey?h.keyCode-64:h.keyCode+32;let f=String.fromCharCode(o);h.shiftKey&&(f=f.toUpperCase()),g.key=p.C0.ESC+f}else if(h.keyCode===32)g.key=p.C0.ESC+(h.ctrlKey?p.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let o=h.code.slice(3,4);h.shiftKey||(o=o.toLowerCase()),g.key=p.C0.ESC+o,g.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?g.key=p.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?g.key=p.C0.DEL:h.keyCode===219?g.key=p.C0.ESC:h.keyCode===220?g.key=p.C0.FS:h.keyCode===221&&(g.key=p.C0.GS)}return g}},482:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},c.utf32ToString=function(u,p=0,y=u.length){let h="";for(let m=p;m<y;++m){let w=u[m];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},c.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,p){const y=u.length;if(!y)return 0;let h=0,m=0;if(this._interim){const w=u.charCodeAt(m++);56320<=w&&w<=57343?p[h++]=1024*(this._interim-55296)+w-56320+65536:(p[h++]=this._interim,p[h++]=w),this._interim=0}for(let w=m;w<y;++w){const k=u.charCodeAt(w);if(55296<=k&&k<=56319){if(++w>=y)return this._interim=k,h;const g=u.charCodeAt(w);56320<=g&&g<=57343?p[h++]=1024*(k-55296)+g-56320+65536:(p[h++]=k,p[h++]=g)}else k!==65279&&(p[h++]=k)}return h}},c.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,p){const y=u.length;if(!y)return 0;let h,m,w,k,g=0,n=0,l=0;if(this.interim[0]){let f=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let C,b=0;for(;(C=63&this.interim[++b])&&b<4;)S<<=6,S|=C;const _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,D=_-b;for(;l<D;){if(l>=y)return 0;if(C=u[l++],(192&C)!=128){l--,f=!0;break}this.interim[b++]=C,S<<=6,S|=63&C}f||(_===2?S<128?l--:p[g++]=S:_===3?S<2048||S>=55296&&S<=57343||S===65279||(p[g++]=S):S<65536||S>1114111||(p[g++]=S)),this.interim.fill(0)}const s=y-4;let o=l;for(;o<y;){for(;!(!(o<s)||128&(h=u[o])||128&(m=u[o+1])||128&(w=u[o+2])||128&(k=u[o+3]));)p[g++]=h,p[g++]=m,p[g++]=w,p[g++]=k,o+=4;if(h=u[o++],h<128)p[g++]=h;else if((224&h)==192){if(o>=y)return this.interim[0]=h,g;if(m=u[o++],(192&m)!=128){o--;continue}if(n=(31&h)<<6|63&m,n<128){o--;continue}p[g++]=n}else if((240&h)==224){if(o>=y)return this.interim[0]=h,g;if(m=u[o++],(192&m)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,g;if(w=u[o++],(192&w)!=128){o--;continue}if(n=(15&h)<<12|(63&m)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;p[g++]=n}else if((248&h)==240){if(o>=y)return this.interim[0]=h,g;if(m=u[o++],(192&m)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,g;if(w=u[o++],(192&w)!=128){o--;continue}if(o>=y)return this.interim[0]=h,this.interim[1]=m,this.interim[2]=w,g;if(k=u[o++],(192&k)!=128){o--;continue}if(n=(7&h)<<18|(63&m)<<12|(63&w)<<6|63&k,n<65536||n>1114111)continue;p[g++]=n}}return g}}},225:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeV6=void 0;const p=u(1480),y=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;c.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let w=0;w<y.length;++w)m.fill(0,y[w][0],y[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?m[w]:(function(k,g){let n,l=0,s=g.length-1;if(k<g[0][0]||k>g[s][1])return!1;for(;s>=l;)if(n=l+s>>1,k>g[n][1])l=n+1;else{if(!(k<g[n][0]))return!0;s=n-1}return!1})(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,k){let g=this.wcwidth(w),n=g===0&&k!==0;if(n){const l=p.UnicodeService.extractWidth(k);l===0?n=!1:l>g&&(g=l)}return p.UnicodeService.createPropertyValue(0,g,n)}}},5981:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WriteBuffer=void 0;const p=u(8460),y=u(844);class h extends y.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,k){if(k!==void 0&&this._syncCalls>k)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,k){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(k),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(k)}_innerWrite(w=0,k=!0){const g=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],l=this._action(n,k);if(l){const o=f=>Date.now()-g>=12?setTimeout((()=>this._innerWrite(0,f))):this._innerWrite(g,f);return void l.catch((f=>(queueMicrotask((()=>{throw f})),Promise.resolve(!1)))).then(o)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}c.WriteBuffer=h},5941:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.toRgbString=c.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function y(h,m){const w=h.toString(16),k=w.length<2?"0"+w:w;switch(m){case 4:return w[0];case 8:return k;case 12:return(k+k).slice(0,3);default:return k+k}}c.parseColor=function(h){if(!h)return;let m=h.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const w=u.exec(m);if(w){const k=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/k*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/k*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/k*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),p.exec(m)&&[3,6,9,12].includes(m.length))){const w=m.length/3,k=[0,0,0];for(let g=0;g<3;++g){const n=parseInt(m.slice(w*g,w*g+w),16);k[g]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return k}},c.toRgbString=function(h,m=16){const[w,k,g]=h;return`rgb:${y(w,m)}/${y(k,m)}/${y(g,m)}`}},5770:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PAYLOAD_LIMIT=void 0,c.PAYLOAD_LIMIT=1e7},6351:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DcsHandler=c.DcsParser=void 0;const p=u(482),y=u(8742),h=u(5770),m=[];c.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(k,g){this._handlers[k]===void 0&&(this._handlers[k]=[]);const n=this._handlers[k];return n.push(g),{dispose:()=>{const l=n.indexOf(g);l!==-1&&n.splice(l,1)}}}clearHandler(k){this._handlers[k]&&delete this._handlers[k]}setHandlerFallback(k){this._handlerFb=k}reset(){if(this._active.length)for(let k=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;k>=0;--k)this._active[k].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(k,g){if(this.reset(),this._ident=k,this._active=this._handlers[k]||m,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(k,g,n){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(k,g,n);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(k,g,n))}unhook(k,g=!0){if(this._active.length){let n=!1,l=this._active.length-1,s=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=g,s=this._stack.fallThrough,this._stack.paused=!1),!s&&n===!1){for(;l>=0&&(n=this._active[l].unhook(k),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",k);this._active=m,this._ident=0}};const w=new y.Params;w.addParam(0),c.DcsHandler=class{constructor(k){this._handler=k,this._data="",this._params=w,this._hitLimit=!1}hook(k){this._params=k.length>1||k.params[0]?k.clone():w,this._data="",this._hitLimit=!1}put(k,g,n){this._hitLimit||(this._data+=(0,p.utf32ToString)(k,g,n),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(k){let g=!1;if(this._hitLimit)g=!1;else if(k&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then((n=>(this._params=w,this._data="",this._hitLimit=!1,n)));return this._params=w,this._data="",this._hitLimit=!1,g}}},2015:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.EscapeSequenceParser=c.VT500_TRANSITION_TABLE=c.TransitionTable=void 0;const p=u(844),y=u(8742),h=u(6242),m=u(6351);class w{constructor(l){this.table=new Uint8Array(l)}setDefault(l,s){this.table.fill(l<<4|s)}add(l,s,o,f){this.table[s<<8|l]=o<<4|f}addMany(l,s,o,f){for(let S=0;S<l.length;S++)this.table[s<<8|l[S]]=o<<4|f}}c.TransitionTable=w;const k=160;c.VT500_TRANSITION_TABLE=(function(){const n=new w(4095),l=Array.apply(null,Array(256)).map(((b,_)=>_)),s=(b,_)=>l.slice(b,_),o=s(32,127),f=s(0,24);f.push(25),f.push.apply(f,s(28,32));const S=s(0,14);let C;for(C in n.setDefault(1,0),n.addMany(o,0,2,0),S)n.addMany([24,26,153,154],C,3,0),n.addMany(s(128,144),C,3,0),n.addMany(s(144,152),C,3,0),n.add(156,C,0,0),n.add(27,C,11,1),n.add(157,C,4,8),n.addMany([152,158,159],C,0,7),n.add(155,C,11,3),n.add(144,C,11,9);return n.addMany(f,0,3,0),n.addMany(f,1,3,1),n.add(127,1,0,1),n.addMany(f,8,0,8),n.addMany(f,3,3,3),n.add(127,3,0,3),n.addMany(f,4,3,4),n.add(127,4,0,4),n.addMany(f,6,3,6),n.addMany(f,5,3,5),n.add(127,5,0,5),n.addMany(f,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(o,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(s(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(o,7,0,7),n.addMany(f,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(s(64,127),3,7,0),n.addMany(s(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(s(48,60),4,8,4),n.addMany(s(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(s(32,64),6,0,6),n.add(127,6,0,6),n.addMany(s(64,127),6,0,0),n.addMany(s(32,48),3,9,5),n.addMany(s(32,48),5,9,5),n.addMany(s(48,64),5,0,6),n.addMany(s(64,127),5,7,0),n.addMany(s(32,48),4,9,5),n.addMany(s(32,48),1,9,2),n.addMany(s(32,48),2,9,2),n.addMany(s(48,127),2,10,0),n.addMany(s(48,80),1,10,0),n.addMany(s(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(s(96,127),1,10,0),n.add(80,1,11,9),n.addMany(f,9,0,9),n.add(127,9,0,9),n.addMany(s(28,32),9,0,9),n.addMany(s(32,48),9,9,12),n.addMany(s(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(f,11,0,11),n.addMany(s(32,128),11,0,11),n.addMany(s(28,32),11,0,11),n.addMany(f,10,0,10),n.add(127,10,0,10),n.addMany(s(28,32),10,0,10),n.addMany(s(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(s(32,48),10,9,12),n.addMany(f,12,0,12),n.add(127,12,0,12),n.addMany(s(28,32),12,0,12),n.addMany(s(32,48),12,9,12),n.addMany(s(48,64),12,0,11),n.addMany(s(64,127),12,12,13),n.addMany(s(64,127),10,12,13),n.addMany(s(64,127),9,12,13),n.addMany(f,13,13,13),n.addMany(o,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(k,0,2,0),n.add(k,8,5,8),n.add(k,6,0,6),n.add(k,11,0,11),n.add(k,13,13,13),n})();class g extends p.Disposable{constructor(l=c.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new y.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(s,o,f)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,o)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(l,s=[64,126]){let o=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=l.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<l.intermediates.length;++S){const C=l.intermediates.charCodeAt(S);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=C}}if(l.final.length!==1)throw new Error("final must be a single byte");const f=l.final.charCodeAt(0);if(s[0]>f||f>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return o<<=8,o|=f,o}identToString(l){const s=[];for(;l;)s.push(String.fromCharCode(255&l)),l>>=8;return s.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,s){const o=this._identifier(l,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const f=this._escHandlers[o];return f.push(s),{dispose:()=>{const S=f.indexOf(s);S!==-1&&f.splice(S,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,s){this._executeHandlers[l.charCodeAt(0)]=s}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,s){const o=this._identifier(l);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const f=this._csiHandlers[o];return f.push(s),{dispose:()=>{const S=f.indexOf(s);S!==-1&&f.splice(S,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,s){return this._dcsParser.registerHandler(this._identifier(l),s)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,s){return this._oscParser.registerHandler(l,s)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,s,o,f,S){this._parseStack.state=l,this._parseStack.handlers=s,this._parseStack.handlerPos=o,this._parseStack.transition=f,this._parseStack.chunkPos=S}parse(l,s,o){let f,S=0,C=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const _=this._parseStack.handlers;let D=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&D>-1){for(;D>=0&&(f=_[D](this._params),f!==!0);D--)if(f instanceof Promise)return this._parseStack.handlerPos=D,f}this._parseStack.handlers=[];break;case 4:if(o===!1&&D>-1){for(;D>=0&&(f=_[D](),f!==!0);D--)if(f instanceof Promise)return this._parseStack.handlerPos=D,f}this._parseStack.handlers=[];break;case 6:if(S=l[this._parseStack.chunkPos],f=this._dcsParser.unhook(S!==24&&S!==26,o),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=l[this._parseStack.chunkPos],f=this._oscParser.end(S!==24&&S!==26,o),f)return f;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=b;_<s;++_){switch(S=l[_],C=this._transitions.table[this.currentState<<8|(S<160?S:k)],C>>4){case 2:for(let j=_+1;;++j){if(j>=s||(S=l[j])<32||S>126&&S<k){this._printHandler(l,_,j),_=j-1;break}if(++j>=s||(S=l[j])<32||S>126&&S<k){this._printHandler(l,_,j),_=j-1;break}if(++j>=s||(S=l[j])<32||S>126&&S<k){this._printHandler(l,_,j),_=j-1;break}if(++j>=s||(S=l[j])<32||S>126&&S<k){this._printHandler(l,_,j),_=j-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const D=this._csiHandlers[this._collect<<8|S];let N=D?D.length-1:-1;for(;N>=0&&(f=D[N](this._params),f!==!0);N--)if(f instanceof Promise)return this._preserveStack(3,D,N,C,_),f;N<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++_<s&&(S=l[_])>47&&S<60);_--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const z=this._escHandlers[this._collect<<8|S];let G=z?z.length-1:-1;for(;G>=0&&(f=z[G](),f!==!0);G--)if(f instanceof Promise)return this._preserveStack(4,z,G,C,_),f;G<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let j=_+1;;++j)if(j>=s||(S=l[j])===24||S===26||S===27||S>127&&S<k){this._dcsParser.put(l,_,j),_=j-1;break}break;case 14:if(f=this._dcsParser.unhook(S!==24&&S!==26),f)return this._preserveStack(6,[],0,C,_),f;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let j=_+1;;j++)if(j>=s||(S=l[j])<32||S>127&&S<k){this._oscParser.put(l,_,j),_=j-1;break}break;case 6:if(f=this._oscParser.end(S!==24&&S!==26),f)return this._preserveStack(5,[],0,C,_),f;S===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}c.EscapeSequenceParser=g},6242:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OscHandler=c.OscParser=void 0;const p=u(5770),y=u(482),h=[];c.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,w){this._handlers[m]===void 0&&(this._handlers[m]=[]);const k=this._handlers[m];return k.push(w),{dispose:()=>{const g=k.indexOf(w);g!==-1&&k.splice(g,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,w,k){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(m,w,k);else this._handlerFb(this._id,"PUT",(0,y.utf32ToString)(m,w,k))}start(){this.reset(),this._state=1}put(m,w,k){if(this._state!==3){if(this._state===1)for(;w<k;){const g=m[w++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&k-w>0&&this._put(m,w,k)}}end(m,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let k=!1,g=this._active.length-1,n=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,k=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&k===!1){for(;g>=0&&(k=this._active[g].end(m),k!==!0);g--)if(k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,k;g--}for(;g>=0;g--)if(k=this._active[g].end(!1),k instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,k}else this._handlerFb(this._id,"END",m);this._active=h,this._id=-1,this._state=0}}},c.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,w,k){this._hitLimit||(this._data+=(0,y.utf32ToString)(m,w,k),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let w=!1;if(this._hitLimit)w=!1;else if(m&&(w=this._handler(this._data),w instanceof Promise))return w.then((k=>(this._data="",this._hitLimit=!1,k)));return this._data="",this._hitLimit=!1,w}}},8742:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Params=void 0;const u=2147483647;class p{static fromArray(h){const m=new p;if(!h.length)return m;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const k=h[w];if(Array.isArray(k))for(let g=0;g<k.length;++g)m.addSubParam(k[g]);else m.addParam(k)}return m}constructor(h=32,m=32){if(this.maxLength=h,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new p(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let m=0;m<this.length;++m){h.push(this.params[m]);const w=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,k))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>u?u:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>u?u:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const m=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-m>0?this._subParams.subarray(m,w):null}getSubParamsAll(){const h={};for(let m=0;m<this.length;++m){const w=this._subParamsIdx[m]>>8,k=255&this._subParamsIdx[m];k-w>0&&(h[m]=this._subParams.slice(w,k))}return h}addDigit(h){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,k=w[m-1];w[m-1]=~k?Math.min(10*k+h,u):h}}c.Params=p},5741:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AddonManager=void 0,c.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,p){const y={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(y),p.dispose=()=>this._wrappedAddonDispose(y),p.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let p=-1;for(let y=0;y<this._addons.length;y++)if(this._addons[y]===u){p=y;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(p,1)}}},8771:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferApiView=void 0;const p=u(3785),y=u(511);c.BufferApiView=class{constructor(h,m){this._buffer=h,this.type=m}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const m=this._buffer.lines.get(h);if(m)return new p.BufferLineApiView(m)}getNullCell(){return new y.CellData}}},3785:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLineApiView=void 0;const p=u(511);c.BufferLineApiView=class{constructor(y){this._line=y}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(y,h){if(!(y<0||y>=this._line.length))return h?(this._line.loadCell(y,h),h):this._line.loadCell(y,new p.CellData)}translateToString(y,h,m){return this._line.translateToString(y,h,m)}}},8285:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferNamespaceApi=void 0;const p=u(8771),y=u(8460),h=u(844);class m extends h.Disposable{constructor(k){super(),this._core=k,this._onBufferChange=this.register(new y.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}c.BufferNamespaceApi=m},7975:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ParserApi=void 0,c.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,p){return this._core.registerCsiHandler(u,(y=>p(y.toArray())))}addCsiHandler(u,p){return this.registerCsiHandler(u,p)}registerDcsHandler(u,p){return this._core.registerDcsHandler(u,((y,h)=>p(y,h.toArray())))}addDcsHandler(u,p){return this.registerDcsHandler(u,p)}registerEscHandler(u,p){return this._core.registerEscHandler(u,p)}addEscHandler(u,p){return this.registerEscHandler(u,p)}registerOscHandler(u,p){return this._core.registerOscHandler(u,p)}addOscHandler(u,p){return this.registerOscHandler(u,p)}}},7090:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeApi=void 0,c.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(U,c,u){var p=this&&this.__decorate||function(n,l,s,o){var f,S=arguments.length,C=S<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,s,o);else for(var b=n.length-1;b>=0;b--)(f=n[b])&&(C=(S<3?f(C):S>3?f(l,s,C):f(l,s))||C);return S>3&&C&&Object.defineProperty(l,s,C),C},y=this&&this.__param||function(n,l){return function(s,o){l(s,o,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferService=c.MINIMUM_ROWS=c.MINIMUM_COLS=void 0;const h=u(8460),m=u(844),w=u(5295),k=u(2585);c.MINIMUM_COLS=2,c.MINIMUM_ROWS=1;let g=c.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,c.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,c.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this._onResize.fire({cols:n,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,l=!1){const s=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===n.fg&&o.getBg(0)===n.bg||(o=s.getBlankLine(n,l),this._cachedBlankLine=o),o.isWrapped=l;const f=s.ybase+s.scrollTop,S=s.ybase+s.scrollBottom;if(s.scrollTop===0){const C=s.lines.isFull;S===s.lines.length-1?C?s.lines.recycle().copyFrom(o):s.lines.push(o.clone()):s.lines.splice(S+1,0,o.clone()),C?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{const C=S-f+1;s.lines.shiftElements(f+1,C-1,-1),s.lines.set(S,o.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(n,l,s){const o=this.buffer;if(n<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else n+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const f=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+n,o.ybase),0),f!==o.ydisp&&(l||this._onScroll.fire(o.ydisp))}};c.BufferService=g=p([y(0,k.IOptionsService)],g)},7994:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharsetService=void 0,c.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,p){this._charsets[u]=p,this.glevel===u&&(this.charset=p)}}},1753:function(U,c,u){var p=this&&this.__decorate||function(o,f,S,C){var b,_=arguments.length,D=_<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(o,f,S,C);else for(var N=o.length-1;N>=0;N--)(b=o[N])&&(D=(_<3?b(D):_>3?b(f,S,D):b(f,S))||D);return _>3&&D&&Object.defineProperty(f,S,D),D},y=this&&this.__param||function(o,f){return function(S,C){f(S,C,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreMouseService=void 0;const h=u(2585),m=u(8460),w=u(844),k={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function g(o,f){let S=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(S|=64,S|=o.action):(S|=3&o.button,4&o.button&&(S|=64),8&o.button&&(S|=128),o.action===32?S|=32:o.action!==0||f||(S|=3)),S}const n=String.fromCharCode,l={DEFAULT:o=>{const f=[g(o,!1)+32,o.col+32,o.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${n(f[0])}${n(f[1])}${n(f[2])}`},SGR:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${g(o,!0)};${o.col};${o.row}${f}`},SGR_PIXELS:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${g(o,!0)};${o.x};${o.y}${f}`}};let s=c.CoreMouseService=class extends w.Disposable{constructor(o,f){super(),this._bufferService=o,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(k))this.addProtocol(S,k[S]);for(const S of Object.keys(l))this.addEncoding(S,l[S]);this.reset()}addProtocol(o,f){this._protocols[o]=f}addEncoding(o,f){this._encodings[o]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const f=this._encodings[this._activeEncoding](o);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,f,S){if(S){if(o.x!==f.x||o.y!==f.y)return!1}else if(o.col!==f.col||o.row!==f.row)return!1;return o.button===f.button&&o.action===f.action&&o.ctrl===f.ctrl&&o.alt===f.alt&&o.shift===f.shift}};c.CoreMouseService=s=p([y(0,h.IBufferService),y(1,h.ICoreService)],s)},6975:function(U,c,u){var p=this&&this.__decorate||function(s,o,f,S){var C,b=arguments.length,_=b<3?o:S===null?S=Object.getOwnPropertyDescriptor(o,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(s,o,f,S);else for(var D=s.length-1;D>=0;D--)(C=s[D])&&(_=(b<3?C(_):b>3?C(o,f,_):C(o,f))||_);return b>3&&_&&Object.defineProperty(o,f,_),_},y=this&&this.__param||function(s,o){return function(f,S){o(f,S,s)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreService=void 0;const h=u(1439),m=u(8460),w=u(844),k=u(2585),g=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=c.CoreService=class extends w.Disposable{constructor(s,o,f){super(),this._bufferService=s,this._logService=o,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(n)}reset(){this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(n)}triggerDataEvent(s,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,(()=>s.split("").map((S=>S.charCodeAt(0))))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,(()=>s.split("").map((o=>o.charCodeAt(0))))),this._onBinary.fire(s))}};c.CoreService=l=p([y(0,k.IBufferService),y(1,k.ILogService),y(2,k.IOptionsService)],l)},9074:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DecorationService=void 0;const p=u(8055),y=u(8460),h=u(844),m=u(6106);let w=0,k=0;class g extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList((s=>s?.marker.line)),this._onDecorationRegistered=this.register(new y.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new y.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)((()=>this.reset())))}registerDecoration(s){if(s.marker.isDisposed)return;const o=new n(s);if(o){const f=o.marker.onDispose((()=>o.dispose()));o.onDispose((()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),f.dispose())})),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,o,f){let S=0,C=0;for(const b of this._decorations.getKeyIterator(o))S=b.options.x??0,C=S+(b.options.width??1),s>=S&&s<C&&(!f||(b.options.layer??"bottom")===f)&&(yield b)}forEachDecorationAtCell(s,o,f,S){this._decorations.forEachByKey(o,(C=>{w=C.options.x??0,k=w+(C.options.width??1),s>=w&&s<k&&(!f||(C.options.layer??"bottom")===f)&&S(C)}))}}c.DecorationService=g;class n extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new y.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new y.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.InstantiationService=c.ServiceCollection=void 0;const p=u(2585),y=u(8343);class h{constructor(...w){this._entries=new Map;for(const[k,g]of w)this.set(k,g)}set(w,k){const g=this._entries.get(w);return this._entries.set(w,k),g}forEach(w){for(const[k,g]of this._entries.entries())w(k,g)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}c.ServiceCollection=h,c.InstantiationService=class{constructor(){this._services=new h,this._services.set(p.IInstantiationService,this)}setService(m,w){this._services.set(m,w)}getService(m){return this._services.get(m)}createInstance(m,...w){const k=(0,y.getServiceDependencies)(m).sort(((l,s)=>l.index-s.index)),g=[];for(const l of k){const s=this._services.get(l.id);if(!s)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${l.id}.`);g.push(s)}const n=k.length>0?k[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new m(...w,...g)}}},7866:function(U,c,u){var p=this&&this.__decorate||function(n,l,s,o){var f,S=arguments.length,C=S<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,l,s,o);else for(var b=n.length-1;b>=0;b--)(f=n[b])&&(C=(S<3?f(C):S>3?f(l,s,C):f(l,s))||C);return S>3&&C&&Object.defineProperty(l,s,C),C},y=this&&this.__param||function(n,l){return function(s,o){l(s,o,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.traceCall=c.setTraceLogger=c.LogService=void 0;const h=u(844),m=u(2585),w={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let k,g=c.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),k=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,s){this._evalLazyOptionalParams(s),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...s)}trace(n,...l){this._logLevel<=m.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,l)}debug(n,...l){this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,l)}info(n,...l){this._logLevel<=m.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,l)}warn(n,...l){this._logLevel<=m.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,l)}error(n,...l){this._logLevel<=m.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,l)}};c.LogService=g=p([y(0,m.IOptionsService)],g),c.setTraceLogger=function(n){k=n},c.traceCall=function(n,l,s){if(typeof s.value!="function")throw new Error("not supported");const o=s.value;s.value=function(...f){if(k.logLevel!==m.LogLevelEnum.TRACE)return o.apply(this,f);k.trace(`GlyphRenderer#${o.name}(${f.map((C=>JSON.stringify(C))).join(", ")})`);const S=o.apply(this,f);return k.trace(`GlyphRenderer#${o.name} return`,S),S}}},7302:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OptionsService=c.DEFAULT_OPTIONS=void 0;const p=u(8460),y=u(844),h=u(6114);c.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends y.Disposable{constructor(g){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...c.DEFAULT_OPTIONS};for(const l in g)if(l in n)try{const s=g[l];n[l]=this._sanitizeAndValidateOption(l,s)}catch(s){console.error(s)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,y.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(g,n){return this.onOptionChange((l=>{l===g&&n(this.rawOptions[g])}))}onMultipleOptionChange(g,n){return this.onOptionChange((l=>{g.indexOf(l)!==-1&&n()}))}_setupOptions(){const g=l=>{if(!(l in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},n=(l,s)=>{if(!(l in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);s=this._sanitizeAndValidateOption(l,s),this.rawOptions[l]!==s&&(this.rawOptions[l]=s,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const s={get:g.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this.options,l,s)}}_sanitizeAndValidateOption(g,n){switch(g){case"cursorStyle":if(n||(n=c.DEFAULT_OPTIONS[g]),!(function(l){return l==="block"||l==="underline"||l==="bar"})(n))throw new Error(`"${n}" is not a valid value for ${g}`);break;case"wordSeparator":n||(n=c.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=m.includes(n)?n:c.DEFAULT_OPTIONS[g];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${g} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${g} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}c.OptionsService=w},2660:function(U,c,u){var p=this&&this.__decorate||function(w,k,g,n){var l,s=arguments.length,o=s<3?k:n===null?n=Object.getOwnPropertyDescriptor(k,g):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(w,k,g,n);else for(var f=w.length-1;f>=0;f--)(l=w[f])&&(o=(s<3?l(o):s>3?l(k,g,o):l(k,g))||o);return s>3&&o&&Object.defineProperty(k,g,o),o},y=this&&this.__param||function(w,k){return function(g,n){k(g,n,w)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkService=void 0;const h=u(2585);let m=c.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const k=this._bufferService.buffer;if(w.id===void 0){const f=k.addMarker(k.ybase+k.y),S={data:w,id:this._nextId++,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(S,f))),this._dataByLinkId.set(S.id,S),S.id}const g=w,n=this._getEntryIdKey(g),l=this._entriesWithId.get(n);if(l)return this.addLineToLink(l.id,k.ybase+k.y),l.id;const s=k.addMarker(k.ybase+k.y),o={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[s]};return s.onDispose((()=>this._removeMarkerFromLink(o,s))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(w,k){const g=this._dataByLinkId.get(w);if(g&&g.lines.every((n=>n.line!==k))){const n=this._bufferService.buffer.addMarker(k);g.lines.push(n),n.onDispose((()=>this._removeMarkerFromLink(g,n)))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,k){const g=w.lines.indexOf(k);g!==-1&&(w.lines.splice(g,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};c.OscLinkService=m=p([y(0,h.IBufferService)],m)},8343:(U,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0;const u="di$target",p="di$dependencies";c.serviceRegistry=new Map,c.getServiceDependencies=function(y){return y[p]||[]},c.createDecorator=function(y){if(c.serviceRegistry.has(y))return c.serviceRegistry.get(y);const h=function(m,w,k){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,n,l){n[u]===n?n[p].push({id:g,index:l}):(n[p]=[{id:g,index:l}],n[u]=n)})(h,m,k)};return h.toString=()=>y,c.serviceRegistry.set(y,h),h}},2585:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOscLinkService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;const p=u(8343);var y;c.IBufferService=(0,p.createDecorator)("BufferService"),c.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),c.ICoreService=(0,p.createDecorator)("CoreService"),c.ICharsetService=(0,p.createDecorator)("CharsetService"),c.IInstantiationService=(0,p.createDecorator)("InstantiationService"),(function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"})(y||(c.LogLevelEnum=y={})),c.ILogService=(0,p.createDecorator)("LogService"),c.IOptionsService=(0,p.createDecorator)("OptionsService"),c.IOscLinkService=(0,p.createDecorator)("OscLinkService"),c.IUnicodeService=(0,p.createDecorator)("UnicodeService"),c.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(U,c,u)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeService=void 0;const p=u(8460),y=u(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,k,g=!1){return(16777215&w)<<3|(3&k)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;const w=new y.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let k=0,g=0;const n=w.length;for(let l=0;l<n;++l){let s=w.charCodeAt(l);if(55296<=s&&s<=56319){if(++l>=n)return k+this.wcwidth(s);const S=w.charCodeAt(l);56320<=S&&S<=57343?s=1024*(s-55296)+S-56320+65536:k+=this.wcwidth(S)}const o=this.charProperties(s,g);let f=h.extractWidth(o);h.extractShouldJoin(o)&&(f-=h.extractWidth(g)),k+=f,g=o}return k}charProperties(w,k){return this._activeProvider.charProperties(w,k)}}c.UnicodeService=h}},ee={};function J(U){var c=ee[U];if(c!==void 0)return c.exports;var u=ee[U]={exports:{}};return x[U].call(u.exports,u,u.exports,J),u.exports}var ve={};return(()=>{var U=ve;Object.defineProperty(U,"__esModule",{value:!0}),U.Terminal=void 0;const c=J(9042),u=J(3236),p=J(844),y=J(5741),h=J(8285),m=J(7975),w=J(7090),k=["cols","rows"];class g extends p.Disposable{constructor(l){super(),this._core=this.register(new u.Terminal(l)),this._addonManager=this.register(new y.AddonManager),this._publicOptions={...this._core.options};const s=f=>this._core.options[f],o=(f,S)=>{this._checkReadonlyOptions(f),this._core.options[f]=S};for(const f in this._core.options){const S={get:s.bind(this,f),set:o.bind(this,f)};Object.defineProperty(this._publicOptions,f,S)}}_checkReadonlyOptions(l){if(k.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const s in l)this._publicOptions[s]=l[s]}blur(){this._core.blur()}focus(){this._core.focus()}input(l,s=!0){this._core.input(l,s)}resize(l,s){this._verifyIntegers(l,s),this._core.resize(l,s)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}attachCustomWheelEventHandler(l){this._core.attachCustomWheelEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){return this._checkProposedApi(),this._verifyPositiveIntegers(l.x??0,l.width??0,l.height??0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,s,o){this._verifyIntegers(l,s,o),this._core.select(l,s,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,s){this._verifyIntegers(l,s),this._core.selectLines(l,s)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,s){this._core.write(l,s)}writeln(l,s){this._core.write(l),this._core.write(`\r
`,s)}paste(l){this._core.paste(l)}refresh(l,s){this._verifyIntegers(l,s),this._core.refresh(l,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return c}_verifyIntegers(...l){for(const s of l)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const s of l)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}U.Terminal=g})(),ve})()))})(Gl)),Gl.exports}var Nf=Hf(),Jl={exports:{}},Tu;function zf(){return Tu||(Tu=1,(function(O,W){(function(x,ee){O.exports=ee()})(self,(()=>(()=>{var x={};return(()=>{var ee=x;Object.defineProperty(ee,"__esModule",{value:!0}),ee.FitAddon=void 0,ee.FitAddon=class{activate(J){this._terminal=J}dispose(){}fit(){const J=this.proposeDimensions();if(!J||!this._terminal||isNaN(J.cols)||isNaN(J.rows))return;const ve=this._terminal._core;this._terminal.rows===J.rows&&this._terminal.cols===J.cols||(ve._renderService.clear(),this._terminal.resize(J.cols,J.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const J=this._terminal._core,ve=J._renderService.dimensions;if(ve.css.cell.width===0||ve.css.cell.height===0)return;const U=this._terminal.options.scrollback===0?0:J.viewport.scrollBarWidth,c=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(c.getPropertyValue("height")),p=Math.max(0,parseInt(c.getPropertyValue("width"))),y=window.getComputedStyle(this._terminal.element),h=u-(parseInt(y.getPropertyValue("padding-top"))+parseInt(y.getPropertyValue("padding-bottom"))),m=p-(parseInt(y.getPropertyValue("padding-right"))+parseInt(y.getPropertyValue("padding-left")))-U;return{cols:Math.max(2,Math.floor(m/ve.css.cell.width)),rows:Math.max(1,Math.floor(h/ve.css.cell.height))}}}})(),x})()))})(Jl)),Jl.exports}var Wf=zf();const $f=fe.lazy(()=>Ld(()=>import("./percentages-BXMCSKIN-BKkQf8Li.js").then(O=>O.i),[]).then(O=>({default:O.Excalidraw})).catch(O=>{throw console.error("Failed to load Excalidraw:",O),O})),Uf=({theme:O,onClick:W})=>T.jsxs("div",{onClick:W,style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",transition:"opacity 0.2s ease",textDecoration:"none"},onMouseEnter:x=>x.currentTarget.style.opacity="0.8",onMouseLeave:x=>x.currentTarget.style.opacity="1",children:[T.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("defs",{children:T.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[T.jsx("stop",{offset:"0%",stopColor:"#2563EB"}),T.jsx("stop",{offset:"100%",stopColor:"#1E40AF"})]})}),T.jsx("circle",{cx:"20",cy:"20",r:"18",fill:"url(#logoGradient)"}),T.jsx("path",{d:"M 20 12 C 15 12 12 15 12 20 C 12 25 15 28 20 28",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",fill:"none"}),T.jsx("path",{d:"M 26 14 L 24 16 L 26 18",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),T.jsx("path",{d:"M 14 22 L 16 24 L 14 26",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",lineHeight:"1.2"},children:[T.jsx("span",{style:{fontSize:"20px",fontWeight:"700",color:O.text,letterSpacing:"-0.5px",background:`linear-gradient(135deg, ${O.primary} 0%, ${O.accent} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"CeesarCode"}),T.jsx("span",{style:{fontSize:"10px",color:O.textSecondary,fontWeight:"500",letterSpacing:"1px",textTransform:"uppercase"},children:"Technical Interview Practice"})]})]});class Kf extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,x){console.error("Excalidraw Error:",W,x),console.error("Error stack:",W.stack),console.error("Component stack:",x.componentStack)}render(){return this.state.hasError?T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px",color:this.props.theme.error,fontSize:"14px",textAlign:"center"},children:[T.jsx("div",{style:{marginBottom:"10px",fontSize:"16px",fontWeight:"600"},children:"Failed to load drawing canvas"}),T.jsx("div",{style:{color:this.props.theme.textSecondary,fontSize:"12px"},children:this.state.error?.message||"An error occurred while loading Excalidraw"}),T.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{marginTop:"12px",padding:"8px 16px",backgroundColor:this.props.theme.primary,color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Try Again"})]}):this.props.children}}class Vf extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,x){console.error("App Error:",W,x),console.error("Error stack:",W.stack),console.error("Component stack:",x.componentStack)}render(){return this.state.hasError?T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"40px",backgroundColor:"#f5f5f5",color:"#d32f2f",fontSize:"16px",textAlign:"center"},children:[T.jsx("div",{style:{marginBottom:"16px",fontSize:"24px",fontWeight:"600"},children:"Something went wrong"}),T.jsx("div",{style:{color:"#666",fontSize:"14px",maxWidth:"600px",marginBottom:"8px"},children:this.state.error?.message||"An unexpected error occurred"}),T.jsx("div",{style:{color:"#999",fontSize:"12px",maxWidth:"600px",fontFamily:"monospace",marginTop:"12px"},children:"Check the browser console for more details"}),T.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"24px",padding:"12px 24px",backgroundColor:"#2563EB",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Reload Page"})]}):this.props.children}}const Pu={light:{primary:"#2563EB",secondary:"#F9FAFB",accent:"#1E40AF",background:"#FFFFFF",surface:"#F3F4F6",text:"#111827",textSecondary:"#6B7280",border:"#E5E7EB",success:"#10B981",error:"#EF4444",warning:"#F59E0B",codeBackground:"#FAFAFA"},dark:{primary:"#3B82F6",secondary:"#1F2937",accent:"#60A5FA",background:"#111827",surface:"#374151",text:"#F9FAFB",textSecondary:"#9CA3AF",border:"#4B5563",success:"#34D399",error:"#F87171",warning:"#FBBF24",codeBackground:"#1E1E1E"}},qf=({output:O,theme:W,isDarkMode:x})=>{const ee=fe.useRef(null),J=fe.useRef(null),ve=fe.useRef(null);return fe.useEffect(()=>{if(!ee.current)return;const U=new Nf.Terminal({theme:{background:x?"#1E1E1E":"#0D1117",foreground:x?"#D4D4D4":"#C9D1D9",cursor:x?"#D4D4D4":"#C9D1D9",selection:"#264F78",black:"#000000",red:"#CD3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#E5E5E5"},fontSize:13,fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, monospace',lineHeight:1.5,cursorBlink:!0,cursorStyle:"block",scrollback:1e3,padding:12}),c=new Wf.FitAddon;U.loadAddon(c),U.open(ee.current),c.fit(),J.current=U,ve.current=c;const u=()=>{ve.current&&ve.current.fit()};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u),U.dispose()}},[x]),fe.useEffect(()=>{if(J.current)if(J.current.clear(),O){const U=O.endsWith(`
`)||O.endsWith(`\r
`)?O:O+`\r
`;J.current.write(U)}else J.current.write(`Run your code to see output here...\r
`)},[O]),fe.useEffect(()=>{ve.current&&setTimeout(()=>{ve.current.fit()},100)},[O]),T.jsx("div",{ref:ee,style:{width:"100%",height:"100%",boxSizing:"border-box"}})},Xl=({theme:O})=>T.jsx("div",{style:{display:"inline-block",width:"20px",height:"20px",border:`2px solid ${O.border}`,borderTop:`2px solid ${O.primary}`,borderRadius:"50%",animation:"spin 1s linear infinite"}});class tp extends Jt.Component{constructor(W){super(W),this.state={hasError:!1,error:null}}static getDerivedStateFromError(W){return{hasError:!0,error:W}}componentDidCatch(W,x){console.error("ErrorBoundary caught an error:",W,x)}render(){return this.state.hasError?T.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffebee",color:"#c62828",border:"1px solid #ef5350",borderRadius:"4px",margin:"10px 0"},children:[T.jsx("h3",{children:"Something went wrong"}),T.jsx("p",{children:"An error occurred while rendering this section. Please refresh the page."}),T.jsxs("details",{children:[T.jsx("summary",{children:"Error details"}),T.jsx("pre",{children:this.state.error?.toString()})]})]}):this.props.children}}const Gf=(O=[])=>{const[W,x]=fe.useState(Array.isArray(O)?O:[]);return[W,J=>{Array.isArray(J)?x(J):J==null?(console.warn("Attempted to set null/undefined to array state, using empty array instead"),x([])):(console.warn("Attempted to set non-array to array state:",typeof J,J),x([]))}]},Jf={python:{extension:"py",fileName:"Main.py"},cpp:{extension:"cpp",fileName:"Main.cpp"},c:{extension:"cpp",fileName:"Main.cpp"},java:{extension:"java",fileName:"Main.java"},kotlin:{extension:"kt",fileName:"Main.kt"},scala:{extension:"scala",fileName:"Main.scala"},go:{extension:"go",fileName:"main.go"},rust:{extension:"rs",fileName:"main.rs"},swift:{extension:"swift",fileName:"main.swift"},ruby:{extension:"rb",fileName:"main.rb"},javascript:{extension:"js",fileName:"main.js"},typescript:{extension:"ts",fileName:"main.ts"},bash:{extension:"sh",fileName:"script.sh"},sh:{extension:"sh",fileName:"script.sh"},sql:{extension:"txt",fileName:"code.txt"}},ks=O=>Jf[O]?.fileName||"code.txt",Xf=O=>({python:"python",cpp:"cpp",c:"c",java:"java",kotlin:"kotlin",scala:"scala",go:"go",rust:"rust",swift:"swift",ruby:"ruby",javascript:"javascript",typescript:"typescript",bash:"shell",sh:"shell",sql:"sql"})[O]||"plaintext",Nt=O=>({python:`# Write your solution here
`,cpp:`#include <iostream>
using namespace std;

int main() {
    // Write your solution here
    return 0;
}`,c:`#include <stdio.h>

int main() {
    // Write your solution here
    return 0;
}`,java:`public class Main {
    public static void main(String[] args) {
        // Write your solution here
    }
}`,kotlin:`fun main() {
    // Write your solution here
}`,scala:`object Main {
  def main(args: Array[String]): Unit = {
    // Write your solution here
  }
}`,go:`package main

import "fmt"

func main() {
    // Write your solution here
}`,rust:`fn main() {
    // Write your solution here
}`,swift:`// Write your solution here
// Note: Use print() for output, avoid Foundation imports for compatibility`,ruby:`# Write your solution here
`,javascript:`// Write your solution here
`,typescript:`// Write your TypeScript solution here
// Note: Basic Node.js globals are available
`,bash:`#!/bin/bash
# Write your solution here
`,sh:`#!/bin/sh
# Write your solution here
`,sql:`-- Write your SQL query here
`})[O]||`// Write your solution here
`;function Qf(){const[O,W]=fe.useState([]),[x,ee]=fe.useState(null),[J,ve]=fe.useState(0),[U,c]=fe.useState("python"),[u,p]=fe.useState(""),[y,h]=fe.useState({}),[m,w]=fe.useState(null),[k,g]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-dark-mode");return v?JSON.parse(v):!1}),n=fe.useRef(""),[l,s]=fe.useState(!0),[o,f]=fe.useState(!1),[S,C]=fe.useState(!1),[b,_]=fe.useState(null),[D,N]=fe.useState(0),[z,G]=fe.useState(!0),[j,te]=fe.useState(!1),[X,le]=fe.useState({title:"",statement:"",languages:["python"],stub:{python:""},type:"coding",drawingData:"",isMultiPart:!1,parts:[]}),[pe,Y]=fe.useState(!1),R=async(v,B)=>{try{if(!(await fetch(`/api/problems/${v}/drawing`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({drawingData:B})})).ok)throw new Error("Failed to save drawing");ee(K=>K?{...K,DrawingData:B}:null)}catch(H){console.error("Error saving drawing:",H)}},I=async v=>{try{console.log("Deleting problem:",v);const B=await fetch(`/api/problems/${v}`,{method:"DELETE"});if(console.log("Delete response status:",B.status,B.statusText),!B.ok){const H=await B.text();throw console.error("Delete error response:",H),new Error(`Failed to delete problem (${B.status}): ${H}`)}W(H=>H.filter(K=>(K.ID||K.id)!==v)),x&&(x.ID||x.id)===v&&(ee(null),p(""),w(null)),console.log("Problem deleted successfully")}catch(B){console.error("Error deleting problem:",B),alert("Failed to delete problem: "+B.message)}},E=Jt.useCallback((v,B,H)=>{try{const K={...B};delete K.collaborators;const ne=JSON.stringify({elements:v,appState:K,files:H});n.current!==ne&&(n.current=ne,x&&R(x.ID,ne))}catch(K){console.error("Failed to save drawing data:",K)}},[x]),[A,se]=fe.useState(!1),[ce,Ce]=Gf([]),[be,q]=fe.useState(!1),[P,re]=fe.useState([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),[he,ke]=fe.useState(!1),[Ee,He]=fe.useState(!1),[me,Ne]=fe.useState({company:"",role:"",customRole:"",level:"mid",count:3,jobDescription:"",companyDescription:"",interviewType:"",provider:"gemini",apiKey:"",defaultLanguage:"python",questionType:"coding",includeMultiPart:!1}),[Ve,Oe]=fe.useState(!1),[Et,rr]=fe.useState(!1),[at,Rt]=fe.useState(null),[wt,pt]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-sidebar-collapsed");return v?JSON.parse(v):!1}),[ir,xt]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-sidebar-width");return v?parseInt(v):320}),[dr,fr]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-editor-height");return v?parseInt(v):450}),[ct,sr]=fe.useState(!1),[ut,Bt]=fe.useState(!1),[Ue,ai]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-left-pane-width");return v?parseFloat(v):45}),ci=fe.useRef(null),[Ts,$i]=fe.useState({top:56,height:32});fe.useLayoutEffect(()=>{if(wt)return;const v=()=>{if(!ci.current)return;const B=ci.current.getBoundingClientRect();$i({top:B.top,height:B.height||32})};return v(),window.addEventListener("resize",v),window.addEventListener("scroll",v,!0),()=>{window.removeEventListener("resize",v),window.removeEventListener("scroll",v,!0)}},[wt,Ue,x]);const[Ui,Ki]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-console-height");return v?parseInt(v):200}),[Ps,Ms]=fe.useState([]),[zr,Wr]=fe.useState({top:0,left:0}),[Zn,eo]=fe.useState(0),[ui,As]=fe.useState(!1),[to,Bs]=fe.useState(""),[ro,hi]=fe.useState(0),[Is,di]=fe.useState(0),[Yl,$r]=fe.useState({start:0,end:0}),fi=fe.useRef({start:0,end:0}),[Ur,Vi]=fe.useState(()=>{const v=localStorage.getItem("ceesarcode-console-collapsed");return v?JSON.parse(v):!1}),[pi,Os]=fe.useState(!1),[_i,nr]=fe.useState(!1),or=["python","cpp","c","java","kotlin","scala","go","rust","swift","ruby","javascript","typescript","bash","sh","sql"],js=[{value:"junior",label:"Junior"},{value:"mid",label:"Mid-level"},{value:"senior",label:"Senior"},{value:"staff",label:"Staff"},{value:"principal",label:"Principal"}],io=["Software Engineer","Frontend Developer","Backend Developer","Full Stack Developer","DevOps Engineer","Data Engineer","Machine Learning Engineer","Mobile Developer","QA Engineer","Security Engineer"],M=k?Pu.dark:Pu.light;Ts.top+(Ts.height-24)/2;const Fs=()=>{const v=document.querySelector("textarea");if(!v)return;const B=v.selectionStart,H=v.selectionEnd,ne=u.substring(B,H).split(`
`),oe=ne.every(ae=>{const de=ae.trim();return de===""||U==="python"&&de.startsWith("#")||["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(U)&&de.startsWith("//")||["bash","sh"].includes(U)&&de.startsWith("#")||U==="sql"&&de.startsWith("--")});let Se;oe?Se=ne.map(ae=>{const de=ae.trim();return de===""?ae:U==="python"&&de.startsWith("#")?ae.replace(/^(\s*)#/,"$1"):["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(U)&&de.startsWith("//")?ae.replace(/^(\s*)\/\//,"$1"):["bash","sh"].includes(U)&&de.startsWith("#")?ae.replace(/^(\s*)#/,"$1"):U==="sql"&&de.startsWith("--")?ae.replace(/^(\s*)--/,"$1"):ae}).join(`
`):Se=ne.map(ae=>ae.trim()===""?ae:U==="python"?ae.replace(/^(\s*)/,"$1# "):["cpp","c","java","javascript","typescript","go","rust","swift","kotlin","scala"].includes(U)?ae.replace(/^(\s*)/,"$1// "):["bash","sh"].includes(U)?ae.replace(/^(\s*)/,"$1# "):U==="sql"?ae.replace(/^(\s*)/,"$1-- "):ae).join(`
`);const we=u.substring(0,B)+Se+u.substring(H);p(we),setTimeout(()=>{v.focus(),v.setSelectionRange(B,B+Se.length)},0)},Hs=()=>{const v=u.split(`
`),B=[];let H=0;const K=lr(U);for(let ne=0;ne<v.length;ne++){let oe=v[ne];oe=oe.replace(/\s+$/,"");const Se=oe.trim();/^[}\]\)]/.test(Se)&&(H=Math.max(0,H-1));const ae=" ".repeat(H*K)+Se;(/[{\[\(]$/.test(Se)||Us(Se,U))&&H++,B.push(ae)}p(B.join(`
`))},qi=()=>{window.confirm("Are you sure you want to clear all code?")&&p("")},so=()=>{const v=document.querySelector("textarea");if(!v)return;const B=v.selectionStart;v.selectionEnd;const H=u.split(`
`);let K=0,ne=0;for(let Se=0;Se<H.length;Se++){if(ne+H[Se].length>=B){K=Se;break}ne+=H[Se].length+1}const oe=H[K];H.splice(K+1,0,oe),p(H.join(`
`))},Ns=()=>{const v=!k;g(v),localStorage.setItem("ceesarcode-dark-mode",JSON.stringify(v))},Qe=()=>{const v=!wt;pt(v),localStorage.setItem("ceesarcode-sidebar-collapsed",JSON.stringify(v))};fe.useEffect(()=>{const v=H=>{if(ct){const K=Math.max(200,Math.min(600,H.clientX));xt(K),localStorage.setItem("ceesarcode-sidebar-width",K.toString())}},B=()=>{sr(!1)};return ct&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",B),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",B),document.body.style.cursor="",document.body.style.userSelect=""}},[ct]),fe.useEffect(()=>{const v=H=>{if(ut){const K=document.querySelector("[data-editor-container]");if(K){const ne=K.getBoundingClientRect(),oe=Math.max(200,Math.min(800,H.clientY-ne.top));fr(oe),localStorage.setItem("ceesarcode-editor-height",oe.toString())}}},B=()=>{Bt(!1)};return ut&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",B),document.body.style.cursor="row-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",B),document.body.style.cursor="",document.body.style.userSelect=""}},[ut]),fe.useEffect(()=>{const v=H=>{if(pi){const K=document.querySelector("[data-panes-container]");if(K){const ne=K.getBoundingClientRect(),oe=(H.clientX-ne.left)/ne.width*100,Se=Math.max(25,Math.min(75,oe));ai(Se),localStorage.setItem("ceesarcode-left-pane-width",Se.toString())}}},B=()=>{Os(!1)};return pi&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",B),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",B),document.body.style.cursor="",document.body.style.userSelect=""}},[pi]),fe.useEffect(()=>{const v=H=>{if(_i){const K=document.querySelector("[data-console-container]");if(K){const ne=K.getBoundingClientRect(),oe=Math.max(100,Math.min(600,ne.bottom-H.clientY));Ki(oe),localStorage.setItem("ceesarcode-console-height",oe.toString())}}},B=()=>{nr(!1)};return _i&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",B),document.body.style.cursor="row-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",B),document.body.style.cursor="",document.body.style.userSelect=""}},[_i]);const zs=()=>{const v=!Ur;Vi(v),localStorage.setItem("ceesarcode-console-collapsed",JSON.stringify(v))},gi=(v=1)=>{const H=(or.indexOf(U)+v+or.length)%or.length,K=or[H];c(K);const ne=x&&(x.IsMultiPart||x.isMultiPart),oe=x&&(x.Parts||x.parts||[]);if(ne&&oe.length>0)if(h(Se=>({...Se,[J]:u})),J===0)x.Stub&&x.Stub[K]?p(y[0]||x.Stub[K]):p(y[0]||Nt(K));else{const Se=oe[J-1],we=Se.stub||Se.Stub||{};we[K]?p(y[J]||we[K]):p(y[J]||Nt(K))}else x&&x.Stub&&x.Stub[K]?p(x.Stub[K]):p(Nt(K))},Ws=()=>{ke(!0)},vi=async()=>{const v=Ve?me.customRole:me.role;if(!me.company||!v){alert("Please fill in both company and role fields");return}const B=me.count&&!isNaN(parseInt(me.count))?parseInt(me.count):3,H=Math.max(1,Math.min(10,B)),K={company:me.company,role:v,level:me.level,count:H,jobDescription:me.jobDescription||"",companyDescription:me.companyDescription||"",interviewType:me.interviewType||"",provider:me.provider||"gemini",apiKey:me.apiKey||"",defaultLanguage:me.defaultLanguage||"python",questionType:me.questionType||"coding",includeMultiPart:me.includeMultiPart||!1};console.log("Sending request:",{...K,apiKey:K.apiKey?"***"+K.apiKey.slice(-4):"empty"}),rr(!0),Rt(null),_(null);const ne=Math.min(9e5,9e4+H*45e3),oe=Math.round(ne/6e4*10)/10;console.log(`Setting timeout to ${oe} minutes for ${H} question(s)`);try{const Se=new AbortController,we=setTimeout(()=>Se.abort(),ne),ae=await fetch("/api/agent/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K),signal:Se.signal});clearTimeout(we);const de=await ae.json();if(!ae.ok)throw console.error("API error response:",de),new Error(de.message||`HTTP error! status: ${ae.status}`);if(Rt(de),de.status==="success"){await(async()=>{try{const De=await fetch("/api/problems");if(!De.ok)throw new Error("Failed to fetch problems");const je=await De.json();W(je)}catch(De){console.error("Error fetching problems:",De)}})();const Le=de.problems?de.problems.length:0;alert(`Successfully generated ${Le} questions!`)}else console.error("AI generation error:",de),alert(`Error: ${de.message||"Failed to generate questions. Please check your API key and try again."}`)}catch(Se){if(console.error("Error generating questions:",Se),Se.name==="AbortError"){const we=Math.round(ne/6e4*10)/10;_(`Request timed out after ${we} minutes. The AI generation is taking longer than expected. Try generating fewer questions at once or check your internet connection.`),alert(`Request timed out after ${we} minutes. Try generating fewer questions at once (e.g., 3-5 questions) or check your internet connection.`)}else _(Se.message),alert("Failed to generate questions: "+Se.message)}finally{rr(!1)}},no=v=>({python:["def","class","if","else","elif","for","while","try","except","finally","with","import","from","return","yield","lambda","and","or","not","in","is","True","False","None"],javascript:["function","const","let","var","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","class","extends","import","export","async","await"],typescript:["function","const","let","var","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","class","extends","import","export","async","await","interface","type","enum","namespace"],java:["public","private","protected","static","final","abstract","class","interface","extends","implements","if","else","for","while","switch","case","break","continue","return","try","catch","finally","throw","new","this","super"],cpp:["int","float","double","char","bool","void","if","else","for","while","switch","case","break","continue","return","try","catch","throw","new","delete","class","struct","public","private","protected"],c:["int","float","double","char","void","if","else","for","while","switch","case","break","continue","return","struct","typedef","enum"],go:["func","var","const","type","struct","interface","if","else","for","range","switch","case","break","continue","return","go","chan","select","defer","panic","recover"],rust:["fn","let","const","static","if","else","for","while","loop","match","break","continue","return","struct","enum","impl","trait","use","mod","pub","async","await"],kotlin:["fun","val","var","class","interface","if","else","for","while","when","break","continue","return","try","catch","finally","throw","data","object","companion"],scala:["def","val","var","class","object","trait","if","else","for","while","match","case","break","continue","return","try","catch","finally","throw","import","package"],swift:["func","let","var","class","struct","enum","protocol","if","else","for","while","switch","case","break","continue","return","try","catch","throw","import"],ruby:["def","class","module","if","else","elsif","for","while","case","when","break","next","return","begin","rescue","ensure","raise","yield","end"],bash:["if","then","else","elif","fi","for","while","do","done","case","esac","function","return","break","continue","echo","read","cd","ls","grep","awk","sed"],sql:["SELECT","FROM","WHERE","GROUP","BY","ORDER","HAVING","INSERT","UPDATE","DELETE","CREATE","ALTER","DROP","TABLE","INDEX","VIEW","JOIN","INNER","LEFT","RIGHT","OUTER"]})[v]||[],$s=v=>{v.preventDefault();const B=v.target,H=B.selectionStart,K=B.selectionEnd,oe=u.substring(0,H).split(`
`).pop().split(/\s+/).pop()||"";if(v.shiftKey)Wt(B,H,K);else if(oe.length>0&&!oe.includes(`
`)){const Se=Ks(oe,U);if(Se){const we=u.substring(0,H-oe.length)+Se+u.substring(K);p(we),setTimeout(()=>{B.focus(),B.setSelectionRange(H-oe.length+Se.length,H-oe.length+Se.length)},0)}else Kr(B,H,K)}else Kr(B,H,K)},Kr=(v,B,H)=>{const K=u.split(`
`);let ne=0;for(let we=0;we<K.length&&!(ne+K[we].length>=B);we++)ne+=K[we].length+1;const oe=lr(U),Se=" ".repeat(oe);if(B===H){const we=u.substring(0,B)+Se+u.substring(H);p(we),setTimeout(()=>{v.focus(),v.setSelectionRange(B+Se.length,B+Se.length)},0)}else{const we=[];let ae=0;for(let ue=0;ue<K.length;ue++){const Le=ae+K[ue].length;Le>=B&&ae<=H&&we.push(ue),ae=Le+1}const de=[...K];we.forEach(ue=>{de[ue]=Se+de[ue]}),p(de.join(`
`)),setTimeout(()=>{v.focus(),v.setSelectionRange(B+Se.length,H+Se.length*we.length)},0)}},Wt=(v,B,H)=>{const K=u.split(`
`);let ne=0,oe=0;for(let we=0;we<K.length;we++){if(oe+K[we].length>=B){ne=we;break}oe+=K[we].length+1}const Se=lr(U);if(B===H){const ae=K[ne].match(/^(\s*)/)[1],de=Math.min(ae.length,Se);if(de>0){const ue=u.substring(0,B-de)+u.substring(B);p(ue),setTimeout(()=>{v.focus(),v.setSelectionRange(B-de,B-de)},0)}}else{const we=[];let ae=0;for(let Le=0;Le<K.length;Le++){const De=ae+K[Le].length;De>=B&&ae<=H&&we.push(Le),ae=De+1}const de=[...K];let ue=0;we.forEach(Le=>{const De=de[Le].match(/^(\s*)/)[1],je=Math.min(De.length,Se);de[Le]=de[Le].substring(je),ue+=je}),p(de.join(`
`)),setTimeout(()=>{v.focus(),v.setSelectionRange(Math.max(0,B-Se),Math.max(0,H-ue))},0)}},lr=v=>({python:4,javascript:2,typescript:2,java:4,cpp:4,c:4,go:4,rust:4,kotlin:4,scala:2,swift:4,ruby:2,bash:2,sh:2,sql:2})[v]||4,It=v=>{v.preventDefault();const B=v.target,H=B.selectionStart,K=B.selectionEnd,ne=u.split(`
`);let oe=0,Se=0;for(let Ze=0;Ze<ne.length;Ze++){if(Se+ne[Ze].length>=H){oe=Ze;break}Se+=ne[Ze].length+1}const we=ne[oe]||"",ae=ne[oe-1]||"";let de="";const ue=we.match(/^(\s*)/)[1],Le=we.trim(),De=/[{\[\(]$/.test(Le),je=/^\s*[}\]\)]/.test(we),Ge=Us(Le,U);if(ae.match(/^(\s*)/)[1],De){const Ze=lr(U);de=ue+" ".repeat(Ze)}else if(je){const Ze=lr(U);de=ue.length>=Ze?ue.substring(0,ue.length-Ze):""}else if(Ge){const Ze=lr(U);de=ue+" ".repeat(Ze)}else de=ue;const Ye=u.substring(0,H)+`
`+de+u.substring(K);p(Ye),setTimeout(()=>{B.focus(),B.setSelectionRange(H+1+de.length,H+1+de.length)},0)},Us=(v,B)=>({python:[/:\s*$/,/^\s*(if|for|while|def|class|with|try|except|finally|elif|else)\s+.*:\s*$/,/^\s*(async\s+)?def\s+\w+.*:\s*$/,/^\s*class\s+\w+.*:\s*$/],javascript:[/:\s*$/,/^\s*(if|for|while|function|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(const|let|var)\s+\w+\s*=\s*\(.*\)\s*=>\s*\{?\s*$/,/^\s*\w+\s*:\s*function\s*\(.*\)\s*\{?\s*$/],typescript:[/:\s*$/,/^\s*(if|for|while|function|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(const|let|var)\s+\w+\s*:\s*\w+\s*=\s*\(.*\)\s*=>\s*\{?\s*$/,/^\s*(public|private|protected)\s+\w+\s*\(.*\)\s*:\s*\w+\s*\{?\s*$/],java:[/^\s*(if|for|while|switch|try|catch|finally)\s*\(.*\)\s*\{?\s*$/,/^\s*(public|private|protected)\s+\w+\s+.*\s*\(.*\)\s*\{?\s*$/,/^\s*class\s+\w+.*\{?\s*$/],cpp:[/^\s*(if|for|while|switch|try|catch)\s*\(.*\)\s*\{?\s*$/,/^\s*\w+\s+.*\s*\(.*\)\s*\{?\s*$/,/^\s*class\s+\w+.*\{?\s*$/],c:[/^\s*(if|for|while|switch)\s*\(.*\)\s*\{?\s*$/,/^\s*\w+\s+.*\s*\(.*\)\s*\{?\s*$/],go:[/^\s*(if|for|switch|func)\s+.*\{?\s*$/,/^\s*func\s+\w+.*\s*\(.*\)\s*\{?\s*$/],rust:[/^\s*(if|for|while|match|fn)\s+.*\{?\s*$/,/^\s*fn\s+\w+.*\s*\(.*\)\s*\{?\s*$/],kotlin:[/^\s*(if|for|while|when|try|catch|finally)\s+.*\{?\s*$/,/^\s*fun\s+\w+.*\s*\(.*\)\s*\{?\s*$/],scala:[/^\s*(if|for|while|match|try|catch|finally)\s+.*\{?\s*$/,/^\s*def\s+\w+.*\s*\(.*\)\s*\{?\s*$/],swift:[/^\s*(if|for|while|switch|func)\s+.*\{?\s*$/,/^\s*func\s+\w+.*\s*\(.*\)\s*\{?\s*$/],ruby:[/^\s*(if|for|while|def|class|module|begin|rescue|ensure)\s+.*$/,/^\s*def\s+\w+.*$/,/^\s*class\s+\w+.*$/],bash:[/^\s*(if|for|while|case|function)\s+.*$/,/^\s*\w+\s*\(\s*\)\s*\{?\s*$/],sql:[/^\s*(SELECT|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP)\s+.*$/,/^\s*(WHERE|FROM|JOIN|GROUP BY|ORDER BY|HAVING)\s+.*$/]}[B]||[]).some(ne=>ne.test(v)),oo=v=>{if(v.key==="Tab"){$s(v);return}if(v.key==="Enter"){It(v);return}if(v.key==="Backspace"){mi(v);return}if(["(","[","{",'"',"'",")","]","}"].includes(v.key)){co(v);return}if((v.ctrlKey||v.metaKey)&&v.key==="Enter"){v.preventDefault(),x&&u.trim()&&!S&&Gr();return}if((v.ctrlKey||v.metaKey)&&v.key==="/"){v.preventDefault(),Fs();return}if((v.ctrlKey||v.metaKey)&&v.key==="d"){v.preventDefault(),so();return}if((v.ctrlKey||v.metaKey)&&v.key==="l"){v.preventDefault(),qi();return}if((v.ctrlKey||v.metaKey)&&v.shiftKey&&v.key==="F"){v.preventDefault(),Hs();return}if(v.key==="Escape"&&x){ee(null);return}if((v.ctrlKey||v.metaKey)&&v.shiftKey&&v.key==="?"){v.preventDefault(),ke(!0);return}},lo=v=>{p(v||""),x&&(x.IsMultiPart||x.isMultiPart)&&h(H=>({...H,[J]:v||""}))},mi=v=>{const B=v.target,H=B.selectionStart,K=B.selectionEnd;if(H!==K)return;const ne=u.substring(0,H),oe=u.substring(K),Se={"(":")","[":"]","{":"}",'"':'"',"'":"'"},we=ne.charAt(ne.length-1),ae=Se[we];if(ae&&oe.charAt(0)===ae){v.preventDefault();const Ye=u.substring(0,H-1)+u.substring(K+1);p(Ye),setTimeout(()=>{B.focus(),B.setSelectionRange(H-1,H-1)},0);return}const de=u.split(`
`);let ue=0,Le=0;for(let Ye=0;Ye<de.length;Ye++){if(Le+de[Ye].length>=H){ue=Ye;break}Le+=de[Ye].length+1}const De=de[ue]||"",je=De.match(/^(\s*)/)[1];if(H-Le<=je.length&&je.length>0){v.preventDefault();const Ye=yi(de,ue,U),Ze=lr(U),_r=" ".repeat(Ye*Ze),br=_r+De.trim(),Jr=[...de];Jr[ue]=br,p(Jr.join(`
`)),setTimeout(()=>{B.focus();const Js=Le+_r.length;B.setSelectionRange(Js,Js)},0);return}},yi=(v,B,H)=>{const K=lr(H),ne=v[B].match(/^(\s*)/)[1],oe=Math.floor(ne.length/K);if(oe<=1)return 0;for(let Se=B-1;Se>=0;Se--){const we=v[Se];if(we.trim()==="")continue;const de=we.match(/^(\s*)/)[1],ue=Math.floor(de.length/K);if(ue<oe)return ue}return 0},Vr=(v,B,H)=>{const ne=v.substring(0,B).split(`
`),oe=ne[ne.length-1]||"",we={python:/#/,javascript:/\/\/|\/\*/,typescript:/\/\/|\/\*/,java:/\/\/|\/\*/,cpp:/\/\/|\/\*/,c:/\/\/|\/\*/,go:/\/\/|\/\*/,rust:/\/\/|\/\*/,ruby:/#/,bash:/#/,sh:/#/}[H];if(!we)return!1;const ae=oe.match(we);if(ae){const de=oe.indexOf(ae[0]),ue=oe.length;if(de<ue){if(ae[0]==="/*"){const Le=v.substring(0,B),De=Le.lastIndexOf("/*"),je=Le.lastIndexOf("*/");return De>je}return!0}}return!1},pr=(v,B,H)=>{const K=v.substring(0,B);let ne=0,oe=0;for(;oe<K.length;)K[oe]===H&&(oe===0||K[oe-1]!=="\\")&&ne++,oe++;return ne%2===1},ao=(v,B,H,K)=>{let ne=1,oe=B+1;for(;oe<v.length&&ne>0;){const Se=v[oe];if((oe>0?v[oe-1]:"")==="\\"){oe++;continue}if(Se===H)ne++;else if(Se===K&&(ne--,ne===0))return oe;oe++}return-1},co=v=>{const B=v.target,H=B.selectionStart,K=B.selectionEnd;if(H!==K)return;const ne={"(":")","[":"]","{":"}",'"':'"',"'":"'"},oe={")":"(","]":"[","}":"{",'"':'"',"'":"'"},Se=ne[v.key],we=oe[v.key];if(we){if(u.substring(K).charAt(0)===v.key){const de=u.substring(0,H);let ue=0;for(let Le=0;Le<de.length;Le++){const De=de[Le];Le>0&&de[Le-1]==="\\"||(De===we?ue++:De===v.key&&(ue=Math.max(0,ue-1)))}if(ue===0){v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(K+1,K+1)},0);return}}if((v.key==='"'||v.key==="'")&&pr(u,H,v.key)){let de=-1;for(let ue=H-1;ue>=0;ue--)if(u[ue]===v.key&&(ue===0||u[ue-1]!=="\\")){de=ue;break}if(de!==-1){const ue=ao(u,de,v.key,v.key);if(ue!==-1&&ue>=H){v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(ue+1,ue+1)},0);return}}return}}if(Se){if(Vr(u,H,U))return;const ae=u.substring(K);if(v.key==='"'||v.key==="'"){if(pr(u,H,v.key))if(ae.charAt(0)===v.key){const Le=u.substring(0,H);let De=!1,je=-1;for(let Ge=Le.length-1;Ge>=0;Ge--){const Ye=Le[Ge];if(!(Ge>0&&Le[Ge-1]==="\\")&&Ye===v.key){De=!0,je=Ge;break}}if(De&&je!==-1){if(Le.substring(je+1).trim().length>0){v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(K+1,K+1)},0);return}}else{v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(K+1,K+1)},0);return}}else return;v.key==='"'&&pr(u,H,"'")||v.key==="'"&&pr(u,H,'"')}if(ae.charAt(0)===Se){const ue=u.substring(0,H);let Le=0;for(let De=0;De<ue.length;De++){const je=ue[De];De>0&&ue[De-1]==="\\"||(je===v.key?Le++:je===Se&&(Le=Math.max(0,Le-1)))}if(!(Le>0)){let De=0,je=!1,Ge=-1;for(let Ye=ue.length-1;Ye>=0;Ye--){const Ze=ue[Ye];if(!(Ye>0&&ue[Ye-1]==="\\")){if(Ze===Se)De++;else if(Ze===v.key)if(De===0){je=!0,Ge=Ye;break}else De--}}if(je&&Ge!==-1){if(ue.substring(Ge+1).trim().length>0){v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(K+1,K+1)},0);return}}else{v.preventDefault(),setTimeout(()=>{B.focus(),B.setSelectionRange(K+1,K+1)},0);return}}}v.preventDefault();const de=u.substring(0,H)+v.key+Se+u.substring(K);p(de),setTimeout(()=>{B.focus(),B.setSelectionRange(H+1,H+1)},0)}},Gi=(v,B)=>{const H={variables:new Set,imports:new Set,functions:new Set},K=v.split(`
`);for(const ne of K){const oe=ne.trim();if(B==="python"){const ae=oe.match(/^(?:from\s+(\S+)|import\s+(\S+))/);if(ae){const de=ae[1]||ae[2];de&&de.split(",").forEach(ue=>{const Le=ue.trim().split(" as ")[0].split(".")[0];H.imports.add(Le)})}}else if(["javascript","typescript"].includes(B)){const ae=oe.match(/import\s+(?:\{[^}]+\}|\*\s+as\s+(\w+)|(\w+))/);if(ae){const de=ae[1]||ae[2];de&&H.imports.add(de);const ue=oe.match(/import\s+\{([^}]+)\}/);ue&&ue[1].split(",").forEach(Le=>{const De=Le.trim().split(" as ")[0];H.imports.add(De)})}}const we={python:/^\s*(?:self\.)?(\w+)\s*=/,javascript:/^\s*(?:const|let|var)\s+(\w+)\s*=/,typescript:/^\s*(?:const|let|var)\s+(\w+)\s*[:=]/,java:/^\s*(?:\w+\s+)?(\w+)\s*=/,cpp:/^\s*(?:\w+\s+)?(\w+)\s*=/,c:/^\s*(?:\w+\s+)?(\w+)\s*=/}[B];if(we){const ae=oe.match(we);ae&&H.variables.add(ae[1])}if(B==="python"){const ae=oe.match(/^\s*def\s+(\w+)\s*\(([^)]*)\)/);if(ae){const ue=ae[1];ue&&H.functions.add(ue);const Le=ae[2];Le&&Le.split(",").forEach(De=>{const je=De.trim().split("=")[0].trim().split(":")[0].trim();je&&/^\w+$/.test(je)&&H.variables.add(je)})}const de=oe.match(/lambda\s+([^:]+):/);de&&de[1].split(",").forEach(Le=>{const De=Le.trim();De&&/^\w+$/.test(De)&&H.variables.add(De)})}else if(["javascript","typescript"].includes(B)){const ae=oe.match(/^\s*function\s+(\w+)\s*\(([^)]*)\)/);if(ae){const Le=ae[1];Le&&H.functions.add(Le);const De=ae[2];De&&De.split(",").forEach(je=>{const Ge=je.trim().split("=")[0].trim().split(":")[0].trim();Ge&&/^\w+$/.test(Ge)&&H.variables.add(Ge)})}const de=oe.match(/^\s*(?:const|let|var)\s+(\w+)\s*[:=]\s*(?:async\s*)?(?:\(([^)]+)\)|(\w+))\s*=>/);if(de){const Le=de[1];Le&&H.functions.add(Le);const De=de[2]||de[3];if(De)if(de[3]){const je=De.trim();je&&/^\w+$/.test(je)&&H.variables.add(je)}else De.split(",").forEach(je=>{const Ge=je.trim().split("=")[0].trim().split(":")[0].trim();Ge&&/^\w+$/.test(Ge)&&H.variables.add(Ge)})}const ue=oe.match(/^\s*(?:\(([^)]+)\)|(\w+))\s*=>/);if(ue&&!de){const Le=ue[1]||ue[2];if(Le)if(ue[2]){const De=Le.trim();De&&/^\w+$/.test(De)&&H.variables.add(De)}else Le.split(",").forEach(De=>{const je=De.trim().split("=")[0].trim().split(":")[0].trim();je&&/^\w+$/.test(je)&&H.variables.add(je)})}}else if(["java","cpp","c"].includes(B)){const ae=oe.match(/^\s*(?:\w+\s+)*\w+\s+(\w+)\s*\(([^)]*)\)/);if(ae){const de=ae[1];de&&H.functions.add(de);const ue=ae[2];ue&&ue.split(",").forEach(Le=>{const De=Le.trim().split(/\s+/);if(De.length>=2){const je=De[De.length-1].split("=")[0].trim();je&&/^\w+$/.test(je)&&H.variables.add(je)}else if(De.length===1){const je=De[0].trim();je&&/^\w+$/.test(je)&&H.variables.add(je)}})}}if(B==="python"){const ae=oe.match(/^\s*for\s+([^:]+)\s+in\s+/);ae&&ae[1].split(",").forEach(ue=>{const Le=ue.trim();Le&&/^\w+$/.test(Le)&&H.variables.add(Le)})}else if(["javascript","typescript"].includes(B)){const ae=oe.match(/^\s*for\s*\(\s*(?:const|let|var)?\s*(\w+)/);if(ae){const ue=ae[1];ue&&H.variables.add(ue)}const de=oe.match(/^\s*for\s*\(\s*(?:const|let|var)?\s*\[([^\]]+)\]/);de&&de[1].split(",").forEach(Le=>{const De=Le.trim();De&&/^\w+$/.test(De)&&H.variables.add(De)})}else if(["java","cpp","c"].includes(B)){const ae=oe.match(/^\s*for\s*\(\s*(?:\w+\s+)?(\w+)/);if(ae){const ue=ae[1];ue&&ue!=="int"&&ue!=="long"&&ue!=="double"&&ue!=="float"&&ue!=="char"&&H.variables.add(ue)}const de=oe.match(/^\s*for\s*\(\s*\w+\s+(\w+)\s*:/);if(de){const ue=de[1];ue&&H.variables.add(ue)}}}return H},Ks=(v,B)=>{const K=no(B).filter(ae=>ae.toLowerCase().startsWith(v.toLowerCase())&&ae.toLowerCase()!==v.toLowerCase()),ne=Gi(u,B),Se=[...ne.variables,...ne.imports,...ne.functions].filter(ae=>ae.toLowerCase().startsWith(v.toLowerCase())&&ae.toLowerCase()!==v.toLowerCase()),we=[...K,...Se];if(we.length===1)return we[0];if(we.length>1){const ae=Ji(we);if(ae.length>v.length)return ae}return null},Ji=v=>{if(v.length===0)return"";if(v.length===1)return v[0];let B=v[0];for(let H=1;H<v.length;H++)for(;B.length>0&&!v[H].toLowerCase().startsWith(B.toLowerCase());)B=B.slice(0,-1);return B};fe.useEffect(()=>{const v=B=>{if(ui){const H=document.querySelector("[data-autocomplete]"),K=document.querySelector("textarea");H&&!H.contains(B.target)&&K&&!K.contains(B.target)&&As(!1)}};if(ui)return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[ui]),fe.useEffect(()=>{const v=document.querySelector("textarea");if(!v)return;const B=()=>{const H=v.selectionStart,K=v.selectionEnd;fi.current={start:H,end:K},$r({start:H,end:K})};return v.addEventListener("focus",B),()=>v.removeEventListener("focus",B)},[u]),fe.useEffect(()=>{const v=B=>{if(console.log("Pop state:",B.state),B.state){const{problemId:H}=B.state;if(H){const K=O.find(ne=>ne.ID===H);K&&(ee(K),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]))}else ee(null),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1}])}else ee(null),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1}]),te(!1),window.location.hash&&window.history.replaceState({page:"home"},"","/")};return window.history.state||window.history.replaceState({page:"home"},"","/"),window.addEventListener("popstate",v),()=>{window.removeEventListener("popstate",v)}},[O]);const qr=async v=>{try{const B=await fetch(`/api/problem/${v}/files`);if(B.ok){const H=await B.json();let K=[];Array.isArray(H)?K=H:H&&typeof H=="object"?(K=[],console.warn("Expected array but got object for uploaded files:",H)):H==null?(K=[],console.warn("Received null/undefined for uploaded files, using empty array")):(K=[],console.warn("Unexpected data type for uploaded files:",typeof H,H)),Ce(K)}else console.warn("Failed to fetch uploaded files, status:",B.status),Ce([])}catch(B){console.error("Failed to fetch uploaded files:",B),Ce([])}},uo=()=>{const v={id:Date.now(),code:"",output:"",isRunning:!1,hasExecuted:!1};re([...P,v])},Xi=(v,B)=>{re(P.map(H=>H.id===v?{...H,code:B}:H))},Ke=async()=>{if(P.length!==0){re(P.map(v=>({...v,isRunning:!0,output:""})));for(let v=0;v<P.length;v++){const B=P[v];if(B.code.trim())try{const H=P.slice(0,v).filter(de=>de.hasExecuted);let K="",ne={};const oe=ks(U);U==="scala"?ne[oe]=B.code:(K=H.map(de=>de.code).join(`
`)+`
`+B.code,ne[oe]=K);const we=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:x?.ID||"jupyter-cell",language:U,files:ne})})).json();let ae="";we.result?ae=we.result:we.verdict==="Accepted"?ae="Cell executed successfully":we.error?ae=`Error: ${we.error}`:we.tests&&we.tests.length>0?ae=`${we.tests[0]?.message||"Execution failed"}`:ae="Cell executed",re(de=>de.map(ue=>ue.id===B.id?{...ue,isRunning:!1,output:ae,hasExecuted:!0}:ue)),await new Promise(de=>setTimeout(de,100))}catch(H){re(K=>K.map(ne=>ne.id===B.id?{...ne,isRunning:!1,output:`Error: ${H.message}`}:ne))}}}},Vs=async v=>{const B=P.find(H=>H.id===v);if(B){re(P.map(H=>H.id===v?{...H,isRunning:!0,output:""}:H));try{const H=P.findIndex(ue=>ue.id===v),K=P.slice(0,H).filter(ue=>ue.hasExecuted);let ne="",oe={};const Se=ks(U);U==="scala"?oe[Se]=B.code:(ne=K.map(ue=>ue.code).join(`
`)+`
`+B.code,oe[Se]=ne);const ae=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:x?.ID||"jupyter-cell",language:U,files:oe})})).json();let de="";ae.result?de=ae.result:ae.verdict==="Accepted"?de="Cell executed successfully":ae.error?de=`Error: ${ae.error}`:ae.tests&&ae.tests.length>0?de=`${ae.tests[0]?.message||"Execution failed"}`:de="Cell executed",re(P.map(ue=>ue.id===v?{...ue,isRunning:!1,output:de,hasExecuted:!0}:ue))}catch(H){re(P.map(K=>K.id===v?{...K,isRunning:!1,output:`Error: ${H.message}`}:K))}}},qs=v=>{P.length>1&&re(P.filter(B=>B.id!==v))},Qi=v=>{re(P.map(B=>B.id===v?{...B,code:"",output:"",hasExecuted:!1}:B))};fe.useEffect(()=>{(()=>{const B=window.location.hash;if(B.startsWith("#problem=")){const H=B.substring(1),K=new URLSearchParams(H),ne=decodeURIComponent(K.get("problem")||"");K.get("view");const oe=()=>{if(O.length>0){const Se=O.find(we=>(we.ID||we.id)===ne);Se&&(ee(Se),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]))}else setTimeout(oe,100)};oe()}else window.history.state||window.history.replaceState({page:"home"},"","/"),ee(null),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1}])})()},[O]),fe.useEffect(()=>{const v=async(B=0)=>{try{const H=await fetch("/api/problems");if(!H.ok)throw new Error("Failed to fetch problems");const K=await H.json();W(K),_(null)}catch(H){console.error("Error fetching problems:",H),G(!1),B<3?setTimeout(()=>v(B+1),1e3*(B+1)):_("Failed to load problems. Please check if the backend is running.")}finally{s(!1)}};v()},[]),fe.useEffect(()=>{const v=B=>{if(!(B.target.tagName==="INPUT"||B.target.tagName==="TEXTAREA"||B.target.contentEditable==="true")){if(B.key==="F5"){B.preventDefault(),x&&u.trim()&&!S&&Gr();return}if((B.ctrlKey||B.metaKey)&&B.shiftKey&&B.key==="Enter"){B.preventDefault(),x&&u.trim()&&!A&&Si();return}if(B.key==="Escape"){he?ke(!1):x&&ee(null);return}if((B.ctrlKey||B.metaKey)&&B.shiftKey&&B.key==="L"){B.preventDefault(),gi(1);return}if((B.ctrlKey||B.metaKey)&&B.shiftKey&&B.key==="J"){B.preventDefault(),gi(-1);return}if(x&&(x.IsMultiPart||x.isMultiPart)){const H=x.Parts||x.parts||[];if(H.length>0){if((B.ctrlKey||B.metaKey)&&B.key==="ArrowRight"){B.preventDefault();const K=H.length;J<K&&ve(J+1);return}if((B.ctrlKey||B.metaKey)&&B.key==="ArrowLeft"){B.preventDefault(),J>0&&ve(J-1);return}}}if((B.ctrlKey||B.metaKey)&&B.shiftKey&&B.key==="D"){B.preventDefault(),Ns();return}if((B.ctrlKey||B.metaKey)&&B.shiftKey&&B.key==="?"){B.preventDefault(),Ws();return}if((B.ctrlKey||B.metaKey)&&B.key>="1"&&B.key<="9"){B.preventDefault();const H=parseInt(B.key)-1;if(H<or.length){const K=or[H];c(K);const ne=x&&(x.IsMultiPart||x.isMultiPart),oe=x&&(x.Parts||x.parts||[]);if(ne&&oe.length>0)if(J===0)x.Stub&&x.Stub[K]?p(y[0]||x.Stub[K]):p(y[0]||Nt(K));else{const Se=oe[J-1],we=Se.stub||Se.Stub||{};we[K]?p(y[J]||we[K]):p(y[J]||Nt(K))}else x&&x.Stub&&x.Stub[K]?p(x.Stub[K]):p(Nt(K))}return}}};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[x,u,S,A,U,he,k,J]),fe.useEffect(()=>{if(!x){ve(0),h({});return}(async()=>{f(!0),_(null);try{const B=await fetch(`/api/problem/${encodeURIComponent(x.ID)}`);if(!B.ok)throw B.status===404?new Error("Problem not found"):new Error("Failed to fetch problem details");const H=await B.json();if(!H||!H.ID)throw new Error("Invalid problem data");ve(0),h({});const K=H.Languages&&H.Languages[0]?H.Languages[0]:"python";c(K);let ne="";H.Stub&&H.Stub[K]?ne=H.Stub[K]:ne=Nt(K),p(ne),qr(x.ID),_(null)}catch(B){console.error("Error fetching problem details:",B),_(`Failed to load problem details: ${B.message}`)}finally{f(!1)}})()},[x]),fe.useEffect(()=>{if(!x)return;const v=x.IsMultiPart||x.isMultiPart,B=x.Parts||x.parts||[];if(v&&B.length>0)if(J===0){let H="";x.Stub&&x.Stub[U]?H=x.Stub[U]:H=Nt(U),p(y[0]||H)}else{const H=B[J-1],K=H.stub||H.Stub||{};let ne="";K[U]?ne=K[U]:ne=Nt(U),p(y[J]||ne)}},[J,U,x]);const Si=async()=>{if(x){se(!0),w(null),_(null);try{let v={};if(be){const Se=P.filter(ae=>ae.hasExecuted&&ae.code.trim()).map(ae=>ae.code).join(`
`),we=ks(U);v[we]=Se}else{const oe=ks(U);v[oe]=u}const H=x.IsMultiPart||x.isMultiPart?J:0,ne=await(await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ProblemID:x.ID||x.id,Language:U,Files:v,PartNumber:H})})).json();w(ne),ne.verdict==="Accepted"?alert("Code submitted successfully!"):alert("Submission completed. Check the results for details.")}catch(v){console.error("Submit failed:",v),_("Submission failed: "+v.message)}finally{se(!1)}}},Gr=async()=>{if(x){C(!0),w(null),_(null);try{const v={},B=ks(U);v[B]=u,console.log("Running code:",{language:U,files:v});const H=await fetch("/api/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:U,files:v,input:""})});if(console.log("Response status:",H.status),console.log("Response ok:",H.ok),!H.ok){let oe="Code execution failed";const we=await H.clone().text();console.error("HTTP Error Response:",H.status,we);try{const ae=JSON.parse(we);console.error("Parsed error data:",ae),ae.error?oe=ae.error:ae.message?oe=ae.message:oe=we||`HTTP ${H.status} error`}catch{oe=we||`HTTP ${H.status}: ${H.statusText}`}w({result:"",error:oe,compile_log:""}),_(null);return}const K=await H.json();if(console.log("Response data:",K),console.log("result.result:",K.result),console.log("result.error:",K.error),console.log("result type:",typeof K.result),console.log("result length:",K.result?K.result.length:0),!K||typeof K!="object"){w({result:"",error:"Invalid response from server",compile_log:""}),_(null);return}const ne={result:K.result||"",error:K.error||"",compile_log:""};console.log("Setting result:",ne),w(ne),_(null)}catch(v){console.error("Error running code:",v);const B=v.message.includes("fetch")||v.message.includes("network")?"Network error. Please check your connection and try again.":"Code execution failed. Please check your code and try again.";w({result:"",error:B,compile_log:""}),_(null)}finally{C(!1)}}},Gs=()=>{ee(null),p(""),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),q(!1),Y(!1),window.history.pushState({},"",window.location.pathname),window.scrollTo({top:0,behavior:"smooth"})};return T.jsxs("div",{style:{minHeight:"100vh",backgroundColor:M.background,color:M.text,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[T.jsxs("header",{style:{height:"56px",backgroundColor:M.background,borderBottom:`1px solid ${M.border}`,padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:1e3,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[T.jsx(Uf,{theme:M,onClick:Gs}),T.jsxs("button",{onClick:()=>te(!0),style:{backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:v=>v.target.style.backgroundColor=M.accent,onMouseLeave:v=>v.target.style.backgroundColor=M.primary,children:[T.jsx("span",{style:{marginRight:"6px"},children:"+"}),"Create Problem"]}),T.jsx("button",{onClick:()=>He(!0),style:{backgroundColor:M.accent,color:"#FFFFFF",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:"AI Agent"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsxs("span",{style:{fontSize:"12px",color:M.textSecondary},children:[T.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:z?M.success:M.error,marginRight:"6px"}}),z?"Connected":"Disconnected"]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx("button",{onClick:()=>window.history.back(),style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"4px",padding:"6px 10px",color:M.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Go back",children:" Back"}),T.jsx("button",{onClick:()=>window.history.forward(),style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"4px",padding:"6px 10px",color:M.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Go forward",children:"Forward "}),T.jsxs("button",{onClick:()=>window.location.reload(),style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"4px",padding:"6px 10px",color:M.text,cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center"},title:"Refresh page",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Refresh"]})]}),T.jsx("button",{onClick:Ns,style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"6px",padding:"8px 12px",color:M.text,cursor:"pointer",fontSize:"12px"},children:k?"Light Mode":"Dark Mode"})]})]}),j&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:T.jsxs("div",{style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[T.jsx("h2",{style:{margin:0,color:M.text,fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px",marginBottom:"24px"},children:"Create New Problem"}),T.jsx("button",{onClick:()=>te(!1),style:{backgroundColor:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:M.textSecondary},children:""})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",minHeight:"200px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Problem Title"}),T.jsx("input",{type:"text",value:X.title,onChange:v=>le({...X,title:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"Enter problem title"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Problem Statement"}),T.jsx("textarea",{value:X.statement,onChange:v=>le({...X,statement:v.target.value}),style:{width:"100%",height:"150px",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",resize:"vertical",transition:"border-color 0.2s ease",fontFamily:"inherit",lineHeight:"1.6"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"Describe the problem"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Question Type"}),T.jsxs("select",{value:X.type,onChange:v=>le({...X,type:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:[T.jsx("option",{value:"coding",children:"Coding Question"}),T.jsx("option",{value:"system_design",children:"System Design Question"})]})]}),X.type==="system_design"&&T.jsx("div",{style:{padding:"16px",backgroundColor:M.secondary,borderRadius:"8px",border:`1px solid ${M.border}`},children:T.jsxs("p",{style:{margin:0,color:M.textSecondary,fontSize:"14px",lineHeight:"1.6"},children:[" ",T.jsx("strong",{children:"Note:"})," After creating this system design question, you'll be able to draw your architecture diagram in the main workspace using the Excalidraw canvas."]})}),X.type==="coding"&&T.jsxs(T.Fragment,{children:[T.jsx("div",{children:T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",color:M.text,fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",checked:X.isMultiPart,onChange:v=>{const B=v.target.checked;le({...X,isMultiPart:B,parts:B&&X.parts.length===0?[{partNumber:1,statement:"",languages:X.languages,stub:X.stub}]:X.parts})},style:{cursor:"pointer"}}),"Multi-part Question (with follow-ups)"]})}),X.isMultiPart&&T.jsxs("div",{style:{padding:"16px",backgroundColor:M.secondary,borderRadius:"8px",border:`1px solid ${M.border}`,marginBottom:"16px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[T.jsxs("label",{style:{color:M.text,fontSize:"14px",fontWeight:"600"},children:["Parts (",X.parts.length,")"]}),T.jsx("button",{onClick:()=>{const v=X.parts.length+1;le({...X,parts:[...X.parts,{partNumber:v,statement:"",languages:X.languages,stub:{}}]})},style:{backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",cursor:"pointer"},children:"+ Add Part"})]}),X.parts.map((v,B)=>T.jsxs("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:M.background,borderRadius:"6px",border:`1px solid ${M.border}`},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[T.jsxs("label",{style:{color:M.text,fontSize:"13px",fontWeight:"600"},children:["Part ",v.partNumber]}),X.parts.length>1&&T.jsx("button",{onClick:()=>{const H=X.parts.filter((K,ne)=>ne!==B).map((K,ne)=>({...K,partNumber:ne+1}));le({...X,parts:H})},style:{backgroundColor:"transparent",border:"none",color:M.error||"#ff4444",cursor:"pointer",fontSize:"12px"},children:"Remove"})]}),T.jsx("textarea",{value:v.statement,onChange:H=>{const K=[...X.parts];K[B].statement=H.target.value,le({...X,parts:K})},placeholder:`Part ${v.partNumber} statement (builds on previous parts)...`,style:{width:"100%",minHeight:"80px",padding:"8px",border:`1px solid ${M.border}`,borderRadius:"4px",backgroundColor:M.background,color:M.text,fontSize:"13px",resize:"vertical",fontFamily:"inherit"}})]},B))]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"4px",color:M.text,fontSize:"14px",fontWeight:"500"},children:"Supported Languages"}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:or.map(v=>T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:X.languages.includes(v)?M.primary:M.secondary,color:X.languages.includes(v)?"#FFFFFF":M.text,padding:"6px 12px",borderRadius:"20px",fontSize:"12px",cursor:"pointer",border:`1px solid ${M.border}`},children:[T.jsx("input",{type:"checkbox",checked:X.languages.includes(v),onChange:B=>{const H=Array.from(document.querySelectorAll('input[name="languages"]:checked'),K=>K.value);le({...X,languages:H})},name:"languages",value:v,style:{display:"none"}}),v]},v))})]})]}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[T.jsx("button",{onClick:()=>te(!1),style:{flex:1,backgroundColor:M.secondary,color:M.text,border:`1px solid ${M.border}`,borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer"},children:"Cancel"}),T.jsx("button",{onClick:async()=>{if(!X.title.trim()){alert("Please fill in title");return}if(!X.isMultiPart&&!X.statement.trim()){alert("Please fill in statement");return}if(X.isMultiPart){if(X.parts.length===0){alert("Please add at least one part");return}for(let v=0;v<X.parts.length;v++)if(!X.parts[v].statement.trim()){alert(`Please fill in statement for Part ${v+1}`);return}}try{const v={...X,IsMultiPart:X.isMultiPart,Parts:X.isMultiPart?X.parts.map((ne,oe)=>({partNumber:oe+1,statement:ne.statement,languages:ne.languages||X.languages,stub:ne.stub||{}})):[]},B=await fetch("/api/problems/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!B.ok)throw new Error("Failed to create problem");const H=await B.json();console.log("Problem created:",H),(async()=>{try{const ne=await fetch("/api/problems");if(!ne.ok)throw new Error("Failed to fetch problems");const oe=await ne.json();W(oe)}catch(ne){console.error("Error fetching problems:",ne)}})(),te(!1),le({title:"",statement:"",languages:["python"],stub:{python:""},type:"coding",drawingData:"",isMultiPart:!1,parts:[]})}catch(v){console.error("Error creating problem:",v),alert("Failed to create problem: "+v.message)}},style:{flex:1,backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:"Create Problem"})]})]})]})}),Ee&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:T.jsxs("div",{style:{backgroundColor:M.background,border:`1px solid ${M.border}`,borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.12)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[T.jsx("h2",{style:{margin:0,color:M.text,fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px"},children:"AI Question Generator"}),T.jsx("button",{onClick:()=>He(!1),style:{backgroundColor:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:M.textSecondary},children:""})]}),T.jsx("div",{style:{marginBottom:"20px"},children:T.jsx("p",{style:{margin:"0 0 16px 0",color:M.textSecondary,fontSize:"14px",lineHeight:"1.5"},children:"Generate custom coding interview questions tailored to specific companies, roles, and experience levels."})}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"6px",color:M.text,fontSize:"14px",fontWeight:"500"},children:"Company Name *"}),T.jsx("input",{type:"text",value:me.company,onChange:v=>Ne({...me,company:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"e.g., Google, Microsoft, Amazon"})]}),T.jsxs("div",{children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[T.jsx("label",{style:{margin:0,color:M.text,fontSize:"14px",fontWeight:"600"},children:"Role *"}),T.jsx("button",{onClick:()=>{Oe(!Ve),Ne({...me,role:"",customRole:""})},style:{backgroundColor:Ve?M.primary:M.surface,color:Ve?"#FFFFFF":M.text,border:`1px solid ${M.border}`,borderRadius:"6px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},children:Ve?"Use Preset Roles":"Custom Role"})]}),Ve?T.jsx("input",{type:"text",value:me.customRole,onChange:v=>Ne({...me,customRole:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"e.g., Blockchain Engineer, AI Researcher"}):T.jsxs("select",{value:me.role,onChange:v=>Ne({...me,role:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:[T.jsx("option",{value:"",children:"Select a role"}),io.map(v=>T.jsx("option",{value:v,children:v},v))]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Experience Level"}),T.jsx("select",{value:me.level,onChange:v=>Ne({...me,level:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:js.map(v=>T.jsx("option",{value:v.value,children:v.label},v.value))})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Number of Questions"}),T.jsx("input",{type:"number",min:"1",max:"10",value:me.count,onChange:v=>{const B=v.target.value;if(B==="")Ne({...me,count:""});else{const H=parseInt(B);isNaN(H)||Ne({...me,count:Math.max(1,Math.min(10,H))})}},style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>{v.target.style.borderColor=M.border,(v.target.value===""||isNaN(parseInt(v.target.value)))&&Ne({...me,count:3})}})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Question Type"}),T.jsxs("select",{value:me.questionType,onChange:v=>Ne({...me,questionType:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:[T.jsx("option",{value:"coding",children:"Coding Questions"}),T.jsx("option",{value:"system_design",children:"System Design Questions"})]}),T.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:M.textSecondary,fontStyle:"italic"},children:me.questionType==="system_design"?"Generate system design interview questions with architecture diagrams":"Generate coding interview questions with programming challenges"})]}),me.questionType==="coding"&&T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Default Programming Language"}),T.jsxs("select",{value:me.defaultLanguage,onChange:v=>Ne({...me,defaultLanguage:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"javascript",children:"JavaScript"}),T.jsx("option",{value:"java",children:"Java"}),T.jsx("option",{value:"cpp",children:"C++"}),T.jsx("option",{value:"go",children:"Go"}),T.jsx("option",{value:"rust",children:"Rust"}),T.jsx("option",{value:"c",children:"C"}),T.jsx("option",{value:"typescript",children:"TypeScript"}),T.jsx("option",{value:"ruby",children:"Ruby"}),T.jsx("option",{value:"swift",children:"Swift"})]}),T.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:M.textSecondary,fontStyle:"italic"},children:"Generated questions will prioritize this language"})]}),me.questionType==="coding"&&T.jsxs("div",{children:[T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",checked:me.includeMultiPart,onChange:v=>Ne({...me,includeMultiPart:v.target.checked}),style:{cursor:"pointer"}}),"Include Multi-part Questions"]}),T.jsx("div",{style:{marginTop:"4px",marginLeft:"24px",fontSize:"12px",color:M.textSecondary,fontStyle:"italic"},children:"Some generated questions will have follow-up parts that build on the initial problem"})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"AI Provider"}),T.jsxs("select",{value:me.provider,onChange:v=>Ne({...me,provider:v.target.value,apiKey:""}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",cursor:"pointer"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,children:[T.jsx("option",{value:"gemini",children:"Google Gemini"}),T.jsx("option",{value:"openai",children:"OpenAI (GPT-4o-mini)"}),T.jsx("option",{value:"claude",children:"Anthropic Claude"})]})]}),T.jsxs("div",{children:[T.jsxs("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:["API Key ",me.provider==="gemini"?"(Optional - uses env var if not provided)":"(Required)"]}),T.jsx("input",{type:"password",value:me.apiKey,onChange:v=>Ne({...me,apiKey:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:`Enter your ${me.provider==="gemini"?"Gemini":me.provider==="openai"?"OpenAI":"Claude"} API key...`}),T.jsxs("p",{style:{margin:"8px 0 0 0",color:M.textSecondary,fontSize:"12px",lineHeight:"1.4"},children:[me.provider==="gemini"&&"Get your key from ",me.provider==="openai"&&"Get your key from ",me.provider==="claude"&&"Get your key from ",me.provider==="gemini"&&T.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:M.primary},children:"Google AI Studio"}),me.provider==="openai"&&T.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",style:{color:M.primary},children:"OpenAI Platform"}),me.provider==="claude"&&T.jsx("a",{href:"https://console.anthropic.com/",target:"_blank",rel:"noopener noreferrer",style:{color:M.primary},children:"Anthropic Console"})]})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Job Description (Optional)"}),T.jsx("textarea",{value:me.jobDescription,onChange:v=>Ne({...me,jobDescription:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"Paste the job description here to generate more relevant questions..."})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Company Description (Optional)"}),T.jsx("textarea",{value:me.companyDescription,onChange:v=>Ne({...me,companyDescription:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"Add company information for better context (e.g., tech stack, company culture, etc.)..."})]}),T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"8px",color:M.text,fontSize:"14px",fontWeight:"600"},children:"Interview Type / Description (Optional)"}),T.jsx("textarea",{value:me.interviewType,onChange:v=>Ne({...me,interviewType:v.target.value}),style:{width:"100%",padding:"12px 16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:M.background,color:M.text,fontSize:"14px",transition:"border-color 0.2s ease",minHeight:"100px",resize:"vertical",fontFamily:"inherit"},onFocus:v=>v.target.style.borderColor=M.primary,onBlur:v=>v.target.style.borderColor=M.border,placeholder:"Describe the interview type or format (e.g., 'Technical phone screen focusing on algorithms', 'On-site system design interview', 'Take-home assignment style', 'Live coding with pair programming', etc.)..."})]})]}),at&&T.jsxs("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:at.status==="success"?`${M.success}15`:`${M.error}15`,border:`1px solid ${at.status==="success"?M.success:M.error}`,borderRadius:"6px"},children:[T.jsx("p",{style:{margin:0,color:at.status==="success"?M.success:M.error,fontSize:"14px",fontWeight:"500"},children:at.message}),at.status==="success"&&at.problems&&T.jsxs("div",{style:{marginTop:"8px"},children:[T.jsx("p",{style:{margin:"0 0 8px 0",color:M.text,fontSize:"12px"},children:"Generated problems:"}),T.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:M.textSecondary,fontSize:"12px"},children:at.problems.map((v,B)=>T.jsx("li",{children:v.Title||v.title},B))})]})]}),T.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[T.jsx("button",{onClick:()=>He(!1),style:{flex:1,backgroundColor:M.secondary,color:M.text,border:`1px solid ${M.border}`,borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),T.jsxs("button",{onClick:()=>{Ne({company:"",role:"",level:"mid",count:3}),Rt(null)},style:{backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Reset"]}),T.jsx("button",{onClick:vi,disabled:Et||!me.company||(Ve?!me.customRole:!me.role),style:{flex:1,backgroundColor:Et||!me.company||(Ve?!me.customRole:!me.role)?M.border:M.accent,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"10px",fontSize:"14px",cursor:Et||!me.company||(Ve?!me.customRole:!me.role)?"not-allowed":"pointer",fontWeight:"500",opacity:Et||!me.company||(Ve?!me.customRole:!me.role)?.6:1},children:Et?"Generating...":T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"6px"},children:""}),"Generate Questions"]})})]})]})}),T.jsxs("div",{style:{display:"flex",height:"calc(100vh - 56px)",overflow:"hidden",position:"relative"},children:[!wt&&T.jsxs(T.Fragment,{children:[T.jsx("aside",{style:{width:`${ir}px`,backgroundColor:M.background,borderRight:`1px solid ${M.border}`,padding:"20px",overflowY:"auto",overflowX:"hidden",boxShadow:"2px 0 12px rgba(0,0,0,0.08)",transition:"width 0.2s ease",position:"relative",minWidth:"200px",maxWidth:"600px",height:"100%"},children:T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",position:"sticky",top:"-20px",zIndex:2,backgroundColor:M.background,paddingTop:"4px",paddingBottom:"4px"},children:[T.jsx("h2",{style:{margin:0,color:M.text,fontSize:"18px",fontWeight:"700",letterSpacing:"-0.4px"},children:"Problems"}),T.jsx("button",{onClick:Qe,style:{backgroundColor:"transparent",border:"none",color:M.textSecondary,cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"16px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>{v.target.style.backgroundColor=M.surface,v.target.style.color=M.text},onMouseLeave:v=>{v.target.style.backgroundColor="transparent",v.target.style.color=M.textSecondary},title:"Collapse sidebar",children:""}),T.jsxs("div",{style:{display:"flex",gap:"8px"},children:[T.jsxs("button",{onClick:async()=>{if(window.confirm("This will remove ALL questions, including default and sample questions. Are you sure?")){s(!0);try{const v=await fetch("/api/problems/clear",{method:"POST",headers:{"Content-Type":"application/json"}});if(!v.ok){const K=await v.text();throw new Error(`HTTP ${v.status}: ${K||"Failed to clear all problems"}`)}const B=await v.json();alert(B.message||`Cleared ${B.count||0} problems`);const H=await fetch("/api/problems");if(H.ok){const K=await H.json();W(K||[]),ee(null)}}catch(v){console.error("Error clearing all problems:",v),alert("Failed to clear all problems: "+(v.message||"Unknown error"))}finally{s(!1)}}},style:{backgroundColor:M.error,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Clear All"]}),T.jsxs("button",{onClick:async()=>{if(window.confirm("This will remove all AI-generated problems. Are you sure?")){s(!0);try{const v=await fetch("/api/agent/clean",{method:"POST",headers:{"Content-Type":"application/json"}});if(!v.ok)throw new Error("Failed to clean AI problems");const B=await v.json();alert(B.message);const H=await fetch("/api/problems");if(H.ok){const K=await H.json();W(K||[])}}catch(v){console.error("Error cleaning AI problems:",v),alert("Failed to clean AI problems: "+v.message)}finally{s(!1)}}},style:{backgroundColor:M.error,color:"#FFFFFF",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Clean AI"]})]})]}),l?T.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[T.jsx(Xl,{theme:M}),T.jsx("p",{style:{margin:"12px 0 0 0",color:M.textSecondary},children:"Loading problems..."})]}):T.jsx("div",{children:O.map(v=>{const B=v.ID||v.id,H=v.Title||v.title,K=v.Languages||v.languages||[],ne=v.Type||v.type||"coding";return T.jsxs("div",{style:{marginBottom:"10px",padding:"16px",border:`1px solid ${M.border}`,borderRadius:"8px",backgroundColor:x&&(x.ID||x.id)===B?M.primary:M.background,color:x&&(x.ID||x.id)===B?"#FFFFFF":M.text,cursor:"pointer",transition:"all 0.2s ease",boxShadow:x&&(x.ID||x.id)===B?"0 4px 12px rgba(0,0,0,0.15)":"0 1px 2px rgba(0,0,0,0.05)",borderLeft:x&&(x.ID||x.id)===B?`4px solid ${M.accent}`:"4px solid transparent"},onMouseEnter:oe=>{(!x||(x.ID||x.id)!==B)&&(oe.currentTarget.style.backgroundColor=M.surface,oe.currentTarget.style.transform="translateX(2px)",oe.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)")},onMouseLeave:oe=>{(!x||(x.ID||x.id)!==B)&&(oe.currentTarget.style.backgroundColor=M.background,oe.currentTarget.style.transform="translateX(0)",oe.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)")},onClick:()=>{ee(v),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),window.history.pushState({problemId:B},"",`#problem=${encodeURIComponent(B)}`)},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[T.jsx("div",{style:{fontWeight:"600",fontSize:"15px",lineHeight:"1.4",flex:1},children:H}),ne==="system_design"&&T.jsx("span",{style:{backgroundColor:x&&(x.ID||x.id)===B?"rgba(255,255,255,0.2)":M.primary,color:(x&&(x.ID||x.id)===B,"#FFFFFF"),padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"System Design"}),T.jsx("button",{onClick:oe=>{oe.stopPropagation(),window.confirm(`Are you sure you want to delete "${H}"?`)&&I(B)},style:{backgroundColor:"transparent",border:"none",color:x&&(x.ID||x.id)===B?"rgba(255,255,255,0.7)":M.error,cursor:"pointer",fontSize:"16px",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:oe=>{oe.target.style.backgroundColor=x&&(x.ID||x.id)===B?"rgba(255,255,255,0.1)":"rgba(239, 68, 68, 0.1)"},onMouseLeave:oe=>{oe.target.style.backgroundColor="transparent"},title:"Delete problem",children:""})]}),T.jsx("div",{style:{fontSize:"12px",opacity:x&&(x.ID||x.id)===B?.9:.6,marginTop:"6px",display:"flex",alignItems:"center",gap:"8px"},children:T.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",backgroundColor:x&&(x.ID||x.id)===B?"rgba(255,255,255,0.2)":M.surface,borderRadius:"12px",fontSize:"11px"},children:[K.length||0," ",K.length===1?"language":"languages"]})})]},B)})})]})}),T.jsx("div",{onMouseDown:v=>{v.preventDefault(),sr(!0)},style:{width:"4px",backgroundColor:M.border,cursor:"col-resize",position:"relative",flexShrink:0,transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=M.primary,onMouseLeave:v=>{ct||(v.target.style.backgroundColor=M.border)}})]}),T.jsxs("main",{style:{padding:"0",overflow:"hidden",backgroundColor:M.background,flex:1,display:"flex",flexDirection:"column",width:"100%",minHeight:0},children:[b&&T.jsxs("div",{style:{padding:"12px 16px",backgroundColor:M.surface,border:`1px solid ${M.error}`,borderRadius:"8px",marginBottom:"20px",color:M.error},children:[T.jsx("strong",{children:"Error:"})," ",b]}),o?T.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[T.jsx(Xl,{theme:M}),T.jsx("p",{style:{margin:"12px 0 0 0",color:M.textSecondary},children:"Loading problem..."})]}):x?T.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,minHeight:0,overflow:"hidden"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",backgroundColor:M.background,borderBottom:`1px solid ${M.border}`,flexShrink:0},children:[T.jsx("h2",{style:{margin:"0",color:M.text,fontSize:"18px",fontWeight:"600",letterSpacing:"-0.3px",lineHeight:"1.4"},children:x.Title}),T.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[T.jsx("button",{onClick:()=>q(!be),style:{backgroundColor:be?M.primary:M.surface,color:be?"#FFFFFF":M.text,border:`1px solid ${M.border}`,borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:"pointer"},children:be?T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"IDE Mode"]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{marginRight:"4px"},children:""}),"Jupyter Mode"]})}),T.jsx("button",{onClick:()=>{ee(null),w(null),_(null),re([{id:1,code:"",output:"",isRunning:!1,hasExecuted:!1}]),window.history.pushState({page:"home"},"","/")},style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"4px",padding:"4px 10px",color:M.text,cursor:"pointer",fontSize:"11px"},children:" Back"})]})]}),T.jsxs("div",{"data-panes-container":!0,style:{display:"flex",flex:1,overflow:"hidden",minHeight:0},children:[T.jsxs("div",{style:{width:`${Ue}%`,display:"flex",flexDirection:"column",borderRight:`1px solid ${M.border}`,backgroundColor:M.background,overflow:"hidden",minWidth:"200px",maxWidth:"75%"},children:[T.jsxs("div",{ref:ci,style:{padding:"8px 16px",paddingLeft:wt?"32px":"16px",borderBottom:`1px solid ${M.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,position:"relative"},children:[wt&&T.jsx("button",{onClick:Qe,style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderTopRightRadius:"6px",borderBottomRightRadius:"6px",padding:"4px 6px",cursor:"pointer",zIndex:10,boxShadow:"2px 0 8px rgba(0,0,0,0.15)",transition:"all 0.2s ease",fontSize:"11px",lineHeight:1,height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:v=>v.target.style.opacity="0.9",onMouseLeave:v=>v.target.style.opacity="1",children:""}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[T.jsx("h4",{style:{margin:0,color:M.text,fontSize:"13px",fontWeight:"600"},children:"Problem Statement"}),(x.IsMultiPart||x.isMultiPart)&&(x.Parts||x.parts)&&(x.Parts||x.parts).length>0&&(()=>{const v=x.Parts||x.parts||[],B=v.length+1,H=v.length;return T.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[T.jsx("button",{onClick:()=>{J>0&&ve(J-1)},disabled:J===0,style:{padding:"4px 6px",fontSize:"11px",backgroundColor:"transparent",color:J===0?M.textSecondary:M.text,border:`1px solid ${M.border}`,borderRadius:"4px",cursor:J===0?"not-allowed":"pointer",opacity:J===0?.5:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px"},title:"Previous Part (Ctrl/Cmd + )",children:""}),T.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[T.jsx("button",{onClick:()=>ve(0),style:{padding:"4px 8px",fontSize:"11px",backgroundColor:J===0?M.primary:M.surface,color:J===0?"#FFFFFF":M.text,border:`1px solid ${J===0?M.primary:M.border}`,borderRadius:"4px",cursor:"pointer",fontWeight:J===0?"600":"400",transition:"all 0.2s ease"},children:"Part 1"}),v.map((K,ne)=>T.jsxs("button",{onClick:()=>ve(ne+1),style:{padding:"4px 8px",fontSize:"11px",backgroundColor:J===ne+1?M.primary:M.surface,color:J===ne+1?"#FFFFFF":M.text,border:`1px solid ${J===ne+1?M.primary:M.border}`,borderRadius:"4px",cursor:"pointer",fontWeight:J===ne+1?"600":"400",transition:"all 0.2s ease"},children:["Part ",ne+2]},ne))]}),T.jsx("button",{onClick:()=>{J<H&&ve(J+1)},disabled:J>=H,style:{padding:"4px 6px",fontSize:"11px",backgroundColor:"transparent",color:J>=H?M.textSecondary:M.text,border:`1px solid ${M.border}`,borderRadius:"4px",cursor:J>=H?"not-allowed":"pointer",opacity:J>=H?.5:1,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"24px"},title:"Next Part (Ctrl/Cmd + )",children:""}),T.jsxs("span",{style:{fontSize:"11px",color:M.textSecondary,marginLeft:"4px",fontWeight:"500"},children:["(",J+1,"/",B,")"]})]})})()]})]}),T.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px",fontSize:"14px",lineHeight:"1.6",color:M.text},children:T.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.6",color:M.text,margin:0},children:(()=>{const v=x.IsMultiPart||x.isMultiPart,B=x.Parts||x.parts||[];if(v&&B.length>0){if(J===0)return x.Statement;{const H=B[J-1];return H.statement||H.Statement||""}}return x.Statement})()})})]}),T.jsx("div",{onMouseDown:v=>{v.preventDefault(),Os(!0)},style:{width:"4px",backgroundColor:M.border,cursor:"col-resize",position:"relative",flexShrink:0,transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=M.primary,onMouseLeave:v=>{pi||(v.target.style.backgroundColor=M.border)}}),x&&(x.Type==="system_design"||x.type==="system_design")?T.jsxs("div",{style:{width:pe?"100vw":`${100-Ue}%`,height:pe?"100vh":"auto",position:pe?"fixed":"relative",top:pe?0:"auto",left:pe?0:"auto",zIndex:pe?9999:"auto",display:"flex",flexDirection:"column",backgroundColor:M.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${M.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,backgroundColor:M.surface},children:[T.jsx("h4",{style:{margin:0,color:M.text,fontSize:"14px",fontWeight:"600"},children:"System Design Canvas"}),T.jsx("button",{onClick:()=>Y(!pe),style:{padding:"8px 16px",backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor=M.accent,onMouseLeave:v=>v.target.style.backgroundColor=M.primary,children:pe?" Exit Fullscreen":" Fullscreen"})]}),T.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:T.jsx(Kf,{theme:M,children:T.jsx(fe.Suspense,{fallback:T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:M.textSecondary,fontSize:"14px"},children:"Loading design canvas..."}),children:T.jsx($f,{onChange:E,initialData:(()=>{try{if(x.DrawingData){const v=JSON.parse(x.DrawingData);return v.appState&&!v.appState.collaborators&&(v.appState.collaborators=new Map),v}return{elements:[],appState:{collaborators:new Map},files:{}}}catch(v){return console.error("Failed to parse drawing data:",v),{elements:[],appState:{collaborators:new Map},files:{}}}})(),theme:k?"dark":"light"})})})})]}):be?T.jsxs("div",{style:{width:`${100-Ue}%`,display:"flex",flexDirection:"column",backgroundColor:M.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${M.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[T.jsx("h4",{style:{margin:0,color:M.text,fontSize:"14px",fontWeight:"600"},children:"Jupyter Notebook"}),T.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[T.jsxs("select",{value:U,onChange:v=>{const B=v.target.value;c(B);let H="";x&&x.Stub&&x.Stub[B]?H=x.Stub[B]:H=Nt(B),p(H)},style:{padding:"4px 8px",border:`1px solid ${M.border}`,borderRadius:"4px",backgroundColor:M.background,color:M.text,fontSize:"12px",fontWeight:"500",cursor:"pointer",minWidth:"100px",fontFamily:"inherit"},children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"scala",children:"Scala"}),T.jsx("option",{value:"javascript",children:"JavaScript"})]}),T.jsx("button",{onClick:Ke,disabled:S||P.length===0,style:{backgroundColor:S?M.secondary:M.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:S?"not-allowed":"pointer",fontWeight:"500"},children:S?"Running...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Run All"]})}),T.jsx("button",{onClick:Si,disabled:S||A||P.length===0,style:{backgroundColor:S||A?M.secondary:M.success,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:S||A?"not-allowed":"pointer",fontWeight:"500"},children:A?"Submitting...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Submit"]})})]})]}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px",backgroundColor:M.background},children:[P.map((v,B)=>T.jsxs("div",{style:{marginBottom:B<P.length-1?"12px":0,border:`1px solid ${M.border}`,borderRadius:"4px",overflow:"hidden"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:M.secondary,borderBottom:`1px solid ${M.border}`},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsxs("span",{style:{fontSize:"12px",color:M.textSecondary,fontWeight:"500"},children:["In [",B+1,"]:"]}),T.jsx("button",{onClick:()=>Vs(v.id),disabled:v.isRunning,style:{backgroundColor:v.isRunning?M.secondary:M.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:v.isRunning?"not-allowed":"pointer"},children:v.isRunning?"Running...":"Run"}),T.jsx("button",{onClick:()=>Qi(v.id),style:{backgroundColor:M.warning||"#f39c12",color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:"pointer"},children:"Clear"})]}),P.length>1&&T.jsx("button",{onClick:()=>qs(v.id),style:{backgroundColor:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:M.error},children:""})]}),T.jsxs("div",{style:{padding:"12px"},children:[T.jsx("textarea",{value:v.code,onChange:H=>Xi(v.id,H.target.value),onKeyDown:oo,style:{width:"100%",height:"80px",padding:"8px",border:`1px solid ${M.border}`,borderRadius:"4px",backgroundColor:M.surface,color:M.text,fontFamily:"monospace",fontSize:"13px",resize:"vertical",outline:"none"},placeholder:"Enter code here..."}),v.output&&T.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:M.background,border:`1px solid ${M.border}`,borderRadius:"4px"},children:[T.jsxs("div",{style:{fontSize:"12px",color:M.textSecondary,marginBottom:"4px",fontWeight:"500"},children:["Out [",B+1,"]:"]}),T.jsx("pre",{style:{margin:0,fontSize:"13px",color:M.text,whiteSpace:"pre-wrap"},children:v.output})]})]})]},v.id)),T.jsx("button",{onClick:uo,style:{backgroundColor:M.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",width:"100%",marginTop:"12px"},children:"+ Add Cell"})]})]}):T.jsxs("div",{style:{width:`${100-Ue}%`,display:"flex",flexDirection:"column",backgroundColor:M.background,overflow:"hidden",minWidth:"300px"},children:[T.jsxs("div",{style:{padding:"8px 16px",borderBottom:`1px solid ${M.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[T.jsx("h4",{style:{margin:0,color:M.text,fontSize:"13px",fontWeight:"600"},children:"Code Editor"}),T.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[T.jsxs("select",{value:U,onChange:v=>{const B=v.target.value;c(B);const H=x&&(x.IsMultiPart||x.isMultiPart),K=x&&(x.Parts||x.parts||[]);let ne="";if(H&&K.length>0)if(J===0)x.Stub&&x.Stub[B]?ne=y[0]||x.Stub[B]:ne=y[0]||Nt(B);else{const oe=K[J-1],Se=oe.stub||oe.Stub||{};Se[B]?ne=y[J]||Se[B]:ne=y[J]||Nt(B)}else x&&x.Stub&&x.Stub[B]?ne=x.Stub[B]:ne=Nt(B);p(ne)},style:{padding:"4px 8px",border:`1px solid ${M.border}`,borderRadius:"4px",backgroundColor:M.background,color:M.text,fontSize:"12px",fontWeight:"500",cursor:"pointer",minWidth:"100px",fontFamily:"inherit"},children:[T.jsx("option",{value:"python",children:"Python"}),T.jsx("option",{value:"cpp",children:"C++"}),T.jsx("option",{value:"c",children:"C"}),T.jsx("option",{value:"java",children:"Java"}),T.jsx("option",{value:"javascript",children:"JavaScript"}),T.jsx("option",{value:"typescript",children:"TypeScript"}),T.jsx("option",{value:"swift",children:"Swift"}),T.jsx("option",{value:"kotlin",children:"Kotlin"}),T.jsx("option",{value:"scala",children:"Scala"}),T.jsx("option",{value:"go",children:"Go"}),T.jsx("option",{value:"ruby",children:"Ruby"}),T.jsx("option",{value:"rust",children:"Rust"}),T.jsx("option",{value:"sql",children:"SQL"}),T.jsx("option",{value:"bash",children:"Bash"})]}),T.jsx("button",{onClick:Gr,disabled:S||A,style:{backgroundColor:S||A?M.secondary:M.primary,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:S||A?"not-allowed":"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},children:S?"Running...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Run"]})}),T.jsx("button",{onClick:Si,disabled:S||A,style:{backgroundColor:S||A?M.secondary:M.success,color:"#FFFFFF",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"11px",cursor:S||A?"not-allowed":"pointer",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},children:A?"Submitting...":T.jsxs(T.Fragment,{children:[T.jsx("span",{children:""}),"Submit"]})})]})]}),T.jsx("div",{"data-editor-container":!0,style:{position:"relative",flex:1,minHeight:0,overflow:"hidden",backgroundColor:M.codeBackground},children:T.jsx(Ff,{height:"100%",language:Xf(U),value:u,onChange:v=>lo(v||""),theme:k?"vs-dark":"light",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",wrappingIndent:"indent",fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Liberation Mono", "Courier New", monospace',lineHeight:24,padding:{top:16,bottom:16},scrollbar:{vertical:"auto",horizontal:"auto",useShadows:!1,verticalHasArrows:!1,horizontalHasArrows:!1},readOnly:!1,cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",smoothScrolling:!0,renderWhitespace:"selection",renderLineHighlight:"all",selectOnLineNumbers:!0,roundedSelection:!1,contextmenu:!0,mouseWheelZoom:!1,quickSuggestions:!0,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",tabCompletion:"on",wordBasedSuggestions:"matchingDocuments",formatOnPaste:!1,formatOnType:!1},onMount:(v,B)=>{v.addCommand(B.KeyMod.CtrlCmd|B.KeyCode.Enter,()=>{x&&u.trim()&&!S&&Gr()}),v.addCommand(B.KeyMod.CtrlCmd|B.KeyCode.KeyL,()=>{x&&qi()})}})}),Ur?T.jsxs("div",{style:{height:"40px",borderTop:`2px solid ${M.primary}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",backgroundColor:k?"#252526":"#161B22",cursor:"pointer",flexShrink:0,transition:"all 0.2s ease",position:"relative",zIndex:5,boxShadow:"0 -2px 8px rgba(0,0,0,0.1)"},onClick:zs,onMouseEnter:v=>{v.currentTarget.style.backgroundColor=k?"#2D2D30":"#1F2329",v.currentTarget.style.borderTopColor=M.accent},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=k?"#252526":"#161B22",v.currentTarget.style.borderTopColor=M.primary},title:"Click to expand console output",children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:k?"#CCCCCC":"#C9D1D9",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Output"}),T.jsx("span",{style:{fontSize:"11px",color:k?"#999":"#888",fontStyle:"italic",fontWeight:"normal"},children:"(Collapsed - Click to expand)"})]}),T.jsx("span",{style:{fontSize:"16px",color:M.primary,fontWeight:"bold",transition:"transform 0.2s ease"},children:""})]}):T.jsxs("div",{"data-console-container":!0,style:{height:`${Ui}px`,display:"flex",flexDirection:"column",backgroundColor:k?"#1E1E1E":"#0D1117",borderTop:`1px solid ${M.border}`,overflow:"hidden",flexShrink:0,position:"relative"},children:[T.jsx("div",{onMouseDown:v=>{v.preventDefault(),nr(!0)},style:{position:"absolute",top:0,left:0,right:0,height:"4px",cursor:"row-resize",backgroundColor:"transparent",zIndex:10},onMouseEnter:v=>{v.target.style.backgroundColor=M.primary,v.target.style.opacity="0.3"},onMouseLeave:v=>{_i||(v.target.style.backgroundColor="transparent",v.target.style.opacity="1")}}),T.jsxs("div",{style:{padding:"8px 16px",borderBottom:`1px solid ${M.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:k?"#252526":"#161B22",flexShrink:0},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[T.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:k?"#CCCCCC":"#C9D1D9",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Output"}),S&&T.jsxs("span",{style:{fontSize:"11px",color:M.primary,display:"flex",alignItems:"center",gap:"4px"},children:[T.jsx(Xl,{theme:M}),"Running..."]})]}),T.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m&&T.jsx("button",{onClick:()=>w(null),style:{backgroundColor:"transparent",color:k?"#CCCCCC":"#C9D1D9",border:"none",fontSize:"12px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:v=>v.target.style.backgroundColor="transparent",children:"Clear"}),T.jsx("button",{onClick:zs,style:{backgroundColor:"transparent",color:k?"#CCCCCC":"#C9D1D9",border:"none",fontSize:"12px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease"},onMouseEnter:v=>v.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:v=>v.target.style.backgroundColor="transparent",title:"Collapse console",children:""})]})]}),T.jsx("div",{style:{flex:1,overflow:"hidden",padding:"0"},children:T.jsx(qf,{output:m?m.result&&m.result.trim()!==""?m.result:m.error&&m.error.trim()!==""?`\x1B[31mError: ${m.error}\x1B[0m`:m.compile_log&&m.compile_log.trim()!==""?`\x1B[31m${m.compile_log}\x1B[0m`:"(No output)":null,theme:M,isDarkMode:k})})]})]})]})]}):T.jsx("div",{style:{textAlign:"center",padding:"40px"},children:T.jsx("p",{style:{color:M.textSecondary,fontSize:"16px"},children:"Select a problem from the sidebar to get started"})})]})]}),he&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:T.jsxs("div",{style:{backgroundColor:M.background,border:`1px solid ${M.border}`,borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:`1px solid ${M.border}`,paddingBottom:"12px"},children:[T.jsx("h2",{style:{margin:0,color:M.text,fontSize:"20px"},children:"Keyboard Shortcuts"}),T.jsx("button",{onClick:()=>ke(!1),style:{background:"none",border:"none",fontSize:"24px",color:M.textSecondary,cursor:"pointer",padding:"4px"},children:""})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[T.jsxs("div",{children:[T.jsx("h3",{style:{color:M.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Code Execution"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(vt,{keys:["Ctrl","Enter"],description:"Run code",theme:M}),T.jsx(vt,{keys:["F5"],description:"Run code",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","Enter"],description:"Submit code",theme:M})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:M.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Code Editing"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(vt,{keys:["Ctrl","/"],description:"Comment/Uncomment",theme:M}),T.jsx(vt,{keys:["Ctrl","D"],description:"Duplicate line",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","K"],description:"Delete line",theme:M}),T.jsx(vt,{keys:["Alt",""],description:"Move line up",theme:M}),T.jsx(vt,{keys:["Alt",""],description:"Move line down",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","F"],description:"Format code",theme:M}),T.jsx(vt,{keys:["Tab"],description:"Smart indentation / Tab completion",theme:M}),T.jsx(vt,{keys:["Shift","Tab"],description:"Remove indentation",theme:M})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:M.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Navigation"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(vt,{keys:["Esc"],description:"Back to problems",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","L"],description:"Next language",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","J"],description:"Previous language",theme:M})]})]}),T.jsxs("div",{children:[T.jsx("h3",{style:{color:M.text,margin:"0 0 12px 0",fontSize:"16px"},children:"Utilities"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[T.jsx(vt,{keys:["Ctrl","K"],description:"Clear code",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","D"],description:"Toggle dark mode",theme:M}),T.jsx(vt,{keys:["Ctrl","Shift","?"],description:"Show shortcuts",theme:M})]})]})]}),T.jsx("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:M.surface,borderRadius:"8px",border:`1px solid ${M.border}`},children:T.jsxs("p",{style:{margin:0,fontSize:"12px",color:M.textSecondary,textAlign:"center"},children:["Tip: Press ",T.jsx("kbd",{style:{backgroundColor:M.surface,border:`1px solid ${M.border}`,borderRadius:"3px",padding:"2px 6px",fontSize:"11px",fontFamily:"monospace"},children:"Ctrl+Shift+?"})," anytime to see this help!"]})})]})})]})}const vt=({keys:O,description:W,theme:x})=>T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0"},children:[T.jsx("span",{style:{color:x.text,fontSize:"14px"},children:W}),T.jsx("div",{style:{display:"flex",gap:"4px"},children:O.map((ee,J)=>T.jsxs(Jt.Fragment,{children:[T.jsx("kbd",{style:{backgroundColor:x.surface,border:`1px solid ${x.border}`,borderRadius:"4px",padding:"2px 6px",fontSize:"11px",fontFamily:"monospace",color:x.text,fontWeight:"500"},children:ee}),J<O.length-1&&T.jsx("span",{style:{color:x.textSecondary,fontSize:"12px"},children:"+"})]},J))})]});function Yf(){return T.jsx(Vf,{children:T.jsx(Qf,{})})}kd.createRoot(document.getElementById("root")).render(T.jsx(Yf,{}));export{ep as $,Ld as _,xd as a,Ql as b,Zf as c,gd as g,T as j,fe as r,Jt as v};
